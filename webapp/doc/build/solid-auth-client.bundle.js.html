<!DOCTYPE html>
<html>
<head>
  <title>solid-auth-client.bundle.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../";
    var thisFile = "build\\solid-auth-client.bundle.js";
    var defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#sourcemappingurlindex.js.map">sourceMappingURL=index.js.map</a>
      </div>

      <div class="heading h1">
        <a href="#sourcemappingurlformat.js.map">sourceMappingURL=format.js.map</a>
      </div>

      <div class="heading h1">
        <a href="#sourcemappingurlutil.js.map">sourceMappingURL=util.js.map</a>
      </div>

      <div class="heading h1">
        <a href="#sourcemappingurlparse.js.map">sourceMappingURL=parse.js.map</a>
      </div>

      <div class="heading h1">
        <a href="#helper-functions">HELPER FUNCTIONS</a>
      </div>

      <div class="heading h1">
        <a href="#sourcemappingurlsolid-auth-client.bundle.js.map">sourceMappingURL=solid-auth-client.bundle.js.map</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>solid-auth-client.bundle.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">webpackUniversalModuleDefinition</span>(<span class="hljs-params">root, factory</span>) </span>{
	<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> exports === <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span> === <span class="hljs-string">'object'</span>)
		<span class="hljs-built_in">module</span>.exports = factory(<span class="hljs-built_in">require</span>(<span class="hljs-string">"fetch"</span>), <span class="hljs-built_in">require</span>(<span class="hljs-string">"window"</span>));
	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd)
		define([<span class="hljs-string">"fetch"</span>, <span class="hljs-string">"window"</span>], factory);
	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> exports === <span class="hljs-string">'object'</span>)
		exports[<span class="hljs-string">"auth"</span>] = factory(<span class="hljs-built_in">require</span>(<span class="hljs-string">"fetch"</span>), <span class="hljs-built_in">require</span>(<span class="hljs-string">"window"</span>));
	<span class="hljs-keyword">else</span>
		root[<span class="hljs-string">"solid"</span>] = root[<span class="hljs-string">"solid"</span>] || {}, root[<span class="hljs-string">"solid"</span>][<span class="hljs-string">"auth"</span>] = factory(root[<span class="hljs-string">"fetch"</span>], root[<span class="hljs-string">"window"</span>]);
})(<span class="hljs-built_in">window</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">__WEBPACK_EXTERNAL_MODULE__5__, __WEBPACK_EXTERNAL_MODULE__27__</span>) </span>{
<span class="hljs-keyword">return</span> <span class="hljs-comment">/******/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modules</span>) </span>{ <span class="hljs-comment">// webpackBootstrap</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// The module cache</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-keyword">var</span> installedModules = {};
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// The require function</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__webpack_require__</span>(<span class="hljs-params">moduleId</span>) </span>{
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-comment">// Check if module is in cache</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">if</span>(installedModules[moduleId]) {
<span class="hljs-comment">/******/</span> 			<span class="hljs-keyword">return</span> installedModules[moduleId].exports;
<span class="hljs-comment">/******/</span> 		}
<span class="hljs-comment">/******/</span> 		<span class="hljs-comment">// Create a new module (and put it into the cache)</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">var</span> <span class="hljs-built_in">module</span> = installedModules[moduleId] = {
<span class="hljs-comment">/******/</span> 			i: moduleId,
<span class="hljs-comment">/******/</span> 			l: <span class="hljs-literal">false</span>,
<span class="hljs-comment">/******/</span> 			exports: {}
<span class="hljs-comment">/******/</span> 		};
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-comment">// Execute the module function</span>
<span class="hljs-comment">/******/</span> 		modules[moduleId].call(<span class="hljs-built_in">module</span>.exports, <span class="hljs-built_in">module</span>, <span class="hljs-built_in">module</span>.exports, __webpack_require__);
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-comment">// Flag the module as loaded</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-built_in">module</span>.l = <span class="hljs-literal">true</span>;
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-comment">// Return the exports of the module</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">return</span> <span class="hljs-built_in">module</span>.exports;
<span class="hljs-comment">/******/</span> 	}
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// expose the modules object (__webpack_modules__)</span>
<span class="hljs-comment">/******/</span> 	__webpack_require__.m = modules;
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// expose the module cache</span>
<span class="hljs-comment">/******/</span> 	__webpack_require__.c = installedModules;
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// define getter function for harmony exports</span>
<span class="hljs-comment">/******/</span> 	__webpack_require__.d = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">exports, name, getter</span>) </span>{
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">if</span>(!__webpack_require__.o(exports, name)) {
<span class="hljs-comment">/******/</span> 			<span class="hljs-built_in">Object</span>.defineProperty(exports, name, { <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">get</span>: getter });
<span class="hljs-comment">/******/</span> 		}
<span class="hljs-comment">/******/</span> 	};
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// define __esModule on exports</span>
<span class="hljs-comment">/******/</span> 	__webpack_require__.r = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">exports</span>) </span>{
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Symbol</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">Symbol</span>.toStringTag) {
<span class="hljs-comment">/******/</span> 			<span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-built_in">Symbol</span>.toStringTag, { <span class="hljs-attr">value</span>: <span class="hljs-string">'Module'</span> });
<span class="hljs-comment">/******/</span> 		}
<span class="hljs-comment">/******/</span> 		<span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">'__esModule'</span>, { <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span> });
<span class="hljs-comment">/******/</span> 	};
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// create a fake namespace object</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// mode &amp; 1: value is a module id, require it</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// mode &amp; 2: merge all properties of value into the ns</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// mode &amp; 4: return value when already ns object</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// mode &amp; 8|1: behave like require</span>
<span class="hljs-comment">/******/</span> 	__webpack_require__.t = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, mode</span>) </span>{
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">if</span>(mode &amp; <span class="hljs-number">1</span>) value = __webpack_require__(value);
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">if</span>(mode &amp; <span class="hljs-number">8</span>) <span class="hljs-keyword">return</span> value;
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">if</span>((mode &amp; <span class="hljs-number">4</span>) &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span> &amp;&amp; value &amp;&amp; value.__esModule) <span class="hljs-keyword">return</span> value;
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">var</span> ns = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
<span class="hljs-comment">/******/</span> 		__webpack_require__.r(ns);
<span class="hljs-comment">/******/</span> 		<span class="hljs-built_in">Object</span>.defineProperty(ns, <span class="hljs-string">'default'</span>, { <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">value</span>: value });
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">if</span>(mode &amp; <span class="hljs-number">2</span> &amp;&amp; <span class="hljs-keyword">typeof</span> value != <span class="hljs-string">'string'</span>) <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> value) __webpack_require__.d(ns, key, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{ <span class="hljs-keyword">return</span> value[key]; }.bind(<span class="hljs-literal">null</span>, key));
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">return</span> ns;
<span class="hljs-comment">/******/</span> 	};
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// getDefaultExport function for compatibility with non-harmony modules</span>
<span class="hljs-comment">/******/</span> 	__webpack_require__.n = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module</span>) </span>{
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">var</span> getter = <span class="hljs-built_in">module</span> &amp;&amp; <span class="hljs-built_in">module</span>.__esModule ?
<span class="hljs-comment">/******/</span> 			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDefault</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">module</span>[<span class="hljs-string">'default'</span>]; } :
<span class="hljs-comment">/******/</span> 			<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getModuleExports</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">module</span>; };
<span class="hljs-comment">/******/</span> 		__webpack_require__.d(getter, <span class="hljs-string">'a'</span>, getter);
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">return</span> getter;
<span class="hljs-comment">/******/</span> 	};
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// Object.prototype.hasOwnProperty.call</span>
<span class="hljs-comment">/******/</span> 	__webpack_require__.o = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">object, property</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(object, property); };
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// __webpack_public_path__</span>
<span class="hljs-comment">/******/</span> 	__webpack_require__.p = <span class="hljs-string">""</span>;
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// Load entry module and return exports</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-keyword">return</span> __webpack_require__(__webpack_require__.s = <span class="hljs-number">0</span>);
<span class="hljs-comment">/******/</span> })
<span class="hljs-comment">/************************************************************************/</span>
<span class="hljs-comment">/******/</span> ([
<span class="hljs-comment">/* 0 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, __webpack_exports__, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
__webpack_require__.r(__webpack_exports__);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _solid_auth_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(<span class="hljs-number">1</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>Export a singleton instance of SolidAuthClient</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">const</span> auth = <span class="hljs-keyword">new</span> _solid_auth_client__WEBPACK_IMPORTED_MODULE_0__[<span class="hljs-string">"default"</span>]();
<span class="hljs-comment">/* harmony default export */</span> __webpack_exports__[<span class="hljs-string">"default"</span>] = (auth); <span class="hljs-comment">// Bind methods to instance, so they can be invoked as regular functions</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>(e.g., to pass around the fetch function)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-built_in">Object</span>.getOwnPropertyNames(_solid_auth_client__WEBPACK_IMPORTED_MODULE_0__[<span class="hljs-string">"default"</span>].prototype).forEach(<span class="hljs-function"><span class="hljs-params">property</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> value = auth[property];

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'function'</span>) {
    auth[property] = value.bind(auth);
  }
}); <span class="hljs-comment">// Expose window.SolidAuthClient for backward compatibility</span>

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span> !== <span class="hljs-string">'undefined'</span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-string">'SolidAuthClient'</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">window</span>) {
    <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'Caution: multiple versions of solid-auth-client active.'</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">let</span> warned = <span class="hljs-literal">false</span>;
    <span class="hljs-built_in">Object</span>.defineProperty(<span class="hljs-built_in">window</span>, <span class="hljs-string">'SolidAuthClient'</span>, {
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (!warned) {
          warned = <span class="hljs-literal">true</span>;
          <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'window.SolidAuthClient has been deprecated.'</span>);
          <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'Please use window.solid.auth instead.'</span>);
        }

        <span class="hljs-keyword">return</span> auth;
      }
    });
  }
}

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 1 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, __webpack_exports__, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
__webpack_require__.r(__webpack_exports__);
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"default"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> SolidAuthClient; });
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(<span class="hljs-number">2</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = <span class="hljs-comment">/*#__PURE__*/</span>__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(<span class="hljs-number">3</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> events__WEBPACK_IMPORTED_MODULE_1___default = <span class="hljs-comment">/*#__PURE__*/</span>__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _authn_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(<span class="hljs-number">4</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _popup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(<span class="hljs-number">65</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _session__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(<span class="hljs-number">8</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(<span class="hljs-number">9</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _url_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(<span class="hljs-number">6</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _webid_oidc__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(<span class="hljs-number">11</span>);


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ownKeys</span>(<span class="hljs-params">object, enumerableOnly</span>) </span>{ <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(object); <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.getOwnPropertySymbols) { <span class="hljs-keyword">var</span> symbols = <span class="hljs-built_in">Object</span>.getOwnPropertySymbols(object); <span class="hljs-keyword">if</span> (enumerableOnly) symbols = symbols.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">sym</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } <span class="hljs-keyword">return</span> keys; }

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_objectSpread</span>(<span class="hljs-params">target</span>) </span>{ <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++) { <span class="hljs-keyword">var</span> source = <span class="hljs-built_in">arguments</span>[i] != <span class="hljs-literal">null</span> ? <span class="hljs-built_in">arguments</span>[i] : {}; <span class="hljs-keyword">if</span> (i % <span class="hljs-number">2</span>) { ownKeys(<span class="hljs-built_in">Object</span>(source), <span class="hljs-literal">true</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{ _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.getOwnPropertyDescriptors) { <span class="hljs-built_in">Object</span>.defineProperties(target, <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptors(source)); } <span class="hljs-keyword">else</span> { ownKeys(<span class="hljs-built_in">Object</span>(source)).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{ <span class="hljs-built_in">Object</span>.defineProperty(target, key, <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(source, key)); }); } } <span class="hljs-keyword">return</span> target; }

<span class="hljs-comment">/* global fetch */</span>






</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>Store the global fetch, so the user is free to override it</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">const</span> globalFetch = fetch;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SolidAuthClient</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">events__WEBPACK_IMPORTED_MODULE_1___default</span>.<span class="hljs-title">a</span> </span>{
  <span class="hljs-keyword">constructor</span>(...args) {
    <span class="hljs-keyword">super</span>(...args);

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(<span class="hljs-keyword">this</span>, <span class="hljs-string">"_pendingSession"</span>, <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>);
  }

  fetch(input, options) {
    <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'request'</span>, <span class="hljs-built_in">Object</span>(_url_util__WEBPACK_IMPORTED_MODULE_6__[<span class="hljs-string">"toUrlString"</span>])(input));
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>(_authn_fetch__WEBPACK_IMPORTED_MODULE_2__[<span class="hljs-string">"authnFetch"</span>])(<span class="hljs-built_in">Object</span>(_storage__WEBPACK_IMPORTED_MODULE_5__[<span class="hljs-string">"defaultStorage"</span>])(), globalFetch, input, options);
  }

  login(idp, options) {
    options = _objectSpread(_objectSpread({}, defaultLoginOptions(<span class="hljs-built_in">Object</span>(_url_util__WEBPACK_IMPORTED_MODULE_6__[<span class="hljs-string">"currentUrlNoParams"</span>])())), options);
    <span class="hljs-keyword">return</span> _webid_oidc__WEBPACK_IMPORTED_MODULE_7__[<span class="hljs-string">"login"</span>](idp, options);
  }

  <span class="hljs-keyword">async</span> popupLogin(options) {
    options = _objectSpread(_objectSpread({}, defaultLoginOptions()), options);

    <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/https?:/</span>.test(options.popupUri)) {
      options.popupUri = <span class="hljs-keyword">new</span> URL(options.popupUri || <span class="hljs-string">'/.well-known/solid/login'</span>, <span class="hljs-built_in">window</span>.location).toString();
    }

    <span class="hljs-keyword">if</span> (!options.callbackUri) {
      options.callbackUri = options.popupUri;
    }

    <span class="hljs-keyword">const</span> popup = <span class="hljs-built_in">Object</span>(_popup__WEBPACK_IMPORTED_MODULE_3__[<span class="hljs-string">"openIdpPopup"</span>])(options.popupUri);
    <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_popup__WEBPACK_IMPORTED_MODULE_3__[<span class="hljs-string">"obtainSession"</span>])(options.storage, popup, options);
    <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'login'</span>, session);
    <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'session'</span>, session);
    <span class="hljs-keyword">return</span> session;
  }

  <span class="hljs-keyword">async</span> currentSession(storage = <span class="hljs-built_in">Object</span>(_storage__WEBPACK_IMPORTED_MODULE_5__[<span class="hljs-string">"defaultStorage"</span>])()) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>Try to obtain a stored or pending session</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">let</span> session = <span class="hljs-keyword">this</span>._pendingSession || (<span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_session__WEBPACK_IMPORTED_MODULE_4__[<span class="hljs-string">"getSession"</span>])(storage)); <span class="hljs-comment">// If none found, attempt to create a new session</span>

    <span class="hljs-keyword">if</span> (!session) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>Try to create a new OIDC session from stored tokens</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">this</span>._pendingSession = _webid_oidc__WEBPACK_IMPORTED_MODULE_7__[<span class="hljs-string">"currentSession"</span>](storage);
        session = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>._pendingSession;
      } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-built_in">console</span>.error(err);
      } <span class="hljs-comment">// Save the new session and emit session events</span>


      <span class="hljs-keyword">if</span> (session) {
        <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_session__WEBPACK_IMPORTED_MODULE_4__[<span class="hljs-string">"saveSession"</span>])(storage)(session);
        <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'login'</span>, session);
        <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'session'</span>, session);
      }

      <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._pendingSession;
    }

    <span class="hljs-keyword">return</span> session;
  }

  <span class="hljs-keyword">async</span> trackSession(callback) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<div class="dox">
<div class="summary">
<p>eslint-disable standard/no-callback-literal<br>
callback(await this.currentSession());
this.on('session', callback);
}</p>
</div>
<div class="body">
<p>stopTrackSession(callback) {
this.removeListener('session', callback);
}</p>
<p>async logout(storage = Object(<em>storage__WEBPACK_IMPORTED_MODULE_5</em>_[&quot;defaultStorage&quot;])()) {
const session = await Object(<em>session__WEBPACK_IMPORTED_MODULE_4</em>_[&quot;getSession&quot;])(storage);</p>
<p>if (session) {
try {
await <em>webid_oidc__WEBPACK_IMPORTED_MODULE_7</em>_[&quot;logout&quot;](storage, globalFetch);
this.emit('logout');
this.emit('session', null);
} catch (err) {
console.warn('Error logging out:');
console.error(err);
}</p>
<p>await Object(<em>session__WEBPACK_IMPORTED_MODULE_4</em>_[&quot;clearSession&quot;])(storage);
}
}</p>
<p>}</p>
<p>function defaultLoginOptions(url) {
return {
callbackUri: url ? url.split('#')[0] : '',
popupUri: '',
storage: Object(<em>storage__WEBPACK_IMPORTED_MODULE_5</em>_[&quot;defaultStorage&quot;])()
};
}</p>
<p>/***/ }),</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-comment">/* 2 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_defineProperty</span>(<span class="hljs-params">obj, key, value</span>) </span>{
  <span class="hljs-keyword">if</span> (key <span class="hljs-keyword">in</span> obj) {
    <span class="hljs-built_in">Object</span>.defineProperty(obj, key, {
      <span class="hljs-attr">value</span>: value,
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>
    });
  } <span class="hljs-keyword">else</span> {
    obj[key] = value;
  }

  <span class="hljs-keyword">return</span> obj;
}

<span class="hljs-built_in">module</span>.exports = _defineProperty;

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 3 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>Copyright Joyent, Inc. and other Node contributors.</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
&quot;Software&quot;), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the
following conditions:</p>
<p>The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">


<span class="hljs-keyword">var</span> R = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Reflect</span> === <span class="hljs-string">'object'</span> ? <span class="hljs-built_in">Reflect</span> : <span class="hljs-literal">null</span>
<span class="hljs-keyword">var</span> ReflectApply = R &amp;&amp; <span class="hljs-keyword">typeof</span> R.apply === <span class="hljs-string">'function'</span>
  ? R.apply
  : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ReflectApply</span>(<span class="hljs-params">target, receiver, args</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Function</span>.prototype.apply.call(target, receiver, args);
  }

<span class="hljs-keyword">var</span> ReflectOwnKeys
<span class="hljs-keyword">if</span> (R &amp;&amp; <span class="hljs-keyword">typeof</span> R.ownKeys === <span class="hljs-string">'function'</span>) {
  ReflectOwnKeys = R.ownKeys
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.getOwnPropertySymbols) {
  ReflectOwnKeys = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ReflectOwnKeys</span>(<span class="hljs-params">target</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.getOwnPropertyNames(target)
      .concat(<span class="hljs-built_in">Object</span>.getOwnPropertySymbols(target));
  };
} <span class="hljs-keyword">else</span> {
  ReflectOwnKeys = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ReflectOwnKeys</span>(<span class="hljs-params">target</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.getOwnPropertyNames(target);
  };
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ProcessEmitWarning</span>(<span class="hljs-params">warning</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">console</span> &amp;&amp; <span class="hljs-built_in">console</span>.warn) <span class="hljs-built_in">console</span>.warn(warning);
}

<span class="hljs-keyword">var</span> NumberIsNaN = <span class="hljs-built_in">Number</span>.isNaN || <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">NumberIsNaN</span>(<span class="hljs-params">value</span>) </span>{
  <span class="hljs-keyword">return</span> value !== value;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">EventEmitter</span>(<span class="hljs-params"></span>) </span>{
  EventEmitter.init.call(<span class="hljs-keyword">this</span>);
}
<span class="hljs-built_in">module</span>.exports = EventEmitter;
<span class="hljs-built_in">module</span>.exports.once = once;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>Backwards-compat with node 0.10.x</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = <span class="hljs-literal">undefined</span>;
EventEmitter.prototype._eventsCount = <span class="hljs-number">0</span>;
EventEmitter.prototype._maxListeners = <span class="hljs-literal">undefined</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>By default EventEmitters will print a warning if more than 10 listeners are
added to it. This is a useful default which helps finding memory leaks.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> defaultMaxListeners = <span class="hljs-number">10</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkListener</span>(<span class="hljs-params">listener</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> listener !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'The "listener" argument must be of type Function. Received type '</span> + <span class="hljs-keyword">typeof</span> listener);
  }
}

<span class="hljs-built_in">Object</span>.defineProperty(EventEmitter, <span class="hljs-string">'defaultMaxListeners'</span>, {
  <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> defaultMaxListeners;
  },
  <span class="hljs-attr">set</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> arg !== <span class="hljs-string">'number'</span> || arg &lt; <span class="hljs-number">0</span> || NumberIsNaN(arg)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '</span> + arg + <span class="hljs-string">'.'</span>);
    }
    defaultMaxListeners = arg;
  }
});

EventEmitter.init = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._events === <span class="hljs-literal">undefined</span> ||
      <span class="hljs-keyword">this</span>._events === <span class="hljs-built_in">Object</span>.getPrototypeOf(<span class="hljs-keyword">this</span>)._events) {
    <span class="hljs-keyword">this</span>._events = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
    <span class="hljs-keyword">this</span>._eventsCount = <span class="hljs-number">0</span>;
  }

  <span class="hljs-keyword">this</span>._maxListeners = <span class="hljs-keyword">this</span>._maxListeners || <span class="hljs-literal">undefined</span>;
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<p>Obviously not all Emitters should be limited to 10. This function allows
that to be increased. Set to zero for unlimited.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">EventEmitter.prototype.setMaxListeners = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setMaxListeners</span>(<span class="hljs-params">n</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> n !== <span class="hljs-string">'number'</span> || n &lt; <span class="hljs-number">0</span> || NumberIsNaN(n)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'The value of "n" is out of range. It must be a non-negative number. Received '</span> + n + <span class="hljs-string">'.'</span>);
  }
  <span class="hljs-keyword">this</span>._maxListeners = n;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getMaxListeners</span>(<span class="hljs-params">that</span>) </span>{
  <span class="hljs-keyword">if</span> (that._maxListeners === <span class="hljs-literal">undefined</span>)
    <span class="hljs-keyword">return</span> EventEmitter.defaultMaxListeners;
  <span class="hljs-keyword">return</span> that._maxListeners;
}

EventEmitter.prototype.getMaxListeners = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getMaxListeners</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> _getMaxListeners(<span class="hljs-keyword">this</span>);
};

EventEmitter.prototype.emit = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">emit</span>(<span class="hljs-params">type</span>) </span>{
  <span class="hljs-keyword">var</span> args = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++) args.push(<span class="hljs-built_in">arguments</span>[i]);
  <span class="hljs-keyword">var</span> doError = (type === <span class="hljs-string">'error'</span>);

  <span class="hljs-keyword">var</span> events = <span class="hljs-keyword">this</span>._events;
  <span class="hljs-keyword">if</span> (events !== <span class="hljs-literal">undefined</span>)
    doError = (doError &amp;&amp; events.error === <span class="hljs-literal">undefined</span>);
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!doError)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<p>If there is no 'error' event listener then throw.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (doError) {
    <span class="hljs-keyword">var</span> er;
    <span class="hljs-keyword">if</span> (args.length &gt; <span class="hljs-number">0</span>)
      er = args[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (er <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<p>Note: The comments on the <code>throw</code> lines are intentional, they show
up in Node's output if this results in an unhandled exception.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">throw</span> er; <span class="hljs-comment">// Unhandled 'error' event</span>
    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<p>At least give some kind of context to the user</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> err = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Unhandled error.'</span> + (er ? <span class="hljs-string">' ('</span> + er.message + <span class="hljs-string">')'</span> : <span class="hljs-string">''</span>));
    err.context = er;
    <span class="hljs-keyword">throw</span> err; <span class="hljs-comment">// Unhandled 'error' event</span>
  }

  <span class="hljs-keyword">var</span> handler = events[type];

  <span class="hljs-keyword">if</span> (handler === <span class="hljs-literal">undefined</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> handler === <span class="hljs-string">'function'</span>) {
    ReflectApply(handler, <span class="hljs-keyword">this</span>, args);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> len = handler.length;
    <span class="hljs-keyword">var</span> listeners = arrayClone(handler, len);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; ++i)
      ReflectApply(listeners[i], <span class="hljs-keyword">this</span>, args);
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_addListener</span>(<span class="hljs-params">target, type, listener, prepend</span>) </span>{
  <span class="hljs-keyword">var</span> m;
  <span class="hljs-keyword">var</span> events;
  <span class="hljs-keyword">var</span> existing;

  checkListener(listener);

  events = target._events;
  <span class="hljs-keyword">if</span> (events === <span class="hljs-literal">undefined</span>) {
    events = target._events = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
    target._eventsCount = <span class="hljs-number">0</span>;
  } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>To avoid recursion in the case that type === &quot;newListener&quot;! Before
adding it to the listeners, first emit &quot;newListener&quot;.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (events.newListener !== <span class="hljs-literal">undefined</span>) {
      target.emit(<span class="hljs-string">'newListener'</span>, type,
                  listener.listener ? listener.listener : listener);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<p>Re-assign <code>events</code> because a newListener handler could have caused the
this._events to be assigned to a new object</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      events = target._events;
    }
    existing = events[type];
  }

  <span class="hljs-keyword">if</span> (existing === <span class="hljs-literal">undefined</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<p>Optimize the case of one listener. Don't need the extra array object.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    existing = events[type] = listener;
    ++target._eventsCount;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> existing === <span class="hljs-string">'function'</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>Adding the second element, need to change to array.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      existing = events[type] =
        prepend ? [listener, existing] : [existing, listener];
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<p>If we've already got an array, just append.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (prepend) {
      existing.unshift(listener);
    } <span class="hljs-keyword">else</span> {
      existing.push(listener);
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>Check for listener leak</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    m = _getMaxListeners(target);
    <span class="hljs-keyword">if</span> (m &gt; <span class="hljs-number">0</span> &amp;&amp; existing.length &gt; m &amp;&amp; !existing.warned) {
      existing.warned = <span class="hljs-literal">true</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<p>No error code for this since it is a Warning
eslint-disable-next-line no-restricted-syntax</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">var</span> w = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Possible EventEmitter memory leak detected. '</span> +
                          existing.length + <span class="hljs-string">' '</span> + <span class="hljs-built_in">String</span>(type) + <span class="hljs-string">' listeners '</span> +
                          <span class="hljs-string">'added. Use emitter.setMaxListeners() to '</span> +
                          <span class="hljs-string">'increase limit'</span>);
      w.name = <span class="hljs-string">'MaxListenersExceededWarning'</span>;
      w.emitter = target;
      w.type = type;
      w.count = existing.length;
      ProcessEmitWarning(w);
    }
  }

  <span class="hljs-keyword">return</span> target;
}

EventEmitter.prototype.addListener = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addListener</span>(<span class="hljs-params">type, listener</span>) </span>{
  <span class="hljs-keyword">return</span> _addListener(<span class="hljs-keyword">this</span>, type, listener, <span class="hljs-literal">false</span>);
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.prependListener =
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prependListener</span>(<span class="hljs-params">type, listener</span>) </span>{
      <span class="hljs-keyword">return</span> _addListener(<span class="hljs-keyword">this</span>, type, listener, <span class="hljs-literal">true</span>);
    };

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onceWrapper</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.fired) {
    <span class="hljs-keyword">this</span>.target.removeListener(<span class="hljs-keyword">this</span>.type, <span class="hljs-keyword">this</span>.wrapFn);
    <span class="hljs-keyword">this</span>.fired = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length === <span class="hljs-number">0</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.listener.call(<span class="hljs-keyword">this</span>.target);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.listener.apply(<span class="hljs-keyword">this</span>.target, <span class="hljs-built_in">arguments</span>);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_onceWrap</span>(<span class="hljs-params">target, type, listener</span>) </span>{
  <span class="hljs-keyword">var</span> state = { <span class="hljs-attr">fired</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">wrapFn</span>: <span class="hljs-literal">undefined</span>, <span class="hljs-attr">target</span>: target, <span class="hljs-attr">type</span>: type, <span class="hljs-attr">listener</span>: listener };
  <span class="hljs-keyword">var</span> wrapped = onceWrapper.bind(state);
  wrapped.listener = listener;
  state.wrapFn = wrapped;
  <span class="hljs-keyword">return</span> wrapped;
}

EventEmitter.prototype.once = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">once</span>(<span class="hljs-params">type, listener</span>) </span>{
  checkListener(listener);
  <span class="hljs-keyword">this</span>.on(type, _onceWrap(<span class="hljs-keyword">this</span>, type, listener));
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
};

EventEmitter.prototype.prependOnceListener =
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prependOnceListener</span>(<span class="hljs-params">type, listener</span>) </span>{
      checkListener(listener);
      <span class="hljs-keyword">this</span>.prependListener(type, _onceWrap(<span class="hljs-keyword">this</span>, type, listener));
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>Emits a 'removeListener' event if and only if the listener was removed.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">EventEmitter.prototype.removeListener =
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeListener</span>(<span class="hljs-params">type, listener</span>) </span>{
      <span class="hljs-keyword">var</span> list, events, position, i, originalListener;

      checkListener(listener);

      events = <span class="hljs-keyword">this</span>._events;
      <span class="hljs-keyword">if</span> (events === <span class="hljs-literal">undefined</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

      list = events[type];
      <span class="hljs-keyword">if</span> (list === <span class="hljs-literal">undefined</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

      <span class="hljs-keyword">if</span> (list === listener || list.listener === listener) {
        <span class="hljs-keyword">if</span> (--<span class="hljs-keyword">this</span>._eventsCount === <span class="hljs-number">0</span>)
          <span class="hljs-keyword">this</span>._events = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
        <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">delete</span> events[type];
          <span class="hljs-keyword">if</span> (events.removeListener)
            <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'removeListener'</span>, type, list.listener || listener);
        }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> list !== <span class="hljs-string">'function'</span>) {
        position = <span class="hljs-number">-1</span>;

        <span class="hljs-keyword">for</span> (i = list.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
          <span class="hljs-keyword">if</span> (list[i] === listener || list[i].listener === listener) {
            originalListener = list[i].listener;
            position = i;
            <span class="hljs-keyword">break</span>;
          }
        }

        <span class="hljs-keyword">if</span> (position &lt; <span class="hljs-number">0</span>)
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

        <span class="hljs-keyword">if</span> (position === <span class="hljs-number">0</span>)
          list.shift();
        <span class="hljs-keyword">else</span> {
          spliceOne(list, position);
        }

        <span class="hljs-keyword">if</span> (list.length === <span class="hljs-number">1</span>)
          events[type] = list[<span class="hljs-number">0</span>];

        <span class="hljs-keyword">if</span> (events.removeListener !== <span class="hljs-literal">undefined</span>)
          <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'removeListener'</span>, type, originalListener || listener);
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    };

EventEmitter.prototype.off = EventEmitter.prototype.removeListener;

EventEmitter.prototype.removeAllListeners =
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeAllListeners</span>(<span class="hljs-params">type</span>) </span>{
      <span class="hljs-keyword">var</span> listeners, events, i;

      events = <span class="hljs-keyword">this</span>._events;
      <span class="hljs-keyword">if</span> (events === <span class="hljs-literal">undefined</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<p>not listening for removeListener, no need to emit</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (events.removeListener === <span class="hljs-literal">undefined</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length === <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">this</span>._events = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
          <span class="hljs-keyword">this</span>._eventsCount = <span class="hljs-number">0</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (events[type] !== <span class="hljs-literal">undefined</span>) {
          <span class="hljs-keyword">if</span> (--<span class="hljs-keyword">this</span>._eventsCount === <span class="hljs-number">0</span>)
            <span class="hljs-keyword">this</span>._events = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
          <span class="hljs-keyword">else</span>
            <span class="hljs-keyword">delete</span> events[type];
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<p>emit removeListener for all listeners on all events</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(events);
        <span class="hljs-keyword">var</span> key;
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; keys.length; ++i) {
          key = keys[i];
          <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'removeListener'</span>) <span class="hljs-keyword">continue</span>;
          <span class="hljs-keyword">this</span>.removeAllListeners(key);
        }
        <span class="hljs-keyword">this</span>.removeAllListeners(<span class="hljs-string">'removeListener'</span>);
        <span class="hljs-keyword">this</span>._events = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
        <span class="hljs-keyword">this</span>._eventsCount = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }

      listeners = events[type];

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> listeners === <span class="hljs-string">'function'</span>) {
        <span class="hljs-keyword">this</span>.removeListener(type, listeners);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (listeners !== <span class="hljs-literal">undefined</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<p>LIFO order</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">for</span> (i = listeners.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
          <span class="hljs-keyword">this</span>.removeListener(type, listeners[i]);
        }
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    };

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_listeners</span>(<span class="hljs-params">target, type, unwrap</span>) </span>{
  <span class="hljs-keyword">var</span> events = target._events;

  <span class="hljs-keyword">if</span> (events === <span class="hljs-literal">undefined</span>)
    <span class="hljs-keyword">return</span> [];

  <span class="hljs-keyword">var</span> evlistener = events[type];
  <span class="hljs-keyword">if</span> (evlistener === <span class="hljs-literal">undefined</span>)
    <span class="hljs-keyword">return</span> [];

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> evlistener === <span class="hljs-string">'function'</span>)
    <span class="hljs-keyword">return</span> unwrap ? [evlistener.listener || evlistener] : [evlistener];

  <span class="hljs-keyword">return</span> unwrap ?
    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);
}

EventEmitter.prototype.listeners = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listeners</span>(<span class="hljs-params">type</span>) </span>{
  <span class="hljs-keyword">return</span> _listeners(<span class="hljs-keyword">this</span>, type, <span class="hljs-literal">true</span>);
};

EventEmitter.prototype.rawListeners = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rawListeners</span>(<span class="hljs-params">type</span>) </span>{
  <span class="hljs-keyword">return</span> _listeners(<span class="hljs-keyword">this</span>, type, <span class="hljs-literal">false</span>);
};

EventEmitter.listenerCount = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">emitter, type</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> emitter.listenerCount === <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">return</span> emitter.listenerCount(type);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> listenerCount.call(emitter, type);
  }
};

EventEmitter.prototype.listenerCount = listenerCount;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listenerCount</span>(<span class="hljs-params">type</span>) </span>{
  <span class="hljs-keyword">var</span> events = <span class="hljs-keyword">this</span>._events;

  <span class="hljs-keyword">if</span> (events !== <span class="hljs-literal">undefined</span>) {
    <span class="hljs-keyword">var</span> evlistener = events[type];

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> evlistener === <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (evlistener !== <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">return</span> evlistener.length;
    }
  }

  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

EventEmitter.prototype.eventNames = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">eventNames</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._eventsCount &gt; <span class="hljs-number">0</span> ? ReflectOwnKeys(<span class="hljs-keyword">this</span>._events) : [];
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">arrayClone</span>(<span class="hljs-params">arr, n</span>) </span>{
  <span class="hljs-keyword">var</span> copy = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(n);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)
    copy[i] = arr[i];
  <span class="hljs-keyword">return</span> copy;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">spliceOne</span>(<span class="hljs-params">list, index</span>) </span>{
  <span class="hljs-keyword">for</span> (; index + <span class="hljs-number">1</span> &lt; list.length; index++)
    list[index] = list[index + <span class="hljs-number">1</span>];
  list.pop();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unwrapListeners</span>(<span class="hljs-params">arr</span>) </span>{
  <span class="hljs-keyword">var</span> ret = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(arr.length);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; ret.length; ++i) {
    ret[i] = arr[i].listener || arr[i];
  }
  <span class="hljs-keyword">return</span> ret;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">once</span>(<span class="hljs-params">emitter, name</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>{
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">eventListener</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (errorListener !== <span class="hljs-literal">undefined</span>) {
        emitter.removeListener(<span class="hljs-string">'error'</span>, errorListener);
      }
      resolve([].slice.call(<span class="hljs-built_in">arguments</span>));
    };
    <span class="hljs-keyword">var</span> errorListener;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<p>Adding an error listener is not optional because
if an error is thrown on an event emitter we cannot
guarantee that the actual event we are waiting will
be fired. The result could be a silent way to create
memory or file descriptor leaks, which is something
we should avoid.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (name !== <span class="hljs-string">'error'</span>) {
      errorListener = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">errorListener</span>(<span class="hljs-params">err</span>) </span>{
        emitter.removeListener(name, eventListener);
        reject(err);
      };

      emitter.once(<span class="hljs-string">'error'</span>, errorListener);
    }

    emitter.once(name, eventListener);
  });
}


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 4 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, __webpack_exports__, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
__webpack_require__.r(__webpack_exports__);
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"authnFetch"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> authnFetch; });
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(<span class="hljs-number">2</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = <span class="hljs-comment">/*#__PURE__*/</span>__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(<span class="hljs-number">5</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1___default = <span class="hljs-comment">/*#__PURE__*/</span>__webpack_require__.n(isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1__);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _url_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(<span class="hljs-number">6</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _host__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(<span class="hljs-number">7</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _session__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(<span class="hljs-number">8</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _webid_oidc__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(<span class="hljs-number">11</span>);


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ownKeys</span>(<span class="hljs-params">object, enumerableOnly</span>) </span>{ <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(object); <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.getOwnPropertySymbols) { <span class="hljs-keyword">var</span> symbols = <span class="hljs-built_in">Object</span>.getOwnPropertySymbols(object); <span class="hljs-keyword">if</span> (enumerableOnly) symbols = symbols.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">sym</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } <span class="hljs-keyword">return</span> keys; }

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_objectSpread</span>(<span class="hljs-params">target</span>) </span>{ <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++) { <span class="hljs-keyword">var</span> source = <span class="hljs-built_in">arguments</span>[i] != <span class="hljs-literal">null</span> ? <span class="hljs-built_in">arguments</span>[i] : {}; <span class="hljs-keyword">if</span> (i % <span class="hljs-number">2</span>) { ownKeys(<span class="hljs-built_in">Object</span>(source), <span class="hljs-literal">true</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{ _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.getOwnPropertyDescriptors) { <span class="hljs-built_in">Object</span>.defineProperties(target, <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptors(source)); } <span class="hljs-keyword">else</span> { ownKeys(<span class="hljs-built_in">Object</span>(source)).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{ <span class="hljs-built_in">Object</span>.defineProperty(target, key, <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(source, key)); }); } } <span class="hljs-keyword">return</span> target; }






<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">authnFetch</span>(<span class="hljs-params">storage, fetch, input, options</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<p>Copy headers into a modifiable object</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (options) {
    <span class="hljs-keyword">const</span> headers = copyHeaders(options.headers);
    options = _objectSpread(_objectSpread({}, options), {}, {
      headers
    });
  } <span class="hljs-comment">// If not authenticated, perform a regular fetch</span>


  <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_session__WEBPACK_IMPORTED_MODULE_4__[<span class="hljs-string">"getSession"</span>])(storage);

  <span class="hljs-keyword">if</span> (!session) {
    <span class="hljs-keyword">return</span> fetch(input, options);
  } <span class="hljs-comment">// If we know the server expects credentials, send them</span>


  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> shouldShareCredentials(storage, input)) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>(_webid_oidc__WEBPACK_IMPORTED_MODULE_5__[<span class="hljs-string">"fetchWithCredentials"</span>])(session, fetch, input, options);
  } <span class="hljs-comment">// If we don't know for sure, try a regular fetch first</span>


  <span class="hljs-keyword">let</span> resp = <span class="hljs-keyword">await</span> fetch(input, options); <span class="hljs-comment">// If the server then requests credentials, send them</span>

  <span class="hljs-keyword">if</span> (resp.status === <span class="hljs-number">401</span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_host__WEBPACK_IMPORTED_MODULE_3__[<span class="hljs-string">"updateHostFromResponse"</span>])(storage)(resp);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">await</span> shouldShareCredentials(storage, input)) {
      resp = <span class="hljs-built_in">Object</span>(_webid_oidc__WEBPACK_IMPORTED_MODULE_5__[<span class="hljs-string">"fetchWithCredentials"</span>])(session, fetch, input, options);
    }
  }

  <span class="hljs-keyword">return</span> resp;
}

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shouldShareCredentials</span>(<span class="hljs-params">storage, input</span>) </span>{
  <span class="hljs-keyword">const</span> requestHost = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_host__WEBPACK_IMPORTED_MODULE_3__[<span class="hljs-string">"getHost"</span>])(storage)(<span class="hljs-built_in">Object</span>(_url_util__WEBPACK_IMPORTED_MODULE_2__[<span class="hljs-string">"toUrlString"</span>])(input));
  <span class="hljs-keyword">return</span> requestHost != <span class="hljs-literal">null</span> &amp;&amp; requestHost.requiresAuth;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">copyHeaders</span>(<span class="hljs-params">origHeaders</span>) </span>{
  <span class="hljs-keyword">const</span> headers = {};

  <span class="hljs-keyword">if</span> (origHeaders) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> origHeaders.forEach === <span class="hljs-string">'function'</span>) {
      origHeaders.forEach(<span class="hljs-function">(<span class="hljs-params">value, key</span>) =&gt;</span> {
        headers[key] = value;
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> origHeaders) {
        headers[key] = origHeaders[key];
      }
    }
  }

  <span class="hljs-keyword">return</span> headers;
}

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 5 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

<span class="hljs-built_in">module</span>.exports = __WEBPACK_EXTERNAL_MODULE__5__;

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 6 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, __webpack_exports__, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
__webpack_require__.r(__webpack_exports__);
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"currentUrl"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> currentUrl; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"currentUrlNoParams"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> currentUrlNoParams; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"navigateTo"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> navigateTo; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"originOf"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> originOf; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"toUrlString"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> toUrlString; });
<span class="hljs-comment">/* eslint-env browser */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLocation</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-built_in">window</span>.location : {
    <span class="hljs-attr">href</span>: <span class="hljs-string">'https://example.org/'</span>,
    <span class="hljs-attr">pathname</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">origin</span>: <span class="hljs-string">'example.org'</span>
  };
}

<span class="hljs-keyword">const</span> currentUrl = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> getLocation().href;
<span class="hljs-keyword">const</span> currentUrlNoParams = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> getLocation().origin + getLocation().pathname;
<span class="hljs-keyword">const</span> navigateTo = <span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> {
  getLocation().href = url;
};
<span class="hljs-keyword">const</span> originOf = <span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> <span class="hljs-keyword">new</span> URL(url).origin;
<span class="hljs-keyword">const</span> toUrlString = <span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> url !== <span class="hljs-string">'string'</span>) {
    url = <span class="hljs-string">'url'</span> <span class="hljs-keyword">in</span> url ? url.url : url.toString();
  }

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> URL(url, currentUrl()).toString();
};

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 7 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, __webpack_exports__, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
__webpack_require__.r(__webpack_exports__);
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"getHost"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> getHost; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"saveHost"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> saveHost; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"updateHostFromResponse"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> updateHostFromResponse; });
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(<span class="hljs-number">2</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = <span class="hljs-comment">/*#__PURE__*/</span>__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _session__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(<span class="hljs-number">8</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(<span class="hljs-number">9</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _webid_oidc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(<span class="hljs-number">11</span>);


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ownKeys</span>(<span class="hljs-params">object, enumerableOnly</span>) </span>{ <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(object); <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.getOwnPropertySymbols) { <span class="hljs-keyword">var</span> symbols = <span class="hljs-built_in">Object</span>.getOwnPropertySymbols(object); <span class="hljs-keyword">if</span> (enumerableOnly) symbols = symbols.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">sym</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } <span class="hljs-keyword">return</span> keys; }

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_objectSpread</span>(<span class="hljs-params">target</span>) </span>{ <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++) { <span class="hljs-keyword">var</span> source = <span class="hljs-built_in">arguments</span>[i] != <span class="hljs-literal">null</span> ? <span class="hljs-built_in">arguments</span>[i] : {}; <span class="hljs-keyword">if</span> (i % <span class="hljs-number">2</span>) { ownKeys(<span class="hljs-built_in">Object</span>(source), <span class="hljs-literal">true</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{ _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.getOwnPropertyDescriptors) { <span class="hljs-built_in">Object</span>.defineProperties(target, <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptors(source)); } <span class="hljs-keyword">else</span> { ownKeys(<span class="hljs-built_in">Object</span>(source)).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{ <span class="hljs-built_in">Object</span>.defineProperty(target, key, <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(source, key)); }); } } <span class="hljs-keyword">return</span> target; }

<span class="hljs-comment">/* globalRequest, Response, URL */</span>



<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getHost</span>(<span class="hljs-params">storage</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> url =&gt; {
    <span class="hljs-keyword">const</span> {
      host
    } = <span class="hljs-keyword">new</span> URL(url);
    <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_session__WEBPACK_IMPORTED_MODULE_1__[<span class="hljs-string">"getSession"</span>])(storage);

    <span class="hljs-keyword">if</span> (session &amp;&amp; host === <span class="hljs-keyword">new</span> URL(session.idp).host) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">url</span>: host,
        <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span>
      };
    }

    <span class="hljs-keyword">const</span> {
      hosts
    } = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_storage__WEBPACK_IMPORTED_MODULE_2__[<span class="hljs-string">"getData"</span>])(storage);
    <span class="hljs-keyword">return</span> hosts &amp;&amp; hosts[host];
  };
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">saveHost</span>(<span class="hljs-params">storage</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> ({
    url,
    requiresAuth
  }) =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_storage__WEBPACK_IMPORTED_MODULE_2__[<span class="hljs-string">"updateStorage"</span>])(storage, data =&gt; _objectSpread(_objectSpread({}, data), {}, {
      <span class="hljs-attr">hosts</span>: _objectSpread(_objectSpread({}, data.hosts), {}, {
        [url]: {
          requiresAuth
        }
      })
    }));
  };
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateHostFromResponse</span>(<span class="hljs-params">storage</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> resp =&gt; {
    <span class="hljs-keyword">if</span> (_webid_oidc__WEBPACK_IMPORTED_MODULE_3__[<span class="hljs-string">"requiresAuth"</span>](resp)) {
      <span class="hljs-keyword">const</span> {
        host
      } = <span class="hljs-keyword">new</span> URL(resp.url);
      <span class="hljs-keyword">await</span> saveHost(storage)({
        <span class="hljs-attr">url</span>: host,
        <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span>
      });
    }
  };
}

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 8 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, __webpack_exports__, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
__webpack_require__.r(__webpack_exports__);
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"getSession"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> getSession; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"saveSession"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> saveSession; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"clearSession"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> clearSession; });
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(<span class="hljs-number">2</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = <span class="hljs-comment">/*#__PURE__*/</span>__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(<span class="hljs-number">9</span>);


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ownKeys</span>(<span class="hljs-params">object, enumerableOnly</span>) </span>{ <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(object); <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.getOwnPropertySymbols) { <span class="hljs-keyword">var</span> symbols = <span class="hljs-built_in">Object</span>.getOwnPropertySymbols(object); <span class="hljs-keyword">if</span> (enumerableOnly) symbols = symbols.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">sym</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } <span class="hljs-keyword">return</span> keys; }

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_objectSpread</span>(<span class="hljs-params">target</span>) </span>{ <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++) { <span class="hljs-keyword">var</span> source = <span class="hljs-built_in">arguments</span>[i] != <span class="hljs-literal">null</span> ? <span class="hljs-built_in">arguments</span>[i] : {}; <span class="hljs-keyword">if</span> (i % <span class="hljs-number">2</span>) { ownKeys(<span class="hljs-built_in">Object</span>(source), <span class="hljs-literal">true</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{ _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }); } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.getOwnPropertyDescriptors) { <span class="hljs-built_in">Object</span>.defineProperties(target, <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptors(source)); } <span class="hljs-keyword">else</span> { ownKeys(<span class="hljs-built_in">Object</span>(source)).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{ <span class="hljs-built_in">Object</span>.defineProperty(target, key, <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(source, key)); }); } } <span class="hljs-keyword">return</span> target; }


<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getSession</span>(<span class="hljs-params">storage</span>) </span>{
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_storage__WEBPACK_IMPORTED_MODULE_1__[<span class="hljs-string">"getData"</span>])(storage);
  <span class="hljs-keyword">return</span> data.session || <span class="hljs-literal">null</span>;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">saveSession</span>(<span class="hljs-params">storage</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> session =&gt; {
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_storage__WEBPACK_IMPORTED_MODULE_1__[<span class="hljs-string">"updateStorage"</span>])(storage, data =&gt; _objectSpread(_objectSpread({}, data), {}, {
      session
    }));
    <span class="hljs-keyword">return</span> data.session;
  };
}
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clearSession</span>(<span class="hljs-params">storage</span>) </span>{
  <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_storage__WEBPACK_IMPORTED_MODULE_1__[<span class="hljs-string">"updateStorage"</span>])(storage, data =&gt; _objectSpread(_objectSpread({}, data), {}, {
    <span class="hljs-attr">session</span>: <span class="hljs-literal">null</span>
  }));
}

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 9 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, __webpack_exports__, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
__webpack_require__.r(__webpack_exports__);
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"NAMESPACE"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> NAMESPACE; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"defaultStorage"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> defaultStorage; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"getData"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> getData; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"updateStorage"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> updateStorage; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"asyncStorage"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> asyncStorage; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"memStorage"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> memStorage; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"ipcStorage"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> ipcStorage; });
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _ipc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(<span class="hljs-number">10</span>);

<span class="hljs-keyword">const</span> NAMESPACE = <span class="hljs-string">'solid-auth-client'</span>;
<span class="hljs-keyword">const</span> defaultStorage = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> hasLocalStorage = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-string">'localStorage'</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">window</span>;
  <span class="hljs-keyword">return</span> asyncStorage(hasLocalStorage ? <span class="hljs-built_in">window</span>.localStorage : memStorage());
};
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<div class="dox">
<div class="summary">
<p>Gets the deserialized stored data</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getData</span>(<span class="hljs-params">store</span>) </span>{
  <span class="hljs-keyword">let</span> serialized;
  <span class="hljs-keyword">let</span> data;

  <span class="hljs-keyword">try</span> {
    serialized = <span class="hljs-keyword">await</span> store.getItem(NAMESPACE);
    data = <span class="hljs-built_in">JSON</span>.parse(serialized || <span class="hljs-string">'{}'</span>);
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'Could not deserialize data:'</span>, serialized);
    <span class="hljs-built_in">console</span>.error(e);
    data = {};
  }

  <span class="hljs-keyword">return</span> data;
}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<div class="dox">
<div class="summary">
<p>Updates a Storage object without mutating its intermediate representation.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateStorage</span>(<span class="hljs-params">store, update</span>) </span>{
  <span class="hljs-keyword">const</span> currentData = <span class="hljs-keyword">await</span> getData(store);
  <span class="hljs-keyword">const</span> newData = update(currentData);
  <span class="hljs-keyword">await</span> store.setItem(NAMESPACE, <span class="hljs-built_in">JSON</span>.stringify(newData));
  <span class="hljs-keyword">return</span> newData;
}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<div class="dox">
<div class="summary">
<p>Takes a synchronous storage interface and wraps it with an async interface.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">asyncStorage</span>(<span class="hljs-params">storage</span>) </span>{
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">getItem</span>: <span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(storage.getItem(key));
    },
    <span class="hljs-attr">setItem</span>: <span class="hljs-function">(<span class="hljs-params">key, val</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(storage.setItem(key, val));
    },
    <span class="hljs-attr">removeItem</span>: <span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(storage.removeItem(key));
    }
  };
}
<span class="hljs-keyword">const</span> memStorage = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> store = {};
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">getItem</span>: <span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> store[key] === <span class="hljs-string">'undefined'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">return</span> store[key];
    },
    <span class="hljs-attr">setItem</span>: <span class="hljs-function">(<span class="hljs-params">key, val</span>) =&gt;</span> {
      store[key] = val;
    },
    <span class="hljs-attr">removeItem</span>: <span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
      <span class="hljs-keyword">delete</span> store[key];
    }
  };
};
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ipcStorage</span>(<span class="hljs-params">client</span>) </span>{
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">getItem</span>: <span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> client.request(<span class="hljs-string">'storage/getItem'</span>, key),
    <span class="hljs-attr">setItem</span>: <span class="hljs-function">(<span class="hljs-params">key, val</span>) =&gt;</span> client.request(<span class="hljs-string">'storage/setItem'</span>, key, val),
    <span class="hljs-attr">removeItem</span>: <span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> client.request(<span class="hljs-string">'storage/removeItem'</span>, key)
  };
}

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 10 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, __webpack_exports__, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
__webpack_require__.r(__webpack_exports__);
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"Server"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> Server; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"Client"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> Client; });
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(<span class="hljs-number">2</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = <span class="hljs-comment">/*#__PURE__*/</span>__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<div class="dox">
<div class="summary">
<p>This module describes a simple IPC interface for communicating between browser windows.
window.postMessage() is the transport interface, and a request/response interface
is defined on top of it as follows:</p>
</div>
<div class="body">
<p>const request = {
'solid-auth-client': {
id: 1234,
method: 'doSomethingPlease',
args: [ 'one', 'two', 'three' ]
}
}</p>
<p>const response = {
'solid-auth-client': {
id: 1234,
ret: 'the_value'
}
}</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> NAMESPACE = <span class="hljs-string">'solid-auth-client'</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<div class="dox">
<div class="summary">
<p>Receives and handles remote procedure calls.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Server</span> </span>{
  <span class="hljs-keyword">constructor</span>(clientWindow, clientOrigin, handle) {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(<span class="hljs-keyword">this</span>, <span class="hljs-string">"_clientWindow"</span>, <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>);

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(<span class="hljs-keyword">this</span>, <span class="hljs-string">"_clientOrigin"</span>, <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>);

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(<span class="hljs-keyword">this</span>, <span class="hljs-string">"_handler"</span>, <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>);

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(<span class="hljs-keyword">this</span>, <span class="hljs-string">"_messageListener"</span>, <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>);

    <span class="hljs-keyword">this</span>._clientWindow = clientWindow;
    <span class="hljs-keyword">this</span>._clientOrigin = clientOrigin;
    <span class="hljs-keyword">this</span>._handler = handle;

    <span class="hljs-keyword">this</span>._messageListener = <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> <span class="hljs-keyword">this</span>._handleMessage(event);
  }

  <span class="hljs-keyword">async</span> _handleMessage({
    data,
    origin
  }) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<p>Ensure we can post to the origin</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (origin !== <span class="hljs-keyword">this</span>._clientOrigin) {
      <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">"solid-auth-client is listening to "</span>.concat(<span class="hljs-keyword">this</span>._clientOrigin, <span class="hljs-string">" "</span>) + <span class="hljs-string">"so ignored a message received from "</span>.concat(origin, <span class="hljs-string">"."</span>));
      <span class="hljs-keyword">return</span>;
    } <span class="hljs-comment">// Parse the request and send it to the handler</span>


    <span class="hljs-keyword">const</span> req = data &amp;&amp; data[NAMESPACE];

    <span class="hljs-keyword">if</span> (req &amp;&amp; req.method) {
      <span class="hljs-keyword">const</span> {
        id,
        method,
        args
      } = req;
      <span class="hljs-keyword">const</span> ret = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>._handler(method, ...args);

      <span class="hljs-keyword">this</span>._clientWindow.postMessage({
        [NAMESPACE]: {
          id,
          ret
        }
      }, <span class="hljs-keyword">this</span>._clientOrigin);
    }
  }

  start() {
    <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">this</span>._messageListener);
  }

  stop() {
    <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">this</span>._messageListener);
  }

}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<div class="dox">
<div class="summary">
<p>Makes remote procedure calls.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>{
  <span class="hljs-keyword">constructor</span>(serverWindow, serverOrigin) {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(<span class="hljs-keyword">this</span>, <span class="hljs-string">"_serverWindow"</span>, <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>);

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(<span class="hljs-keyword">this</span>, <span class="hljs-string">"_serverOrigin"</span>, <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>);

    <span class="hljs-keyword">this</span>._serverWindow = serverWindow;
    <span class="hljs-keyword">this</span>._serverOrigin = serverOrigin;
  }

  request(method, ...args) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<p>Send the request as a message to the server window</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">const</span> id = <span class="hljs-built_in">Math</span>.random();

    <span class="hljs-keyword">this</span>._serverWindow.postMessage({
      [NAMESPACE]: {
        id,
        method,
        args
      }
    }, <span class="hljs-keyword">this</span>._serverOrigin); <span class="hljs-comment">// Create a promise that resolves to the request's return value</span>


    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<p>Listen for responses to the request</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'message'</span>, responseListener); <span class="hljs-comment">// Cancel if the response takes too long</span>

      <span class="hljs-keyword">const</span> timeout = setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Could not connect to main window.'</span>));
        <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">'message'</span>, responseListener);
      }, <span class="hljs-number">2000</span>); <span class="hljs-comment">// Processes a possible response to the request</span>

      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">responseListener</span>(<span class="hljs-params">{
        data
      }</span>) </span>{
        <span class="hljs-keyword">const</span> resp = data &amp;&amp; data[NAMESPACE]; <span class="hljs-comment">// eslint-disable-next-line no-prototype-builtins</span>

        <span class="hljs-keyword">if</span> (resp &amp;&amp; resp.id === id &amp;&amp; resp.hasOwnProperty(<span class="hljs-string">'ret'</span>)) {
          resolve(resp.ret);
          clearTimeout(timeout);
          <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">'message'</span>, responseListener);
        }
      }
    });
  }

}

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 11 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, __webpack_exports__, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
__webpack_require__.r(__webpack_exports__);
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"login"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> login; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"currentSession"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> currentSession; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"logout"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> logout; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"getRegisteredRp"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> getRegisteredRp; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"requiresAuth"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> requiresAuth; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"fetchWithCredentials"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> fetchWithCredentials; });
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(<span class="hljs-number">12</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default = <span class="hljs-comment">/*#__PURE__*/</span>__webpack_require__.n(_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(<span class="hljs-number">2</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = <span class="hljs-comment">/*#__PURE__*/</span>__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> auth_header__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(<span class="hljs-number">14</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> auth_header__WEBPACK_IMPORTED_MODULE_2___default = <span class="hljs-comment">/*#__PURE__*/</span>__webpack_require__.n(auth_header__WEBPACK_IMPORTED_MODULE_2__);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(<span class="hljs-number">18</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default = <span class="hljs-comment">/*#__PURE__*/</span>__webpack_require__.n(_solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3__);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _solid_oidc_rp_src_PoPToken__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(<span class="hljs-number">61</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _solid_oidc_rp_src_PoPToken__WEBPACK_IMPORTED_MODULE_4___default = <span class="hljs-comment">/*#__PURE__*/</span>__webpack_require__.n(_solid_oidc_rp_src_PoPToken__WEBPACK_IMPORTED_MODULE_4__);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _url_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(<span class="hljs-number">6</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(<span class="hljs-number">9</span>);



<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ownKeys</span>(<span class="hljs-params">object, enumerableOnly</span>) </span>{ <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(object); <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.getOwnPropertySymbols) { <span class="hljs-keyword">var</span> symbols = <span class="hljs-built_in">Object</span>.getOwnPropertySymbols(object); <span class="hljs-keyword">if</span> (enumerableOnly) symbols = symbols.filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">sym</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } <span class="hljs-keyword">return</span> keys; }

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_objectSpread</span>(<span class="hljs-params">target</span>) </span>{ <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++) { <span class="hljs-keyword">var</span> source = <span class="hljs-built_in">arguments</span>[i] != <span class="hljs-literal">null</span> ? <span class="hljs-built_in">arguments</span>[i] : {}; <span class="hljs-keyword">if</span> (i % <span class="hljs-number">2</span>) { ownKeys(<span class="hljs-built_in">Object</span>(source), <span class="hljs-literal">true</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{ _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target, key, source[key]); }); } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.getOwnPropertyDescriptors) { <span class="hljs-built_in">Object</span>.defineProperties(target, <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptors(source)); } <span class="hljs-keyword">else</span> { ownKeys(<span class="hljs-built_in">Object</span>(source)).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{ <span class="hljs-built_in">Object</span>.defineProperty(target, key, <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(source, key)); }); } } <span class="hljs-keyword">return</span> target; }

<span class="hljs-comment">/* global Response */</span>





<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">login</span>(<span class="hljs-params">idp, options</span>) </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> rp = <span class="hljs-keyword">await</span> getRegisteredRp(idp, options);
    <span class="hljs-keyword">await</span> saveAppHashFragment(options.storage);
    <span class="hljs-keyword">return</span> sendAuthRequest(rp, options);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'Error logging in with WebID-OIDC'</span>);
    <span class="hljs-built_in">console</span>.error(err);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">currentSession</span>(<span class="hljs-params">storage = Object(_storage__WEBPACK_IMPORTED_MODULE_6__[<span class="hljs-string">"defaultStorage"</span>]</span>)(<span class="hljs-params"></span>)) </span>{
  <span class="hljs-keyword">try</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<p>Obtain the Relying Party</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">const</span> rp = <span class="hljs-keyword">await</span> getStoredRp(storage);

    <span class="hljs-keyword">if</span> (!rp) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    } <span class="hljs-comment">// Obtain and clear the OIDC URL fragment</span>


    <span class="hljs-keyword">const</span> url = <span class="hljs-built_in">Object</span>(_url_util__WEBPACK_IMPORTED_MODULE_5__[<span class="hljs-string">"currentUrl"</span>])();

    <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/#(.*&amp;)?access_token=/</span>.test(url)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-built_in">window</span>.location.hash = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">await</span> restoreAppHashFragment(storage); <span class="hljs-comment">// Obtain a session from the Relying Party</span>

    <span class="hljs-keyword">const</span> storeData = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_storage__WEBPACK_IMPORTED_MODULE_6__[<span class="hljs-string">"getData"</span>])(storage);
    <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> rp.validateResponse(url, storeData);

    <span class="hljs-keyword">if</span> (!session) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">return</span> _objectSpread(_objectSpread({}, session), {}, {
      <span class="hljs-attr">webId</span>: session.idClaims.sub,
      <span class="hljs-attr">idp</span>: session.issuer
    });
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'Error finding a WebID-OIDC session'</span>);
    <span class="hljs-built_in">console</span>.error(err);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logout</span>(<span class="hljs-params">storage, fetch</span>) </span>{
  <span class="hljs-keyword">const</span> rp = <span class="hljs-keyword">await</span> getStoredRp(storage);

  <span class="hljs-keyword">if</span> (rp) {
    <span class="hljs-keyword">try</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<p>First log out from the IDP</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">await</span> rp.logout(); <span class="hljs-comment">// Then, log out from the RP</span>

      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">'/.well-known/solid/logout'</span>, {
          <span class="hljs-attr">credentials</span>: <span class="hljs-string">'include'</span>
        });
      } <span class="hljs-keyword">catch</span> (e) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39"></a>
</div>
<p>Ignore errors for when we are not on a Solid pod
But tell users it is harmless because they will see the GET failure in the console</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-built_in">console</span>.info(<span class="hljs-string">"Couldn't find /.well-known/solid/logout, this is harmless."</span>);
      }
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'Error logging out of the WebID-OIDC session'</span>);
      <span class="hljs-built_in">console</span>.error(err);
    }
  }
}
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getRegisteredRp</span>(<span class="hljs-params">idp, options</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40"></a>
</div>
<p>To reuse a possible previous RP,
it be for the same IDP and redirect URI</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">let</span> rp = <span class="hljs-keyword">await</span> getStoredRp(options.storage);

  <span class="hljs-keyword">if</span> (!rp || rp.provider.url !== idp || !rp.registration.redirect_uris.includes(options.callbackUri)) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41"></a>
</div>
<p>Register a new RP</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    rp = <span class="hljs-keyword">await</span> registerRp(idp, options);
    <span class="hljs-keyword">await</span> storeRp(options.storage, idp, rp);
  }

  <span class="hljs-keyword">return</span> rp;
}

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getStoredRp</span>(<span class="hljs-params">storage</span>) </span>{
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_storage__WEBPACK_IMPORTED_MODULE_6__[<span class="hljs-string">"getData"</span>])(storage);
  <span class="hljs-keyword">const</span> {
    rpConfig
  } = data;

  <span class="hljs-keyword">if</span> (rpConfig) {
    rpConfig.store = storage;
    <span class="hljs-keyword">return</span> _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default.a.from(rpConfig);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">storeRp</span>(<span class="hljs-params">storage, idp, rp</span>) </span>{
  <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_storage__WEBPACK_IMPORTED_MODULE_6__[<span class="hljs-string">"updateStorage"</span>])(storage, data =&gt; _objectSpread(_objectSpread({}, data), {}, {
    <span class="hljs-attr">rpConfig</span>: rp
  }));
  <span class="hljs-keyword">return</span> rp;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">registerRp</span>(<span class="hljs-params">idp, opts</span>) </span>{
  <span class="hljs-keyword">const</span> {
    storage,
    callbackUri
  } = opts;
  <span class="hljs-keyword">const</span> responseType = <span class="hljs-string">'id_token token'</span>;
  <span class="hljs-keyword">const</span> clientNameI18n = {};
  <span class="hljs-built_in">Object</span>.entries(opts).filter(<span class="hljs-function">(<span class="hljs-params">[key, _]</span>) =&gt;</span> key.startsWith(<span class="hljs-string">'clientName#'</span>)).forEach(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> clientNameI18n[key.replace(<span class="hljs-string">'clientName#'</span>, <span class="hljs-string">'client_name#'</span>)] = value);
  <span class="hljs-keyword">const</span> supplementaryOptions = {
    <span class="hljs-attr">logo_uri</span>: opts.logoUri,
    <span class="hljs-attr">contacts</span>: opts.contacts,
    <span class="hljs-attr">client_name</span>: opts.clientName
  };

  <span class="hljs-keyword">const</span> registration = _objectSpread(_objectSpread({
    <span class="hljs-attr">issuer</span>: idp,
    <span class="hljs-attr">grant_types</span>: [<span class="hljs-string">'implicit'</span>],
    <span class="hljs-attr">redirect_uris</span>: [callbackUri],
    <span class="hljs-attr">response_types</span>: [responseType],
    <span class="hljs-attr">scope</span>: <span class="hljs-string">'openid profile'</span>
  }, clientNameI18n), supplementaryOptions); <span class="hljs-comment">// Note that overrides @solid/oidc-rp/RelyingParty defaults (i.e. not merged)</span>


  <span class="hljs-keyword">const</span> options = {
    <span class="hljs-attr">defaults</span>: {
      <span class="hljs-attr">authenticate</span>: {
        <span class="hljs-attr">redirect_uri</span>: callbackUri,
        <span class="hljs-attr">response_type</span>: responseType,
        <span class="hljs-attr">display</span>: <span class="hljs-string">'page'</span>,
        <span class="hljs-attr">scope</span>: [<span class="hljs-string">'openid'</span>]
      }
    },
    <span class="hljs-attr">store</span>: storage
  };
  <span class="hljs-keyword">return</span> _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default.a.register(idp, registration, options);
}

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendAuthRequest</span>(<span class="hljs-params">rp, {
  callbackUri,
  storage
}</span>) </span>{
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_storage__WEBPACK_IMPORTED_MODULE_6__[<span class="hljs-string">"getData"</span>])(storage);
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">await</span> rp.createRequest({
    <span class="hljs-attr">redirect_uri</span>: callbackUri
  }, data);
  <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_storage__WEBPACK_IMPORTED_MODULE_6__[<span class="hljs-string">"updateStorage"</span>])(storage, () =&gt; data);
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>(_url_util__WEBPACK_IMPORTED_MODULE_5__[<span class="hljs-string">"navigateTo"</span>])(url);
}

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">saveAppHashFragment</span>(<span class="hljs-params">store</span>) </span>{
  <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_storage__WEBPACK_IMPORTED_MODULE_6__[<span class="hljs-string">"updateStorage"</span>])(store, data =&gt; _objectSpread(_objectSpread({}, data), {}, {
    <span class="hljs-attr">appHashFragment</span>: <span class="hljs-built_in">window</span>.location.hash
  }));
}

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">restoreAppHashFragment</span>(<span class="hljs-params">store</span>) </span>{
  <span class="hljs-keyword">await</span> <span class="hljs-built_in">Object</span>(_storage__WEBPACK_IMPORTED_MODULE_6__[<span class="hljs-string">"updateStorage"</span>])(store, (_ref) =&gt; {
    <span class="hljs-keyword">let</span> {
      appHashFragment = <span class="hljs-string">''</span>
    } = _ref,
        data = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default()(_ref, [<span class="hljs-string">"appHashFragment"</span>]);

    <span class="hljs-built_in">window</span>.location.hash = appHashFragment;
    <span class="hljs-keyword">return</span> data;
  });
}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42"></a>
</div>
<div class="dox">
<div class="summary">
<p>Answers whether a HTTP response requires WebID-OIDC authentication.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">requiresAuth</span>(<span class="hljs-params">resp</span>) </span>{
  <span class="hljs-keyword">if</span> (resp.status !== <span class="hljs-number">401</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">const</span> wwwAuthHeader = resp.headers.get(<span class="hljs-string">'www-authenticate'</span>);

  <span class="hljs-keyword">if</span> (!wwwAuthHeader) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">const</span> auth = auth_header__WEBPACK_IMPORTED_MODULE_2__[<span class="hljs-string">"parse"</span>](wwwAuthHeader);
  <span class="hljs-keyword">return</span> auth.scheme === <span class="hljs-string">'Bearer'</span> &amp;&amp; auth.params &amp;&amp; auth.params.scope === <span class="hljs-string">'openid webid'</span>;
}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43"></a>
</div>
<div class="dox">
<div class="summary">
<p>Fetches a resource, providing the WebID-OIDC ID Token as authentication.
Assumes that the resource has requested those tokens in a previous response.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchWithCredentials</span>(<span class="hljs-params">session, fetch, input, options</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44"></a>
</div>
<p>Add Authorization header (assuming a modifiable headers object)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">const</span> headers = (options ? options.headers : input.headers) || {};
  <span class="hljs-keyword">const</span> popToken = <span class="hljs-keyword">await</span> _solid_oidc_rp_src_PoPToken__WEBPACK_IMPORTED_MODULE_4___default.a.issueFor(<span class="hljs-built_in">Object</span>(_url_util__WEBPACK_IMPORTED_MODULE_5__[<span class="hljs-string">"toUrlString"</span>])(input), session);
  headers.authorization = <span class="hljs-string">"Bearer "</span>.concat(popToken);
  <span class="hljs-keyword">return</span> fetch(input, _objectSpread(_objectSpread({}, options), {}, {
    <span class="hljs-attr">credentials</span>: <span class="hljs-string">'include'</span>,
    headers
  }));
}

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 12 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-keyword">var</span> objectWithoutPropertiesLoose = __webpack_require__(<span class="hljs-number">13</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_objectWithoutProperties</span>(<span class="hljs-params">source, excluded</span>) </span>{
  <span class="hljs-keyword">if</span> (source == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> {};
  <span class="hljs-keyword">var</span> target = objectWithoutPropertiesLoose(source, excluded);
  <span class="hljs-keyword">var</span> key, i;

  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.getOwnPropertySymbols) {
    <span class="hljs-keyword">var</span> sourceSymbolKeys = <span class="hljs-built_in">Object</span>.getOwnPropertySymbols(source);

    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; sourceSymbolKeys.length; i++) {
      key = sourceSymbolKeys[i];
      <span class="hljs-keyword">if</span> (excluded.indexOf(key) &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">continue</span>;
      <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Object</span>.prototype.propertyIsEnumerable.call(source, key)) <span class="hljs-keyword">continue</span>;
      target[key] = source[key];
    }
  }

  <span class="hljs-keyword">return</span> target;
}

<span class="hljs-built_in">module</span>.exports = _objectWithoutProperties;

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 13 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_objectWithoutPropertiesLoose</span>(<span class="hljs-params">source, excluded</span>) </span>{
  <span class="hljs-keyword">if</span> (source == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> {};
  <span class="hljs-keyword">var</span> target = {};
  <span class="hljs-keyword">var</span> sourceKeys = <span class="hljs-built_in">Object</span>.keys(source);
  <span class="hljs-keyword">var</span> key, i;

  <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; sourceKeys.length; i++) {
    key = sourceKeys[i];
    <span class="hljs-keyword">if</span> (excluded.indexOf(key) &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">continue</span>;
    target[key] = source[key];
  }

  <span class="hljs-keyword">return</span> target;
}

<span class="hljs-built_in">module</span>.exports = _objectWithoutPropertiesLoose;

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 14 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;


<span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">"__esModule"</span>, {
  <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>
});
<span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">"format"</span>, {
  <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> _format.default;
  }
});
<span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">"parse"</span>, {
  <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> _parse.default;
  }
});

<span class="hljs-keyword">var</span> _format = _interopRequireDefault(__webpack_require__(<span class="hljs-number">15</span>));

<span class="hljs-keyword">var</span> _parse = _interopRequireDefault(__webpack_require__(<span class="hljs-number">17</span>));

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_interopRequireDefault</span>(<span class="hljs-params">obj</span>) </span>{ <span class="hljs-keyword">return</span> obj &amp;&amp; obj.__esModule ? obj : { <span class="hljs-attr">default</span>: obj }; }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="sourcemappingurlindex.js.map">
  <h1>
    <a href="#sourcemappingurlindex.js.map" name="sourcemappingurlindex.js.map" class="pilcrow"></a>
sourceMappingURL=index.js.map
  </h1>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 15 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;


<span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">"__esModule"</span>, {
  <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>
});
exports.default = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;

<span class="hljs-keyword">var</span> _util = __webpack_require__(<span class="hljs-number">16</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_toConsumableArray</span>(<span class="hljs-params">arr</span>) </span>{ <span class="hljs-keyword">return</span> _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_nonIterableSpread</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Invalid attempt to spread non-iterable instance"</span>); }

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_iterableToArray</span>(<span class="hljs-params">iter</span>) </span>{ <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Symbol</span>.iterator <span class="hljs-keyword">in</span> <span class="hljs-built_in">Object</span>(iter) || <span class="hljs-built_in">Object</span>.prototype.toString.call(iter) === <span class="hljs-string">"[object Arguments]"</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.from(iter); }

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_arrayWithoutHoles</span>(<span class="hljs-params">arr</span>) </span>{ <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(arr)) { <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, arr2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(arr.length); i &lt; arr.length; i++) { arr2[i] = arr[i]; } <span class="hljs-keyword">return</span> arr2; } }

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_slicedToArray</span>(<span class="hljs-params">arr, i</span>) </span>{ <span class="hljs-keyword">return</span> _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_nonIterableRest</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Invalid attempt to destructure non-iterable instance"</span>); }

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_iterableToArrayLimit</span>(<span class="hljs-params">arr, i</span>) </span>{ <span class="hljs-keyword">var</span> _arr = []; <span class="hljs-keyword">var</span> _n = <span class="hljs-literal">true</span>; <span class="hljs-keyword">var</span> _d = <span class="hljs-literal">false</span>; <span class="hljs-keyword">var</span> _e = <span class="hljs-literal">undefined</span>; <span class="hljs-keyword">try</span> { <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _i = arr[<span class="hljs-built_in">Symbol</span>.iterator](), _s; !(_n = (_s = _i.next()).done); _n = <span class="hljs-literal">true</span>) { _arr.push(_s.value); <span class="hljs-keyword">if</span> (i &amp;&amp; _arr.length === i) <span class="hljs-keyword">break</span>; } } <span class="hljs-keyword">catch</span> (err) { _d = <span class="hljs-literal">true</span>; _e = err; } <span class="hljs-keyword">finally</span> { <span class="hljs-keyword">try</span> { <span class="hljs-keyword">if</span> (!_n &amp;&amp; _i[<span class="hljs-string">"return"</span>] != <span class="hljs-literal">null</span>) _i[<span class="hljs-string">"return"</span>](); } <span class="hljs-keyword">finally</span> { <span class="hljs-keyword">if</span> (_d) <span class="hljs-keyword">throw</span> _e; } } <span class="hljs-keyword">return</span> _arr; }

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_arrayWithHoles</span>(<span class="hljs-params">arr</span>) </span>{ <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(arr)) <span class="hljs-keyword">return</span> arr; }

<span class="hljs-keyword">var</span> xxx = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">xxx</span>(<span class="hljs-params">key</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${key}</span>=<span class="hljs-subst">${value &amp;&amp; !(<span class="hljs-number">0</span>, _util.isToken)(value) ? (<span class="hljs-number">0</span>, _util.quote)(value) : value}</span>`</span>;
  };
};

<span class="hljs-keyword">var</span> build = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">build</span>(<span class="hljs-params">params</span>) </span>{
  <span class="hljs-keyword">return</span> params.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">prev, _ref</span>) </span>{
    <span class="hljs-keyword">var</span> _ref2 = _slicedToArray(_ref, <span class="hljs-number">2</span>),
        key = _ref2[<span class="hljs-number">0</span>],
        values = _ref2[<span class="hljs-number">1</span>];

    <span class="hljs-keyword">var</span> transform = xxx(key);

    <span class="hljs-keyword">if</span> (!(<span class="hljs-number">0</span>, _util.isToken)(key)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>();
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(values)) {
      <span class="hljs-keyword">return</span> _toConsumableArray(prev).concat(_toConsumableArray(values.map(transform)));
    }

    <span class="hljs-keyword">return</span> _toConsumableArray(prev).concat([transform(values)]);
  }, []);
};

<span class="hljs-keyword">var</span> challenge = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">challenge</span>(<span class="hljs-params">params, options</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(params)) {
    <span class="hljs-keyword">return</span> build(params);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> params === <span class="hljs-string">'object'</span>) {
    <span class="hljs-keyword">var</span> entries = params;
    <span class="hljs-keyword">return</span> challenge(<span class="hljs-built_in">Object</span>.keys(params).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
      <span class="hljs-keyword">return</span> [key, entries[key]];
    }), options);
  }

  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>();
};

<span class="hljs-keyword">var</span> _default = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_default</span>(<span class="hljs-params">scheme, token, params</span>) </span>{
  <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">typeof</span> scheme === <span class="hljs-string">'string'</span> ? {
    scheme,
    token,
    params
  } : scheme;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">'object'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>();
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!(<span class="hljs-number">0</span>, _util.isScheme)(obj.scheme)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid scheme.'</span>);
  }

  <span class="hljs-keyword">return</span> [obj.scheme].concat(_toConsumableArray(<span class="hljs-keyword">typeof</span> obj.token !== <span class="hljs-string">'undefined'</span> ? [obj.token] : []), _toConsumableArray(<span class="hljs-keyword">typeof</span> obj.params !== <span class="hljs-string">'undefined'</span> ? challenge(obj.params) : [])).join(<span class="hljs-string">' '</span>);
};

exports.default = _default;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="sourcemappingurlformat.js.map">
  <h1>
    <a href="#sourcemappingurlformat.js.map" name="sourcemappingurlformat.js.map" class="pilcrow"></a>
sourceMappingURL=format.js.map
  </h1>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 16 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;


<span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">"__esModule"</span>, {
  <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>
});
exports.unquote = exports.quote = exports.isScheme = exports.isToken = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> token = <span class="hljs-regexp">/^[^\u0000-\u001F\u007F()&lt;&gt;@,;:\\"/?={}\[\]\u0020\u0009]+$/</span>;

<span class="hljs-keyword">var</span> isToken = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isToken</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> str === <span class="hljs-string">'string'</span> &amp;&amp; token.test(str);
};

exports.isToken = isToken;
<span class="hljs-keyword">var</span> isScheme = isToken;
exports.isScheme = isScheme;

<span class="hljs-keyword">var</span> quote = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">quote</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`"<span class="hljs-subst">${str.replace(<span class="hljs-regexp">/"/g</span>, <span class="hljs-string">'\\"'</span>)}</span>"`</span>;
};

exports.quote = quote;

<span class="hljs-keyword">var</span> unquote = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unquote</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> str.substr(<span class="hljs-number">1</span>, str.length - <span class="hljs-number">2</span>).replace(<span class="hljs-regexp">/\\"/g</span>, <span class="hljs-string">'"'</span>);
};

exports.unquote = unquote;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="sourcemappingurlutil.js.map">
  <h1>
    <a href="#sourcemappingurlutil.js.map" name="sourcemappingurlutil.js.map" class="pilcrow"></a>
sourceMappingURL=util.js.map
  </h1>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 17 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;


<span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">"__esModule"</span>, {
  <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span>
});
exports.default = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;

<span class="hljs-keyword">var</span> _util = __webpack_require__(<span class="hljs-number">16</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48"></a>
</div>
<p>lol dis</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> body = <span class="hljs-regexp">/((?:[a-zA-Z0-9._~+\/-]+=*(?:\s+|$))|[^\u0000-\u001F\u007F()&lt;&gt;@,;:\\"/?={}\[\]\u0020\u0009]+)(?:=([^\\"=\s,]+|"(?:[^"\\]|\\.)*"))?/g</span>; <span class="hljs-comment">// eslint-disable-line</span>

<span class="hljs-keyword">var</span> normalize = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalize</span>(<span class="hljs-params">prev, _cur</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49"></a>
</div>
<p>Fixup quoted strings and tokens with spaces around them</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> cur = _cur.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'"'</span> ? (<span class="hljs-number">0</span>, _util.unquote)(_cur) : _cur.trim(); <span class="hljs-comment">// Marshal</span>

  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(prev)) {
    <span class="hljs-keyword">return</span> prev.concat(cur);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> prev === <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">return</span> [prev, cur];
  }

  <span class="hljs-keyword">return</span> cur;
};

<span class="hljs-keyword">var</span> parseProperties = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseProperties</span>(<span class="hljs-params">scheme, string</span>) </span>{
  <span class="hljs-keyword">var</span> token = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">var</span> params = {}; <span class="hljs-comment">// eslint-disable-next-line no-constant-condition</span>

  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">var</span> res = body.exec(string);

    <span class="hljs-keyword">if</span> (res === <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">break</span>;
    }

    <span class="hljs-keyword">if</span> (res[<span class="hljs-number">2</span>]) {
      params[res[<span class="hljs-number">1</span>]] = normalize(params[res[<span class="hljs-number">1</span>]], res[<span class="hljs-number">2</span>]);
    } <span class="hljs-keyword">else</span> {
      token = normalize(token, res[<span class="hljs-number">1</span>]);
    }
  }

  <span class="hljs-keyword">return</span> {
    scheme,
    params,
    token
  };
};

<span class="hljs-keyword">var</span> _default = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_default</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> str !== <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Header value must be a string.'</span>);
  }

  <span class="hljs-keyword">var</span> start = str.indexOf(<span class="hljs-string">' '</span>);
  <span class="hljs-keyword">var</span> scheme = str.substr(<span class="hljs-number">0</span>, start);

  <span class="hljs-keyword">if</span> (!(<span class="hljs-number">0</span>, _util.isScheme)(scheme)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">`Invalid scheme <span class="hljs-subst">${scheme}</span>`</span>);
  }

  <span class="hljs-keyword">return</span> parseProperties(scheme, str.substr(start));
};

exports.default = _default;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="sourcemappingurlparse.js.map">
  <h1>
    <a href="#sourcemappingurlparse.js.map" name="sourcemappingurlparse.js.map" class="pilcrow"></a>
sourceMappingURL=parse.js.map
  </h1>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 18 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;


<span class="hljs-built_in">module</span>.exports = __webpack_require__(<span class="hljs-number">19</span>);

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 19 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{<span class="hljs-comment">/**
 * Dependencies
 */</span>
<span class="hljs-keyword">const</span> assert = __webpack_require__(<span class="hljs-number">21</span>);

<span class="hljs-keyword">const</span> fetch = __webpack_require__(<span class="hljs-number">5</span>);

<span class="hljs-keyword">const</span> {
  URL
} = __webpack_require__(<span class="hljs-number">27</span>);

<span class="hljs-keyword">const</span> Headers = fetch.Headers ? fetch.Headers : global.Headers;

<span class="hljs-keyword">const</span> {
  JWKSet
} = __webpack_require__(<span class="hljs-number">28</span>);

<span class="hljs-keyword">const</span> AuthenticationRequest = __webpack_require__(<span class="hljs-number">55</span>);

<span class="hljs-keyword">const</span> AuthenticationResponse = __webpack_require__(<span class="hljs-number">57</span>);

<span class="hljs-keyword">const</span> onHttpError = __webpack_require__(<span class="hljs-number">60</span>);

<span class="hljs-keyword">const</span> FormUrlEncoded = __webpack_require__(<span class="hljs-number">56</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51"></a>
</div>
<div class="dox">
<div class="summary">
<p>RelyingParty</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RelyingParty</span> </span>{
  <span class="hljs-keyword">constructor</span>({
    provider = {},
    defaults,
    registration = {},
    store = {}
  } = {}) {
    <span class="hljs-keyword">this</span>.provider = provider;
    <span class="hljs-keyword">this</span>.defaults = defaults || {
      <span class="hljs-attr">popToken</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">authenticate</span>: {
        <span class="hljs-attr">response_type</span>: <span class="hljs-string">'id_token token'</span>,
        <span class="hljs-attr">display</span>: <span class="hljs-string">'page'</span>,
        <span class="hljs-attr">scope</span>: [<span class="hljs-string">'openid'</span>]
      }
    };
    <span class="hljs-keyword">this</span>.registration = registration;
    <span class="hljs-keyword">this</span>.store = store;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52"></a>
</div>
<div class="dox">
<div class="summary">
<p>from</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">from</span>(data) {
    <span class="hljs-keyword">const</span> rp = <span class="hljs-keyword">new</span> RelyingParty(data);
    <span class="hljs-keyword">const</span> validation = rp.validate(); <span class="hljs-comment">// schema validation</span>

    <span class="hljs-keyword">if</span> (!validation.valid) {
      <span class="hljs-keyword">throw</span> validation.error;
    }

    <span class="hljs-keyword">const</span> jwks = rp.provider.jwks; <span class="hljs-comment">// request the JWK Set if missing</span>

    <span class="hljs-keyword">if</span> (!jwks) {
      <span class="hljs-keyword">return</span> rp.jwks().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> rp);
    } <span class="hljs-comment">// otherwise import the JWK Set to webcrypto</span>


    <span class="hljs-keyword">return</span> JWKSet.importKeys(jwks).then(<span class="hljs-function"><span class="hljs-params">jwks</span> =&gt;</span> {
      rp.provider.jwks = jwks;
      <span class="hljs-keyword">return</span> rp;
    });
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53"></a>
</div>
<div class="dox">
<div class="summary">
<p>register</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">issuer</span>
<span>{string} Provider URL
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">registration</span>
<span>{Object} Client dynamic registration options
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span>{Object}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options.defaults</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[options.store]</span>
<span>{Session|Storage}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[oobRegistration]</span>
<span>{Object} Object providing getRegistration(key) function for out-of-band registrations
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[idpId]</span>
<span>{string} A tag identifying the provider used for looking up out-of-band registration data.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> register(issuer, registration, options, idpId, oobRegistration) {
    <span class="hljs-keyword">const</span> rp = <span class="hljs-keyword">new</span> RelyingParty({
      <span class="hljs-attr">provider</span>: {
        <span class="hljs-attr">url</span>: issuer
      },
      <span class="hljs-attr">defaults</span>: <span class="hljs-built_in">Object</span>.assign({}, options.defaults),
      <span class="hljs-attr">store</span>: options.store
    });
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> rp.discover()).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> rp.jwks()).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      assert(rp.provider.configuration, <span class="hljs-string">'OpenID Configuration is not initialized.'</span>);
      <span class="hljs-keyword">return</span> rp.provider.configuration.registration_endpoint ? rp.register(registration) : rp.getRegistration(registration, idpId, oobRegistration);
    }).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> rp);
  }

  validate() {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.provider || !<span class="hljs-keyword">this</span>.provider.url) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">error</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Provider url is required.'</span>)
      };
    }

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">valid</span>: <span class="hljs-literal">true</span>
    };
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54"></a>
</div>
<div class="dox">
<div class="summary">
<p>Discover</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  discover() {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">let</span> issuer = <span class="hljs-keyword">this</span>.provider.url;
      assert(issuer, <span class="hljs-string">'RelyingParty provider must define "url"'</span>);
      <span class="hljs-keyword">let</span> url = <span class="hljs-keyword">new</span> URL(issuer);
      url.pathname = <span class="hljs-string">'.well-known/openid-configuration'</span>;
      <span class="hljs-keyword">return</span> fetch(url.toString()).then(onHttpError(<span class="hljs-string">'Error fetching openid configuration'</span>)).then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
        <span class="hljs-keyword">return</span> response.json().then(<span class="hljs-function"><span class="hljs-params">json</span> =&gt;</span> <span class="hljs-keyword">this</span>.provider.configuration = json);
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error);
    }
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55"></a>
</div>
<div class="dox">
<div class="summary">
<p>Register</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span>{Object}
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  register(options) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">let</span> configuration = <span class="hljs-keyword">this</span>.provider.configuration;
      assert(configuration, <span class="hljs-string">'OpenID Configuration is not initialized.'</span>);
      assert(configuration.registration_endpoint, <span class="hljs-string">'OpenID Configuration is missing registration_endpoint.'</span>);
      <span class="hljs-keyword">let</span> uri = configuration.registration_endpoint;
      <span class="hljs-keyword">let</span> method = <span class="hljs-string">'post'</span>;
      <span class="hljs-keyword">let</span> headers = <span class="hljs-keyword">new</span> Headers({
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
      });
      <span class="hljs-keyword">let</span> params = <span class="hljs-keyword">this</span>.defaults.register;
      <span class="hljs-keyword">let</span> body = <span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-built_in">Object</span>.assign({}, params, options));
      <span class="hljs-keyword">return</span> fetch(uri, {
        method,
        headers,
        body
      }).then(onHttpError(<span class="hljs-string">'Error registering client'</span>)).then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
        <span class="hljs-keyword">return</span> response.json().then(<span class="hljs-function"><span class="hljs-params">json</span> =&gt;</span> <span class="hljs-keyword">this</span>.registration = json);
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error);
    }
  }

  serialize() {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-keyword">this</span>);
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56"></a>
</div>
<div class="dox">
<div class="summary">
<p>Retrieves an existing Relying Party registration for a provider which does
not support dynamic registration and which requires pre-registration by
some 'out of band' method.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span>{Object}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">idp</span>
<span>{string} Key identifying which registration data should be retrieved.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  getRegistration(options, idp, oobRegistration) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.registration = oobRegistration.getRegistration(idp);
    }).catch(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
      <span class="hljs-keyword">throw</span> error;
    });
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57"></a>
</div>
<div class="dox">
<div class="summary">
<p>jwks</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  jwks() {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">let</span> configuration = <span class="hljs-keyword">this</span>.provider.configuration;
      assert(configuration, <span class="hljs-string">'OpenID Configuration is not initialized.'</span>);
      assert(configuration.jwks_uri, <span class="hljs-string">'OpenID Configuration is missing jwks_uri.'</span>);
      <span class="hljs-keyword">let</span> uri = configuration.jwks_uri;
      <span class="hljs-keyword">return</span> fetch(uri).then(onHttpError(<span class="hljs-string">'Error resolving provider keys'</span>)).then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
        <span class="hljs-keyword">return</span> response.json().then(<span class="hljs-function"><span class="hljs-params">json</span> =&gt;</span> JWKSet.importKeys(json)).then(<span class="hljs-function"><span class="hljs-params">jwks</span> =&gt;</span> <span class="hljs-keyword">this</span>.provider.jwks = jwks);
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error);
    }
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58"></a>
</div>
<div class="dox">
<div class="summary">
<p>createRequest</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span>{Object} Authn request options hashmap
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options.redirect_uri</span>
<span>{string}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options.response_type</span>
<span>{string} e.g. 'code' or 'id_token token'
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">session</span>
<span>{Session|Storage} req.session or localStorage
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  createRequest(options, session) {
    <span class="hljs-keyword">return</span> AuthenticationRequest.create(<span class="hljs-keyword">this</span>, options, session || <span class="hljs-keyword">this</span>.store);
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59"></a>
</div>
<div class="dox">
<div class="summary">
<p>Validate Response</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span>{string} req.query or req.body.text
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">session</span>
<span>{Session|Storage} req.session or localStorage or similar
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  validateResponse(response, session = <span class="hljs-keyword">this</span>.store) {
    <span class="hljs-keyword">let</span> options;

    <span class="hljs-keyword">if</span> (response.match(<span class="hljs-regexp">/^http(s?):\/\//</span>)) {
      options = {
        <span class="hljs-attr">rp</span>: <span class="hljs-keyword">this</span>,
        <span class="hljs-attr">redirect</span>: response,
        session
      };
    } <span class="hljs-keyword">else</span> {
      options = {
        <span class="hljs-attr">rp</span>: <span class="hljs-keyword">this</span>,
        <span class="hljs-attr">body</span>: response,
        session
      };
    }

    <span class="hljs-keyword">const</span> authResponse = <span class="hljs-keyword">new</span> AuthenticationResponse(options);
    <span class="hljs-keyword">return</span> AuthenticationResponse.validateResponse(authResponse);
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60"></a>
</div>
<div class="dox">
<div class="summary">
<p>userinfo</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">accessToken</span>
<span>{string=} Optional access token from current user session for use against the User Info endpoint
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  userinfo(accessToken) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">let</span> configuration = <span class="hljs-keyword">this</span>.provider.configuration;
      assert(configuration, <span class="hljs-string">'OpenID Configuration is not initialized.'</span>);
      assert(configuration.userinfo_endpoint, <span class="hljs-string">'OpenID Configuration is missing userinfo_endpoint.'</span>);
      accessToken = accessToken || <span class="hljs-keyword">this</span>.store.access_token;
      assert(accessToken, <span class="hljs-string">'Missing access token.'</span>);
      <span class="hljs-keyword">let</span> uri = configuration.userinfo_endpoint;
      <span class="hljs-keyword">let</span> headers = <span class="hljs-keyword">new</span> Headers({
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
        <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">${accessToken}</span>`</span>
      });
      <span class="hljs-keyword">return</span> fetch(uri, {
        headers
      }).then(onHttpError(<span class="hljs-string">'Error fetching userinfo'</span>)).then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.json());
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error);
    }
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61"></a>
</div>
<div class="dox">
<div class="summary">
<p>logoutRequest</p>
</div>
<div class="body">
<p>Composes and returns the logout request URI, based on the OP's
<code>end_session_endpoint</code>, with appropriate parameters.</p>
<p>Note: Calling client code has the responsibility to clear the local
session state (for example, by calling <code>rp.clearSession()</code>). In addition,
some IdPs (such as Google) may not provide an <code>end_session_endpoint</code>,
in which case, this method will return null.</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<a href="https://openid.net/specs/openid-connect-session-1_0.html#RPLogout">https://openid.net/specs/openid-connect-session-1_0.html#RPLogout</a>
</div>
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[options={}]</span>
<span>{object}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[options.id_token_hint]</span>
<span>{string} RECOMMENDED.   Previously issued ID Token passed to the logout endpoint as
a hint about the End-User's current authenticated session with the
Client. This is used as an indication of the identity of the End-User
that the RP is requesting be logged out by the OP. The OP <em>need not</em> be
listed as an audience of the ID Token when it is used as an
<code>id_token_hint</code> value.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[options.post_logout_redirect_uri]</span>
<span>{string} OPTIONAL. URL to which   the RP is requesting that the End-User's User Agent be redirected after
a logout has been performed. The value MUST have been previously
registered with the OP, either using the <code>post_logout_redirect_uris</code>
Registration parameter or via another mechanism. If supplied, the OP
SHOULD honor this request following the logout.
Note: The requirement to validate the uri for previous registration means
that, in practice, the <code>id_token_hint</code> is REQUIRED if
<code>post_logout_redirect_uri</code> is used. Otherwise, the OP has no way to get
the <code>client_id</code> to load the saved client registration, to validate the
uri. The only way it can get it is by decoding the <code>id_token_hint</code>.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[options.state]</span>
<span>{string} OPTIONAL. Opaque value used by the RP to   maintain state between the logout request and the callback to the
endpoint specified by the <code>post_logout_redirect_uri</code> query parameter. If
included in the logout request, the OP passes this value back to the RP
using the <code>state</code> query parameter when redirecting the User Agent back to
the RP.
TODO: In the future, consider adding <code>response_mode</code> param, for the OP to
determine how to return the <code>state</code> back the RP.
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<a href="
TODO: Handle special cases for popular providers (Google, MSFT)">http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html#ResponseModes</a>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  logoutRequest(options = {}) {
    <span class="hljs-keyword">const</span> {
      id_token_hint,
      post_logout_redirect_uri,
      state
    } = options;
    <span class="hljs-keyword">let</span> configuration;
    assert(<span class="hljs-keyword">this</span>.provider, <span class="hljs-string">'OpenID Configuration is not initialized'</span>);
    configuration = <span class="hljs-keyword">this</span>.provider.configuration;
    assert(configuration, <span class="hljs-string">'OpenID Configuration is not initialized'</span>);

    <span class="hljs-keyword">if</span> (!configuration.end_session_endpoint) {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`OpenId Configuration for `</span> + <span class="hljs-string">`<span class="hljs-subst">${configuration.issuer}</span> is missing end_session_endpoint`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">if</span> (post_logout_redirect_uri &amp;&amp; !id_token_hint) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'id_token_hint is required when using post_logout_redirect_uri'</span>);
    }

    <span class="hljs-keyword">const</span> params = {};

    <span class="hljs-keyword">if</span> (id_token_hint) {
      params.id_token_hint = id_token_hint;
    }

    <span class="hljs-keyword">if</span> (post_logout_redirect_uri) {
      params.post_logout_redirect_uri = post_logout_redirect_uri;
    }

    <span class="hljs-keyword">if</span> (state) {
      params.state = state;
    }

    <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> URL(configuration.end_session_endpoint);
    url.search = FormUrlEncoded.encode(params);
    <span class="hljs-keyword">return</span> url.href;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62"></a>
</div>
<div class="dox">
<div class="summary">
<p>Logout</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  logout() {
    <span class="hljs-keyword">let</span> configuration;

    <span class="hljs-keyword">try</span> {
      assert(<span class="hljs-keyword">this</span>.provider, <span class="hljs-string">'OpenID Configuration is not initialized.'</span>);
      configuration = <span class="hljs-keyword">this</span>.provider.configuration;
      assert(configuration, <span class="hljs-string">'OpenID Configuration is not initialized.'</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(error);
    }

    <span class="hljs-keyword">if</span> (!configuration.end_session_endpoint) {
      <span class="hljs-keyword">this</span>.clearSession();
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-literal">undefined</span>);
    }

    <span class="hljs-keyword">let</span> uri = configuration.end_session_endpoint;
    <span class="hljs-keyword">let</span> method = <span class="hljs-string">'get'</span>;
    <span class="hljs-keyword">return</span> fetch(uri, {
      method,
      <span class="hljs-attr">credentials</span>: <span class="hljs-string">'include'</span>
    }).then(onHttpError(<span class="hljs-string">'Error logging out'</span>)).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">this</span>.clearSession()); <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Validate `frontchannel_logout_uri` if necessary</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63"></a>
</div>
<div class="dox">
<div class="summary">
<p>frontchannel_logout_uri - OPTIONAL. RP URL that will cause the RP to log
itself out when rendered in an iframe by the OP.</p>
</div>
<div class="body">
<p>An <code>iss</code> (issuer) query parameter and a <code>sid</code>
(session ID) query parameter MAY be included by the OP to enable the RP
to validate the request and to determine which of the potentially
multiple sessions is to be logged out. If a sid (session ID) query
parameter is included, an iss (issuer) query parameter MUST also be
included.</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<a href="https://openid.net/specs/openid-connect-frontchannel-1_0.html#RPLogout">https://openid.net/specs/openid-connect-frontchannel-1_0.html#RPLogout</a>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  }

  clearSession() {
    <span class="hljs-keyword">let</span> session = <span class="hljs-keyword">this</span>.store;

    <span class="hljs-keyword">if</span> (!session) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">delete</span> session[SESSION_PRIVATE_KEY];
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">uri</span>
<span>{string} Target Resource Server URI
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">idToken</span>
<span>{IDToken} ID Token to be embedded in the PoP token
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  popTokenFor(uri, idToken) {
    <span class="hljs-keyword">return</span> PoPToken.issueFor(uri, idToken);
  }

}

<span class="hljs-keyword">const</span> SESSION_PRIVATE_KEY = <span class="hljs-string">'oidc.session.privateKey'</span>;
RelyingParty.SESSION_PRIVATE_KEY = SESSION_PRIVATE_KEY;
<span class="hljs-built_in">module</span>.exports = RelyingParty;
<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(<span class="hljs-keyword">this</span>, __webpack_require__(<span class="hljs-number">20</span>)))

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 20 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

<span class="hljs-keyword">var</span> g;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65"></a>
</div>
<p>This works in non-strict mode</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">g = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
})();

<span class="hljs-keyword">try</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66"></a>
</div>
<p>This works if eval is allowed (see CSP)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	g = g || <span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>(<span class="hljs-string">"return this"</span>)();
} <span class="hljs-keyword">catch</span> (e) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67"></a>
</div>
<p>This works if the window reference is available</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span> === <span class="hljs-string">"object"</span>) g = <span class="hljs-built_in">window</span>;
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-68" id="section-68"></a>
</div>
<p>g can still be undefined, but nothing to do about it...
We return undefined, instead of nothing here, so it's
easier to handle this case. if(!global) { ...}</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-built_in">module</span>.exports = g;


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 21 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{

<span class="hljs-keyword">var</span> objectAssign = __webpack_require__(<span class="hljs-number">22</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-69" id="section-69"></a>
</div>
<p>compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js
original notice:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-70" id="section-70"></a>
</div>
<div class="dox">
<div class="summary">
<p>!
The buffer module from node.js, for the browser.</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compare</span>(<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">if</span> (a === b) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  }

  <span class="hljs-keyword">var</span> x = a.length;
  <span class="hljs-keyword">var</span> y = b.length;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = <span class="hljs-built_in">Math</span>.min(x, y); i &lt; len; ++i) {
    <span class="hljs-keyword">if</span> (a[i] !== b[i]) {
      x = a[i];
      y = b[i];
      <span class="hljs-keyword">break</span>;
    }
  }

  <span class="hljs-keyword">if</span> (x &lt; y) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
  }
  <span class="hljs-keyword">if</span> (y &lt; x) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isBuffer</span>(<span class="hljs-params">b</span>) </span>{
  <span class="hljs-keyword">if</span> (global.Buffer &amp;&amp; <span class="hljs-keyword">typeof</span> global.Buffer.isBuffer === <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">return</span> global.Buffer.isBuffer(b);
  }
  <span class="hljs-keyword">return</span> !!(b != <span class="hljs-literal">null</span> &amp;&amp; b._isBuffer);
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-71" id="section-71"></a>
</div>
<p>based on node assert, original notice:
NB: The URL to the CommonJS spec is kept just for tradition.
node-assert has evolved a lot since then, both in API and behavior.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-72" id="section-72"></a>
</div>
<p>http://wiki.commonjs.org/wiki/Unit_Testing/1.0</p>
<p>THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!</p>
<p>Originally from narwhal.js (http://narwhaljs.org)
Copyright (c) 2009 Thomas Robinson &lt;280north.com&gt;</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the 'Software'), to
deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
sell copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> util = __webpack_require__(<span class="hljs-number">23</span>);
<span class="hljs-keyword">var</span> hasOwn = <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty;
<span class="hljs-keyword">var</span> pSlice = <span class="hljs-built_in">Array</span>.prototype.slice;
<span class="hljs-keyword">var</span> functionsHaveNames = (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>{}.name === <span class="hljs-string">'foo'</span>;
}());
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pToString</span> (<span class="hljs-params">obj</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(obj);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isView</span>(<span class="hljs-params">arrbuf</span>) </span>{
  <span class="hljs-keyword">if</span> (isBuffer(arrbuf)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> global.ArrayBuffer !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">ArrayBuffer</span>.isView === <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">ArrayBuffer</span>.isView(arrbuf);
  }
  <span class="hljs-keyword">if</span> (!arrbuf) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">if</span> (arrbuf <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">DataView</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">if</span> (arrbuf.buffer &amp;&amp; arrbuf.buffer <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-73" id="section-73"></a>
</div>
<ol>
<li>The assert module provides functions that throw
AssertionError's when particular conditions are not met. The
assert module must conform to the following interface.</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> assert = <span class="hljs-built_in">module</span>.exports = ok;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-74" id="section-74"></a>
</div>
<ol start="2">
<li>The AssertionError is defined in assert.
new assert.AssertionError({ message: message,
actual: actual,
expected: expected })</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> regex = <span class="hljs-regexp">/\s*function\s+([^\(\s]*)\s*/</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-75" id="section-75"></a>
</div>
<p>based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getName</span>(<span class="hljs-params">func</span>) </span>{
  <span class="hljs-keyword">if</span> (!util.isFunction(func)) {
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">if</span> (functionsHaveNames) {
    <span class="hljs-keyword">return</span> func.name;
  }
  <span class="hljs-keyword">var</span> str = func.toString();
  <span class="hljs-keyword">var</span> match = str.match(regex);
  <span class="hljs-keyword">return</span> match &amp;&amp; match[<span class="hljs-number">1</span>];
}
assert.AssertionError = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">AssertionError</span>(<span class="hljs-params">options</span>) </span>{
  <span class="hljs-keyword">this</span>.name = <span class="hljs-string">'AssertionError'</span>;
  <span class="hljs-keyword">this</span>.actual = options.actual;
  <span class="hljs-keyword">this</span>.expected = options.expected;
  <span class="hljs-keyword">this</span>.operator = options.operator;
  <span class="hljs-keyword">if</span> (options.message) {
    <span class="hljs-keyword">this</span>.message = options.message;
    <span class="hljs-keyword">this</span>.generatedMessage = <span class="hljs-literal">false</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">this</span>.message = getMessage(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">this</span>.generatedMessage = <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">var</span> stackStartFunction = options.stackStartFunction || fail;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Error</span>.captureStackTrace) {
    <span class="hljs-built_in">Error</span>.captureStackTrace(<span class="hljs-keyword">this</span>, stackStartFunction);
  } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-76" id="section-76"></a>
</div>
<p>non v8 browsers so we can have a stacktrace</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> err = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>();
    <span class="hljs-keyword">if</span> (err.stack) {
      <span class="hljs-keyword">var</span> out = err.stack;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-77" id="section-77"></a>
</div>
<p>try to strip useless frames</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">var</span> fn_name = getName(stackStartFunction);
      <span class="hljs-keyword">var</span> idx = out.indexOf(<span class="hljs-string">'\n'</span> + fn_name);
      <span class="hljs-keyword">if</span> (idx &gt;= <span class="hljs-number">0</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-78" id="section-78"></a>
</div>
<p>once we have located the function frame
we need to strip out everything before it (and its line)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">var</span> next_line = out.indexOf(<span class="hljs-string">'\n'</span>, idx + <span class="hljs-number">1</span>);
        out = out.substring(next_line + <span class="hljs-number">1</span>);
      }

      <span class="hljs-keyword">this</span>.stack = out;
    }
  }
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-79" id="section-79"></a>
</div>
<p>assert.AssertionError instanceof Error</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">util.inherits(assert.AssertionError, <span class="hljs-built_in">Error</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">truncate</span>(<span class="hljs-params">s, n</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> s === <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">return</span> s.length &lt; n ? s : s.slice(<span class="hljs-number">0</span>, n);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> s;
  }
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inspect</span>(<span class="hljs-params">something</span>) </span>{
  <span class="hljs-keyword">if</span> (functionsHaveNames || !util.isFunction(something)) {
    <span class="hljs-keyword">return</span> util.inspect(something);
  }
  <span class="hljs-keyword">var</span> rawname = getName(something);
  <span class="hljs-keyword">var</span> name = rawname ? <span class="hljs-string">': '</span> + rawname : <span class="hljs-string">''</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-string">'[Function'</span> +  name + <span class="hljs-string">']'</span>;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getMessage</span>(<span class="hljs-params">self</span>) </span>{
  <span class="hljs-keyword">return</span> truncate(inspect(self.actual), <span class="hljs-number">128</span>) + <span class="hljs-string">' '</span> +
         self.operator + <span class="hljs-string">' '</span> +
         truncate(inspect(self.expected), <span class="hljs-number">128</span>);
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-80" id="section-80"></a>
</div>
<p>At present only the three keys mentioned above are used and
understood by the spec. Implementations or sub modules can pass
other keys to the AssertionError's constructor - they will be
ignored.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-81" id="section-81"></a>
</div>
<ol start="3">
<li>All of the following functions must throw an AssertionError
when a corresponding condition is not met, with a message that
may be undefined if not provided.  All assertion methods provide
both the actual and expected values to the assertion error for
display purposes.</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fail</span>(<span class="hljs-params">actual, expected, message, operator, stackStartFunction</span>) </span>{
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> assert.AssertionError({
    <span class="hljs-attr">message</span>: message,
    <span class="hljs-attr">actual</span>: actual,
    <span class="hljs-attr">expected</span>: expected,
    <span class="hljs-attr">operator</span>: operator,
    <span class="hljs-attr">stackStartFunction</span>: stackStartFunction
  });
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-82" id="section-82"></a>
</div>
<p>EXTENSION! allows for well behaved errors defined elsewhere.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">assert.fail = fail;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-83" id="section-83"></a>
</div>
<ol start="4">
<li>Pure assertion tests whether a value is truthy, as determined
by !!guard.
assert.ok(guard, message_opt);
This statement is equivalent to assert.equal(true, !!guard,
message_opt);. To test strictly for the value true, use
assert.strictEqual(true, guard, message_opt);.</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ok</span>(<span class="hljs-params">value, message</span>) </span>{
  <span class="hljs-keyword">if</span> (!value) fail(value, <span class="hljs-literal">true</span>, message, <span class="hljs-string">'=='</span>, assert.ok);
}
assert.ok = ok;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-84" id="section-84"></a>
</div>
<ol start="5">
<li>The equality assertion tests shallow, coercive equality with
==.
assert.equal(actual, expected, message_opt);</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
assert.equal = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">equal</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (actual != expected) fail(actual, expected, message, <span class="hljs-string">'=='</span>, assert.equal);
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-85" id="section-85"></a>
</div>
<ol start="6">
<li>The non-equality assertion tests for whether two objects are not equal
with != assert.notEqual(actual, expected, message_opt);</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
assert.notEqual = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notEqual</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (actual == expected) {
    fail(actual, expected, message, <span class="hljs-string">'!='</span>, assert.notEqual);
  }
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-86" id="section-86"></a>
</div>
<ol start="7">
<li>The equivalence assertion tests a deep equality relation.
assert.deepEqual(actual, expected, message_opt);</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
assert.deepEqual = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deepEqual</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (!_deepEqual(actual, expected, <span class="hljs-literal">false</span>)) {
    fail(actual, expected, message, <span class="hljs-string">'deepEqual'</span>, assert.deepEqual);
  }
};

assert.deepStrictEqual = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deepStrictEqual</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (!_deepEqual(actual, expected, <span class="hljs-literal">true</span>)) {
    fail(actual, expected, message, <span class="hljs-string">'deepStrictEqual'</span>, assert.deepStrictEqual);
  }
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_deepEqual</span>(<span class="hljs-params">actual, expected, strict, memos</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-87" id="section-87"></a>
</div>
<p>7.1. All identical values are equivalent, as determined by ===.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (actual === expected) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isBuffer(actual) &amp;&amp; isBuffer(expected)) {
    <span class="hljs-keyword">return</span> compare(actual, expected) === <span class="hljs-number">0</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-88" id="section-88"></a>
</div>
<p>7.2. If the expected value is a Date object, the actual value is
equivalent if it is also a Date object that refers to the same time.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (util.isDate(actual) &amp;&amp; util.isDate(expected)) {
    <span class="hljs-keyword">return</span> actual.getTime() === expected.getTime();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-89" id="section-89"></a>
</div>
<p>7.3 If the expected value is a RegExp object, the actual value is
equivalent if it is also a RegExp object with the same source and
properties (<code>global</code>, <code>multiline</code>, <code>lastIndex</code>, <code>ignoreCase</code>).</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (util.isRegExp(actual) &amp;&amp; util.isRegExp(expected)) {
    <span class="hljs-keyword">return</span> actual.source === expected.source &amp;&amp;
           actual.global === expected.global &amp;&amp;
           actual.multiline === expected.multiline &amp;&amp;
           actual.lastIndex === expected.lastIndex &amp;&amp;
           actual.ignoreCase === expected.ignoreCase;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-90" id="section-90"></a>
</div>
<p>7.4. Other pairs that do not both pass typeof value == 'object',
equivalence is determined by ==.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((actual === <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> actual !== <span class="hljs-string">'object'</span>) &amp;&amp;
             (expected === <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> expected !== <span class="hljs-string">'object'</span>)) {
    <span class="hljs-keyword">return</span> strict ? actual === expected : actual == expected;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-91" id="section-91"></a>
</div>
<p>If both values are instances of typed arrays, wrap their underlying
ArrayBuffers in a Buffer each to increase performance
This optimization requires the arrays to have the same type as checked by
Object.prototype.toString (aka pToString). Never perform binary
comparisons for Float*Arrays, though, since e.g. +0 === -0 but their
bit patterns are not identical.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isView(actual) &amp;&amp; isView(expected) &amp;&amp;
             pToString(actual) === pToString(expected) &amp;&amp;
             !(actual <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Float32Array</span> ||
               actual <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Float64Array</span>)) {
    <span class="hljs-keyword">return</span> compare(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(actual.buffer),
                   <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(expected.buffer)) === <span class="hljs-number">0</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-92" id="section-92"></a>
</div>
<p>7.5 For all other Object pairs, including Array objects, equivalence is
determined by having the same number of owned properties (as verified
with Object.prototype.hasOwnProperty.call), the same set of keys
(although not necessarily the same order), equivalent values for every
corresponding key, and an identical 'prototype' property. Note: this
accounts for both named and indexed properties on Arrays.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isBuffer(actual) !== isBuffer(expected)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  } <span class="hljs-keyword">else</span> {
    memos = memos || {<span class="hljs-attr">actual</span>: [], <span class="hljs-attr">expected</span>: []};

    <span class="hljs-keyword">var</span> actualIndex = memos.actual.indexOf(actual);
    <span class="hljs-keyword">if</span> (actualIndex !== <span class="hljs-number">-1</span>) {
      <span class="hljs-keyword">if</span> (actualIndex === memos.expected.indexOf(expected)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
    }

    memos.actual.push(actual);
    memos.expected.push(expected);

    <span class="hljs-keyword">return</span> objEquiv(actual, expected, strict, memos);
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isArguments</span>(<span class="hljs-params">object</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(object) == <span class="hljs-string">'[object Arguments]'</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">objEquiv</span>(<span class="hljs-params">a, b, strict, actualVisitedObjects</span>) </span>{
  <span class="hljs-keyword">if</span> (a === <span class="hljs-literal">null</span> || a === <span class="hljs-literal">undefined</span> || b === <span class="hljs-literal">null</span> || b === <span class="hljs-literal">undefined</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-93" id="section-93"></a>
</div>
<p>if one is a primitive, the other must be same</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (util.isPrimitive(a) || util.isPrimitive(b))
    <span class="hljs-keyword">return</span> a === b;
  <span class="hljs-keyword">if</span> (strict &amp;&amp; <span class="hljs-built_in">Object</span>.getPrototypeOf(a) !== <span class="hljs-built_in">Object</span>.getPrototypeOf(b))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">var</span> aIsArgs = isArguments(a);
  <span class="hljs-keyword">var</span> bIsArgs = isArguments(b);
  <span class="hljs-keyword">if</span> ((aIsArgs &amp;&amp; !bIsArgs) || (!aIsArgs &amp;&amp; bIsArgs))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">if</span> (aIsArgs) {
    a = pSlice.call(a);
    b = pSlice.call(b);
    <span class="hljs-keyword">return</span> _deepEqual(a, b, strict);
  }
  <span class="hljs-keyword">var</span> ka = objectKeys(a);
  <span class="hljs-keyword">var</span> kb = objectKeys(b);
  <span class="hljs-keyword">var</span> key, i;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-94" id="section-94"></a>
</div>
<p>having the same number of owned properties (keys incorporates
hasOwnProperty)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (ka.length !== kb.length)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-95" id="section-95"></a>
</div>
<p>the same set of keys (although not necessarily the same order),</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  ka.sort();
  kb.sort();
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-96" id="section-96"></a>
</div>
<pre><code class="cheap"></code></pre>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">for</span> (i = ka.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
    <span class="hljs-keyword">if</span> (ka[i] !== kb[i])
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-97" id="section-97"></a>
</div>
<p>equivalent values for every corresponding key, and</p>
<pre><code class="possibly"></code></pre>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">for</span> (i = ka.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
    key = ka[i];
    <span class="hljs-keyword">if</span> (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-98" id="section-98"></a>
</div>
<ol start="8">
<li>The non-equivalence assertion tests for any deep inequality.
assert.notDeepEqual(actual, expected, message_opt);</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
assert.notDeepEqual = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notDeepEqual</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (_deepEqual(actual, expected, <span class="hljs-literal">false</span>)) {
    fail(actual, expected, message, <span class="hljs-string">'notDeepEqual'</span>, assert.notDeepEqual);
  }
};

assert.notDeepStrictEqual = notDeepStrictEqual;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notDeepStrictEqual</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (_deepEqual(actual, expected, <span class="hljs-literal">true</span>)) {
    fail(actual, expected, message, <span class="hljs-string">'notDeepStrictEqual'</span>, notDeepStrictEqual);
  }
}


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-99" id="section-99"></a>
</div>
<ol start="9">
<li>The strict equality assertion tests strict equality, as determined by ===.
assert.strictEqual(actual, expected, message_opt);</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
assert.strictEqual = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">strictEqual</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (actual !== expected) {
    fail(actual, expected, message, <span class="hljs-string">'==='</span>, assert.strictEqual);
  }
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-100" id="section-100"></a>
</div>
<ol start="10">
<li>The strict non-equality assertion tests for strict inequality, as
determined by !==.  assert.notStrictEqual(actual, expected, message_opt);</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
assert.notStrictEqual = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">notStrictEqual</span>(<span class="hljs-params">actual, expected, message</span>) </span>{
  <span class="hljs-keyword">if</span> (actual === expected) {
    fail(actual, expected, message, <span class="hljs-string">'!=='</span>, assert.notStrictEqual);
  }
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">expectedException</span>(<span class="hljs-params">actual, expected</span>) </span>{
  <span class="hljs-keyword">if</span> (!actual || !expected) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.prototype.toString.call(expected) == <span class="hljs-string">'[object RegExp]'</span>) {
    <span class="hljs-keyword">return</span> expected.test(actual);
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span> (actual <span class="hljs-keyword">instanceof</span> expected) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
  } <span class="hljs-keyword">catch</span> (e) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-101" id="section-101"></a>
</div>
<p>Ignore.  The instanceof check doesn't work for arrow functions.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  }

  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Error</span>.isPrototypeOf(expected)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">return</span> expected.call({}, actual) === <span class="hljs-literal">true</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_tryBlock</span>(<span class="hljs-params">block</span>) </span>{
  <span class="hljs-keyword">var</span> error;
  <span class="hljs-keyword">try</span> {
    block();
  } <span class="hljs-keyword">catch</span> (e) {
    error = e;
  }
  <span class="hljs-keyword">return</span> error;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_throws</span>(<span class="hljs-params">shouldThrow, block, expected, message</span>) </span>{
  <span class="hljs-keyword">var</span> actual;

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> block !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'"block" argument must be a function'</span>);
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> expected === <span class="hljs-string">'string'</span>) {
    message = expected;
    expected = <span class="hljs-literal">null</span>;
  }

  actual = _tryBlock(block);

  message = (expected &amp;&amp; expected.name ? <span class="hljs-string">' ('</span> + expected.name + <span class="hljs-string">').'</span> : <span class="hljs-string">'.'</span>) +
            (message ? <span class="hljs-string">' '</span> + message : <span class="hljs-string">'.'</span>);

  <span class="hljs-keyword">if</span> (shouldThrow &amp;&amp; !actual) {
    fail(actual, expected, <span class="hljs-string">'Missing expected exception'</span> + message);
  }

  <span class="hljs-keyword">var</span> userProvidedMessage = <span class="hljs-keyword">typeof</span> message === <span class="hljs-string">'string'</span>;
  <span class="hljs-keyword">var</span> isUnwantedException = !shouldThrow &amp;&amp; util.isError(actual);
  <span class="hljs-keyword">var</span> isUnexpectedException = !shouldThrow &amp;&amp; actual &amp;&amp; !expected;

  <span class="hljs-keyword">if</span> ((isUnwantedException &amp;&amp;
      userProvidedMessage &amp;&amp;
      expectedException(actual, expected)) ||
      isUnexpectedException) {
    fail(actual, expected, <span class="hljs-string">'Got unwanted exception'</span> + message);
  }

  <span class="hljs-keyword">if</span> ((shouldThrow &amp;&amp; actual &amp;&amp; expected &amp;&amp;
      !expectedException(actual, expected)) || (!shouldThrow &amp;&amp; actual)) {
    <span class="hljs-keyword">throw</span> actual;
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-102" id="section-102"></a>
</div>
<ol start="11">
<li>Expected to throw an error:
assert.throws(block, Error_opt, message_opt);</li>
</ol>

        </td>
        <td class="code highlight">
          <pre class="javascript">
assert.throws = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">block, <span class="hljs-regexp">/*optional*/</span>error, <span class="hljs-regexp">/*optional*/m</span>essage</span>) </span>{
  _throws(<span class="hljs-literal">true</span>, block, error, message);
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-103" id="section-103"></a>
</div>
<p>EXTENSION! This is annoying to write outside this module.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">assert.doesNotThrow = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">block, <span class="hljs-regexp">/*optional*/</span>error, <span class="hljs-regexp">/*optional*/m</span>essage</span>) </span>{
  _throws(<span class="hljs-literal">false</span>, block, error, message);
};

assert.ifError = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{ <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err; };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-104" id="section-104"></a>
</div>
<p>Expose a strict only variant of assert</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">strict</span>(<span class="hljs-params">value, message</span>) </span>{
  <span class="hljs-keyword">if</span> (!value) fail(value, <span class="hljs-literal">true</span>, message, <span class="hljs-string">'=='</span>, strict);
}
assert.strict = objectAssign(strict, assert, {
  <span class="hljs-attr">equal</span>: assert.strictEqual,
  <span class="hljs-attr">deepEqual</span>: assert.deepStrictEqual,
  <span class="hljs-attr">notEqual</span>: assert.notStrictEqual,
  <span class="hljs-attr">notDeepEqual</span>: assert.notDeepStrictEqual
});
assert.strict.strict = assert.strict;

<span class="hljs-keyword">var</span> objectKeys = <span class="hljs-built_in">Object</span>.keys || <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
  <span class="hljs-keyword">var</span> keys = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj) {
    <span class="hljs-keyword">if</span> (hasOwn.call(obj, key)) keys.push(key);
  }
  <span class="hljs-keyword">return</span> keys;
};

<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(<span class="hljs-keyword">this</span>, __webpack_require__(<span class="hljs-number">20</span>)))

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 22 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-105" id="section-105"></a>
</div>
<div class="dox">
<div class="summary">
<p>object-assign
(c) Sindre Sorhus</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

<span class="hljs-comment">/* eslint-disable no-unused-vars */</span>
<span class="hljs-keyword">var</span> getOwnPropertySymbols = <span class="hljs-built_in">Object</span>.getOwnPropertySymbols;
<span class="hljs-keyword">var</span> hasOwnProperty = <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty;
<span class="hljs-keyword">var</span> propIsEnumerable = <span class="hljs-built_in">Object</span>.prototype.propertyIsEnumerable;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toObject</span>(<span class="hljs-params">val</span>) </span>{
	<span class="hljs-keyword">if</span> (val === <span class="hljs-literal">null</span> || val === <span class="hljs-literal">undefined</span>) {
		<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Object.assign cannot be called with null or undefined'</span>);
	}

	<span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>(val);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shouldUseNative</span>(<span class="hljs-params"></span>) </span>{
	<span class="hljs-keyword">try</span> {
		<span class="hljs-keyword">if</span> (!<span class="hljs-built_in">Object</span>.assign) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-106" id="section-106"></a>
</div>
<p>Detect buggy property enumeration order in older V8 versions.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-107" id="section-107"></a>
</div>
<p>https://bugs.chromium.org/p/v8/issues/detail?id=4118</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">var</span> test1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(<span class="hljs-string">'abc'</span>);  <span class="hljs-comment">// eslint-disable-line no-new-wrappers</span>
		test1[<span class="hljs-number">5</span>] = <span class="hljs-string">'de'</span>;
		<span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.getOwnPropertyNames(test1)[<span class="hljs-number">0</span>] === <span class="hljs-string">'5'</span>) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-108" id="section-108"></a>
</div>
<p>https://bugs.chromium.org/p/v8/issues/detail?id=3056</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">var</span> test2 = {};
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
			test2[<span class="hljs-string">'_'</span> + <span class="hljs-built_in">String</span>.fromCharCode(i)] = i;
		}
		<span class="hljs-keyword">var</span> order2 = <span class="hljs-built_in">Object</span>.getOwnPropertyNames(test2).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">n</span>) </span>{
			<span class="hljs-keyword">return</span> test2[n];
		});
		<span class="hljs-keyword">if</span> (order2.join(<span class="hljs-string">''</span>) !== <span class="hljs-string">'0123456789'</span>) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-109" id="section-109"></a>
</div>
<p>https://bugs.chromium.org/p/v8/issues/detail?id=3056</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">var</span> test3 = {};
		<span class="hljs-string">'abcdefghijklmnopqrst'</span>.split(<span class="hljs-string">''</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">letter</span>) </span>{
			test3[letter] = letter;
		});
		<span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.keys(<span class="hljs-built_in">Object</span>.assign({}, test3)).join(<span class="hljs-string">''</span>) !==
				<span class="hljs-string">'abcdefghijklmnopqrst'</span>) {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	} <span class="hljs-keyword">catch</span> (err) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-110" id="section-110"></a>
</div>
<p>We don't expect any of the above to throw, but better to be safe.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	}
}

<span class="hljs-built_in">module</span>.exports = shouldUseNative() ? <span class="hljs-built_in">Object</span>.assign : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">target, source</span>) </span>{
	<span class="hljs-keyword">var</span> <span class="hljs-keyword">from</span>;
	<span class="hljs-keyword">var</span> to = toObject(target);
	<span class="hljs-keyword">var</span> symbols;

	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> s = <span class="hljs-number">1</span>; s &lt; <span class="hljs-built_in">arguments</span>.length; s++) {
		<span class="hljs-keyword">from</span> = <span class="hljs-built_in">Object</span>(<span class="hljs-built_in">arguments</span>[s]);

		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> <span class="hljs-keyword">from</span>) {
			<span class="hljs-keyword">if</span> (hasOwnProperty.call(<span class="hljs-keyword">from</span>, key)) {
				to[key] = <span class="hljs-keyword">from</span>[key];
			}
		}

		<span class="hljs-keyword">if</span> (getOwnPropertySymbols) {
			symbols = getOwnPropertySymbols(<span class="hljs-keyword">from</span>);
			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; symbols.length; i++) {
				<span class="hljs-keyword">if</span> (propIsEnumerable.call(<span class="hljs-keyword">from</span>, symbols[i])) {
					to[symbols[i]] = <span class="hljs-keyword">from</span>[symbols[i]];
				}
			}
		}
	}

	<span class="hljs-keyword">return</span> to;
};


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 23 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">process</span>) </span>{<span class="hljs-comment">// Copyright Joyent, Inc. and other Node contributors.</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-111" id="section-111"></a>
</div>
<p>Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
&quot;Software&quot;), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the
following conditions:</p>
<p>The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> getOwnPropertyDescriptors = <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptors ||
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getOwnPropertyDescriptors</span>(<span class="hljs-params">obj</span>) </span>{
    <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(obj);
    <span class="hljs-keyword">var</span> descriptors = {};
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; keys.length; i++) {
      descriptors[keys[i]] = <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(obj, keys[i]);
    }
    <span class="hljs-keyword">return</span> descriptors;
  };

<span class="hljs-keyword">var</span> formatRegExp = <span class="hljs-regexp">/%[sdj%]/g</span>;
exports.format = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">f</span>) </span>{
  <span class="hljs-keyword">if</span> (!isString(f)) {
    <span class="hljs-keyword">var</span> objects = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++) {
      objects.push(inspect(<span class="hljs-built_in">arguments</span>[i]));
    }
    <span class="hljs-keyword">return</span> objects.join(<span class="hljs-string">' '</span>);
  }

  <span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">var</span> args = <span class="hljs-built_in">arguments</span>;
  <span class="hljs-keyword">var</span> len = args.length;
  <span class="hljs-keyword">var</span> str = <span class="hljs-built_in">String</span>(f).replace(formatRegExp, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">if</span> (x === <span class="hljs-string">'%%'</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'%'</span>;
    <span class="hljs-keyword">if</span> (i &gt;= len) <span class="hljs-keyword">return</span> x;
    <span class="hljs-keyword">switch</span> (x) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'%s'</span>: <span class="hljs-keyword">return</span> <span class="hljs-built_in">String</span>(args[i++]);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'%d'</span>: <span class="hljs-keyword">return</span> <span class="hljs-built_in">Number</span>(args[i++]);
      <span class="hljs-keyword">case</span> <span class="hljs-string">'%j'</span>:
        <span class="hljs-keyword">try</span> {
          <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(args[i++]);
        } <span class="hljs-keyword">catch</span> (_) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">'[Circular]'</span>;
        }
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">return</span> x;
    }
  });
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = args[i]; i &lt; len; x = args[++i]) {
    <span class="hljs-keyword">if</span> (isNull(x) || !isObject(x)) {
      str += <span class="hljs-string">' '</span> + x;
    } <span class="hljs-keyword">else</span> {
      str += <span class="hljs-string">' '</span> + inspect(x);
    }
  }
  <span class="hljs-keyword">return</span> str;
};


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-112" id="section-112"></a>
</div>
<p>Mark that a method should not be used.
Returns a modified function which warns once by default.
If --no-deprecation is set, then it is a no-op.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">exports.deprecate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn, msg</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> process !== <span class="hljs-string">'undefined'</span> &amp;&amp; process.noDeprecation === <span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">return</span> fn;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-113" id="section-113"></a>
</div>
<p>Allow for deprecating things in the process of starting up.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> process === <span class="hljs-string">'undefined'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> exports.deprecate(fn, msg).apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
    };
  }

  <span class="hljs-keyword">var</span> warned = <span class="hljs-literal">false</span>;
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deprecated</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!warned) {
      <span class="hljs-keyword">if</span> (process.throwDeprecation) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(msg);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (process.traceDeprecation) {
        <span class="hljs-built_in">console</span>.trace(msg);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">console</span>.error(msg);
      }
      warned = <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
  }

  <span class="hljs-keyword">return</span> deprecated;
};


<span class="hljs-keyword">var</span> debugs = {};
<span class="hljs-keyword">var</span> debugEnviron;
exports.debuglog = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">set</span>) </span>{
  <span class="hljs-keyword">if</span> (isUndefined(debugEnviron))
    debugEnviron = process.env.NODE_DEBUG || <span class="hljs-string">''</span>;
  <span class="hljs-keyword">set</span> = <span class="hljs-keyword">set</span>.toUpperCase();
  if (!debugs[<span class="hljs-keyword">set</span>]) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'\\b'</span> + <span class="hljs-keyword">set</span> + '\\b', 'i').test(debugEnviron)) {
      <span class="hljs-keyword">var</span> pid = process.pid;
      debugs[<span class="hljs-keyword">set</span>] = function() {
        <span class="hljs-keyword">var</span> msg = exports.format.apply(exports, <span class="hljs-built_in">arguments</span>);
        <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'%s %d: %s'</span>, <span class="hljs-keyword">set</span>, pid, msg);
      };
    } else {
      debugs[<span class="hljs-keyword">set</span>] = function() {};
    }
  }
  <span class="hljs-keyword">return</span> debugs[<span class="hljs-keyword">set</span>];
};


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-114" id="section-114"></a>
</div>
<div class="dox">
<div class="summary">
<p>Echos the value of a value. Trys to print the value out
in the best way possible given the different types.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">obj</span>
<span class="dox_type">Object</span>
<span>The object to print out.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">opts</span>
<span class="dox_type">Object</span>
<span>Optional options object that alters the output.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-comment">/* legacy: obj, showHidden, depth, colors*/</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inspect</span>(<span class="hljs-params">obj, opts</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-115" id="section-115"></a>
</div>
<p>default options</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> ctx = {
    <span class="hljs-attr">seen</span>: [],
    <span class="hljs-attr">stylize</span>: stylizeNoColor
  };
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-116" id="section-116"></a>
</div>
<p>legacy...</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &gt;= <span class="hljs-number">3</span>) ctx.depth = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">2</span>];
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &gt;= <span class="hljs-number">4</span>) ctx.colors = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">3</span>];
  <span class="hljs-keyword">if</span> (isBoolean(opts)) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-117" id="section-117"></a>
</div>
<p>legacy...</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ctx.showHidden = opts;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (opts) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-118" id="section-118"></a>
</div>
<p>got an &quot;options&quot; object</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    exports._extend(ctx, opts);
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-119" id="section-119"></a>
</div>
<p>set default options</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (isUndefined(ctx.showHidden)) ctx.showHidden = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">if</span> (isUndefined(ctx.depth)) ctx.depth = <span class="hljs-number">2</span>;
  <span class="hljs-keyword">if</span> (isUndefined(ctx.colors)) ctx.colors = <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">if</span> (isUndefined(ctx.customInspect)) ctx.customInspect = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">if</span> (ctx.colors) ctx.stylize = stylizeWithColor;
  <span class="hljs-keyword">return</span> formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-120" id="section-120"></a>
</div>
<p>http://en.wikipedia.org/wiki/ANSI_escape_code#graphics</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">inspect.colors = {
  <span class="hljs-string">'bold'</span> : [<span class="hljs-number">1</span>, <span class="hljs-number">22</span>],
  <span class="hljs-string">'italic'</span> : [<span class="hljs-number">3</span>, <span class="hljs-number">23</span>],
  <span class="hljs-string">'underline'</span> : [<span class="hljs-number">4</span>, <span class="hljs-number">24</span>],
  <span class="hljs-string">'inverse'</span> : [<span class="hljs-number">7</span>, <span class="hljs-number">27</span>],
  <span class="hljs-string">'white'</span> : [<span class="hljs-number">37</span>, <span class="hljs-number">39</span>],
  <span class="hljs-string">'grey'</span> : [<span class="hljs-number">90</span>, <span class="hljs-number">39</span>],
  <span class="hljs-string">'black'</span> : [<span class="hljs-number">30</span>, <span class="hljs-number">39</span>],
  <span class="hljs-string">'blue'</span> : [<span class="hljs-number">34</span>, <span class="hljs-number">39</span>],
  <span class="hljs-string">'cyan'</span> : [<span class="hljs-number">36</span>, <span class="hljs-number">39</span>],
  <span class="hljs-string">'green'</span> : [<span class="hljs-number">32</span>, <span class="hljs-number">39</span>],
  <span class="hljs-string">'magenta'</span> : [<span class="hljs-number">35</span>, <span class="hljs-number">39</span>],
  <span class="hljs-string">'red'</span> : [<span class="hljs-number">31</span>, <span class="hljs-number">39</span>],
  <span class="hljs-string">'yellow'</span> : [<span class="hljs-number">33</span>, <span class="hljs-number">39</span>]
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-121" id="section-121"></a>
</div>
<p>Don't use 'blue' not visible on cmd.exe</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">inspect.styles = {
  <span class="hljs-string">'special'</span>: <span class="hljs-string">'cyan'</span>,
  <span class="hljs-string">'number'</span>: <span class="hljs-string">'yellow'</span>,
  <span class="hljs-string">'boolean'</span>: <span class="hljs-string">'yellow'</span>,
  <span class="hljs-string">'undefined'</span>: <span class="hljs-string">'grey'</span>,
  <span class="hljs-string">'null'</span>: <span class="hljs-string">'bold'</span>,
  <span class="hljs-string">'string'</span>: <span class="hljs-string">'green'</span>,
  <span class="hljs-string">'date'</span>: <span class="hljs-string">'magenta'</span>,
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-122" id="section-122"></a>
</div>
<p>&quot;name&quot;: intentionally not styling</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-string">'regexp'</span>: <span class="hljs-string">'red'</span>
};


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stylizeWithColor</span>(<span class="hljs-params">str, styleType</span>) </span>{
  <span class="hljs-keyword">var</span> style = inspect.styles[styleType];

  <span class="hljs-keyword">if</span> (style) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'\u001b['</span> + inspect.colors[style][<span class="hljs-number">0</span>] + <span class="hljs-string">'m'</span> + str +
           <span class="hljs-string">'\u001b['</span> + inspect.colors[style][<span class="hljs-number">1</span>] + <span class="hljs-string">'m'</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> str;
  }
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stylizeNoColor</span>(<span class="hljs-params">str, styleType</span>) </span>{
  <span class="hljs-keyword">return</span> str;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">arrayToHash</span>(<span class="hljs-params">array</span>) </span>{
  <span class="hljs-keyword">var</span> hash = {};

  array.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val, idx</span>) </span>{
    hash[val] = <span class="hljs-literal">true</span>;
  });

  <span class="hljs-keyword">return</span> hash;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatValue</span>(<span class="hljs-params">ctx, value, recurseTimes</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-123" id="section-123"></a>
</div>
<p>Provide a hook for user-specified inspect functions.
Check that value is an object with an inspect function on it</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (ctx.customInspect &amp;&amp;
      value &amp;&amp;
      isFunction(value.inspect) &amp;&amp;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-124" id="section-124"></a>
</div>
<p>Filter out the util module, it's inspect function is special</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      value.inspect !== exports.inspect &amp;&amp;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-125" id="section-125"></a>
</div>
<p>Also filter out any prototype objects using the circular check.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      !(value.constructor &amp;&amp; value.constructor.prototype === value)) {
    <span class="hljs-keyword">var</span> ret = value.inspect(recurseTimes, ctx);
    <span class="hljs-keyword">if</span> (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    <span class="hljs-keyword">return</span> ret;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-126" id="section-126"></a>
</div>
<p>Primitive types cannot have properties</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> primitive = formatPrimitive(ctx, value);
  <span class="hljs-keyword">if</span> (primitive) {
    <span class="hljs-keyword">return</span> primitive;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-127" id="section-127"></a>
</div>
<p>Look up the keys of the object.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(value);
  <span class="hljs-keyword">var</span> visibleKeys = arrayToHash(keys);

  <span class="hljs-keyword">if</span> (ctx.showHidden) {
    keys = <span class="hljs-built_in">Object</span>.getOwnPropertyNames(value);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-128" id="section-128"></a>
</div>
<p>IE doesn't make error fields non-enumerable
http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (isError(value)
      &amp;&amp; (keys.indexOf(<span class="hljs-string">'message'</span>) &gt;= <span class="hljs-number">0</span> || keys.indexOf(<span class="hljs-string">'description'</span>) &gt;= <span class="hljs-number">0</span>)) {
    <span class="hljs-keyword">return</span> formatError(value);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-129" id="section-129"></a>
</div>
<p>Some type of object without properties can be shortcutted.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (keys.length === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span> (isFunction(value)) {
      <span class="hljs-keyword">var</span> name = value.name ? <span class="hljs-string">': '</span> + value.name : <span class="hljs-string">''</span>;
      <span class="hljs-keyword">return</span> ctx.stylize(<span class="hljs-string">'[Function'</span> + name + <span class="hljs-string">']'</span>, <span class="hljs-string">'special'</span>);
    }
    <span class="hljs-keyword">if</span> (isRegExp(value)) {
      <span class="hljs-keyword">return</span> ctx.stylize(<span class="hljs-built_in">RegExp</span>.prototype.toString.call(value), <span class="hljs-string">'regexp'</span>);
    }
    <span class="hljs-keyword">if</span> (isDate(value)) {
      <span class="hljs-keyword">return</span> ctx.stylize(<span class="hljs-built_in">Date</span>.prototype.toString.call(value), <span class="hljs-string">'date'</span>);
    }
    <span class="hljs-keyword">if</span> (isError(value)) {
      <span class="hljs-keyword">return</span> formatError(value);
    }
  }

  <span class="hljs-keyword">var</span> base = <span class="hljs-string">''</span>, array = <span class="hljs-literal">false</span>, braces = [<span class="hljs-string">'{'</span>, <span class="hljs-string">'}'</span>];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-130" id="section-130"></a>
</div>
<p>Make Array say that they are Array</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (isArray(value)) {
    array = <span class="hljs-literal">true</span>;
    braces = [<span class="hljs-string">'['</span>, <span class="hljs-string">']'</span>];
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-131" id="section-131"></a>
</div>
<p>Make functions say that they are functions</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (isFunction(value)) {
    <span class="hljs-keyword">var</span> n = value.name ? <span class="hljs-string">': '</span> + value.name : <span class="hljs-string">''</span>;
    base = <span class="hljs-string">' [Function'</span> + n + <span class="hljs-string">']'</span>;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-132" id="section-132"></a>
</div>
<p>Make RegExps say that they are RegExps</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (isRegExp(value)) {
    base = <span class="hljs-string">' '</span> + <span class="hljs-built_in">RegExp</span>.prototype.toString.call(value);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-133" id="section-133"></a>
</div>
<p>Make dates with properties first say the date</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (isDate(value)) {
    base = <span class="hljs-string">' '</span> + <span class="hljs-built_in">Date</span>.prototype.toUTCString.call(value);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-134" id="section-134"></a>
</div>
<p>Make error with message first say the error</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (isError(value)) {
    base = <span class="hljs-string">' '</span> + formatError(value);
  }

  <span class="hljs-keyword">if</span> (keys.length === <span class="hljs-number">0</span> &amp;&amp; (!array || value.length == <span class="hljs-number">0</span>)) {
    <span class="hljs-keyword">return</span> braces[<span class="hljs-number">0</span>] + base + braces[<span class="hljs-number">1</span>];
  }

  <span class="hljs-keyword">if</span> (recurseTimes &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span> (isRegExp(value)) {
      <span class="hljs-keyword">return</span> ctx.stylize(<span class="hljs-built_in">RegExp</span>.prototype.toString.call(value), <span class="hljs-string">'regexp'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> ctx.stylize(<span class="hljs-string">'[Object]'</span>, <span class="hljs-string">'special'</span>);
    }
  }

  ctx.seen.push(value);

  <span class="hljs-keyword">var</span> output;
  <span class="hljs-keyword">if</span> (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } <span class="hljs-keyword">else</span> {
    output = keys.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
      <span class="hljs-keyword">return</span> formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();

  <span class="hljs-keyword">return</span> reduceToSingleString(output, base, braces);
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatPrimitive</span>(<span class="hljs-params">ctx, value</span>) </span>{
  <span class="hljs-keyword">if</span> (isUndefined(value))
    <span class="hljs-keyword">return</span> ctx.stylize(<span class="hljs-string">'undefined'</span>, <span class="hljs-string">'undefined'</span>);
  <span class="hljs-keyword">if</span> (isString(value)) {
    <span class="hljs-keyword">var</span> simple = <span class="hljs-string">'\''</span> + <span class="hljs-built_in">JSON</span>.stringify(value).replace(<span class="hljs-regexp">/^"|"$/g</span>, <span class="hljs-string">''</span>)
                                             .replace(<span class="hljs-regexp">/'/g</span>, <span class="hljs-string">"\\'"</span>)
                                             .replace(<span class="hljs-regexp">/\\"/g</span>, <span class="hljs-string">'"'</span>) + <span class="hljs-string">'\''</span>;
    <span class="hljs-keyword">return</span> ctx.stylize(simple, <span class="hljs-string">'string'</span>);
  }
  <span class="hljs-keyword">if</span> (isNumber(value))
    <span class="hljs-keyword">return</span> ctx.stylize(<span class="hljs-string">''</span> + value, <span class="hljs-string">'number'</span>);
  <span class="hljs-keyword">if</span> (isBoolean(value))
    <span class="hljs-keyword">return</span> ctx.stylize(<span class="hljs-string">''</span> + value, <span class="hljs-string">'boolean'</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-135" id="section-135"></a>
</div>
<p>For some reason typeof null is &quot;object&quot;, so special case here.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (isNull(value))
    <span class="hljs-keyword">return</span> ctx.stylize(<span class="hljs-string">'null'</span>, <span class="hljs-string">'null'</span>);
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatError</span>(<span class="hljs-params">value</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">'['</span> + <span class="hljs-built_in">Error</span>.prototype.toString.call(value) + <span class="hljs-string">']'</span>;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatArray</span>(<span class="hljs-params">ctx, value, recurseTimes, visibleKeys, keys</span>) </span>{
  <span class="hljs-keyword">var</span> output = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = value.length; i &lt; l; ++i) {
    <span class="hljs-keyword">if</span> (hasOwnProperty(value, <span class="hljs-built_in">String</span>(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          <span class="hljs-built_in">String</span>(i), <span class="hljs-literal">true</span>));
    } <span class="hljs-keyword">else</span> {
      output.push(<span class="hljs-string">''</span>);
    }
  }
  keys.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
    <span class="hljs-keyword">if</span> (!key.match(<span class="hljs-regexp">/^\d+$/</span>)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          key, <span class="hljs-literal">true</span>));
    }
  });
  <span class="hljs-keyword">return</span> output;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatProperty</span>(<span class="hljs-params">ctx, value, recurseTimes, visibleKeys, key, array</span>) </span>{
  <span class="hljs-keyword">var</span> name, str, desc;
  desc = <span class="hljs-built_in">Object</span>.getOwnPropertyDescriptor(value, key) || { <span class="hljs-attr">value</span>: value[key] };
  <span class="hljs-keyword">if</span> (desc.get) {
    <span class="hljs-keyword">if</span> (desc.set) {
      str = ctx.stylize(<span class="hljs-string">'[Getter/Setter]'</span>, <span class="hljs-string">'special'</span>);
    } <span class="hljs-keyword">else</span> {
      str = ctx.stylize(<span class="hljs-string">'[Getter]'</span>, <span class="hljs-string">'special'</span>);
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">if</span> (desc.set) {
      str = ctx.stylize(<span class="hljs-string">'[Setter]'</span>, <span class="hljs-string">'special'</span>);
    }
  }
  <span class="hljs-keyword">if</span> (!hasOwnProperty(visibleKeys, key)) {
    name = <span class="hljs-string">'['</span> + key + <span class="hljs-string">']'</span>;
  }
  <span class="hljs-keyword">if</span> (!str) {
    <span class="hljs-keyword">if</span> (ctx.seen.indexOf(desc.value) &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">if</span> (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, <span class="hljs-literal">null</span>);
      } <span class="hljs-keyword">else</span> {
        str = formatValue(ctx, desc.value, recurseTimes - <span class="hljs-number">1</span>);
      }
      <span class="hljs-keyword">if</span> (str.indexOf(<span class="hljs-string">'\n'</span>) &gt; <span class="hljs-number">-1</span>) {
        <span class="hljs-keyword">if</span> (array) {
          str = str.split(<span class="hljs-string">'\n'</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">line</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'  '</span> + line;
          }).join(<span class="hljs-string">'\n'</span>).substr(<span class="hljs-number">2</span>);
        } <span class="hljs-keyword">else</span> {
          str = <span class="hljs-string">'\n'</span> + str.split(<span class="hljs-string">'\n'</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">line</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-string">'   '</span> + line;
          }).join(<span class="hljs-string">'\n'</span>);
        }
      }
    } <span class="hljs-keyword">else</span> {
      str = ctx.stylize(<span class="hljs-string">'[Circular]'</span>, <span class="hljs-string">'special'</span>);
    }
  }
  <span class="hljs-keyword">if</span> (isUndefined(name)) {
    <span class="hljs-keyword">if</span> (array &amp;&amp; key.match(<span class="hljs-regexp">/^\d+$/</span>)) {
      <span class="hljs-keyword">return</span> str;
    }
    name = <span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-string">''</span> + key);
    <span class="hljs-keyword">if</span> (name.match(<span class="hljs-regexp">/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/</span>)) {
      name = name.substr(<span class="hljs-number">1</span>, name.length - <span class="hljs-number">2</span>);
      name = ctx.stylize(name, <span class="hljs-string">'name'</span>);
    } <span class="hljs-keyword">else</span> {
      name = name.replace(<span class="hljs-regexp">/'/g</span>, <span class="hljs-string">"\\'"</span>)
                 .replace(<span class="hljs-regexp">/\\"/g</span>, <span class="hljs-string">'"'</span>)
                 .replace(<span class="hljs-regexp">/(^"|"$)/g</span>, <span class="hljs-string">"'"</span>);
      name = ctx.stylize(name, <span class="hljs-string">'string'</span>);
    }
  }

  <span class="hljs-keyword">return</span> name + <span class="hljs-string">': '</span> + str;
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reduceToSingleString</span>(<span class="hljs-params">output, base, braces</span>) </span>{
  <span class="hljs-keyword">var</span> numLinesEst = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">var</span> length = output.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prev, cur</span>) </span>{
    numLinesEst++;
    <span class="hljs-keyword">if</span> (cur.indexOf(<span class="hljs-string">'\n'</span>) &gt;= <span class="hljs-number">0</span>) numLinesEst++;
    <span class="hljs-keyword">return</span> prev + cur.replace(<span class="hljs-regexp">/\u001b\[\d\d?m/g</span>, <span class="hljs-string">''</span>).length + <span class="hljs-number">1</span>;
  }, <span class="hljs-number">0</span>);

  <span class="hljs-keyword">if</span> (length &gt; <span class="hljs-number">60</span>) {
    <span class="hljs-keyword">return</span> braces[<span class="hljs-number">0</span>] +
           (base === <span class="hljs-string">''</span> ? <span class="hljs-string">''</span> : base + <span class="hljs-string">'\n '</span>) +
           <span class="hljs-string">' '</span> +
           output.join(<span class="hljs-string">',\n  '</span>) +
           <span class="hljs-string">' '</span> +
           braces[<span class="hljs-number">1</span>];
  }

  <span class="hljs-keyword">return</span> braces[<span class="hljs-number">0</span>] + base + <span class="hljs-string">' '</span> + output.join(<span class="hljs-string">', '</span>) + <span class="hljs-string">' '</span> + braces[<span class="hljs-number">1</span>];
}


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-136" id="section-136"></a>
</div>
<p>NOTE: These type checking functions intentionally don't use <code>instanceof</code>
because it is fragile and can be easily faked with <code>Object.create()</code>.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isArray</span>(<span class="hljs-params">ar</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.isArray(ar);
}
exports.isArray = isArray;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isBoolean</span>(<span class="hljs-params">arg</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'boolean'</span>;
}
exports.isBoolean = isBoolean;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNull</span>(<span class="hljs-params">arg</span>) </span>{
  <span class="hljs-keyword">return</span> arg === <span class="hljs-literal">null</span>;
}
exports.isNull = isNull;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNullOrUndefined</span>(<span class="hljs-params">arg</span>) </span>{
  <span class="hljs-keyword">return</span> arg == <span class="hljs-literal">null</span>;
}
exports.isNullOrUndefined = isNullOrUndefined;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumber</span>(<span class="hljs-params">arg</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'number'</span>;
}
exports.isNumber = isNumber;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isString</span>(<span class="hljs-params">arg</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'string'</span>;
}
exports.isString = isString;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isSymbol</span>(<span class="hljs-params">arg</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'symbol'</span>;
}
exports.isSymbol = isSymbol;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isUndefined</span>(<span class="hljs-params">arg</span>) </span>{
  <span class="hljs-keyword">return</span> arg === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
}
exports.isUndefined = isUndefined;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isRegExp</span>(<span class="hljs-params">re</span>) </span>{
  <span class="hljs-keyword">return</span> isObject(re) &amp;&amp; objectToString(re) === <span class="hljs-string">'[object RegExp]'</span>;
}
exports.isRegExp = isRegExp;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isObject</span>(<span class="hljs-params">arg</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'object'</span> &amp;&amp; arg !== <span class="hljs-literal">null</span>;
}
exports.isObject = isObject;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDate</span>(<span class="hljs-params">d</span>) </span>{
  <span class="hljs-keyword">return</span> isObject(d) &amp;&amp; objectToString(d) === <span class="hljs-string">'[object Date]'</span>;
}
exports.isDate = isDate;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isError</span>(<span class="hljs-params">e</span>) </span>{
  <span class="hljs-keyword">return</span> isObject(e) &amp;&amp;
      (objectToString(e) === <span class="hljs-string">'[object Error]'</span> || e <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>);
}
exports.isError = isError;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isFunction</span>(<span class="hljs-params">arg</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'function'</span>;
}
exports.isFunction = isFunction;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPrimitive</span>(<span class="hljs-params">arg</span>) </span>{
  <span class="hljs-keyword">return</span> arg === <span class="hljs-literal">null</span> ||
         <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'boolean'</span> ||
         <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'number'</span> ||
         <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'string'</span> ||
         <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'symbol'</span> ||  <span class="hljs-comment">// ES6 symbol</span>
         <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'undefined'</span>;
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = __webpack_require__(<span class="hljs-number">25</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">objectToString</span>(<span class="hljs-params">o</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(o);
}


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pad</span>(<span class="hljs-params">n</span>) </span>{
  <span class="hljs-keyword">return</span> n &lt; <span class="hljs-number">10</span> ? <span class="hljs-string">'0'</span> + n.toString(<span class="hljs-number">10</span>) : n.toString(<span class="hljs-number">10</span>);
}


<span class="hljs-keyword">var</span> months = [<span class="hljs-string">'Jan'</span>, <span class="hljs-string">'Feb'</span>, <span class="hljs-string">'Mar'</span>, <span class="hljs-string">'Apr'</span>, <span class="hljs-string">'May'</span>, <span class="hljs-string">'Jun'</span>, <span class="hljs-string">'Jul'</span>, <span class="hljs-string">'Aug'</span>, <span class="hljs-string">'Sep'</span>,
              <span class="hljs-string">'Oct'</span>, <span class="hljs-string">'Nov'</span>, <span class="hljs-string">'Dec'</span>];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-137" id="section-137"></a>
</div>
<p>26 Feb 16:19:34</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timestamp</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
  <span class="hljs-keyword">var</span> time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(<span class="hljs-string">':'</span>);
  <span class="hljs-keyword">return</span> [d.getDate(), months[d.getMonth()], time].join(<span class="hljs-string">' '</span>);
}


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-138" id="section-138"></a>
</div>
<p>log is just a thin wrapper to console.log that prepends a timestamp</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">exports.log = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'%s - %s'</span>, timestamp(), exports.format.apply(exports, <span class="hljs-built_in">arguments</span>));
};


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-139" id="section-139"></a>
</div>
<div class="dox">
<div class="summary">
<p>Inherit the prototype methods from one constructor into another.</p>
</div>
<div class="body">
<p>The Function.prototype.inherits from lang.js rewritten as a standalone
function (not on Function.prototype). NOTE: If this file is to be loaded
during bootstrapping this function needs to be rewritten using some native
functions as prototype setup using normal JavaScript does not work as
expected during bootstrapping (see mirror.js in r114903).</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">ctor</span>
<span class="dox_type">function</span>
<span>Constructor function which needs to inherit the     prototype.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">superCtor</span>
<span class="dox_type">function</span>
<span>Constructor function to inherit prototype from.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">exports.inherits = __webpack_require__(<span class="hljs-number">26</span>);

exports._extend = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">origin, add</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-140" id="section-140"></a>
</div>
<p>Don't do anything if add isn't an object</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (!add || !isObject(add)) <span class="hljs-keyword">return</span> origin;

  <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys(add);
  <span class="hljs-keyword">var</span> i = keys.length;
  <span class="hljs-keyword">while</span> (i--) {
    origin[keys[i]] = add[keys[i]];
  }
  <span class="hljs-keyword">return</span> origin;
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasOwnProperty</span>(<span class="hljs-params">obj, prop</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(obj, prop);
}

<span class="hljs-keyword">var</span> kCustomPromisifiedSymbol = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Symbol</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">'util.promisify.custom'</span>) : <span class="hljs-literal">undefined</span>;

exports.promisify = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">promisify</span>(<span class="hljs-params">original</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> original !== <span class="hljs-string">'function'</span>)
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'The "original" argument must be of type Function'</span>);

  <span class="hljs-keyword">if</span> (kCustomPromisifiedSymbol &amp;&amp; original[kCustomPromisifiedSymbol]) {
    <span class="hljs-keyword">var</span> fn = original[kCustomPromisifiedSymbol];
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> fn !== <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'The "util.promisify.custom" argument must be of type Function'</span>);
    }
    <span class="hljs-built_in">Object</span>.defineProperty(fn, kCustomPromisifiedSymbol, {
      <span class="hljs-attr">value</span>: fn, <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>
    });
    <span class="hljs-keyword">return</span> fn;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> promiseResolve, promiseReject;
    <span class="hljs-keyword">var</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>{
      promiseResolve = resolve;
      promiseReject = reject;
    });

    <span class="hljs-keyword">var</span> args = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++) {
      args.push(<span class="hljs-built_in">arguments</span>[i]);
    }
    args.push(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, value</span>) </span>{
      <span class="hljs-keyword">if</span> (err) {
        promiseReject(err);
      } <span class="hljs-keyword">else</span> {
        promiseResolve(value);
      }
    });

    <span class="hljs-keyword">try</span> {
      original.apply(<span class="hljs-keyword">this</span>, args);
    } <span class="hljs-keyword">catch</span> (err) {
      promiseReject(err);
    }

    <span class="hljs-keyword">return</span> promise;
  }

  <span class="hljs-built_in">Object</span>.setPrototypeOf(fn, <span class="hljs-built_in">Object</span>.getPrototypeOf(original));

  <span class="hljs-keyword">if</span> (kCustomPromisifiedSymbol) <span class="hljs-built_in">Object</span>.defineProperty(fn, kCustomPromisifiedSymbol, {
    <span class="hljs-attr">value</span>: fn, <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>
  });
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.defineProperties(
    fn,
    getOwnPropertyDescriptors(original)
  );
}

exports.promisify.custom = kCustomPromisifiedSymbol

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callbackifyOnRejected</span>(<span class="hljs-params">reason, cb</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-141" id="section-141"></a>
</div>
<p><code>!reason</code> guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).
Because <code>null</code> is a special error value in callbacks which means &quot;no error
occurred&quot;, we error-wrap so the callback consumer can distinguish between
&quot;the promise rejected with null&quot; or &quot;the promise fulfilled with undefined&quot;.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (!reason) {
    <span class="hljs-keyword">var</span> newReason = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Promise was rejected with a falsy value'</span>);
    newReason.reason = reason;
    reason = newReason;
  }
  <span class="hljs-keyword">return</span> cb(reason);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callbackify</span>(<span class="hljs-params">original</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> original !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'The "original" argument must be of type Function'</span>);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-142" id="section-142"></a>
</div>
<p>We DO NOT return the promise as it gives the user a false sense that
the promise is actually somehow related to the callback's execution
and that the callback throwing will reject the promise.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callbackified</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> args = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++) {
      args.push(<span class="hljs-built_in">arguments</span>[i]);
    }

    <span class="hljs-keyword">var</span> maybeCb = args.pop();
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> maybeCb !== <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'The last argument must be of type Function'</span>);
    }
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">var</span> cb = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> maybeCb.apply(self, <span class="hljs-built_in">arguments</span>);
    };
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-143" id="section-143"></a>
</div>
<p>In true node style we process the callback on <code>nextTick</code> with all the
implications (stack, <code>uncaughtException</code>, <code>async_hooks</code>)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    original.apply(<span class="hljs-keyword">this</span>, args)
      .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">ret</span>) </span>{ process.nextTick(cb, <span class="hljs-literal">null</span>, ret) },
            <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">rej</span>) </span>{ process.nextTick(callbackifyOnRejected, rej, cb) });
  }

  <span class="hljs-built_in">Object</span>.setPrototypeOf(callbackified, <span class="hljs-built_in">Object</span>.getPrototypeOf(original));
  <span class="hljs-built_in">Object</span>.defineProperties(callbackified,
                          getOwnPropertyDescriptors(original));
  <span class="hljs-keyword">return</span> callbackified;
}
exports.callbackify = callbackify;

<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(<span class="hljs-keyword">this</span>, __webpack_require__(<span class="hljs-number">24</span>)))

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 24 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-144" id="section-144"></a>
</div>
<p>shim for using process in browser</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> process = <span class="hljs-built_in">module</span>.exports = {};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-145" id="section-145"></a>
</div>
<p>cached from whatever global is present so that test runners that stub it
don't break things.  But we need to wrap it in a try catch in case it is
wrapped in strict mode code which doesn't define any globals.  It's inside a
function because try/catches deoptimize in certain engines.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> cachedSetTimeout;
<span class="hljs-keyword">var</span> cachedClearTimeout;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultSetTimout</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'setTimeout has not been defined'</span>);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultClearTimeout</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'clearTimeout has not been defined'</span>);
}
(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> setTimeout === <span class="hljs-string">'function'</span>) {
            cachedSetTimeout = setTimeout;
        } <span class="hljs-keyword">else</span> {
            cachedSetTimeout = defaultSetTimout;
        }
    } <span class="hljs-keyword">catch</span> (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> clearTimeout === <span class="hljs-string">'function'</span>) {
            cachedClearTimeout = clearTimeout;
        } <span class="hljs-keyword">else</span> {
            cachedClearTimeout = defaultClearTimeout;
        }
    } <span class="hljs-keyword">catch</span> (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">runTimeout</span>(<span class="hljs-params">fun</span>) </span>{
    <span class="hljs-keyword">if</span> (cachedSetTimeout === setTimeout) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-146" id="section-146"></a>
</div>
<p>normal enviroments in sane situations</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">return</span> setTimeout(fun, <span class="hljs-number">0</span>);
    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-147" id="section-147"></a>
</div>
<p>if setTimeout wasn't available but was latter defined</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) &amp;&amp; setTimeout) {
        cachedSetTimeout = setTimeout;
        <span class="hljs-keyword">return</span> setTimeout(fun, <span class="hljs-number">0</span>);
    }
    <span class="hljs-keyword">try</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-148" id="section-148"></a>
</div>
<p>when when somebody has screwed with setTimeout but no I.E. maddness</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">return</span> cachedSetTimeout(fun, <span class="hljs-number">0</span>);
    } <span class="hljs-keyword">catch</span>(e){
        <span class="hljs-keyword">try</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-149" id="section-149"></a>
</div>
<p>When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">return</span> cachedSetTimeout.call(<span class="hljs-literal">null</span>, fun, <span class="hljs-number">0</span>);
        } <span class="hljs-keyword">catch</span>(e){
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-150" id="section-150"></a>
</div>
<p>same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">return</span> cachedSetTimeout.call(<span class="hljs-keyword">this</span>, fun, <span class="hljs-number">0</span>);
        }
    }


}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">runClearTimeout</span>(<span class="hljs-params">marker</span>) </span>{
    <span class="hljs-keyword">if</span> (cachedClearTimeout === clearTimeout) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-151" id="section-151"></a>
</div>
<p>normal enviroments in sane situations</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">return</span> clearTimeout(marker);
    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-152" id="section-152"></a>
</div>
<p>if clearTimeout wasn't available but was latter defined</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) &amp;&amp; clearTimeout) {
        cachedClearTimeout = clearTimeout;
        <span class="hljs-keyword">return</span> clearTimeout(marker);
    }
    <span class="hljs-keyword">try</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-153" id="section-153"></a>
</div>
<p>when when somebody has screwed with setTimeout but no I.E. maddness</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">return</span> cachedClearTimeout(marker);
    } <span class="hljs-keyword">catch</span> (e){
        <span class="hljs-keyword">try</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-154" id="section-154"></a>
</div>
<p>When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">return</span> cachedClearTimeout.call(<span class="hljs-literal">null</span>, marker);
        } <span class="hljs-keyword">catch</span> (e){
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-155" id="section-155"></a>
</div>
<p>same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
Some versions of I.E. have different rules for clearTimeout vs setTimeout</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">return</span> cachedClearTimeout.call(<span class="hljs-keyword">this</span>, marker);
        }
    }



}
<span class="hljs-keyword">var</span> queue = [];
<span class="hljs-keyword">var</span> draining = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">var</span> currentQueue;
<span class="hljs-keyword">var</span> queueIndex = <span class="hljs-number">-1</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cleanUpNextTick</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!draining || !currentQueue) {
        <span class="hljs-keyword">return</span>;
    }
    draining = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } <span class="hljs-keyword">else</span> {
        queueIndex = <span class="hljs-number">-1</span>;
    }
    <span class="hljs-keyword">if</span> (queue.length) {
        drainQueue();
    }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">drainQueue</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (draining) {
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">var</span> timeout = runTimeout(cleanUpNextTick);
    draining = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">var</span> len = queue.length;
    <span class="hljs-keyword">while</span>(len) {
        currentQueue = queue;
        queue = [];
        <span class="hljs-keyword">while</span> (++queueIndex &lt; len) {
            <span class="hljs-keyword">if</span> (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = <span class="hljs-number">-1</span>;
        len = queue.length;
    }
    currentQueue = <span class="hljs-literal">null</span>;
    draining = <span class="hljs-literal">false</span>;
    runClearTimeout(timeout);
}

process.nextTick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fun</span>) </span>{
    <span class="hljs-keyword">var</span> args = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-built_in">arguments</span>.length - <span class="hljs-number">1</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++) {
            args[i - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[i];
        }
    }
    queue.push(<span class="hljs-keyword">new</span> Item(fun, args));
    <span class="hljs-keyword">if</span> (queue.length === <span class="hljs-number">1</span> &amp;&amp; !draining) {
        runTimeout(drainQueue);
    }
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-156" id="section-156"></a>
</div>
<p>v8 likes predictible objects</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Item</span>(<span class="hljs-params">fun, array</span>) </span>{
    <span class="hljs-keyword">this</span>.fun = fun;
    <span class="hljs-keyword">this</span>.array = array;
}
Item.prototype.run = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.fun.apply(<span class="hljs-literal">null</span>, <span class="hljs-keyword">this</span>.array);
};
process.title = <span class="hljs-string">'browser'</span>;
process.browser = <span class="hljs-literal">true</span>;
process.env = {};
process.argv = [];
process.version = <span class="hljs-string">''</span>; <span class="hljs-comment">// empty string to avoid regexp issues</span>
process.versions = {};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">noop</span>(<span class="hljs-params"></span>) </span>{}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{ <span class="hljs-keyword">return</span> [] }

process.binding = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'process.binding is not supported'</span>);
};

process.cwd = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">'/'</span> };
process.chdir = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">dir</span>) </span>{
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'process.chdir is not supported'</span>);
};
process.umask = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; };


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 25 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isBuffer</span>(<span class="hljs-params">arg</span>) </span>{
  <span class="hljs-keyword">return</span> arg &amp;&amp; <span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'object'</span>
    &amp;&amp; <span class="hljs-keyword">typeof</span> arg.copy === <span class="hljs-string">'function'</span>
    &amp;&amp; <span class="hljs-keyword">typeof</span> arg.fill === <span class="hljs-string">'function'</span>
    &amp;&amp; <span class="hljs-keyword">typeof</span> arg.readUInt8 === <span class="hljs-string">'function'</span>;
}

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 26 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Object</span>.create === <span class="hljs-string">'function'</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-157" id="section-157"></a>
</div>
<p>implementation from standard node.js 'util' module</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inherits</span>(<span class="hljs-params">ctor, superCtor</span>) </span>{
    ctor.super_ = superCtor
    ctor.prototype = <span class="hljs-built_in">Object</span>.create(superCtor.prototype, {
      <span class="hljs-attr">constructor</span>: {
        <span class="hljs-attr">value</span>: ctor,
        <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>
      }
    });
  };
} <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-158" id="section-158"></a>
</div>
<p>old school shim for old browsers</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inherits</span>(<span class="hljs-params">ctor, superCtor</span>) </span>{
    ctor.super_ = superCtor
    <span class="hljs-keyword">var</span> TempCtor = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = <span class="hljs-keyword">new</span> TempCtor()
    ctor.prototype.constructor = ctor
  }
}


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 27 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

<span class="hljs-built_in">module</span>.exports = __WEBPACK_EXTERNAL_MODULE__27__;

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 28 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-159" id="section-159"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> crypto = __webpack_require__(<span class="hljs-number">29</span>)
<span class="hljs-keyword">const</span> JWA = __webpack_require__(<span class="hljs-number">32</span>)
<span class="hljs-keyword">const</span> JWK = __webpack_require__(<span class="hljs-number">50</span>)
<span class="hljs-keyword">const</span> JWKSet = __webpack_require__(<span class="hljs-number">51</span>)
<span class="hljs-keyword">const</span> JWT = __webpack_require__(<span class="hljs-number">52</span>)
<span class="hljs-keyword">const</span> JWS = __webpack_require__(<span class="hljs-number">53</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-160" id="section-160"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = {
  crypto,
  JWA,
  JWK,
  JWKSet,
  JWT,
  JWS
}


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 29 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-keyword">const</span> imported = __webpack_require__(<span class="hljs-number">30</span>)

<span class="hljs-built_in">module</span>.exports = (imported.default ? imported.default : imported)


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 30 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">__webpack_module__, __webpack_exports__, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
__webpack_require__.r(__webpack_exports__);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _webcrypto_shim_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(<span class="hljs-number">31</span>);

<span class="hljs-comment">/* harmony default export */</span> __webpack_exports__[<span class="hljs-string">"default"</span>] = (<span class="hljs-built_in">window</span>.crypto);


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 31 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">__webpack_module__, __webpack_exports__, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
__webpack_require__.r(__webpack_exports__);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-161" id="section-161"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">global, factory</span>) </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-162" id="section-162"></a>
</div>
<p>AMD. Register as an anonymous module.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        define([], <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> factory(global);
        });
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span> === <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-built_in">module</span>.exports) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-163" id="section-163"></a>
</div>
<p>CommonJS-like environments that support module.exports</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-built_in">module</span>.exports = factory(global);
    } <span class="hljs-keyword">else</span> {
        factory(global);
    }
}(<span class="hljs-keyword">typeof</span> self !== <span class="hljs-string">'undefined'</span> ? self : <span class="hljs-literal">undefined</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">global</span>) </span>{
    <span class="hljs-string">'use strict'</span>;

    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Promise</span> !== <span class="hljs-string">'function'</span> )
        <span class="hljs-keyword">throw</span> <span class="hljs-string">"Promise support required"</span>;

    <span class="hljs-keyword">var</span> _crypto = global.crypto || global.msCrypto;
    <span class="hljs-keyword">if</span> ( !_crypto ) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">var</span> _subtle = _crypto.subtle || _crypto.webkitSubtle;
    <span class="hljs-keyword">if</span> ( !_subtle ) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">var</span> _Crypto     = global.Crypto || _crypto.constructor || <span class="hljs-built_in">Object</span>,
        _SubtleCrypto = global.SubtleCrypto || _subtle.constructor || <span class="hljs-built_in">Object</span>,
        _CryptoKey  = global.CryptoKey || global.Key || <span class="hljs-built_in">Object</span>;

    <span class="hljs-keyword">var</span> isEdge = global.navigator.userAgent.indexOf(<span class="hljs-string">'Edge/'</span>) &gt; <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">var</span> isIE    = !!global.msCrypto &amp;&amp; !isEdge;
    <span class="hljs-keyword">var</span> isWebkit = !_crypto.subtle &amp;&amp; !!_crypto.webkitSubtle;
    <span class="hljs-keyword">if</span> ( !isIE &amp;&amp; !isWebkit ) <span class="hljs-keyword">return</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">s2a</span> (<span class="hljs-params"> s </span>) </span>{
        <span class="hljs-keyword">return</span> btoa(s).replace(<span class="hljs-regexp">/\=+$/</span>, <span class="hljs-string">''</span>).replace(<span class="hljs-regexp">/\+/g</span>, <span class="hljs-string">'-'</span>).replace(<span class="hljs-regexp">/\//g</span>, <span class="hljs-string">'_'</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">a2s</span> (<span class="hljs-params"> s </span>) </span>{
        s += <span class="hljs-string">'==='</span>, s = s.slice( <span class="hljs-number">0</span>, -s.length % <span class="hljs-number">4</span> );
        <span class="hljs-keyword">return</span> atob( s.replace(<span class="hljs-regexp">/-/g</span>, <span class="hljs-string">'+'</span>).replace(<span class="hljs-regexp">/_/g</span>, <span class="hljs-string">'/'</span>) );
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">s2b</span> (<span class="hljs-params"> s </span>) </span>{
        <span class="hljs-keyword">var</span> b = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(s.length);
        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; s.length; i++ ) b[i] = s.charCodeAt(i);
        <span class="hljs-keyword">return</span> b;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">b2s</span> (<span class="hljs-params"> b </span>) </span>{
        <span class="hljs-keyword">if</span> ( b <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span> ) b = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(b);
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">String</span>.fromCharCode.apply( <span class="hljs-built_in">String</span>, b );
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">alg</span> (<span class="hljs-params"> a </span>) </span>{
        <span class="hljs-keyword">var</span> r = { <span class="hljs-string">'name'</span>: (a.name || a || <span class="hljs-string">''</span>).toUpperCase().replace(<span class="hljs-string">'V'</span>,<span class="hljs-string">'v'</span>) };
        <span class="hljs-keyword">switch</span> ( r.name ) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">'SHA-1'</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">'SHA-256'</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">'SHA-384'</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">'SHA-512'</span>:
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">'AES-CBC'</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">'AES-GCM'</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">'AES-KW'</span>:
                <span class="hljs-keyword">if</span> ( a.length ) r[<span class="hljs-string">'length'</span>] = a.length;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">'HMAC'</span>:
                <span class="hljs-keyword">if</span> ( a.hash ) r[<span class="hljs-string">'hash'</span>] = alg(a.hash);
                <span class="hljs-keyword">if</span> ( a.length ) r[<span class="hljs-string">'length'</span>] = a.length;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">'RSAES-PKCS1-v1_5'</span>:
                <span class="hljs-keyword">if</span> ( a.publicExponent ) r[<span class="hljs-string">'publicExponent'</span>] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(a.publicExponent);
                <span class="hljs-keyword">if</span> ( a.modulusLength ) r[<span class="hljs-string">'modulusLength'</span>] = a.modulusLength;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">'RSASSA-PKCS1-v1_5'</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">'RSA-OAEP'</span>:
                <span class="hljs-keyword">if</span> ( a.hash ) r[<span class="hljs-string">'hash'</span>] = alg(a.hash);
                <span class="hljs-keyword">if</span> ( a.publicExponent ) r[<span class="hljs-string">'publicExponent'</span>] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(a.publicExponent);
                <span class="hljs-keyword">if</span> ( a.modulusLength ) r[<span class="hljs-string">'modulusLength'</span>] = a.modulusLength;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">SyntaxError</span>(<span class="hljs-string">"Bad algorithm name"</span>);
        }
        <span class="hljs-keyword">return</span> r;
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jwkAlg</span> (<span class="hljs-params"> a </span>) </span>{
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'HMAC'</span>: {
                <span class="hljs-string">'SHA-1'</span>: <span class="hljs-string">'HS1'</span>,
                <span class="hljs-string">'SHA-256'</span>: <span class="hljs-string">'HS256'</span>,
                <span class="hljs-string">'SHA-384'</span>: <span class="hljs-string">'HS384'</span>,
                <span class="hljs-string">'SHA-512'</span>: <span class="hljs-string">'HS512'</span>,
            },
            <span class="hljs-string">'RSASSA-PKCS1-v1_5'</span>: {
                <span class="hljs-string">'SHA-1'</span>: <span class="hljs-string">'RS1'</span>,
                <span class="hljs-string">'SHA-256'</span>: <span class="hljs-string">'RS256'</span>,
                <span class="hljs-string">'SHA-384'</span>: <span class="hljs-string">'RS384'</span>,
                <span class="hljs-string">'SHA-512'</span>: <span class="hljs-string">'RS512'</span>,
            },
            <span class="hljs-string">'RSAES-PKCS1-v1_5'</span>: {
                <span class="hljs-string">''</span>: <span class="hljs-string">'RSA1_5'</span>,
            },
            <span class="hljs-string">'RSA-OAEP'</span>: {
                <span class="hljs-string">'SHA-1'</span>: <span class="hljs-string">'RSA-OAEP'</span>,
                <span class="hljs-string">'SHA-256'</span>: <span class="hljs-string">'RSA-OAEP-256'</span>,
            },
            <span class="hljs-string">'AES-KW'</span>: {
                <span class="hljs-string">'128'</span>: <span class="hljs-string">'A128KW'</span>,
                <span class="hljs-string">'192'</span>: <span class="hljs-string">'A192KW'</span>,
                <span class="hljs-string">'256'</span>: <span class="hljs-string">'A256KW'</span>,
            },
            <span class="hljs-string">'AES-GCM'</span>: {
                <span class="hljs-string">'128'</span>: <span class="hljs-string">'A128GCM'</span>,
                <span class="hljs-string">'192'</span>: <span class="hljs-string">'A192GCM'</span>,
                <span class="hljs-string">'256'</span>: <span class="hljs-string">'A256GCM'</span>,
            },
            <span class="hljs-string">'AES-CBC'</span>: {
                <span class="hljs-string">'128'</span>: <span class="hljs-string">'A128CBC'</span>,
                <span class="hljs-string">'192'</span>: <span class="hljs-string">'A192CBC'</span>,
                <span class="hljs-string">'256'</span>: <span class="hljs-string">'A256CBC'</span>,
            },
        }[a.name][ ( a.hash || {} ).name || a.length || <span class="hljs-string">''</span> ];
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">b2jwk</span> (<span class="hljs-params"> k </span>) </span>{
        <span class="hljs-keyword">if</span> ( k <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span> || k <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Uint8Array</span> ) k = <span class="hljs-built_in">JSON</span>.parse( <span class="hljs-built_in">decodeURIComponent</span>( <span class="hljs-built_in">escape</span>( b2s(k) ) ) );
        <span class="hljs-keyword">var</span> jwk = { <span class="hljs-string">'kty'</span>: k.kty, <span class="hljs-string">'alg'</span>: k.alg, <span class="hljs-string">'ext'</span>: k.ext || k.extractable };
        <span class="hljs-keyword">switch</span> ( jwk.kty ) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">'oct'</span>:
                jwk.k = k.k;
            <span class="hljs-keyword">case</span> <span class="hljs-string">'RSA'</span>:
                [ <span class="hljs-string">'n'</span>, <span class="hljs-string">'e'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'p'</span>, <span class="hljs-string">'q'</span>, <span class="hljs-string">'dp'</span>, <span class="hljs-string">'dq'</span>, <span class="hljs-string">'qi'</span>, <span class="hljs-string">'oth'</span> ].forEach( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> x </span>) </span>{ <span class="hljs-keyword">if</span> ( x <span class="hljs-keyword">in</span> k ) jwk[x] = k[x] } );
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Unsupported key type"</span>);
        }
        <span class="hljs-keyword">return</span> jwk;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jwk2b</span> (<span class="hljs-params"> k </span>) </span>{
        <span class="hljs-keyword">var</span> jwk = b2jwk(k);
        <span class="hljs-keyword">if</span> ( isIE ) jwk[<span class="hljs-string">'extractable'</span>] = jwk.ext, <span class="hljs-keyword">delete</span> jwk.ext;
        <span class="hljs-keyword">return</span> s2b( <span class="hljs-built_in">unescape</span>( <span class="hljs-built_in">encodeURIComponent</span>( <span class="hljs-built_in">JSON</span>.stringify(jwk) ) ) ).buffer;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pkcs2jwk</span> (<span class="hljs-params"> k </span>) </span>{
        <span class="hljs-keyword">var</span> info = b2der(k), prv = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> ( info.length &gt; <span class="hljs-number">2</span> ) prv = <span class="hljs-literal">true</span>, info.shift(); <span class="hljs-comment">// remove version from PKCS#8 PrivateKeyInfo structure</span>
        <span class="hljs-keyword">var</span> jwk = { <span class="hljs-string">'ext'</span>: <span class="hljs-literal">true</span> };
        <span class="hljs-keyword">switch</span> ( info[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] ) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">'1.2.840.113549.1.1.1'</span>:
                <span class="hljs-keyword">var</span> rsaComp = [ <span class="hljs-string">'n'</span>, <span class="hljs-string">'e'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'p'</span>, <span class="hljs-string">'q'</span>, <span class="hljs-string">'dp'</span>, <span class="hljs-string">'dq'</span>, <span class="hljs-string">'qi'</span> ],
                    rsaKey  = b2der( info[<span class="hljs-number">1</span>] );
                <span class="hljs-keyword">if</span> ( prv ) rsaKey.shift(); <span class="hljs-comment">// remove version from PKCS#1 RSAPrivateKey structure</span>
                <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; rsaKey.length; i++ ) {
                    <span class="hljs-keyword">if</span> ( !rsaKey[i][<span class="hljs-number">0</span>] ) rsaKey[i] = rsaKey[i].subarray(<span class="hljs-number">1</span>);
                    jwk[ rsaComp[i] ] = s2a( b2s( rsaKey[i] ) );
                }
                jwk[<span class="hljs-string">'kty'</span>] = <span class="hljs-string">'RSA'</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Unsupported key type"</span>);
        }
        <span class="hljs-keyword">return</span> jwk;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jwk2pkcs</span> (<span class="hljs-params"> k </span>) </span>{
        <span class="hljs-keyword">var</span> key, info = [ [ <span class="hljs-string">''</span>, <span class="hljs-literal">null</span> ] ], prv = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">switch</span> ( k.kty ) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">'RSA'</span>:
                <span class="hljs-keyword">var</span> rsaComp = [ <span class="hljs-string">'n'</span>, <span class="hljs-string">'e'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'p'</span>, <span class="hljs-string">'q'</span>, <span class="hljs-string">'dp'</span>, <span class="hljs-string">'dq'</span>, <span class="hljs-string">'qi'</span> ],
                    rsaKey = [];
                <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; rsaComp.length; i++ ) {
                    <span class="hljs-keyword">if</span> ( !( rsaComp[i] <span class="hljs-keyword">in</span> k ) ) <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">var</span> b = rsaKey[i] = s2b( a2s( k[ rsaComp[i] ] ) );
                    <span class="hljs-keyword">if</span> ( b[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0x80</span> ) rsaKey[i] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(b.length + <span class="hljs-number">1</span>), rsaKey[i].set( b, <span class="hljs-number">1</span> );
                }
                <span class="hljs-keyword">if</span> ( rsaKey.length &gt; <span class="hljs-number">2</span> ) prv = <span class="hljs-literal">true</span>, rsaKey.unshift( <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>([<span class="hljs-number">0</span>]) ); <span class="hljs-comment">// add version to PKCS#1 RSAPrivateKey structure</span>
                info[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-string">'1.2.840.113549.1.1.1'</span>;
                key = rsaKey;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Unsupported key type"</span>);
        }
        info.push( <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>( der2b(key) ).buffer );
        <span class="hljs-keyword">if</span> ( !prv ) info[<span class="hljs-number">1</span>] = { <span class="hljs-string">'tag'</span>: <span class="hljs-number">0x03</span>, <span class="hljs-string">'value'</span>: info[<span class="hljs-number">1</span>] };
        <span class="hljs-keyword">else</span> info.unshift( <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>([<span class="hljs-number">0</span>]) ); <span class="hljs-comment">// add version to PKCS#8 PrivateKeyInfo structure</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>( der2b(info) ).buffer;
    }

    <span class="hljs-keyword">var</span> oid2str = { <span class="hljs-string">'KoZIhvcNAQEB'</span>: <span class="hljs-string">'1.2.840.113549.1.1.1'</span> },
        str2oid = { <span class="hljs-string">'1.2.840.113549.1.1.1'</span>: <span class="hljs-string">'KoZIhvcNAQEB'</span> };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">b2der</span> (<span class="hljs-params"> buf, ctx </span>) </span>{
        <span class="hljs-keyword">if</span> ( buf <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span> ) buf = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(buf);
        <span class="hljs-keyword">if</span> ( !ctx ) ctx = { <span class="hljs-attr">pos</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">end</span>: buf.length };

        <span class="hljs-keyword">if</span> ( ctx.end - ctx.pos &lt; <span class="hljs-number">2</span> || ctx.end &gt; buf.length ) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">"Malformed DER"</span>);

        <span class="hljs-keyword">var</span> tag = buf[ctx.pos++],
            len = buf[ctx.pos++];

        <span class="hljs-keyword">if</span> ( len &gt;= <span class="hljs-number">0x80</span> ) {
            len &amp;= <span class="hljs-number">0x7f</span>;
            <span class="hljs-keyword">if</span> ( ctx.end - ctx.pos &lt; len ) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">"Malformed DER"</span>);
            <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> xlen = <span class="hljs-number">0</span>; len--; ) xlen &lt;&lt;= <span class="hljs-number">8</span>, xlen |= buf[ctx.pos++];
            len = xlen;
        }

        <span class="hljs-keyword">if</span> ( ctx.end - ctx.pos &lt; len ) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">"Malformed DER"</span>);

        <span class="hljs-keyword">var</span> rv;

        <span class="hljs-keyword">switch</span> ( tag ) {
            <span class="hljs-keyword">case</span> <span class="hljs-number">0x02</span>: <span class="hljs-comment">// Universal Primitive INTEGER</span>
                rv = buf.subarray( ctx.pos, ctx.pos += len );
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">0x03</span>: <span class="hljs-comment">// Universal Primitive BIT STRING</span>
                <span class="hljs-keyword">if</span> ( buf[ctx.pos++] ) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">"Unsupported bit string"</span> );
                len--;
            <span class="hljs-keyword">case</span> <span class="hljs-number">0x04</span>: <span class="hljs-comment">// Universal Primitive OCTET STRING</span>
                rv = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>( buf.subarray( ctx.pos, ctx.pos += len ) ).buffer;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">0x05</span>: <span class="hljs-comment">// Universal Primitive NULL</span>
                rv = <span class="hljs-literal">null</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">0x06</span>: <span class="hljs-comment">// Universal Primitive OBJECT IDENTIFIER</span>
                <span class="hljs-keyword">var</span> oid = btoa( b2s( buf.subarray( ctx.pos, ctx.pos += len ) ) );
                <span class="hljs-keyword">if</span> ( !( oid <span class="hljs-keyword">in</span> oid2str ) ) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">"Unsupported OBJECT ID "</span> + oid );
                rv = oid2str[oid];
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">0x30</span>: <span class="hljs-comment">// Universal Constructed SEQUENCE</span>
                rv = [];
                <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> end = ctx.pos + len; ctx.pos &lt; end; ) rv.push( b2der( buf, ctx ) );
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">"Unsupported DER tag 0x"</span> + tag.toString(<span class="hljs-number">16</span>) );
        }

        <span class="hljs-keyword">return</span> rv;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">der2b</span> (<span class="hljs-params"> val, buf </span>) </span>{
        <span class="hljs-keyword">if</span> ( !buf ) buf = [];

        <span class="hljs-keyword">var</span> tag = <span class="hljs-number">0</span>, len = <span class="hljs-number">0</span>,
            pos = buf.length + <span class="hljs-number">2</span>;

        buf.push( <span class="hljs-number">0</span>, <span class="hljs-number">0</span> ); <span class="hljs-comment">// placeholder</span>

        <span class="hljs-keyword">if</span> ( val <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Uint8Array</span> ) {  <span class="hljs-comment">// Universal Primitive INTEGER</span>
            tag = <span class="hljs-number">0x02</span>, len = val.length;
            <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i++ ) buf.push( val[i] );
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( val <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span> ) { <span class="hljs-comment">// Universal Primitive OCTET STRING</span>
            tag = <span class="hljs-number">0x04</span>, len = val.byteLength, val = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(val);
            <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i++ ) buf.push( val[i] );
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( val === <span class="hljs-literal">null</span> ) { <span class="hljs-comment">// Universal Primitive NULL</span>
            tag = <span class="hljs-number">0x05</span>, len = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">'string'</span> &amp;&amp; val <span class="hljs-keyword">in</span> str2oid ) { <span class="hljs-comment">// Universal Primitive OBJECT IDENTIFIER</span>
            <span class="hljs-keyword">var</span> oid = s2b( atob( str2oid[val] ) );
            tag = <span class="hljs-number">0x06</span>, len = oid.length;
            <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i++ ) buf.push( oid[i] );
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( val <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span> ) { <span class="hljs-comment">// Universal Constructed SEQUENCE</span>
            <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; val.length; i++ ) der2b( val[i], buf );
            tag = <span class="hljs-number">0x30</span>, len = buf.length - pos;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">'object'</span> &amp;&amp; val.tag === <span class="hljs-number">0x03</span> &amp;&amp; val.value <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span> ) { <span class="hljs-comment">// Tag hint</span>
            val = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(val.value), tag = <span class="hljs-number">0x03</span>, len = val.byteLength;
            buf.push(<span class="hljs-number">0</span>); <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i++ ) buf.push( val[i] );
            len++;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>( <span class="hljs-string">"Unsupported DER value "</span> + val );
        }

        <span class="hljs-keyword">if</span> ( len &gt;= <span class="hljs-number">0x80</span> ) {
            <span class="hljs-keyword">var</span> xlen = len, len = <span class="hljs-number">4</span>;
            buf.splice( pos, <span class="hljs-number">0</span>, (xlen &gt;&gt; <span class="hljs-number">24</span>) &amp; <span class="hljs-number">0xff</span>, (xlen &gt;&gt; <span class="hljs-number">16</span>) &amp; <span class="hljs-number">0xff</span>, (xlen &gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0xff</span>, xlen &amp; <span class="hljs-number">0xff</span> );
            <span class="hljs-keyword">while</span> ( len &gt; <span class="hljs-number">1</span> &amp;&amp; !(xlen &gt;&gt; <span class="hljs-number">24</span>) ) xlen &lt;&lt;= <span class="hljs-number">8</span>, len--;
            <span class="hljs-keyword">if</span> ( len &lt; <span class="hljs-number">4</span> ) buf.splice( pos, <span class="hljs-number">4</span> - len );
            len |= <span class="hljs-number">0x80</span>;
        }

        buf.splice( pos - <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, tag, len );

        <span class="hljs-keyword">return</span> buf;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CryptoKey</span> (<span class="hljs-params"> key, alg, ext, use </span>) </span>{
        <span class="hljs-built_in">Object</span>.defineProperties( <span class="hljs-keyword">this</span>, {
            <span class="hljs-attr">_key</span>: {
                <span class="hljs-attr">value</span>: key
            },
            <span class="hljs-attr">type</span>: {
                <span class="hljs-attr">value</span>: key.type,
                <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
            },
            <span class="hljs-attr">extractable</span>: {
                <span class="hljs-attr">value</span>: (ext === <span class="hljs-literal">undefined</span>) ? key.extractable : ext,
                <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
            },
            <span class="hljs-attr">algorithm</span>: {
                <span class="hljs-attr">value</span>: (alg === <span class="hljs-literal">undefined</span>) ? key.algorithm : alg,
                <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
            },
            <span class="hljs-attr">usages</span>: {
                <span class="hljs-attr">value</span>: (use === <span class="hljs-literal">undefined</span>) ? key.usages : use,
                <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
            },
        });
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPubKeyUse</span> (<span class="hljs-params"> u </span>) </span>{
        <span class="hljs-keyword">return</span> u === <span class="hljs-string">'verify'</span> || u === <span class="hljs-string">'encrypt'</span> || u === <span class="hljs-string">'wrapKey'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPrvKeyUse</span> (<span class="hljs-params"> u </span>) </span>{
        <span class="hljs-keyword">return</span> u === <span class="hljs-string">'sign'</span> || u === <span class="hljs-string">'decrypt'</span> || u === <span class="hljs-string">'unwrapKey'</span>;
    }

    [ <span class="hljs-string">'generateKey'</span>, <span class="hljs-string">'importKey'</span>, <span class="hljs-string">'unwrapKey'</span> ]
        .forEach( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> m </span>) </span>{
            <span class="hljs-keyword">var</span> _fn = _subtle[m];

            _subtle[m] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> a, b, c </span>) </span>{
                <span class="hljs-keyword">var</span> args = [].slice.call(<span class="hljs-built_in">arguments</span>),
                    ka, kx, ku;

                <span class="hljs-keyword">switch</span> ( m ) {
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'generateKey'</span>:
                        ka = alg(a), kx = b, ku = c;
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'importKey'</span>:
                        ka = alg(c), kx = args[<span class="hljs-number">3</span>], ku = args[<span class="hljs-number">4</span>];
                        <span class="hljs-keyword">if</span> ( a === <span class="hljs-string">'jwk'</span> ) {
                            b = b2jwk(b);
                            <span class="hljs-keyword">if</span> ( !b.alg ) b.alg = jwkAlg(ka);
                            <span class="hljs-keyword">if</span> ( !b.key_ops ) b.key_ops = ( b.kty !== <span class="hljs-string">'oct'</span> ) ? ( <span class="hljs-string">'d'</span> <span class="hljs-keyword">in</span> b ) ? ku.filter(isPrvKeyUse) : ku.filter(isPubKeyUse) : ku.slice();
                            args[<span class="hljs-number">1</span>] = jwk2b(b);
                        }
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'unwrapKey'</span>:
                        ka = args[<span class="hljs-number">4</span>], kx = args[<span class="hljs-number">5</span>], ku = args[<span class="hljs-number">6</span>];
                        args[<span class="hljs-number">2</span>] = c._key;
                        <span class="hljs-keyword">break</span>;
                }

                <span class="hljs-keyword">if</span> ( m === <span class="hljs-string">'generateKey'</span> &amp;&amp; ka.name === <span class="hljs-string">'HMAC'</span> &amp;&amp; ka.hash ) {
                    ka.length = ka.length || { <span class="hljs-string">'SHA-1'</span>: <span class="hljs-number">512</span>, <span class="hljs-string">'SHA-256'</span>: <span class="hljs-number">512</span>, <span class="hljs-string">'SHA-384'</span>: <span class="hljs-number">1024</span>, <span class="hljs-string">'SHA-512'</span>: <span class="hljs-number">1024</span> }[ka.hash.name];
                    <span class="hljs-keyword">return</span> _subtle.importKey( <span class="hljs-string">'raw'</span>, _crypto.getRandomValues( <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>( (ka.length+<span class="hljs-number">7</span>)&gt;&gt;<span class="hljs-number">3</span> ) ), ka, kx, ku );
                }

                <span class="hljs-keyword">if</span> ( isWebkit &amp;&amp; m === <span class="hljs-string">'generateKey'</span> &amp;&amp; ka.name === <span class="hljs-string">'RSASSA-PKCS1-v1_5'</span> &amp;&amp; ( !ka.modulusLength || ka.modulusLength &gt;= <span class="hljs-number">2048</span> ) ) {
                    a = alg(a), a.name = <span class="hljs-string">'RSAES-PKCS1-v1_5'</span>, <span class="hljs-keyword">delete</span> a.hash;
                    <span class="hljs-keyword">return</span> _subtle.generateKey( a, <span class="hljs-literal">true</span>, [ <span class="hljs-string">'encrypt'</span>, <span class="hljs-string">'decrypt'</span> ] )
                        .then( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> k </span>) </span>{
                            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all([
                                _subtle.exportKey( <span class="hljs-string">'jwk'</span>, k.publicKey ),
                                _subtle.exportKey( <span class="hljs-string">'jwk'</span>, k.privateKey ),
                            ]);
                        })
                        .then( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> keys </span>) </span>{
                            keys[<span class="hljs-number">0</span>].alg = keys[<span class="hljs-number">1</span>].alg = jwkAlg(ka);
                            keys[<span class="hljs-number">0</span>].key_ops = ku.filter(isPubKeyUse), keys[<span class="hljs-number">1</span>].key_ops = ku.filter(isPrvKeyUse);
                            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all([
                                _subtle.importKey( <span class="hljs-string">'jwk'</span>, keys[<span class="hljs-number">0</span>], ka, <span class="hljs-literal">true</span>, keys[<span class="hljs-number">0</span>].key_ops ),
                                _subtle.importKey( <span class="hljs-string">'jwk'</span>, keys[<span class="hljs-number">1</span>], ka, kx, keys[<span class="hljs-number">1</span>].key_ops ),
                            ]);
                        })
                        .then( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> keys </span>) </span>{
                            <span class="hljs-keyword">return</span> {
                                <span class="hljs-attr">publicKey</span>: keys[<span class="hljs-number">0</span>],
                                <span class="hljs-attr">privateKey</span>: keys[<span class="hljs-number">1</span>],
                            };
                        });
                }

                <span class="hljs-keyword">if</span> ( ( isWebkit || ( isIE &amp;&amp; ( ka.hash || {} ).name === <span class="hljs-string">'SHA-1'</span> ) )
                        &amp;&amp; m === <span class="hljs-string">'importKey'</span> &amp;&amp; a === <span class="hljs-string">'jwk'</span> &amp;&amp; ka.name === <span class="hljs-string">'HMAC'</span> &amp;&amp; b.kty === <span class="hljs-string">'oct'</span> ) {
                    <span class="hljs-keyword">return</span> _subtle.importKey( <span class="hljs-string">'raw'</span>, s2b( a2s(b.k) ), c, args[<span class="hljs-number">3</span>], args[<span class="hljs-number">4</span>] );
                }

                <span class="hljs-keyword">if</span> ( isWebkit &amp;&amp; m === <span class="hljs-string">'importKey'</span> &amp;&amp; ( a === <span class="hljs-string">'spki'</span> || a === <span class="hljs-string">'pkcs8'</span> ) ) {
                    <span class="hljs-keyword">return</span> _subtle.importKey( <span class="hljs-string">'jwk'</span>, pkcs2jwk(b), c, args[<span class="hljs-number">3</span>], args[<span class="hljs-number">4</span>] );
                }

                <span class="hljs-keyword">if</span> ( isIE &amp;&amp; m === <span class="hljs-string">'unwrapKey'</span> ) {
                    <span class="hljs-keyword">return</span> _subtle.decrypt( args[<span class="hljs-number">3</span>], c, b )
                        .then( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> k </span>) </span>{
                            <span class="hljs-keyword">return</span> _subtle.importKey( a, k, args[<span class="hljs-number">4</span>], args[<span class="hljs-number">5</span>], args[<span class="hljs-number">6</span>] );
                        });
                }

                <span class="hljs-keyword">var</span> op;
                <span class="hljs-keyword">try</span> {
                    op = _fn.apply( _subtle, args );
                }
                <span class="hljs-keyword">catch</span> ( e ) {
                    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(e);
                }

                <span class="hljs-keyword">if</span> ( isIE ) {
                    op = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> res, rej </span>) </span>{
                        op.onabort =
                        op.onerror =    <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> e </span>) </span>{ rej(e)               };
                        op.oncomplete = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> r </span>) </span>{ res(r.target.result) };
                    });
                }

                op = op.then( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> k </span>) </span>{
                    <span class="hljs-keyword">if</span> ( ka.name === <span class="hljs-string">'HMAC'</span> ) {
                        <span class="hljs-keyword">if</span> ( !ka.length ) ka.length = <span class="hljs-number">8</span> * k.algorithm.length;
                    }
                    <span class="hljs-keyword">if</span> ( ka.name.search(<span class="hljs-string">'RSA'</span>) == <span class="hljs-number">0</span> ) {
                        <span class="hljs-keyword">if</span> ( !ka.modulusLength ) ka.modulusLength = (k.publicKey || k).algorithm.modulusLength;
                        <span class="hljs-keyword">if</span> ( !ka.publicExponent ) ka.publicExponent = (k.publicKey || k).algorithm.publicExponent;
                    }
                    <span class="hljs-keyword">if</span> ( k.publicKey &amp;&amp; k.privateKey ) {
                        k = {
                            <span class="hljs-attr">publicKey</span>: <span class="hljs-keyword">new</span> CryptoKey( k.publicKey, ka, kx, ku.filter(isPubKeyUse) ),
                            <span class="hljs-attr">privateKey</span>: <span class="hljs-keyword">new</span> CryptoKey( k.privateKey, ka, kx, ku.filter(isPrvKeyUse) ),
                        };
                    }
                    <span class="hljs-keyword">else</span> {
                        k = <span class="hljs-keyword">new</span> CryptoKey( k, ka, kx, ku );
                    }
                    <span class="hljs-keyword">return</span> k;
                });

                <span class="hljs-keyword">return</span> op;
            }
        });

    [ <span class="hljs-string">'exportKey'</span>, <span class="hljs-string">'wrapKey'</span> ]
        .forEach( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> m </span>) </span>{
            <span class="hljs-keyword">var</span> _fn = _subtle[m];

            _subtle[m] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> a, b, c </span>) </span>{
                <span class="hljs-keyword">var</span> args = [].slice.call(<span class="hljs-built_in">arguments</span>);

                <span class="hljs-keyword">switch</span> ( m ) {
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'exportKey'</span>:
                        args[<span class="hljs-number">1</span>] = b._key;
                        <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-string">'wrapKey'</span>:
                        args[<span class="hljs-number">1</span>] = b._key, args[<span class="hljs-number">2</span>] = c._key;
                        <span class="hljs-keyword">break</span>;
                }

                <span class="hljs-keyword">if</span> ( ( isWebkit || ( isIE &amp;&amp; ( b.algorithm.hash || {} ).name === <span class="hljs-string">'SHA-1'</span> ) )
                        &amp;&amp; m === <span class="hljs-string">'exportKey'</span> &amp;&amp; a === <span class="hljs-string">'jwk'</span> &amp;&amp; b.algorithm.name === <span class="hljs-string">'HMAC'</span> ) {
                    args[<span class="hljs-number">0</span>] = <span class="hljs-string">'raw'</span>;
                }

                <span class="hljs-keyword">if</span> ( isWebkit &amp;&amp; m === <span class="hljs-string">'exportKey'</span> &amp;&amp; ( a === <span class="hljs-string">'spki'</span> || a === <span class="hljs-string">'pkcs8'</span> ) ) {
                    args[<span class="hljs-number">0</span>] = <span class="hljs-string">'jwk'</span>;
                }

                <span class="hljs-keyword">if</span> ( isIE &amp;&amp; m === <span class="hljs-string">'wrapKey'</span> ) {
                    <span class="hljs-keyword">return</span> _subtle.exportKey( a, b )
                        .then( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> k </span>) </span>{
                            <span class="hljs-keyword">if</span> ( a === <span class="hljs-string">'jwk'</span> ) k = s2b( <span class="hljs-built_in">unescape</span>( <span class="hljs-built_in">encodeURIComponent</span>( <span class="hljs-built_in">JSON</span>.stringify( b2jwk(k) ) ) ) );
                            <span class="hljs-keyword">return</span>  _subtle.encrypt( args[<span class="hljs-number">3</span>], c, k );
                        });
                }

                <span class="hljs-keyword">var</span> op;
                <span class="hljs-keyword">try</span> {
                    op = _fn.apply( _subtle, args );
                }
                <span class="hljs-keyword">catch</span> ( e ) {
                    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(e);
                }

                <span class="hljs-keyword">if</span> ( isIE ) {
                    op = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> res, rej </span>) </span>{
                        op.onabort =
                        op.onerror =    <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> e </span>) </span>{ rej(e)               };
                        op.oncomplete = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> r </span>) </span>{ res(r.target.result) };
                    });
                }

                <span class="hljs-keyword">if</span> ( m === <span class="hljs-string">'exportKey'</span> &amp;&amp; a === <span class="hljs-string">'jwk'</span> ) {
                    op = op.then( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> k </span>) </span>{
                        <span class="hljs-keyword">if</span> ( ( isWebkit || ( isIE &amp;&amp; ( b.algorithm.hash || {} ).name === <span class="hljs-string">'SHA-1'</span> ) )
                                &amp;&amp; b.algorithm.name === <span class="hljs-string">'HMAC'</span>) {
                            <span class="hljs-keyword">return</span> { <span class="hljs-string">'kty'</span>: <span class="hljs-string">'oct'</span>, <span class="hljs-string">'alg'</span>: jwkAlg(b.algorithm), <span class="hljs-string">'key_ops'</span>: b.usages.slice(), <span class="hljs-string">'ext'</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">'k'</span>: s2a( b2s(k) ) };
                        }
                        k = b2jwk(k);
                        <span class="hljs-keyword">if</span> ( !k.alg ) k[<span class="hljs-string">'alg'</span>] = jwkAlg(b.algorithm);
                        <span class="hljs-keyword">if</span> ( !k.key_ops ) k[<span class="hljs-string">'key_ops'</span>] = ( b.type === <span class="hljs-string">'public'</span> ) ? b.usages.filter(isPubKeyUse) : ( b.type === <span class="hljs-string">'private'</span> ) ? b.usages.filter(isPrvKeyUse) : b.usages.slice();
                        <span class="hljs-keyword">return</span> k;
                    });
                }

                <span class="hljs-keyword">if</span> ( isWebkit &amp;&amp; m === <span class="hljs-string">'exportKey'</span> &amp;&amp; ( a === <span class="hljs-string">'spki'</span> || a === <span class="hljs-string">'pkcs8'</span> ) ) {
                    op = op.then( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> k </span>) </span>{
                        k = jwk2pkcs( b2jwk(k) );
                        <span class="hljs-keyword">return</span> k;
                    });
                }

                <span class="hljs-keyword">return</span> op;
            }
        });

    [ <span class="hljs-string">'encrypt'</span>, <span class="hljs-string">'decrypt'</span>, <span class="hljs-string">'sign'</span>, <span class="hljs-string">'verify'</span> ]
        .forEach( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> m </span>) </span>{
            <span class="hljs-keyword">var</span> _fn = _subtle[m];

            _subtle[m] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> a, b, c, d </span>) </span>{
                <span class="hljs-keyword">if</span> ( isIE &amp;&amp; ( !c.byteLength || ( d &amp;&amp; !d.byteLength ) ) )
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Empy input is not allowed"</span>);

                <span class="hljs-keyword">var</span> args = [].slice.call(<span class="hljs-built_in">arguments</span>),
                    ka = alg(a);

                <span class="hljs-keyword">if</span> ( isIE &amp;&amp; m === <span class="hljs-string">'decrypt'</span> &amp;&amp; ka.name === <span class="hljs-string">'AES-GCM'</span> ) {
                    <span class="hljs-keyword">var</span> tl = a.tagLength &gt;&gt; <span class="hljs-number">3</span>;
                    args[<span class="hljs-number">2</span>] = (c.buffer || c).slice( <span class="hljs-number">0</span>, c.byteLength - tl ),
                    a.tag = (c.buffer || c).slice( c.byteLength - tl );
                }

                args[<span class="hljs-number">1</span>] = b._key;

                <span class="hljs-keyword">var</span> op;
                <span class="hljs-keyword">try</span> {
                    op = _fn.apply( _subtle, args );
                }
                <span class="hljs-keyword">catch</span> ( e ) {
                    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(e);
                }

                <span class="hljs-keyword">if</span> ( isIE ) {
                    op = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> res, rej </span>) </span>{
                        op.onabort =
                        op.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> e </span>) </span>{
                            rej(e);
                        };

                        op.oncomplete = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> r </span>) </span>{
                            <span class="hljs-keyword">var</span> r = r.target.result;

                            <span class="hljs-keyword">if</span> ( m === <span class="hljs-string">'encrypt'</span> &amp;&amp; r <span class="hljs-keyword">instanceof</span> AesGcmEncryptResult ) {
                                <span class="hljs-keyword">var</span> c = r.ciphertext, t = r.tag;
                                r = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>( c.byteLength + t.byteLength );
                                r.set( <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(c), <span class="hljs-number">0</span> );
                                r.set( <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(t), c.byteLength );
                                r = r.buffer;
                            }

                            res(r);
                        };
                    });
                }

                <span class="hljs-keyword">return</span> op;
            }
        });

    <span class="hljs-keyword">if</span> ( isIE ) {
        <span class="hljs-keyword">var</span> _digest = _subtle.digest;

        _subtle[<span class="hljs-string">'digest'</span>] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> a, b </span>) </span>{
            <span class="hljs-keyword">if</span> ( !b.byteLength )
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Empy input is not allowed"</span>);

            <span class="hljs-keyword">var</span> op;
            <span class="hljs-keyword">try</span> {
                op = _digest.call( _subtle, a, b );
            }
            <span class="hljs-keyword">catch</span> ( e ) {
                <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(e);
            }

            op = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> res, rej </span>) </span>{
                op.onabort =
                op.onerror =    <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> e </span>) </span>{ rej(e)               };
                op.oncomplete = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> r </span>) </span>{ res(r.target.result) };
            });

            <span class="hljs-keyword">return</span> op;
        };

        global.crypto = <span class="hljs-built_in">Object</span>.create( _crypto, {
            <span class="hljs-attr">getRandomValues</span>: { <span class="hljs-attr">value</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> a </span>) </span>{ <span class="hljs-keyword">return</span> _crypto.getRandomValues(a) } },
            <span class="hljs-attr">subtle</span>:          { <span class="hljs-attr">value</span>: _subtle },
        });

        global.CryptoKey = CryptoKey;
    }

    <span class="hljs-keyword">if</span> ( isWebkit ) {
        _crypto.subtle = _subtle;

        global.Crypto = _Crypto;
        global.SubtleCrypto = _SubtleCrypto;
        global.CryptoKey = CryptoKey;
    }
}));

 <span class="hljs-comment">/* harmony default export */</span> __webpack_exports__[<span class="hljs-string">"default"</span>] = ({}); <span class="hljs-comment">// section modified by isomorphic-webcrypto build </span>


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 32 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-164" id="section-164"></a>
</div>
<div class="dox">
<div class="summary">
<p>Dependencies</p>
</div>
<div class="body">
<p>TODO</p>
<ul>
<li>switch between Node.js webcrypto package and browser implementation</li>
</ul>
</div>
</div>
const base64url = require('base64url')

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> supportedAlgorithms = __webpack_require__(<span class="hljs-number">33</span>)
<span class="hljs-keyword">const</span> {NotSupportedError} = __webpack_require__(<span class="hljs-number">48</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-165" id="section-165"></a>
</div>
<div class="dox">
<div class="summary">
<p>JWA
https://tools.ietf.org/html/rfc7518</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JWA</span> </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-166" id="section-166"></a>
</div>
<div class="dox">
<div class="summary">
<p>Sign</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">alg</span>
<span class="dox_type">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">key</span>
<span class="dox_type">CryptoKey</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">string</span>
<span class="dox_type">Buffer</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Promise</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> sign (alg, key, data) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-167" id="section-167"></a>
</div>
<p>normalize the algorithm</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">let</span> normalizedAlgorithm = supportedAlgorithms.normalize(<span class="hljs-string">'sign'</span>, alg)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-168" id="section-168"></a>
</div>
<p>validate algorithm is supported</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (normalizedAlgorithm <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-keyword">new</span> NotSupportedError(alg))
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-169" id="section-169"></a>
</div>
<p>validate type of key
TODO</p>
<ul>
<li>is the key suitable for the algorithm?</li>
<li>does that get validated in webcrypto?
if (key instanceof CryptoKey) {
return Promise.reject(new InvalidKeyError())
}</li>
</ul>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-170" id="section-170"></a>
</div>
<p>sign the data</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> normalizedAlgorithm.sign(key, data)
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-171" id="section-171"></a>
</div>
<div class="dox">
<div class="summary">
<p>Verify</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">alg</span>
<span class="dox_type">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">privateKey</span>
<span class="dox_type">CryptoKey</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">signature</span>
<span class="dox_type">string</span>
<span class="dox_type">Buffer</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">string</span>
<span class="dox_type">Buffer</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Promise</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> verify (alg, key, signature, data) {
    <span class="hljs-keyword">let</span> normalizedAlgorithm = supportedAlgorithms.normalize(<span class="hljs-string">'verify'</span>, alg)

    <span class="hljs-keyword">if</span> (normalizedAlgorithm <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-keyword">new</span> NotSupportedError(alg))
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-172" id="section-172"></a>
</div>
<p>TODO
validate publicKey</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-173" id="section-173"></a>
</div>
<p>verify the signature</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> normalizedAlgorithm.verify(key, signature, data)
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-174" id="section-174"></a>
</div>
<div class="dox">
<div class="summary">
<p>Encrypt</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-175" id="section-175"></a>
</div>
<div class="dox">
<div class="summary">
<p>Decrypt</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-176" id="section-176"></a>
</div>
<div class="dox">
<div class="summary">
<p>Import</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> importKey (key) {
    <span class="hljs-keyword">let</span> normalizedAlgorithm = supportedAlgorithms.normalize(<span class="hljs-string">'importKey'</span>, key.alg)
    <span class="hljs-keyword">return</span> normalizedAlgorithm.importKey(key)
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-177" id="section-177"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = JWA


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 33 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-178" id="section-178"></a>
</div>
<div class="dox">
<div class="summary">
<p>Local dependencies</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> None = __webpack_require__(<span class="hljs-number">34</span>)
<span class="hljs-keyword">const</span> HMAC = __webpack_require__(<span class="hljs-number">35</span>)
<span class="hljs-keyword">const</span> RSASSA_PKCS1_v1_5 = __webpack_require__(<span class="hljs-number">45</span>)
<span class="hljs-keyword">const</span> SupportedAlgorithms = __webpack_require__(<span class="hljs-number">46</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-179" id="section-179"></a>
</div>
<div class="dox">
<div class="summary">
<p>Register Supported Algorithms</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> supportedAlgorithms = <span class="hljs-keyword">new</span> SupportedAlgorithms

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-180" id="section-180"></a>
</div>
<div class="dox">
<div class="summary">
<p>Sign</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">supportedAlgorithms.define(<span class="hljs-string">'HS256'</span>, <span class="hljs-string">'sign'</span>, <span class="hljs-keyword">new</span> HMAC({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'HMAC'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-256'</span>
  }
}))

supportedAlgorithms.define(<span class="hljs-string">'HS384'</span>, <span class="hljs-string">'sign'</span>, <span class="hljs-keyword">new</span> HMAC({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'HMAC'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-384'</span>
  }
}))

supportedAlgorithms.define(<span class="hljs-string">'HS512'</span>, <span class="hljs-string">'sign'</span>, <span class="hljs-keyword">new</span> HMAC({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'HMAC'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-512'</span>
  }
}))

supportedAlgorithms.define(<span class="hljs-string">'RS256'</span>, <span class="hljs-string">'sign'</span>, <span class="hljs-keyword">new</span> RSASSA_PKCS1_v1_5({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'RSASSA-PKCS1-v1_5'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-256'</span>
  }
}))

supportedAlgorithms.define(<span class="hljs-string">'RS384'</span>, <span class="hljs-string">'sign'</span>, <span class="hljs-keyword">new</span> RSASSA_PKCS1_v1_5({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'RSASSA-PKCS1-v1_5'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-384'</span>
  }
}))

supportedAlgorithms.define(<span class="hljs-string">'RS512'</span>, <span class="hljs-string">'sign'</span>, <span class="hljs-keyword">new</span> RSASSA_PKCS1_v1_5({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'RSASSA-PKCS1-v1_5'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-512'</span>
  }
}))
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-181" id="section-181"></a>
</div>
<p>supportedAlgorithms.define('ES256', 'sign', {})
supportedAlgorithms.define('ES384', 'sign', {})
supportedAlgorithms.define('ES512', 'sign', {})
supportedAlgorithms.define('PS256', 'sign', {})
supportedAlgorithms.define('PS384', 'sign', {})
supportedAlgorithms.define('PS512', 'sign', {})</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
supportedAlgorithms.define(<span class="hljs-string">'none'</span>, <span class="hljs-string">'sign'</span>, <span class="hljs-keyword">new</span> None({
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-182" id="section-182"></a>
</div>
<p>nothing goes here</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">}))

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-183" id="section-183"></a>
</div>
<div class="dox">
<div class="summary">
<p>Verify</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">supportedAlgorithms.define(<span class="hljs-string">'HS256'</span>, <span class="hljs-string">'verify'</span>, <span class="hljs-keyword">new</span> HMAC({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'HMAC'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-256'</span>
  }
}))

supportedAlgorithms.define(<span class="hljs-string">'HS384'</span>, <span class="hljs-string">'verify'</span>, <span class="hljs-keyword">new</span> HMAC({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'HMAC'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-384'</span>
  }
}))

supportedAlgorithms.define(<span class="hljs-string">'HS512'</span>, <span class="hljs-string">'verify'</span>, <span class="hljs-keyword">new</span> HMAC({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'HMAC'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-512'</span>
  }
}))

supportedAlgorithms.define(<span class="hljs-string">'RS256'</span>, <span class="hljs-string">'verify'</span>, <span class="hljs-keyword">new</span> RSASSA_PKCS1_v1_5({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'RSASSA-PKCS1-v1_5'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-256'</span>
  }
}))

supportedAlgorithms.define(<span class="hljs-string">'RS384'</span>, <span class="hljs-string">'verify'</span>, <span class="hljs-keyword">new</span> RSASSA_PKCS1_v1_5({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'RSASSA-PKCS1-v1_5'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-384'</span>
  }
}))

supportedAlgorithms.define(<span class="hljs-string">'RS512'</span>, <span class="hljs-string">'verify'</span>, <span class="hljs-keyword">new</span> RSASSA_PKCS1_v1_5({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'RSASSA-PKCS1-v1_5'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-512'</span>
  }
}))
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-184" id="section-184"></a>
</div>
<p>supportedAlgorithms.define('ES256', 'verify', {})
supportedAlgorithms.define('ES384', 'verify', {})
supportedAlgorithms.define('ES512', 'verify', {})
supportedAlgorithms.define('PS256', 'verify', {})
supportedAlgorithms.define('PS384', 'verify', {})
supportedAlgorithms.define('PS512', 'verify', {})</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
supportedAlgorithms.define(<span class="hljs-string">'none'</span>, <span class="hljs-string">'verify'</span>, <span class="hljs-keyword">new</span> None({
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-185" id="section-185"></a>
</div>
<p>nothing goes here</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">}))

supportedAlgorithms.define(<span class="hljs-string">'RS256'</span>, <span class="hljs-string">'importKey'</span>, <span class="hljs-keyword">new</span> RSASSA_PKCS1_v1_5({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'RSASSA-PKCS1-v1_5'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-256'</span>
  }
}))

supportedAlgorithms.define(<span class="hljs-string">'RS384'</span>, <span class="hljs-string">'importKey'</span>, <span class="hljs-keyword">new</span> RSASSA_PKCS1_v1_5({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'RSASSA-PKCS1-v1_5'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-384'</span>
  }
}))

supportedAlgorithms.define(<span class="hljs-string">'RS512'</span>, <span class="hljs-string">'importKey'</span>, <span class="hljs-keyword">new</span> RSASSA_PKCS1_v1_5({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'RSASSA-PKCS1-v1_5'</span>,
  <span class="hljs-attr">hash</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-512'</span>
  }
}))

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-186" id="section-186"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = supportedAlgorithms




<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 34 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-187" id="section-187"></a>
</div>
<div class="dox">
<div class="summary">
<p>None</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">None</span> </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-188" id="section-188"></a>
</div>
<div class="dox">
<div class="summary">
<p>sign</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  sign () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-string">''</span>)
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-189" id="section-189"></a>
</div>
<div class="dox">
<div class="summary">
<p>verify</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  verify () {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-190" id="section-190"></a>
</div>
<p>this will never get called. but you looked.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-191" id="section-191"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = None


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 35 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">Buffer</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-192" id="section-192"></a>
</div>
<div class="dox">
<div class="summary">
<p>Dependencies</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> base64url = __webpack_require__(<span class="hljs-number">40</span>)
<span class="hljs-keyword">const</span> crypto = __webpack_require__(<span class="hljs-number">30</span>)
<span class="hljs-keyword">const</span> TextEncoder = __webpack_require__(<span class="hljs-number">43</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-193" id="section-193"></a>
</div>
<div class="dox">
<div class="summary">
<p>HMAC with SHA-2 Functions</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HMAC</span> </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-194" id="section-194"></a>
</div>
<div class="dox">
<div class="summary">
<p>Constructor</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bitlength</span>
<span class="dox_type">string</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">constructor</span> (params) {
    <span class="hljs-keyword">this</span>.params = params
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-195" id="section-195"></a>
</div>
<div class="dox">
<div class="summary">
<p>Sign</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">key</span>
<span class="dox_type">CryptoKey</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">string</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  sign (key, data) {
    <span class="hljs-keyword">let</span> algorithm = <span class="hljs-keyword">this</span>.params

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-196" id="section-196"></a>
</div>
<p>TODO: validate key length</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    data = <span class="hljs-keyword">new</span> TextEncoder().encode(data)

    <span class="hljs-keyword">return</span> crypto.subtle
      .sign(algorithm, key, data)
      .then(<span class="hljs-function"><span class="hljs-params">signature</span> =&gt;</span> base64url(Buffer.from(signature)))
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-197" id="section-197"></a>
</div>
<div class="dox">
<div class="summary">
<p>Verify</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">key</span>
<span class="dox_type">CryptoKey</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">signature</span>
<span class="dox_type">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">string</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  verify (key, signature, data) {
    <span class="hljs-keyword">let</span> algorithm = <span class="hljs-keyword">this</span>.params

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> signature === <span class="hljs-string">'string'</span>) {
      signature = <span class="hljs-built_in">Uint8Array</span>.from(base64url.toBuffer(signature))
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'string'</span>) {
      data = <span class="hljs-keyword">new</span> TextEncoder().encode(data)
    }

    <span class="hljs-keyword">return</span> crypto.subtle.verify(algorithm, key, signature, data)
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-198" id="section-198"></a>
</div>
<div class="dox">
<div class="summary">
<p>Assert Sufficient Key Length</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">key</span>
<span class="dox_type">string</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  assertSufficientKeyLength (key) {
    <span class="hljs-keyword">if</span> (key.length &lt; <span class="hljs-keyword">this</span>.bitlength) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'The key is too short.'</span>)
    }
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-199" id="section-199"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = HMAC

<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(<span class="hljs-keyword">this</span>, __webpack_require__(<span class="hljs-number">36</span>).Buffer))

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 36 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{<span class="hljs-comment">/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh &lt;http://feross.org&gt;
 * @license  MIT
 */</span>
<span class="hljs-comment">/* eslint-disable no-proto */</span>



<span class="hljs-keyword">var</span> base64 = __webpack_require__(<span class="hljs-number">37</span>)
<span class="hljs-keyword">var</span> ieee754 = __webpack_require__(<span class="hljs-number">38</span>)
<span class="hljs-keyword">var</span> isArray = __webpack_require__(<span class="hljs-number">39</span>)

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = <span class="hljs-number">50</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-200" id="section-200"></a>
</div>
<div class="dox">
<div class="summary">
<p>If <code>Buffer.TYPED_ARRAY_SUPPORT</code>:
=== true    Use Uint8Array implementation (fastest)
=== false   Use Object implementation (most compatible, even IE6)</p>
</div>
<div class="body">
<p>Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
Opera 11.6+, iOS 4.2+.</p>
<p>Due to various browser bugs, sometimes the Object implementation will be used even
when the browser supports typed arrays.</p>
<p>Note:</p>
<ul>
<li>
<p>Firefox 4-29 lacks support for adding new properties to <code>Uint8Array</code> instances,
See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.</p>
</li>
<li>
<p>Chrome 9-10 is missing the <code>TypedArray.prototype.subarray</code> function.</p>
</li>
<li>
<p>IE10 has a broken <code>TypedArray.prototype.subarray</code> function which returns arrays of
incorrect length in some situations.</p>
</li>
</ul>
<p>We detect these buggy browsers and set <code>Buffer.TYPED_ARRAY_SUPPORT</code> to <code>false</code> so they
get the Object implementation, which is slower but behaves correctly.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== <span class="hljs-literal">undefined</span>
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-201" id="section-201"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export kMaxLength after typed array support is determined.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">exports.kMaxLength = kMaxLength()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">typedArraySupport</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(<span class="hljs-number">1</span>)
    arr.__proto__ = {<span class="hljs-attr">__proto__</span>: <span class="hljs-built_in">Uint8Array</span>.prototype, <span class="hljs-attr">foo</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-number">42</span> }}
    <span class="hljs-keyword">return</span> arr.foo() === <span class="hljs-number">42</span> &amp;&amp; <span class="hljs-comment">// typed array instances can be augmented</span>
        <span class="hljs-keyword">typeof</span> arr.subarray === <span class="hljs-string">'function'</span> &amp;&amp; <span class="hljs-comment">// chrome 9-10 lack `subarray`</span>
        arr.subarray(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>).byteLength === <span class="hljs-number">0</span> <span class="hljs-comment">// ie10 has broken `subarray`</span>
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">kMaxLength</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> Buffer.TYPED_ARRAY_SUPPORT
    ? <span class="hljs-number">0x7fffffff</span>
    : <span class="hljs-number">0x3fffffff</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createBuffer</span> (<span class="hljs-params">that, length</span>) </span>{
  <span class="hljs-keyword">if</span> (kMaxLength() &lt; length) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'Invalid typed array length'</span>)
  }
  <span class="hljs-keyword">if</span> (Buffer.TYPED_ARRAY_SUPPORT) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-202" id="section-202"></a>
</div>
<p>Return an augmented <code>Uint8Array</code> instance, for best performance</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    that = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(length)
    that.__proto__ = Buffer.prototype
  } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-203" id="section-203"></a>
</div>
<p>Fallback: Return an object instance of the Buffer class</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (that === <span class="hljs-literal">null</span>) {
      that = <span class="hljs-keyword">new</span> Buffer(length)
    }
    that.length = length
  }

  <span class="hljs-keyword">return</span> that
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-204" id="section-204"></a>
</div>
<div class="dox">
<div class="summary">
<p>The Buffer constructor returns instances of <code>Uint8Array</code> that have their
prototype changed to <code>Buffer.prototype</code>. Furthermore, <code>Buffer</code> is a subclass of
<code>Uint8Array</code>, so the returned instances will have all the node <code>Buffer</code> methods
and the <code>Uint8Array</code> methods. Square bracket notation works as expected -- it
returns a single octet.</p>
</div>
<div class="body">
<p>The <code>Uint8Array</code> prototype remains unmodified.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Buffer</span> (<span class="hljs-params">arg, encodingOrOffset, length</span>) </span>{
  <span class="hljs-keyword">if</span> (!Buffer.TYPED_ARRAY_SUPPORT &amp;&amp; !(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Buffer)) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Buffer(arg, encodingOrOffset, length)
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-205" id="section-205"></a>
</div>
<p>Common case.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> arg === <span class="hljs-string">'number'</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> encodingOrOffset === <span class="hljs-string">'string'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(
        <span class="hljs-string">'If encoding is specified then the first argument must be a string'</span>
      )
    }
    <span class="hljs-keyword">return</span> allocUnsafe(<span class="hljs-keyword">this</span>, arg)
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">from</span>(<span class="hljs-keyword">this</span>, arg, encodingOrOffset, length)
}

Buffer.poolSize = <span class="hljs-number">8192</span> <span class="hljs-comment">// not used by this implementation</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-206" id="section-206"></a>
</div>
<p>TODO: Legacy, not needed anymore. Remove in next major version.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">Buffer._augment = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) </span>{
  arr.__proto__ = Buffer.prototype
  <span class="hljs-keyword">return</span> arr
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">from</span> (<span class="hljs-params">that, value, encodingOrOffset, length</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'number'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'"value" argument must not be a number'</span>)
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">ArrayBuffer</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; value <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span>) {
    <span class="hljs-keyword">return</span> fromArrayBuffer(that, value, encodingOrOffset, length)
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">return</span> fromString(that, value, encodingOrOffset)
  }

  <span class="hljs-keyword">return</span> fromObject(that, value)
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-207" id="section-207"></a>
</div>
<div class="dox">
<div class="summary">
<p>Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
if value is a number.
Buffer.from(str[, encoding])
Buffer.from(array)
Buffer.from(buffer)
Buffer.from(arrayBuffer[, byteOffset[, length]])</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">Buffer.from = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value, encodingOrOffset, length</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">from</span>(<span class="hljs-literal">null</span>, value, encodingOrOffset, length)
}

<span class="hljs-keyword">if</span> (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = <span class="hljs-built_in">Uint8Array</span>.prototype
  Buffer.__proto__ = <span class="hljs-built_in">Uint8Array</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Symbol</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">Symbol</span>.species &amp;&amp;
      Buffer[<span class="hljs-built_in">Symbol</span>.species] === Buffer) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-208" id="section-208"></a>
</div>
<p>Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-built_in">Object</span>.defineProperty(Buffer, <span class="hljs-built_in">Symbol</span>.species, {
      <span class="hljs-attr">value</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>
    })
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">assertSize</span> (<span class="hljs-params">size</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> size !== <span class="hljs-string">'number'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'"size" argument must be a number'</span>)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (size &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'"size" argument must not be negative'</span>)
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">alloc</span> (<span class="hljs-params">that, size, fill, encoding</span>) </span>{
  assertSize(size)
  <span class="hljs-keyword">if</span> (size &lt;= <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> createBuffer(that, size)
  }
  <span class="hljs-keyword">if</span> (fill !== <span class="hljs-literal">undefined</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-209" id="section-209"></a>
</div>
<p>Only pay attention to encoding if it's a string. This
prevents accidentally sending in a number that would
be interpretted as a start offset.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> encoding === <span class="hljs-string">'string'</span>
      ? createBuffer(that, size).fill(fill, encoding)
      : createBuffer(that, size).fill(fill)
  }
  <span class="hljs-keyword">return</span> createBuffer(that, size)
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-210" id="section-210"></a>
</div>
<div class="dox">
<div class="summary">
<p>Creates a new filled Buffer instance.
alloc(size[, fill[, encoding]])</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">Buffer.alloc = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">size, fill, encoding</span>) </span>{
  <span class="hljs-keyword">return</span> alloc(<span class="hljs-literal">null</span>, size, fill, encoding)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">allocUnsafe</span> (<span class="hljs-params">that, size</span>) </span>{
  assertSize(size)
  that = createBuffer(that, size &lt; <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : checked(size) | <span class="hljs-number">0</span>)
  <span class="hljs-keyword">if</span> (!Buffer.TYPED_ARRAY_SUPPORT) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; size; ++i) {
      that[i] = <span class="hljs-number">0</span>
    }
  }
  <span class="hljs-keyword">return</span> that
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-211" id="section-211"></a>
</div>
<div class="dox">
<div class="summary">
<p>Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">Buffer.allocUnsafe = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">size</span>) </span>{
  <span class="hljs-keyword">return</span> allocUnsafe(<span class="hljs-literal">null</span>, size)
}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-212" id="section-212"></a>
</div>
<div class="dox">
<div class="summary">
<p>Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">Buffer.allocUnsafeSlow = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">size</span>) </span>{
  <span class="hljs-keyword">return</span> allocUnsafe(<span class="hljs-literal">null</span>, size)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fromString</span> (<span class="hljs-params">that, string, encoding</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> encoding !== <span class="hljs-string">'string'</span> || encoding === <span class="hljs-string">''</span>) {
    encoding = <span class="hljs-string">'utf8'</span>
  }

  <span class="hljs-keyword">if</span> (!Buffer.isEncoding(encoding)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'"encoding" must be a valid string encoding'</span>)
  }

  <span class="hljs-keyword">var</span> length = byteLength(string, encoding) | <span class="hljs-number">0</span>
  that = createBuffer(that, length)

  <span class="hljs-keyword">var</span> actual = that.write(string, encoding)

  <span class="hljs-keyword">if</span> (actual !== length) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-213" id="section-213"></a>
</div>
<p>Writing a hex string, for example, that contains invalid characters will
cause everything after the first invalid character to be ignored. (e.g.
'abxxcd' will be treated as 'ab')</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    that = that.slice(<span class="hljs-number">0</span>, actual)
  }

  <span class="hljs-keyword">return</span> that
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fromArrayLike</span> (<span class="hljs-params">that, array</span>) </span>{
  <span class="hljs-keyword">var</span> length = array.length &lt; <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : checked(array.length) | <span class="hljs-number">0</span>
  that = createBuffer(that, length)
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; length; i += <span class="hljs-number">1</span>) {
    that[i] = array[i] &amp; <span class="hljs-number">255</span>
  }
  <span class="hljs-keyword">return</span> that
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fromArrayBuffer</span> (<span class="hljs-params">that, array, byteOffset, length</span>) </span>{
  array.byteLength <span class="hljs-comment">// this throws if `array` is not a valid ArrayBuffer</span>

  <span class="hljs-keyword">if</span> (byteOffset &lt; <span class="hljs-number">0</span> || array.byteLength &lt; byteOffset) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'\'offset\' is out of bounds'</span>)
  }

  <span class="hljs-keyword">if</span> (array.byteLength &lt; byteOffset + (length || <span class="hljs-number">0</span>)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'\'length\' is out of bounds'</span>)
  }

  <span class="hljs-keyword">if</span> (byteOffset === <span class="hljs-literal">undefined</span> &amp;&amp; length === <span class="hljs-literal">undefined</span>) {
    array = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(array)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (length === <span class="hljs-literal">undefined</span>) {
    array = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(array, byteOffset)
  } <span class="hljs-keyword">else</span> {
    array = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(array, byteOffset, length)
  }

  <span class="hljs-keyword">if</span> (Buffer.TYPED_ARRAY_SUPPORT) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-214" id="section-214"></a>
</div>
<p>Return an augmented <code>Uint8Array</code> instance, for best performance</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    that = array
    that.__proto__ = Buffer.prototype
  } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-215" id="section-215"></a>
</div>
<p>Fallback: Return an object instance of the Buffer class</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    that = fromArrayLike(that, array)
  }
  <span class="hljs-keyword">return</span> that
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fromObject</span> (<span class="hljs-params">that, obj</span>) </span>{
  <span class="hljs-keyword">if</span> (Buffer.isBuffer(obj)) {
    <span class="hljs-keyword">var</span> len = checked(obj.length) | <span class="hljs-number">0</span>
    that = createBuffer(that, len)

    <span class="hljs-keyword">if</span> (that.length === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> that
    }

    obj.copy(that, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, len)
    <span class="hljs-keyword">return</span> that
  }

  <span class="hljs-keyword">if</span> (obj) {
    <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">ArrayBuffer</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp;
        obj.buffer <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span>) || <span class="hljs-string">'length'</span> <span class="hljs-keyword">in</span> obj) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj.length !== <span class="hljs-string">'number'</span> || isnan(obj.length)) {
        <span class="hljs-keyword">return</span> createBuffer(that, <span class="hljs-number">0</span>)
      }
      <span class="hljs-keyword">return</span> fromArrayLike(that, obj)
    }

    <span class="hljs-keyword">if</span> (obj.type === <span class="hljs-string">'Buffer'</span> &amp;&amp; isArray(obj.data)) {
      <span class="hljs-keyword">return</span> fromArrayLike(that, obj.data)
    }
  }

  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.'</span>)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checked</span> (<span class="hljs-params">length</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-216" id="section-216"></a>
</div>
<p>Note: cannot use <code>length &lt; kMaxLength()</code> here because that fails when
length is NaN (which is otherwise coerced to zero.)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (length &gt;= kMaxLength()) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'Attempt to allocate Buffer larger than maximum '</span> +
                         <span class="hljs-string">'size: 0x'</span> + kMaxLength().toString(<span class="hljs-number">16</span>) + <span class="hljs-string">' bytes'</span>)
  }
  <span class="hljs-keyword">return</span> length | <span class="hljs-number">0</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SlowBuffer</span> (<span class="hljs-params">length</span>) </span>{
  <span class="hljs-keyword">if</span> (+length != length) { <span class="hljs-comment">// eslint-disable-line eqeqeq</span>
    length = <span class="hljs-number">0</span>
  }
  <span class="hljs-keyword">return</span> Buffer.alloc(+length)
}

Buffer.isBuffer = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isBuffer</span> (<span class="hljs-params">b</span>) </span>{
  <span class="hljs-keyword">return</span> !!(b != <span class="hljs-literal">null</span> &amp;&amp; b._isBuffer)
}

Buffer.compare = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compare</span> (<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">if</span> (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Arguments must be Buffers'</span>)
  }

  <span class="hljs-keyword">if</span> (a === b) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>

  <span class="hljs-keyword">var</span> x = a.length
  <span class="hljs-keyword">var</span> y = b.length

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = <span class="hljs-built_in">Math</span>.min(x, y); i &lt; len; ++i) {
    <span class="hljs-keyword">if</span> (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      <span class="hljs-keyword">break</span>
    }
  }

  <span class="hljs-keyword">if</span> (x &lt; y) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
  <span class="hljs-keyword">if</span> (y &lt; x) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
}

Buffer.isEncoding = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isEncoding</span> (<span class="hljs-params">encoding</span>) </span>{
  <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">String</span>(encoding).toLowerCase()) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'hex'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'utf8'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'utf-8'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'ascii'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'latin1'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'binary'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'base64'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'ucs2'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'ucs-2'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'utf16le'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'utf-16le'</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
}

Buffer.concat = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">concat</span> (<span class="hljs-params">list, length</span>) </span>{
  <span class="hljs-keyword">if</span> (!isArray(list)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'"list" argument must be an Array of Buffers'</span>)
  }

  <span class="hljs-keyword">if</span> (list.length === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> Buffer.alloc(<span class="hljs-number">0</span>)
  }

  <span class="hljs-keyword">var</span> i
  <span class="hljs-keyword">if</span> (length === <span class="hljs-literal">undefined</span>) {
    length = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; list.length; ++i) {
      length += list[i].length
    }
  }

  <span class="hljs-keyword">var</span> buffer = Buffer.allocUnsafe(length)
  <span class="hljs-keyword">var</span> pos = <span class="hljs-number">0</span>
  <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; list.length; ++i) {
    <span class="hljs-keyword">var</span> buf = list[i]
    <span class="hljs-keyword">if</span> (!Buffer.isBuffer(buf)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'"list" argument must be an Array of Buffers'</span>)
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  <span class="hljs-keyword">return</span> buffer
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byteLength</span> (<span class="hljs-params">string, encoding</span>) </span>{
  <span class="hljs-keyword">if</span> (Buffer.isBuffer(string)) {
    <span class="hljs-keyword">return</span> string.length
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">ArrayBuffer</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">ArrayBuffer</span>.isView === <span class="hljs-string">'function'</span> &amp;&amp;
      (<span class="hljs-built_in">ArrayBuffer</span>.isView(string) || string <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span>)) {
    <span class="hljs-keyword">return</span> string.byteLength
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> string !== <span class="hljs-string">'string'</span>) {
    string = <span class="hljs-string">''</span> + string
  }

  <span class="hljs-keyword">var</span> len = string.length
  <span class="hljs-keyword">if</span> (len === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-217" id="section-217"></a>
</div>
<p>Use a for loop to avoid recursion</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> loweredCase = <span class="hljs-literal">false</span>
  <span class="hljs-keyword">for</span> (;;) {
    <span class="hljs-keyword">switch</span> (encoding) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'ascii'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'latin1'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'binary'</span>:
        <span class="hljs-keyword">return</span> len
      <span class="hljs-keyword">case</span> <span class="hljs-string">'utf8'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'utf-8'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-literal">undefined</span>:
        <span class="hljs-keyword">return</span> utf8ToBytes(string).length
      <span class="hljs-keyword">case</span> <span class="hljs-string">'ucs2'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'ucs-2'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'utf16le'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'utf-16le'</span>:
        <span class="hljs-keyword">return</span> len * <span class="hljs-number">2</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'hex'</span>:
        <span class="hljs-keyword">return</span> len &gt;&gt;&gt; <span class="hljs-number">1</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">'base64'</span>:
        <span class="hljs-keyword">return</span> base64ToBytes(string).length
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">if</span> (loweredCase) <span class="hljs-keyword">return</span> utf8ToBytes(string).length <span class="hljs-comment">// assume utf8</span>
        encoding = (<span class="hljs-string">''</span> + encoding).toLowerCase()
        loweredCase = <span class="hljs-literal">true</span>
    }
  }
}
Buffer.byteLength = byteLength

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">slowToString</span> (<span class="hljs-params">encoding, start, end</span>) </span>{
  <span class="hljs-keyword">var</span> loweredCase = <span class="hljs-literal">false</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-218" id="section-218"></a>
</div>
<p>No need to verify that &quot;this.length &lt;= MAX_UINT32&quot; since it's a read-only
property of a typed array.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-219" id="section-219"></a>
</div>
<p>This behaves neither like String nor Uint8Array in that we set start/end
to their upper/lower bounds if the value passed is out of range.
undefined is handled specially as per ECMA-262 6th Edition,
Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (start === <span class="hljs-literal">undefined</span> || start &lt; <span class="hljs-number">0</span>) {
    start = <span class="hljs-number">0</span>
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-220" id="section-220"></a>
</div>
<p>Return early if start &gt; this.length. Done here to prevent potential uint32
coercion fail below.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (start &gt; <span class="hljs-keyword">this</span>.length) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
  }

  <span class="hljs-keyword">if</span> (end === <span class="hljs-literal">undefined</span> || end &gt; <span class="hljs-keyword">this</span>.length) {
    end = <span class="hljs-keyword">this</span>.length
  }

  <span class="hljs-keyword">if</span> (end &lt;= <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-221" id="section-221"></a>
</div>
<p>Force coersion to uint32. This will also coerce falsey/NaN values to 0.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  end &gt;&gt;&gt;= <span class="hljs-number">0</span>
  start &gt;&gt;&gt;= <span class="hljs-number">0</span>

  <span class="hljs-keyword">if</span> (end &lt;= start) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
  }

  <span class="hljs-keyword">if</span> (!encoding) encoding = <span class="hljs-string">'utf8'</span>

  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">switch</span> (encoding) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'hex'</span>:
        <span class="hljs-keyword">return</span> hexSlice(<span class="hljs-keyword">this</span>, start, end)

      <span class="hljs-keyword">case</span> <span class="hljs-string">'utf8'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'utf-8'</span>:
        <span class="hljs-keyword">return</span> utf8Slice(<span class="hljs-keyword">this</span>, start, end)

      <span class="hljs-keyword">case</span> <span class="hljs-string">'ascii'</span>:
        <span class="hljs-keyword">return</span> asciiSlice(<span class="hljs-keyword">this</span>, start, end)

      <span class="hljs-keyword">case</span> <span class="hljs-string">'latin1'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'binary'</span>:
        <span class="hljs-keyword">return</span> latin1Slice(<span class="hljs-keyword">this</span>, start, end)

      <span class="hljs-keyword">case</span> <span class="hljs-string">'base64'</span>:
        <span class="hljs-keyword">return</span> base64Slice(<span class="hljs-keyword">this</span>, start, end)

      <span class="hljs-keyword">case</span> <span class="hljs-string">'ucs2'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'ucs-2'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'utf16le'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'utf-16le'</span>:
        <span class="hljs-keyword">return</span> utf16leSlice(<span class="hljs-keyword">this</span>, start, end)

      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">if</span> (loweredCase) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Unknown encoding: '</span> + encoding)
        encoding = (encoding + <span class="hljs-string">''</span>).toLowerCase()
        loweredCase = <span class="hljs-literal">true</span>
    }
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-222" id="section-222"></a>
</div>
<p>The property is used by <code>Buffer.isBuffer</code> and <code>is-buffer</code> (in Safari 5-7) to detect
Buffer instances.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">Buffer.prototype._isBuffer = <span class="hljs-literal">true</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">swap</span> (<span class="hljs-params">b, n, m</span>) </span>{
  <span class="hljs-keyword">var</span> i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">swap16</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> len = <span class="hljs-keyword">this</span>.length
  <span class="hljs-keyword">if</span> (len % <span class="hljs-number">2</span> !== <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'Buffer size must be a multiple of 16-bits'</span>)
  }
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i += <span class="hljs-number">2</span>) {
    swap(<span class="hljs-keyword">this</span>, i, i + <span class="hljs-number">1</span>)
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
}

Buffer.prototype.swap32 = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">swap32</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> len = <span class="hljs-keyword">this</span>.length
  <span class="hljs-keyword">if</span> (len % <span class="hljs-number">4</span> !== <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'Buffer size must be a multiple of 32-bits'</span>)
  }
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i += <span class="hljs-number">4</span>) {
    swap(<span class="hljs-keyword">this</span>, i, i + <span class="hljs-number">3</span>)
    swap(<span class="hljs-keyword">this</span>, i + <span class="hljs-number">1</span>, i + <span class="hljs-number">2</span>)
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
}

Buffer.prototype.swap64 = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">swap64</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> len = <span class="hljs-keyword">this</span>.length
  <span class="hljs-keyword">if</span> (len % <span class="hljs-number">8</span> !== <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'Buffer size must be a multiple of 64-bits'</span>)
  }
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i += <span class="hljs-number">8</span>) {
    swap(<span class="hljs-keyword">this</span>, i, i + <span class="hljs-number">7</span>)
    swap(<span class="hljs-keyword">this</span>, i + <span class="hljs-number">1</span>, i + <span class="hljs-number">6</span>)
    swap(<span class="hljs-keyword">this</span>, i + <span class="hljs-number">2</span>, i + <span class="hljs-number">5</span>)
    swap(<span class="hljs-keyword">this</span>, i + <span class="hljs-number">3</span>, i + <span class="hljs-number">4</span>)
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
}

Buffer.prototype.toString = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toString</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> length = <span class="hljs-keyword">this</span>.length | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> utf8Slice(<span class="hljs-keyword">this</span>, <span class="hljs-number">0</span>, length)
  <span class="hljs-keyword">return</span> slowToString.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>)
}

Buffer.prototype.equals = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">equals</span> (<span class="hljs-params">b</span>) </span>{
  <span class="hljs-keyword">if</span> (!Buffer.isBuffer(b)) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Argument must be a Buffer'</span>)
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> === b) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  <span class="hljs-keyword">return</span> Buffer.compare(<span class="hljs-keyword">this</span>, b) === <span class="hljs-number">0</span>
}

Buffer.prototype.inspect = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inspect</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> str = <span class="hljs-string">''</span>
  <span class="hljs-keyword">var</span> max = exports.INSPECT_MAX_BYTES
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.length &gt; <span class="hljs-number">0</span>) {
    str = <span class="hljs-keyword">this</span>.toString(<span class="hljs-string">'hex'</span>, <span class="hljs-number">0</span>, max).match(<span class="hljs-regexp">/.{2}/g</span>).join(<span class="hljs-string">' '</span>)
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.length &gt; max) str += <span class="hljs-string">' ... '</span>
  }
  <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;Buffer '</span> + str + <span class="hljs-string">'&gt;'</span>
}

Buffer.prototype.compare = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compare</span> (<span class="hljs-params">target, start, end, thisStart, thisEnd</span>) </span>{
  <span class="hljs-keyword">if</span> (!Buffer.isBuffer(target)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Argument must be a Buffer'</span>)
  }

  <span class="hljs-keyword">if</span> (start === <span class="hljs-literal">undefined</span>) {
    start = <span class="hljs-number">0</span>
  }
  <span class="hljs-keyword">if</span> (end === <span class="hljs-literal">undefined</span>) {
    end = target ? target.length : <span class="hljs-number">0</span>
  }
  <span class="hljs-keyword">if</span> (thisStart === <span class="hljs-literal">undefined</span>) {
    thisStart = <span class="hljs-number">0</span>
  }
  <span class="hljs-keyword">if</span> (thisEnd === <span class="hljs-literal">undefined</span>) {
    thisEnd = <span class="hljs-keyword">this</span>.length
  }

  <span class="hljs-keyword">if</span> (start &lt; <span class="hljs-number">0</span> || end &gt; target.length || thisStart &lt; <span class="hljs-number">0</span> || thisEnd &gt; <span class="hljs-keyword">this</span>.length) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'out of range index'</span>)
  }

  <span class="hljs-keyword">if</span> (thisStart &gt;= thisEnd &amp;&amp; start &gt;= end) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  }
  <span class="hljs-keyword">if</span> (thisStart &gt;= thisEnd) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
  }
  <span class="hljs-keyword">if</span> (start &gt;= end) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
  }

  start &gt;&gt;&gt;= <span class="hljs-number">0</span>
  end &gt;&gt;&gt;= <span class="hljs-number">0</span>
  thisStart &gt;&gt;&gt;= <span class="hljs-number">0</span>
  thisEnd &gt;&gt;&gt;= <span class="hljs-number">0</span>

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> === target) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>

  <span class="hljs-keyword">var</span> x = thisEnd - thisStart
  <span class="hljs-keyword">var</span> y = end - start
  <span class="hljs-keyword">var</span> len = <span class="hljs-built_in">Math</span>.min(x, y)

  <span class="hljs-keyword">var</span> thisCopy = <span class="hljs-keyword">this</span>.slice(thisStart, thisEnd)
  <span class="hljs-keyword">var</span> targetCopy = target.slice(start, end)

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; ++i) {
    <span class="hljs-keyword">if</span> (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      <span class="hljs-keyword">break</span>
    }
  }

  <span class="hljs-keyword">if</span> (x &lt; y) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
  <span class="hljs-keyword">if</span> (y &lt; x) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-223" id="section-223"></a>
</div>
<p>Finds either the first index of <code>val</code> in <code>buffer</code> at offset &gt;= <code>byteOffset</code>,
OR the last index of <code>val</code> in <code>buffer</code> at offset &lt;= <code>byteOffset</code>.</p>
<p>Arguments:</p>
<ul>
<li>buffer - a Buffer to search</li>
<li>val - a string, Buffer, or number</li>
<li>byteOffset - an index into <code>buffer</code>; will be clamped to an int32</li>
<li>encoding - an optional encoding, relevant is val is a string</li>
<li>dir - true for indexOf, false for lastIndexOf</li>
</ul>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bidirectionalIndexOf</span> (<span class="hljs-params">buffer, val, byteOffset, encoding, dir</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-224" id="section-224"></a>
</div>
<p>Empty buffer means no match</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (buffer.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-225" id="section-225"></a>
</div>
<p>Normalize byteOffset</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> byteOffset === <span class="hljs-string">'string'</span>) {
    encoding = byteOffset
    byteOffset = <span class="hljs-number">0</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (byteOffset &gt; <span class="hljs-number">0x7fffffff</span>) {
    byteOffset = <span class="hljs-number">0x7fffffff</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (byteOffset &lt; <span class="hljs-number">-0x80000000</span>) {
    byteOffset = <span class="hljs-number">-0x80000000</span>
  }
  byteOffset = +byteOffset  <span class="hljs-comment">// Coerce to Number.</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(byteOffset)) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-226" id="section-226"></a>
</div>
<p>byteOffset: it it's undefined, null, NaN, &quot;foo&quot;, etc, search whole buffer</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    byteOffset = dir ? <span class="hljs-number">0</span> : (buffer.length - <span class="hljs-number">1</span>)
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-227" id="section-227"></a>
</div>
<p>Normalize byteOffset: negative offsets start from the end of the buffer</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (byteOffset &lt; <span class="hljs-number">0</span>) byteOffset = buffer.length + byteOffset
  <span class="hljs-keyword">if</span> (byteOffset &gt;= buffer.length) {
    <span class="hljs-keyword">if</span> (dir) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
    <span class="hljs-keyword">else</span> byteOffset = buffer.length - <span class="hljs-number">1</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (byteOffset &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span> (dir) byteOffset = <span class="hljs-number">0</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-228" id="section-228"></a>
</div>
<p>Normalize val</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val === <span class="hljs-string">'string'</span>) {
    val = Buffer.from(val, encoding)
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-229" id="section-229"></a>
</div>
<p>Finally, search either indexOf (if dir is true) or lastIndexOf</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (Buffer.isBuffer(val)) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-230" id="section-230"></a>
</div>
<p>Special case: looking for empty string/buffer always fails</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (val.length === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
    }
    <span class="hljs-keyword">return</span> arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val === <span class="hljs-string">'number'</span>) {
    val = val &amp; <span class="hljs-number">0xFF</span> <span class="hljs-comment">// Search for a byte value [0-255]</span>
    <span class="hljs-keyword">if</span> (Buffer.TYPED_ARRAY_SUPPORT &amp;&amp;
        <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Uint8Array</span>.prototype.indexOf === <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">if</span> (dir) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Uint8Array</span>.prototype.indexOf.call(buffer, val, byteOffset)
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Uint8Array</span>.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    <span class="hljs-keyword">return</span> arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'val must be string, number or Buffer'</span>)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">arrayIndexOf</span> (<span class="hljs-params">arr, val, byteOffset, encoding, dir</span>) </span>{
  <span class="hljs-keyword">var</span> indexSize = <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> arrLength = arr.length
  <span class="hljs-keyword">var</span> valLength = val.length

  <span class="hljs-keyword">if</span> (encoding !== <span class="hljs-literal">undefined</span>) {
    encoding = <span class="hljs-built_in">String</span>(encoding).toLowerCase()
    <span class="hljs-keyword">if</span> (encoding === <span class="hljs-string">'ucs2'</span> || encoding === <span class="hljs-string">'ucs-2'</span> ||
        encoding === <span class="hljs-string">'utf16le'</span> || encoding === <span class="hljs-string">'utf-16le'</span>) {
      <span class="hljs-keyword">if</span> (arr.length &lt; <span class="hljs-number">2</span> || val.length &lt; <span class="hljs-number">2</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
      }
      indexSize = <span class="hljs-number">2</span>
      arrLength /= <span class="hljs-number">2</span>
      valLength /= <span class="hljs-number">2</span>
      byteOffset /= <span class="hljs-number">2</span>
    }
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">read</span> (<span class="hljs-params">buf, i</span>) </span>{
    <span class="hljs-keyword">if</span> (indexSize === <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">return</span> buf[i]
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> buf.readUInt16BE(i * indexSize)
    }
  }

  <span class="hljs-keyword">var</span> i
  <span class="hljs-keyword">if</span> (dir) {
    <span class="hljs-keyword">var</span> foundIndex = <span class="hljs-number">-1</span>
    <span class="hljs-keyword">for</span> (i = byteOffset; i &lt; arrLength; i++) {
      <span class="hljs-keyword">if</span> (read(arr, i) === read(val, foundIndex === <span class="hljs-number">-1</span> ? <span class="hljs-number">0</span> : i - foundIndex)) {
        <span class="hljs-keyword">if</span> (foundIndex === <span class="hljs-number">-1</span>) foundIndex = i
        <span class="hljs-keyword">if</span> (i - foundIndex + <span class="hljs-number">1</span> === valLength) <span class="hljs-keyword">return</span> foundIndex * indexSize
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (foundIndex !== <span class="hljs-number">-1</span>) i -= i - foundIndex
        foundIndex = <span class="hljs-number">-1</span>
      }
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">if</span> (byteOffset + valLength &gt; arrLength) byteOffset = arrLength - valLength
    <span class="hljs-keyword">for</span> (i = byteOffset; i &gt;= <span class="hljs-number">0</span>; i--) {
      <span class="hljs-keyword">var</span> found = <span class="hljs-literal">true</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; valLength; j++) {
        <span class="hljs-keyword">if</span> (read(arr, i + j) !== read(val, j)) {
          found = <span class="hljs-literal">false</span>
          <span class="hljs-keyword">break</span>
        }
      }
      <span class="hljs-keyword">if</span> (found) <span class="hljs-keyword">return</span> i
    }
  }

  <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
}

Buffer.prototype.includes = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">includes</span> (<span class="hljs-params">val, byteOffset, encoding</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.indexOf(val, byteOffset, encoding) !== <span class="hljs-number">-1</span>
}

Buffer.prototype.indexOf = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">indexOf</span> (<span class="hljs-params">val, byteOffset, encoding</span>) </span>{
  <span class="hljs-keyword">return</span> bidirectionalIndexOf(<span class="hljs-keyword">this</span>, val, byteOffset, encoding, <span class="hljs-literal">true</span>)
}

Buffer.prototype.lastIndexOf = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lastIndexOf</span> (<span class="hljs-params">val, byteOffset, encoding</span>) </span>{
  <span class="hljs-keyword">return</span> bidirectionalIndexOf(<span class="hljs-keyword">this</span>, val, byteOffset, encoding, <span class="hljs-literal">false</span>)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hexWrite</span> (<span class="hljs-params">buf, string, offset, length</span>) </span>{
  offset = <span class="hljs-built_in">Number</span>(offset) || <span class="hljs-number">0</span>
  <span class="hljs-keyword">var</span> remaining = buf.length - offset
  <span class="hljs-keyword">if</span> (!length) {
    length = remaining
  } <span class="hljs-keyword">else</span> {
    length = <span class="hljs-built_in">Number</span>(length)
    <span class="hljs-keyword">if</span> (length &gt; remaining) {
      length = remaining
    }
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-231" id="section-231"></a>
</div>
<p>must be an even number of digits</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> strLen = string.length
  <span class="hljs-keyword">if</span> (strLen % <span class="hljs-number">2</span> !== <span class="hljs-number">0</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid hex string'</span>)

  <span class="hljs-keyword">if</span> (length &gt; strLen / <span class="hljs-number">2</span>) {
    length = strLen / <span class="hljs-number">2</span>
  }
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; length; ++i) {
    <span class="hljs-keyword">var</span> parsed = <span class="hljs-built_in">parseInt</span>(string.substr(i * <span class="hljs-number">2</span>, <span class="hljs-number">2</span>), <span class="hljs-number">16</span>)
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(parsed)) <span class="hljs-keyword">return</span> i
    buf[offset + i] = parsed
  }
  <span class="hljs-keyword">return</span> i
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">utf8Write</span> (<span class="hljs-params">buf, string, offset, length</span>) </span>{
  <span class="hljs-keyword">return</span> blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">asciiWrite</span> (<span class="hljs-params">buf, string, offset, length</span>) </span>{
  <span class="hljs-keyword">return</span> blitBuffer(asciiToBytes(string), buf, offset, length)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">latin1Write</span> (<span class="hljs-params">buf, string, offset, length</span>) </span>{
  <span class="hljs-keyword">return</span> asciiWrite(buf, string, offset, length)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">base64Write</span> (<span class="hljs-params">buf, string, offset, length</span>) </span>{
  <span class="hljs-keyword">return</span> blitBuffer(base64ToBytes(string), buf, offset, length)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ucs2Write</span> (<span class="hljs-params">buf, string, offset, length</span>) </span>{
  <span class="hljs-keyword">return</span> blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">write</span> (<span class="hljs-params">string, offset, length, encoding</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-232" id="section-232"></a>
</div>
<p>Buffer#write(string)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (offset === <span class="hljs-literal">undefined</span>) {
    encoding = <span class="hljs-string">'utf8'</span>
    length = <span class="hljs-keyword">this</span>.length
    offset = <span class="hljs-number">0</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-233" id="section-233"></a>
</div>
<p>Buffer#write(string, encoding)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (length === <span class="hljs-literal">undefined</span> &amp;&amp; <span class="hljs-keyword">typeof</span> offset === <span class="hljs-string">'string'</span>) {
    encoding = offset
    length = <span class="hljs-keyword">this</span>.length
    offset = <span class="hljs-number">0</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-234" id="section-234"></a>
</div>
<p>Buffer#write(string, offset[, length][, encoding])</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isFinite</span>(offset)) {
    offset = offset | <span class="hljs-number">0</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isFinite</span>(length)) {
      length = length | <span class="hljs-number">0</span>
      <span class="hljs-keyword">if</span> (encoding === <span class="hljs-literal">undefined</span>) encoding = <span class="hljs-string">'utf8'</span>
    } <span class="hljs-keyword">else</span> {
      encoding = length
      length = <span class="hljs-literal">undefined</span>
    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-235" id="section-235"></a>
</div>
<p>legacy write(string, encoding, offset, length) - remove in v0.13</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(
      <span class="hljs-string">'Buffer.write(string, encoding, offset[, length]) is no longer supported'</span>
    )
  }

  <span class="hljs-keyword">var</span> remaining = <span class="hljs-keyword">this</span>.length - offset
  <span class="hljs-keyword">if</span> (length === <span class="hljs-literal">undefined</span> || length &gt; remaining) length = remaining

  <span class="hljs-keyword">if</span> ((string.length &gt; <span class="hljs-number">0</span> &amp;&amp; (length &lt; <span class="hljs-number">0</span> || offset &lt; <span class="hljs-number">0</span>)) || offset &gt; <span class="hljs-keyword">this</span>.length) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'Attempt to write outside buffer bounds'</span>)
  }

  <span class="hljs-keyword">if</span> (!encoding) encoding = <span class="hljs-string">'utf8'</span>

  <span class="hljs-keyword">var</span> loweredCase = <span class="hljs-literal">false</span>
  <span class="hljs-keyword">for</span> (;;) {
    <span class="hljs-keyword">switch</span> (encoding) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'hex'</span>:
        <span class="hljs-keyword">return</span> hexWrite(<span class="hljs-keyword">this</span>, string, offset, length)

      <span class="hljs-keyword">case</span> <span class="hljs-string">'utf8'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'utf-8'</span>:
        <span class="hljs-keyword">return</span> utf8Write(<span class="hljs-keyword">this</span>, string, offset, length)

      <span class="hljs-keyword">case</span> <span class="hljs-string">'ascii'</span>:
        <span class="hljs-keyword">return</span> asciiWrite(<span class="hljs-keyword">this</span>, string, offset, length)

      <span class="hljs-keyword">case</span> <span class="hljs-string">'latin1'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'binary'</span>:
        <span class="hljs-keyword">return</span> latin1Write(<span class="hljs-keyword">this</span>, string, offset, length)

      <span class="hljs-keyword">case</span> <span class="hljs-string">'base64'</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-236" id="section-236"></a>
</div>
<p>Warning: maxLength not taken into account in base64Write</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">return</span> base64Write(<span class="hljs-keyword">this</span>, string, offset, length)

      <span class="hljs-keyword">case</span> <span class="hljs-string">'ucs2'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'ucs-2'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'utf16le'</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">'utf-16le'</span>:
        <span class="hljs-keyword">return</span> ucs2Write(<span class="hljs-keyword">this</span>, string, offset, length)

      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">if</span> (loweredCase) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Unknown encoding: '</span> + encoding)
        encoding = (<span class="hljs-string">''</span> + encoding).toLowerCase()
        loweredCase = <span class="hljs-literal">true</span>
    }
  }
}

Buffer.prototype.toJSON = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toJSON</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'Buffer'</span>,
    <span class="hljs-attr">data</span>: <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-keyword">this</span>._arr || <span class="hljs-keyword">this</span>, <span class="hljs-number">0</span>)
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">base64Slice</span> (<span class="hljs-params">buf, start, end</span>) </span>{
  <span class="hljs-keyword">if</span> (start === <span class="hljs-number">0</span> &amp;&amp; end === buf.length) {
    <span class="hljs-keyword">return</span> base64.fromByteArray(buf)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> base64.fromByteArray(buf.slice(start, end))
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">utf8Slice</span> (<span class="hljs-params">buf, start, end</span>) </span>{
  end = <span class="hljs-built_in">Math</span>.min(buf.length, end)
  <span class="hljs-keyword">var</span> res = []

  <span class="hljs-keyword">var</span> i = start
  <span class="hljs-keyword">while</span> (i &lt; end) {
    <span class="hljs-keyword">var</span> firstByte = buf[i]
    <span class="hljs-keyword">var</span> codePoint = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">var</span> bytesPerSequence = (firstByte &gt; <span class="hljs-number">0xEF</span>) ? <span class="hljs-number">4</span>
      : (firstByte &gt; <span class="hljs-number">0xDF</span>) ? <span class="hljs-number">3</span>
      : (firstByte &gt; <span class="hljs-number">0xBF</span>) ? <span class="hljs-number">2</span>
      : <span class="hljs-number">1</span>

    <span class="hljs-keyword">if</span> (i + bytesPerSequence &lt;= end) {
      <span class="hljs-keyword">var</span> secondByte, thirdByte, fourthByte, tempCodePoint

      <span class="hljs-keyword">switch</span> (bytesPerSequence) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
          <span class="hljs-keyword">if</span> (firstByte &lt; <span class="hljs-number">0x80</span>) {
            codePoint = firstByte
          }
          <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
          secondByte = buf[i + <span class="hljs-number">1</span>]
          <span class="hljs-keyword">if</span> ((secondByte &amp; <span class="hljs-number">0xC0</span>) === <span class="hljs-number">0x80</span>) {
            tempCodePoint = (firstByte &amp; <span class="hljs-number">0x1F</span>) &lt;&lt; <span class="hljs-number">0x6</span> | (secondByte &amp; <span class="hljs-number">0x3F</span>)
            <span class="hljs-keyword">if</span> (tempCodePoint &gt; <span class="hljs-number">0x7F</span>) {
              codePoint = tempCodePoint
            }
          }
          <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
          secondByte = buf[i + <span class="hljs-number">1</span>]
          thirdByte = buf[i + <span class="hljs-number">2</span>]
          <span class="hljs-keyword">if</span> ((secondByte &amp; <span class="hljs-number">0xC0</span>) === <span class="hljs-number">0x80</span> &amp;&amp; (thirdByte &amp; <span class="hljs-number">0xC0</span>) === <span class="hljs-number">0x80</span>) {
            tempCodePoint = (firstByte &amp; <span class="hljs-number">0xF</span>) &lt;&lt; <span class="hljs-number">0xC</span> | (secondByte &amp; <span class="hljs-number">0x3F</span>) &lt;&lt; <span class="hljs-number">0x6</span> | (thirdByte &amp; <span class="hljs-number">0x3F</span>)
            <span class="hljs-keyword">if</span> (tempCodePoint &gt; <span class="hljs-number">0x7FF</span> &amp;&amp; (tempCodePoint &lt; <span class="hljs-number">0xD800</span> || tempCodePoint &gt; <span class="hljs-number">0xDFFF</span>)) {
              codePoint = tempCodePoint
            }
          }
          <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
          secondByte = buf[i + <span class="hljs-number">1</span>]
          thirdByte = buf[i + <span class="hljs-number">2</span>]
          fourthByte = buf[i + <span class="hljs-number">3</span>]
          <span class="hljs-keyword">if</span> ((secondByte &amp; <span class="hljs-number">0xC0</span>) === <span class="hljs-number">0x80</span> &amp;&amp; (thirdByte &amp; <span class="hljs-number">0xC0</span>) === <span class="hljs-number">0x80</span> &amp;&amp; (fourthByte &amp; <span class="hljs-number">0xC0</span>) === <span class="hljs-number">0x80</span>) {
            tempCodePoint = (firstByte &amp; <span class="hljs-number">0xF</span>) &lt;&lt; <span class="hljs-number">0x12</span> | (secondByte &amp; <span class="hljs-number">0x3F</span>) &lt;&lt; <span class="hljs-number">0xC</span> | (thirdByte &amp; <span class="hljs-number">0x3F</span>) &lt;&lt; <span class="hljs-number">0x6</span> | (fourthByte &amp; <span class="hljs-number">0x3F</span>)
            <span class="hljs-keyword">if</span> (tempCodePoint &gt; <span class="hljs-number">0xFFFF</span> &amp;&amp; tempCodePoint &lt; <span class="hljs-number">0x110000</span>) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    <span class="hljs-keyword">if</span> (codePoint === <span class="hljs-literal">null</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-237" id="section-237"></a>
</div>
<p>we did not generate a valid codePoint so insert a
replacement char (U+FFFD) and advance only 1 byte</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      codePoint = <span class="hljs-number">0xFFFD</span>
      bytesPerSequence = <span class="hljs-number">1</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (codePoint &gt; <span class="hljs-number">0xFFFF</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-238" id="section-238"></a>
</div>
<p>encode to utf16 (surrogate pair dance)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      codePoint -= <span class="hljs-number">0x10000</span>
      res.push(codePoint &gt;&gt;&gt; <span class="hljs-number">10</span> &amp; <span class="hljs-number">0x3FF</span> | <span class="hljs-number">0xD800</span>)
      codePoint = <span class="hljs-number">0xDC00</span> | codePoint &amp; <span class="hljs-number">0x3FF</span>
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  <span class="hljs-keyword">return</span> decodeCodePointsArray(res)
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-239" id="section-239"></a>
</div>
<p>Based on http://stackoverflow.com/a/22747272/680742, the browser with
the lowest limit is Chrome, with 0x10000 args.
We go 1 magnitude less, for safety</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> MAX_ARGUMENTS_LENGTH = <span class="hljs-number">0x1000</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">decodeCodePointsArray</span> (<span class="hljs-params">codePoints</span>) </span>{
  <span class="hljs-keyword">var</span> len = codePoints.length
  <span class="hljs-keyword">if</span> (len &lt;= MAX_ARGUMENTS_LENGTH) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">String</span>.fromCharCode.apply(<span class="hljs-built_in">String</span>, codePoints) <span class="hljs-comment">// avoid extra slice()</span>
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-240" id="section-240"></a>
</div>
<p>Decode in chunks to avoid &quot;call stack size exceeded&quot;.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> res = <span class="hljs-string">''</span>
  <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>
  <span class="hljs-keyword">while</span> (i &lt; len) {
    res += <span class="hljs-built_in">String</span>.fromCharCode.apply(
      <span class="hljs-built_in">String</span>,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  <span class="hljs-keyword">return</span> res
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">asciiSlice</span> (<span class="hljs-params">buf, start, end</span>) </span>{
  <span class="hljs-keyword">var</span> ret = <span class="hljs-string">''</span>
  end = <span class="hljs-built_in">Math</span>.min(buf.length, end)

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = start; i &lt; end; ++i) {
    ret += <span class="hljs-built_in">String</span>.fromCharCode(buf[i] &amp; <span class="hljs-number">0x7F</span>)
  }
  <span class="hljs-keyword">return</span> ret
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">latin1Slice</span> (<span class="hljs-params">buf, start, end</span>) </span>{
  <span class="hljs-keyword">var</span> ret = <span class="hljs-string">''</span>
  end = <span class="hljs-built_in">Math</span>.min(buf.length, end)

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = start; i &lt; end; ++i) {
    ret += <span class="hljs-built_in">String</span>.fromCharCode(buf[i])
  }
  <span class="hljs-keyword">return</span> ret
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hexSlice</span> (<span class="hljs-params">buf, start, end</span>) </span>{
  <span class="hljs-keyword">var</span> len = buf.length

  <span class="hljs-keyword">if</span> (!start || start &lt; <span class="hljs-number">0</span>) start = <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!end || end &lt; <span class="hljs-number">0</span> || end &gt; len) end = len

  <span class="hljs-keyword">var</span> out = <span class="hljs-string">''</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = start; i &lt; end; ++i) {
    out += toHex(buf[i])
  }
  <span class="hljs-keyword">return</span> out
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">utf16leSlice</span> (<span class="hljs-params">buf, start, end</span>) </span>{
  <span class="hljs-keyword">var</span> bytes = buf.slice(start, end)
  <span class="hljs-keyword">var</span> res = <span class="hljs-string">''</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; bytes.length; i += <span class="hljs-number">2</span>) {
    res += <span class="hljs-built_in">String</span>.fromCharCode(bytes[i] + bytes[i + <span class="hljs-number">1</span>] * <span class="hljs-number">256</span>)
  }
  <span class="hljs-keyword">return</span> res
}

Buffer.prototype.slice = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">slice</span> (<span class="hljs-params">start, end</span>) </span>{
  <span class="hljs-keyword">var</span> len = <span class="hljs-keyword">this</span>.length
  start = ~~start
  end = end === <span class="hljs-literal">undefined</span> ? len : ~~end

  <span class="hljs-keyword">if</span> (start &lt; <span class="hljs-number">0</span>) {
    start += len
    <span class="hljs-keyword">if</span> (start &lt; <span class="hljs-number">0</span>) start = <span class="hljs-number">0</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (start &gt; len) {
    start = len
  }

  <span class="hljs-keyword">if</span> (end &lt; <span class="hljs-number">0</span>) {
    end += len
    <span class="hljs-keyword">if</span> (end &lt; <span class="hljs-number">0</span>) end = <span class="hljs-number">0</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (end &gt; len) {
    end = len
  }

  <span class="hljs-keyword">if</span> (end &lt; start) end = start

  <span class="hljs-keyword">var</span> newBuf
  <span class="hljs-keyword">if</span> (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = <span class="hljs-keyword">this</span>.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> sliceLen = end - start
    newBuf = <span class="hljs-keyword">new</span> Buffer(sliceLen, <span class="hljs-literal">undefined</span>)
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; sliceLen; ++i) {
      newBuf[i] = <span class="hljs-keyword">this</span>[i + start]
    }
  }

  <span class="hljs-keyword">return</span> newBuf
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-241" id="section-241"></a>
</div>
<div class="dox">
<div class="summary">
<p>Need to make sure that buffer isn't trying to write out of bounds.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkOffset</span> (<span class="hljs-params">offset, ext, length</span>) </span>{
  <span class="hljs-keyword">if</span> ((offset % <span class="hljs-number">1</span>) !== <span class="hljs-number">0</span> || offset &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'offset is not uint'</span>)
  <span class="hljs-keyword">if</span> (offset + ext &gt; length) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'Trying to access beyond buffer length'</span>)
}

Buffer.prototype.readUIntLE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readUIntLE</span> (<span class="hljs-params">offset, byteLength, noAssert</span>) </span>{
  offset = offset | <span class="hljs-number">0</span>
  byteLength = byteLength | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, byteLength, <span class="hljs-keyword">this</span>.length)

  <span class="hljs-keyword">var</span> val = <span class="hljs-keyword">this</span>[offset]
  <span class="hljs-keyword">var</span> mul = <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>
  <span class="hljs-keyword">while</span> (++i &lt; byteLength &amp;&amp; (mul *= <span class="hljs-number">0x100</span>)) {
    val += <span class="hljs-keyword">this</span>[offset + i] * mul
  }

  <span class="hljs-keyword">return</span> val
}

Buffer.prototype.readUIntBE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readUIntBE</span> (<span class="hljs-params">offset, byteLength, noAssert</span>) </span>{
  offset = offset | <span class="hljs-number">0</span>
  byteLength = byteLength | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) {
    checkOffset(offset, byteLength, <span class="hljs-keyword">this</span>.length)
  }

  <span class="hljs-keyword">var</span> val = <span class="hljs-keyword">this</span>[offset + --byteLength]
  <span class="hljs-keyword">var</span> mul = <span class="hljs-number">1</span>
  <span class="hljs-keyword">while</span> (byteLength &gt; <span class="hljs-number">0</span> &amp;&amp; (mul *= <span class="hljs-number">0x100</span>)) {
    val += <span class="hljs-keyword">this</span>[offset + --byteLength] * mul
  }

  <span class="hljs-keyword">return</span> val
}

Buffer.prototype.readUInt8 = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readUInt8</span> (<span class="hljs-params">offset, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, <span class="hljs-number">1</span>, <span class="hljs-keyword">this</span>.length)
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[offset]
}

Buffer.prototype.readUInt16LE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readUInt16LE</span> (<span class="hljs-params">offset, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, <span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>.length)
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[offset] | (<span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-number">8</span>)
}

Buffer.prototype.readUInt16BE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readUInt16BE</span> (<span class="hljs-params">offset, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, <span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>.length)
  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>[offset] &lt;&lt; <span class="hljs-number">8</span>) | <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>]
}

Buffer.prototype.readUInt32LE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readUInt32LE</span> (<span class="hljs-params">offset, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, <span class="hljs-number">4</span>, <span class="hljs-keyword">this</span>.length)

  <span class="hljs-keyword">return</span> ((<span class="hljs-keyword">this</span>[offset]) |
      (<span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-number">8</span>) |
      (<span class="hljs-keyword">this</span>[offset + <span class="hljs-number">2</span>] &lt;&lt; <span class="hljs-number">16</span>)) +
      (<span class="hljs-keyword">this</span>[offset + <span class="hljs-number">3</span>] * <span class="hljs-number">0x1000000</span>)
}

Buffer.prototype.readUInt32BE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readUInt32BE</span> (<span class="hljs-params">offset, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, <span class="hljs-number">4</span>, <span class="hljs-keyword">this</span>.length)

  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>[offset] * <span class="hljs-number">0x1000000</span>) +
    ((<span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-number">16</span>) |
    (<span class="hljs-keyword">this</span>[offset + <span class="hljs-number">2</span>] &lt;&lt; <span class="hljs-number">8</span>) |
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">3</span>])
}

Buffer.prototype.readIntLE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readIntLE</span> (<span class="hljs-params">offset, byteLength, noAssert</span>) </span>{
  offset = offset | <span class="hljs-number">0</span>
  byteLength = byteLength | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, byteLength, <span class="hljs-keyword">this</span>.length)

  <span class="hljs-keyword">var</span> val = <span class="hljs-keyword">this</span>[offset]
  <span class="hljs-keyword">var</span> mul = <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>
  <span class="hljs-keyword">while</span> (++i &lt; byteLength &amp;&amp; (mul *= <span class="hljs-number">0x100</span>)) {
    val += <span class="hljs-keyword">this</span>[offset + i] * mul
  }
  mul *= <span class="hljs-number">0x80</span>

  <span class="hljs-keyword">if</span> (val &gt;= mul) val -= <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">8</span> * byteLength)

  <span class="hljs-keyword">return</span> val
}

Buffer.prototype.readIntBE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readIntBE</span> (<span class="hljs-params">offset, byteLength, noAssert</span>) </span>{
  offset = offset | <span class="hljs-number">0</span>
  byteLength = byteLength | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, byteLength, <span class="hljs-keyword">this</span>.length)

  <span class="hljs-keyword">var</span> i = byteLength
  <span class="hljs-keyword">var</span> mul = <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> val = <span class="hljs-keyword">this</span>[offset + --i]
  <span class="hljs-keyword">while</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; (mul *= <span class="hljs-number">0x100</span>)) {
    val += <span class="hljs-keyword">this</span>[offset + --i] * mul
  }
  mul *= <span class="hljs-number">0x80</span>

  <span class="hljs-keyword">if</span> (val &gt;= mul) val -= <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">8</span> * byteLength)

  <span class="hljs-keyword">return</span> val
}

Buffer.prototype.readInt8 = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readInt8</span> (<span class="hljs-params">offset, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, <span class="hljs-number">1</span>, <span class="hljs-keyword">this</span>.length)
  <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span>[offset] &amp; <span class="hljs-number">0x80</span>)) <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>[offset])
  <span class="hljs-keyword">return</span> ((<span class="hljs-number">0xff</span> - <span class="hljs-keyword">this</span>[offset] + <span class="hljs-number">1</span>) * <span class="hljs-number">-1</span>)
}

Buffer.prototype.readInt16LE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readInt16LE</span> (<span class="hljs-params">offset, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, <span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>.length)
  <span class="hljs-keyword">var</span> val = <span class="hljs-keyword">this</span>[offset] | (<span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-number">8</span>)
  <span class="hljs-keyword">return</span> (val &amp; <span class="hljs-number">0x8000</span>) ? val | <span class="hljs-number">0xFFFF0000</span> : val
}

Buffer.prototype.readInt16BE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readInt16BE</span> (<span class="hljs-params">offset, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, <span class="hljs-number">2</span>, <span class="hljs-keyword">this</span>.length)
  <span class="hljs-keyword">var</span> val = <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] | (<span class="hljs-keyword">this</span>[offset] &lt;&lt; <span class="hljs-number">8</span>)
  <span class="hljs-keyword">return</span> (val &amp; <span class="hljs-number">0x8000</span>) ? val | <span class="hljs-number">0xFFFF0000</span> : val
}

Buffer.prototype.readInt32LE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readInt32LE</span> (<span class="hljs-params">offset, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, <span class="hljs-number">4</span>, <span class="hljs-keyword">this</span>.length)

  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>[offset]) |
    (<span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-number">8</span>) |
    (<span class="hljs-keyword">this</span>[offset + <span class="hljs-number">2</span>] &lt;&lt; <span class="hljs-number">16</span>) |
    (<span class="hljs-keyword">this</span>[offset + <span class="hljs-number">3</span>] &lt;&lt; <span class="hljs-number">24</span>)
}

Buffer.prototype.readInt32BE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readInt32BE</span> (<span class="hljs-params">offset, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, <span class="hljs-number">4</span>, <span class="hljs-keyword">this</span>.length)

  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>[offset] &lt;&lt; <span class="hljs-number">24</span>) |
    (<span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-number">16</span>) |
    (<span class="hljs-keyword">this</span>[offset + <span class="hljs-number">2</span>] &lt;&lt; <span class="hljs-number">8</span>) |
    (<span class="hljs-keyword">this</span>[offset + <span class="hljs-number">3</span>])
}

Buffer.prototype.readFloatLE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readFloatLE</span> (<span class="hljs-params">offset, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, <span class="hljs-number">4</span>, <span class="hljs-keyword">this</span>.length)
  <span class="hljs-keyword">return</span> ieee754.read(<span class="hljs-keyword">this</span>, offset, <span class="hljs-literal">true</span>, <span class="hljs-number">23</span>, <span class="hljs-number">4</span>)
}

Buffer.prototype.readFloatBE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readFloatBE</span> (<span class="hljs-params">offset, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, <span class="hljs-number">4</span>, <span class="hljs-keyword">this</span>.length)
  <span class="hljs-keyword">return</span> ieee754.read(<span class="hljs-keyword">this</span>, offset, <span class="hljs-literal">false</span>, <span class="hljs-number">23</span>, <span class="hljs-number">4</span>)
}

Buffer.prototype.readDoubleLE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readDoubleLE</span> (<span class="hljs-params">offset, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, <span class="hljs-number">8</span>, <span class="hljs-keyword">this</span>.length)
  <span class="hljs-keyword">return</span> ieee754.read(<span class="hljs-keyword">this</span>, offset, <span class="hljs-literal">true</span>, <span class="hljs-number">52</span>, <span class="hljs-number">8</span>)
}

Buffer.prototype.readDoubleBE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readDoubleBE</span> (<span class="hljs-params">offset, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) checkOffset(offset, <span class="hljs-number">8</span>, <span class="hljs-keyword">this</span>.length)
  <span class="hljs-keyword">return</span> ieee754.read(<span class="hljs-keyword">this</span>, offset, <span class="hljs-literal">false</span>, <span class="hljs-number">52</span>, <span class="hljs-number">8</span>)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkInt</span> (<span class="hljs-params">buf, value, offset, ext, max, min</span>) </span>{
  <span class="hljs-keyword">if</span> (!Buffer.isBuffer(buf)) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'"buffer" argument must be a Buffer instance'</span>)
  <span class="hljs-keyword">if</span> (value &gt; max || value &lt; min) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'"value" argument is out of bounds'</span>)
  <span class="hljs-keyword">if</span> (offset + ext &gt; buf.length) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'Index out of range'</span>)
}

Buffer.prototype.writeUIntLE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeUIntLE</span> (<span class="hljs-params">value, offset, byteLength, noAssert</span>) </span>{
  value = +value
  offset = offset | <span class="hljs-number">0</span>
  byteLength = byteLength | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) {
    <span class="hljs-keyword">var</span> maxBytes = <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">8</span> * byteLength) - <span class="hljs-number">1</span>
    checkInt(<span class="hljs-keyword">this</span>, value, offset, byteLength, maxBytes, <span class="hljs-number">0</span>)
  }

  <span class="hljs-keyword">var</span> mul = <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>
  <span class="hljs-keyword">this</span>[offset] = value &amp; <span class="hljs-number">0xFF</span>
  <span class="hljs-keyword">while</span> (++i &lt; byteLength &amp;&amp; (mul *= <span class="hljs-number">0x100</span>)) {
    <span class="hljs-keyword">this</span>[offset + i] = (value / mul) &amp; <span class="hljs-number">0xFF</span>
  }

  <span class="hljs-keyword">return</span> offset + byteLength
}

Buffer.prototype.writeUIntBE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeUIntBE</span> (<span class="hljs-params">value, offset, byteLength, noAssert</span>) </span>{
  value = +value
  offset = offset | <span class="hljs-number">0</span>
  byteLength = byteLength | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) {
    <span class="hljs-keyword">var</span> maxBytes = <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">8</span> * byteLength) - <span class="hljs-number">1</span>
    checkInt(<span class="hljs-keyword">this</span>, value, offset, byteLength, maxBytes, <span class="hljs-number">0</span>)
  }

  <span class="hljs-keyword">var</span> i = byteLength - <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> mul = <span class="hljs-number">1</span>
  <span class="hljs-keyword">this</span>[offset + i] = value &amp; <span class="hljs-number">0xFF</span>
  <span class="hljs-keyword">while</span> (--i &gt;= <span class="hljs-number">0</span> &amp;&amp; (mul *= <span class="hljs-number">0x100</span>)) {
    <span class="hljs-keyword">this</span>[offset + i] = (value / mul) &amp; <span class="hljs-number">0xFF</span>
  }

  <span class="hljs-keyword">return</span> offset + byteLength
}

Buffer.prototype.writeUInt8 = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeUInt8</span> (<span class="hljs-params">value, offset, noAssert</span>) </span>{
  value = +value
  offset = offset | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) checkInt(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-number">1</span>, <span class="hljs-number">0xff</span>, <span class="hljs-number">0</span>)
  <span class="hljs-keyword">if</span> (!Buffer.TYPED_ARRAY_SUPPORT) value = <span class="hljs-built_in">Math</span>.floor(value)
  <span class="hljs-keyword">this</span>[offset] = (value &amp; <span class="hljs-number">0xff</span>)
  <span class="hljs-keyword">return</span> offset + <span class="hljs-number">1</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">objectWriteUInt16</span> (<span class="hljs-params">buf, value, offset, littleEndian</span>) </span>{
  <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">0</span>) value = <span class="hljs-number">0xffff</span> + value + <span class="hljs-number">1</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-built_in">Math</span>.min(buf.length - offset, <span class="hljs-number">2</span>); i &lt; j; ++i) {
    buf[offset + i] = (value &amp; (<span class="hljs-number">0xff</span> &lt;&lt; (<span class="hljs-number">8</span> * (littleEndian ? i : <span class="hljs-number">1</span> - i)))) &gt;&gt;&gt;
      (littleEndian ? i : <span class="hljs-number">1</span> - i) * <span class="hljs-number">8</span>
  }
}

Buffer.prototype.writeUInt16LE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeUInt16LE</span> (<span class="hljs-params">value, offset, noAssert</span>) </span>{
  value = +value
  offset = offset | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) checkInt(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-number">2</span>, <span class="hljs-number">0xffff</span>, <span class="hljs-number">0</span>)
  <span class="hljs-keyword">if</span> (Buffer.TYPED_ARRAY_SUPPORT) {
    <span class="hljs-keyword">this</span>[offset] = (value &amp; <span class="hljs-number">0xff</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] = (value &gt;&gt;&gt; <span class="hljs-number">8</span>)
  } <span class="hljs-keyword">else</span> {
    objectWriteUInt16(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-literal">true</span>)
  }
  <span class="hljs-keyword">return</span> offset + <span class="hljs-number">2</span>
}

Buffer.prototype.writeUInt16BE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeUInt16BE</span> (<span class="hljs-params">value, offset, noAssert</span>) </span>{
  value = +value
  offset = offset | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) checkInt(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-number">2</span>, <span class="hljs-number">0xffff</span>, <span class="hljs-number">0</span>)
  <span class="hljs-keyword">if</span> (Buffer.TYPED_ARRAY_SUPPORT) {
    <span class="hljs-keyword">this</span>[offset] = (value &gt;&gt;&gt; <span class="hljs-number">8</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] = (value &amp; <span class="hljs-number">0xff</span>)
  } <span class="hljs-keyword">else</span> {
    objectWriteUInt16(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-literal">false</span>)
  }
  <span class="hljs-keyword">return</span> offset + <span class="hljs-number">2</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">objectWriteUInt32</span> (<span class="hljs-params">buf, value, offset, littleEndian</span>) </span>{
  <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">0</span>) value = <span class="hljs-number">0xffffffff</span> + value + <span class="hljs-number">1</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-built_in">Math</span>.min(buf.length - offset, <span class="hljs-number">4</span>); i &lt; j; ++i) {
    buf[offset + i] = (value &gt;&gt;&gt; (littleEndian ? i : <span class="hljs-number">3</span> - i) * <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0xff</span>
  }
}

Buffer.prototype.writeUInt32LE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeUInt32LE</span> (<span class="hljs-params">value, offset, noAssert</span>) </span>{
  value = +value
  offset = offset | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) checkInt(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-number">4</span>, <span class="hljs-number">0xffffffff</span>, <span class="hljs-number">0</span>)
  <span class="hljs-keyword">if</span> (Buffer.TYPED_ARRAY_SUPPORT) {
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">3</span>] = (value &gt;&gt;&gt; <span class="hljs-number">24</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">2</span>] = (value &gt;&gt;&gt; <span class="hljs-number">16</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] = (value &gt;&gt;&gt; <span class="hljs-number">8</span>)
    <span class="hljs-keyword">this</span>[offset] = (value &amp; <span class="hljs-number">0xff</span>)
  } <span class="hljs-keyword">else</span> {
    objectWriteUInt32(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-literal">true</span>)
  }
  <span class="hljs-keyword">return</span> offset + <span class="hljs-number">4</span>
}

Buffer.prototype.writeUInt32BE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeUInt32BE</span> (<span class="hljs-params">value, offset, noAssert</span>) </span>{
  value = +value
  offset = offset | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) checkInt(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-number">4</span>, <span class="hljs-number">0xffffffff</span>, <span class="hljs-number">0</span>)
  <span class="hljs-keyword">if</span> (Buffer.TYPED_ARRAY_SUPPORT) {
    <span class="hljs-keyword">this</span>[offset] = (value &gt;&gt;&gt; <span class="hljs-number">24</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] = (value &gt;&gt;&gt; <span class="hljs-number">16</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">2</span>] = (value &gt;&gt;&gt; <span class="hljs-number">8</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">3</span>] = (value &amp; <span class="hljs-number">0xff</span>)
  } <span class="hljs-keyword">else</span> {
    objectWriteUInt32(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-literal">false</span>)
  }
  <span class="hljs-keyword">return</span> offset + <span class="hljs-number">4</span>
}

Buffer.prototype.writeIntLE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeIntLE</span> (<span class="hljs-params">value, offset, byteLength, noAssert</span>) </span>{
  value = +value
  offset = offset | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) {
    <span class="hljs-keyword">var</span> limit = <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">8</span> * byteLength - <span class="hljs-number">1</span>)

    checkInt(<span class="hljs-keyword">this</span>, value, offset, byteLength, limit - <span class="hljs-number">1</span>, -limit)
  }

  <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>
  <span class="hljs-keyword">var</span> mul = <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> sub = <span class="hljs-number">0</span>
  <span class="hljs-keyword">this</span>[offset] = value &amp; <span class="hljs-number">0xFF</span>
  <span class="hljs-keyword">while</span> (++i &lt; byteLength &amp;&amp; (mul *= <span class="hljs-number">0x100</span>)) {
    <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">0</span> &amp;&amp; sub === <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-keyword">this</span>[offset + i - <span class="hljs-number">1</span>] !== <span class="hljs-number">0</span>) {
      sub = <span class="hljs-number">1</span>
    }
    <span class="hljs-keyword">this</span>[offset + i] = ((value / mul) &gt;&gt; <span class="hljs-number">0</span>) - sub &amp; <span class="hljs-number">0xFF</span>
  }

  <span class="hljs-keyword">return</span> offset + byteLength
}

Buffer.prototype.writeIntBE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeIntBE</span> (<span class="hljs-params">value, offset, byteLength, noAssert</span>) </span>{
  value = +value
  offset = offset | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) {
    <span class="hljs-keyword">var</span> limit = <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">8</span> * byteLength - <span class="hljs-number">1</span>)

    checkInt(<span class="hljs-keyword">this</span>, value, offset, byteLength, limit - <span class="hljs-number">1</span>, -limit)
  }

  <span class="hljs-keyword">var</span> i = byteLength - <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> mul = <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> sub = <span class="hljs-number">0</span>
  <span class="hljs-keyword">this</span>[offset + i] = value &amp; <span class="hljs-number">0xFF</span>
  <span class="hljs-keyword">while</span> (--i &gt;= <span class="hljs-number">0</span> &amp;&amp; (mul *= <span class="hljs-number">0x100</span>)) {
    <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">0</span> &amp;&amp; sub === <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-keyword">this</span>[offset + i + <span class="hljs-number">1</span>] !== <span class="hljs-number">0</span>) {
      sub = <span class="hljs-number">1</span>
    }
    <span class="hljs-keyword">this</span>[offset + i] = ((value / mul) &gt;&gt; <span class="hljs-number">0</span>) - sub &amp; <span class="hljs-number">0xFF</span>
  }

  <span class="hljs-keyword">return</span> offset + byteLength
}

Buffer.prototype.writeInt8 = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeInt8</span> (<span class="hljs-params">value, offset, noAssert</span>) </span>{
  value = +value
  offset = offset | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) checkInt(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-number">1</span>, <span class="hljs-number">0x7f</span>, <span class="hljs-number">-0x80</span>)
  <span class="hljs-keyword">if</span> (!Buffer.TYPED_ARRAY_SUPPORT) value = <span class="hljs-built_in">Math</span>.floor(value)
  <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">0</span>) value = <span class="hljs-number">0xff</span> + value + <span class="hljs-number">1</span>
  <span class="hljs-keyword">this</span>[offset] = (value &amp; <span class="hljs-number">0xff</span>)
  <span class="hljs-keyword">return</span> offset + <span class="hljs-number">1</span>
}

Buffer.prototype.writeInt16LE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeInt16LE</span> (<span class="hljs-params">value, offset, noAssert</span>) </span>{
  value = +value
  offset = offset | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) checkInt(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-number">2</span>, <span class="hljs-number">0x7fff</span>, <span class="hljs-number">-0x8000</span>)
  <span class="hljs-keyword">if</span> (Buffer.TYPED_ARRAY_SUPPORT) {
    <span class="hljs-keyword">this</span>[offset] = (value &amp; <span class="hljs-number">0xff</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] = (value &gt;&gt;&gt; <span class="hljs-number">8</span>)
  } <span class="hljs-keyword">else</span> {
    objectWriteUInt16(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-literal">true</span>)
  }
  <span class="hljs-keyword">return</span> offset + <span class="hljs-number">2</span>
}

Buffer.prototype.writeInt16BE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeInt16BE</span> (<span class="hljs-params">value, offset, noAssert</span>) </span>{
  value = +value
  offset = offset | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) checkInt(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-number">2</span>, <span class="hljs-number">0x7fff</span>, <span class="hljs-number">-0x8000</span>)
  <span class="hljs-keyword">if</span> (Buffer.TYPED_ARRAY_SUPPORT) {
    <span class="hljs-keyword">this</span>[offset] = (value &gt;&gt;&gt; <span class="hljs-number">8</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] = (value &amp; <span class="hljs-number">0xff</span>)
  } <span class="hljs-keyword">else</span> {
    objectWriteUInt16(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-literal">false</span>)
  }
  <span class="hljs-keyword">return</span> offset + <span class="hljs-number">2</span>
}

Buffer.prototype.writeInt32LE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeInt32LE</span> (<span class="hljs-params">value, offset, noAssert</span>) </span>{
  value = +value
  offset = offset | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) checkInt(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-number">4</span>, <span class="hljs-number">0x7fffffff</span>, <span class="hljs-number">-0x80000000</span>)
  <span class="hljs-keyword">if</span> (Buffer.TYPED_ARRAY_SUPPORT) {
    <span class="hljs-keyword">this</span>[offset] = (value &amp; <span class="hljs-number">0xff</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] = (value &gt;&gt;&gt; <span class="hljs-number">8</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">2</span>] = (value &gt;&gt;&gt; <span class="hljs-number">16</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">3</span>] = (value &gt;&gt;&gt; <span class="hljs-number">24</span>)
  } <span class="hljs-keyword">else</span> {
    objectWriteUInt32(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-literal">true</span>)
  }
  <span class="hljs-keyword">return</span> offset + <span class="hljs-number">4</span>
}

Buffer.prototype.writeInt32BE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeInt32BE</span> (<span class="hljs-params">value, offset, noAssert</span>) </span>{
  value = +value
  offset = offset | <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!noAssert) checkInt(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-number">4</span>, <span class="hljs-number">0x7fffffff</span>, <span class="hljs-number">-0x80000000</span>)
  <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">0</span>) value = <span class="hljs-number">0xffffffff</span> + value + <span class="hljs-number">1</span>
  <span class="hljs-keyword">if</span> (Buffer.TYPED_ARRAY_SUPPORT) {
    <span class="hljs-keyword">this</span>[offset] = (value &gt;&gt;&gt; <span class="hljs-number">24</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">1</span>] = (value &gt;&gt;&gt; <span class="hljs-number">16</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">2</span>] = (value &gt;&gt;&gt; <span class="hljs-number">8</span>)
    <span class="hljs-keyword">this</span>[offset + <span class="hljs-number">3</span>] = (value &amp; <span class="hljs-number">0xff</span>)
  } <span class="hljs-keyword">else</span> {
    objectWriteUInt32(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-literal">false</span>)
  }
  <span class="hljs-keyword">return</span> offset + <span class="hljs-number">4</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkIEEE754</span> (<span class="hljs-params">buf, value, offset, ext, max, min</span>) </span>{
  <span class="hljs-keyword">if</span> (offset + ext &gt; buf.length) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'Index out of range'</span>)
  <span class="hljs-keyword">if</span> (offset &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'Index out of range'</span>)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeFloat</span> (<span class="hljs-params">buf, value, offset, littleEndian, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) {
    checkIEEE754(buf, value, offset, <span class="hljs-number">4</span>, <span class="hljs-number">3.4028234663852886e+38</span>, <span class="hljs-number">-3.4028234663852886e+38</span>)
  }
  ieee754.write(buf, value, offset, littleEndian, <span class="hljs-number">23</span>, <span class="hljs-number">4</span>)
  <span class="hljs-keyword">return</span> offset + <span class="hljs-number">4</span>
}

Buffer.prototype.writeFloatLE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeFloatLE</span> (<span class="hljs-params">value, offset, noAssert</span>) </span>{
  <span class="hljs-keyword">return</span> writeFloat(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-literal">true</span>, noAssert)
}

Buffer.prototype.writeFloatBE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeFloatBE</span> (<span class="hljs-params">value, offset, noAssert</span>) </span>{
  <span class="hljs-keyword">return</span> writeFloat(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-literal">false</span>, noAssert)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeDouble</span> (<span class="hljs-params">buf, value, offset, littleEndian, noAssert</span>) </span>{
  <span class="hljs-keyword">if</span> (!noAssert) {
    checkIEEE754(buf, value, offset, <span class="hljs-number">8</span>, <span class="hljs-number">1.7976931348623157E+308</span>, <span class="hljs-number">-1.7976931348623157E+308</span>)
  }
  ieee754.write(buf, value, offset, littleEndian, <span class="hljs-number">52</span>, <span class="hljs-number">8</span>)
  <span class="hljs-keyword">return</span> offset + <span class="hljs-number">8</span>
}

Buffer.prototype.writeDoubleLE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeDoubleLE</span> (<span class="hljs-params">value, offset, noAssert</span>) </span>{
  <span class="hljs-keyword">return</span> writeDouble(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-literal">true</span>, noAssert)
}

Buffer.prototype.writeDoubleBE = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeDoubleBE</span> (<span class="hljs-params">value, offset, noAssert</span>) </span>{
  <span class="hljs-keyword">return</span> writeDouble(<span class="hljs-keyword">this</span>, value, offset, <span class="hljs-literal">false</span>, noAssert)
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-242" id="section-242"></a>
</div>
<p>copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">Buffer.prototype.copy = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">copy</span> (<span class="hljs-params">target, targetStart, start, end</span>) </span>{
  <span class="hljs-keyword">if</span> (!start) start = <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (!end &amp;&amp; end !== <span class="hljs-number">0</span>) end = <span class="hljs-keyword">this</span>.length
  <span class="hljs-keyword">if</span> (targetStart &gt;= target.length) targetStart = target.length
  <span class="hljs-keyword">if</span> (!targetStart) targetStart = <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (end &gt; <span class="hljs-number">0</span> &amp;&amp; end &lt; start) end = start

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-243" id="section-243"></a>
</div>
<p>Copy 0 bytes; we're done</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (end === start) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  <span class="hljs-keyword">if</span> (target.length === <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-244" id="section-244"></a>
</div>
<p>Fatal error conditions</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (targetStart &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'targetStart out of bounds'</span>)
  }
  <span class="hljs-keyword">if</span> (start &lt; <span class="hljs-number">0</span> || start &gt;= <span class="hljs-keyword">this</span>.length) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'sourceStart out of bounds'</span>)
  <span class="hljs-keyword">if</span> (end &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'sourceEnd out of bounds'</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-245" id="section-245"></a>
</div>
<p>Are we oob?</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (end &gt; <span class="hljs-keyword">this</span>.length) end = <span class="hljs-keyword">this</span>.length
  <span class="hljs-keyword">if</span> (target.length - targetStart &lt; end - start) {
    end = target.length - targetStart + start
  }

  <span class="hljs-keyword">var</span> len = end - start
  <span class="hljs-keyword">var</span> i

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> === target &amp;&amp; start &lt; targetStart &amp;&amp; targetStart &lt; end) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-246" id="section-246"></a>
</div>
<p>descending copy from end</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">for</span> (i = len - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; --i) {
      target[i + targetStart] = <span class="hljs-keyword">this</span>[i + start]
    }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (len &lt; <span class="hljs-number">1000</span> || !Buffer.TYPED_ARRAY_SUPPORT) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-247" id="section-247"></a>
</div>
<p>ascending copy from start</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; len; ++i) {
      target[i + targetStart] = <span class="hljs-keyword">this</span>[i + start]
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">Uint8Array</span>.prototype.set.call(
      target,
      <span class="hljs-keyword">this</span>.subarray(start, start + len),
      targetStart
    )
  }

  <span class="hljs-keyword">return</span> len
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-248" id="section-248"></a>
</div>
<p>Usage:
buffer.fill(number[, offset[, end]])
buffer.fill(buffer[, offset[, end]])
buffer.fill(string[, offset[, end]][, encoding])</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">Buffer.prototype.fill = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fill</span> (<span class="hljs-params">val, start, end, encoding</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-249" id="section-249"></a>
</div>
<p>Handle string cases:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val === <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> start === <span class="hljs-string">'string'</span>) {
      encoding = start
      start = <span class="hljs-number">0</span>
      end = <span class="hljs-keyword">this</span>.length
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> end === <span class="hljs-string">'string'</span>) {
      encoding = end
      end = <span class="hljs-keyword">this</span>.length
    }
    <span class="hljs-keyword">if</span> (val.length === <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">var</span> code = val.charCodeAt(<span class="hljs-number">0</span>)
      <span class="hljs-keyword">if</span> (code &lt; <span class="hljs-number">256</span>) {
        val = code
      }
    }
    <span class="hljs-keyword">if</span> (encoding !== <span class="hljs-literal">undefined</span> &amp;&amp; <span class="hljs-keyword">typeof</span> encoding !== <span class="hljs-string">'string'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'encoding must be a string'</span>)
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> encoding === <span class="hljs-string">'string'</span> &amp;&amp; !Buffer.isEncoding(encoding)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Unknown encoding: '</span> + encoding)
    }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val === <span class="hljs-string">'number'</span>) {
    val = val &amp; <span class="hljs-number">255</span>
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-250" id="section-250"></a>
</div>
<p>Invalid ranges are not set to a default, so can range check early.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (start &lt; <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.length &lt; start || <span class="hljs-keyword">this</span>.length &lt; end) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RangeError</span>(<span class="hljs-string">'Out of range index'</span>)
  }

  <span class="hljs-keyword">if</span> (end &lt;= start) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
  }

  start = start &gt;&gt;&gt; <span class="hljs-number">0</span>
  end = end === <span class="hljs-literal">undefined</span> ? <span class="hljs-keyword">this</span>.length : end &gt;&gt;&gt; <span class="hljs-number">0</span>

  <span class="hljs-keyword">if</span> (!val) val = <span class="hljs-number">0</span>

  <span class="hljs-keyword">var</span> i
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val === <span class="hljs-string">'number'</span>) {
    <span class="hljs-keyword">for</span> (i = start; i &lt; end; ++i) {
      <span class="hljs-keyword">this</span>[i] = val
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> bytes = Buffer.isBuffer(val)
      ? val
      : utf8ToBytes(<span class="hljs-keyword">new</span> Buffer(val, encoding).toString())
    <span class="hljs-keyword">var</span> len = bytes.length
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; end - start; ++i) {
      <span class="hljs-keyword">this</span>[i + start] = bytes[i % len]
    }
  }

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="helper-functions">
  <h1>
    <a href="#helper-functions" name="helper-functions" class="pilcrow"></a>
HELPER FUNCTIONS
  </h1>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-keyword">var</span> INVALID_BASE64_RE = <span class="hljs-regexp">/[^+\/0-9A-Za-z-_]/g</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">base64clean</span> (<span class="hljs-params">str</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-252" id="section-252"></a>
</div>
<p>Node strips out invalid characters like \n and \t from the string, base64-js does not</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  str = stringtrim(str).replace(INVALID_BASE64_RE, <span class="hljs-string">''</span>)
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-253" id="section-253"></a>
</div>
<p>Node converts strings with length &lt; 2 to ''</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (str.length &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-254" id="section-254"></a>
</div>
<p>Node allows for non-padded base64 strings (missing trailing ===), base64-js does not</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">while</span> (str.length % <span class="hljs-number">4</span> !== <span class="hljs-number">0</span>) {
    str = str + <span class="hljs-string">'='</span>
  }
  <span class="hljs-keyword">return</span> str
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stringtrim</span> (<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">if</span> (str.trim) <span class="hljs-keyword">return</span> str.trim()
  <span class="hljs-keyword">return</span> str.replace(<span class="hljs-regexp">/^\s+|\s+$/g</span>, <span class="hljs-string">''</span>)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toHex</span> (<span class="hljs-params">n</span>) </span>{
  <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">16</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'0'</span> + n.toString(<span class="hljs-number">16</span>)
  <span class="hljs-keyword">return</span> n.toString(<span class="hljs-number">16</span>)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">utf8ToBytes</span> (<span class="hljs-params">string, units</span>) </span>{
  units = units || <span class="hljs-literal">Infinity</span>
  <span class="hljs-keyword">var</span> codePoint
  <span class="hljs-keyword">var</span> length = string.length
  <span class="hljs-keyword">var</span> leadSurrogate = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">var</span> bytes = []

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; length; ++i) {
    codePoint = string.charCodeAt(i)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-255" id="section-255"></a>
</div>
<p>is surrogate component</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (codePoint &gt; <span class="hljs-number">0xD7FF</span> &amp;&amp; codePoint &lt; <span class="hljs-number">0xE000</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-256" id="section-256"></a>
</div>
<p>last char was a lead</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (!leadSurrogate) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-257" id="section-257"></a>
</div>
<p>no lead yet</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (codePoint &gt; <span class="hljs-number">0xDBFF</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-258" id="section-258"></a>
</div>
<p>unexpected trail</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">          <span class="hljs-keyword">if</span> ((units -= <span class="hljs-number">3</span>) &gt; <span class="hljs-number">-1</span>) bytes.push(<span class="hljs-number">0xEF</span>, <span class="hljs-number">0xBF</span>, <span class="hljs-number">0xBD</span>)
          <span class="hljs-keyword">continue</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i + <span class="hljs-number">1</span> === length) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-259" id="section-259"></a>
</div>
<p>unpaired lead</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">          <span class="hljs-keyword">if</span> ((units -= <span class="hljs-number">3</span>) &gt; <span class="hljs-number">-1</span>) bytes.push(<span class="hljs-number">0xEF</span>, <span class="hljs-number">0xBF</span>, <span class="hljs-number">0xBD</span>)
          <span class="hljs-keyword">continue</span>
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-260" id="section-260"></a>
</div>
<p>valid lead</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        leadSurrogate = codePoint

        <span class="hljs-keyword">continue</span>
      }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-261" id="section-261"></a>
</div>
<p>2 leads in a row</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (codePoint &lt; <span class="hljs-number">0xDC00</span>) {
        <span class="hljs-keyword">if</span> ((units -= <span class="hljs-number">3</span>) &gt; <span class="hljs-number">-1</span>) bytes.push(<span class="hljs-number">0xEF</span>, <span class="hljs-number">0xBF</span>, <span class="hljs-number">0xBD</span>)
        leadSurrogate = codePoint
        <span class="hljs-keyword">continue</span>
      }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-262" id="section-262"></a>
</div>
<p>valid surrogate pair</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      codePoint = (leadSurrogate - <span class="hljs-number">0xD800</span> &lt;&lt; <span class="hljs-number">10</span> | codePoint - <span class="hljs-number">0xDC00</span>) + <span class="hljs-number">0x10000</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (leadSurrogate) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-263" id="section-263"></a>
</div>
<p>valid bmp char, but last char was a lead</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> ((units -= <span class="hljs-number">3</span>) &gt; <span class="hljs-number">-1</span>) bytes.push(<span class="hljs-number">0xEF</span>, <span class="hljs-number">0xBF</span>, <span class="hljs-number">0xBD</span>)
    }

    leadSurrogate = <span class="hljs-literal">null</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-264" id="section-264"></a>
</div>
<p>encode utf8</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (codePoint &lt; <span class="hljs-number">0x80</span>) {
      <span class="hljs-keyword">if</span> ((units -= <span class="hljs-number">1</span>) &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>
      bytes.push(codePoint)
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (codePoint &lt; <span class="hljs-number">0x800</span>) {
      <span class="hljs-keyword">if</span> ((units -= <span class="hljs-number">2</span>) &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>
      bytes.push(
        codePoint &gt;&gt; <span class="hljs-number">0x6</span> | <span class="hljs-number">0xC0</span>,
        codePoint &amp; <span class="hljs-number">0x3F</span> | <span class="hljs-number">0x80</span>
      )
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (codePoint &lt; <span class="hljs-number">0x10000</span>) {
      <span class="hljs-keyword">if</span> ((units -= <span class="hljs-number">3</span>) &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>
      bytes.push(
        codePoint &gt;&gt; <span class="hljs-number">0xC</span> | <span class="hljs-number">0xE0</span>,
        codePoint &gt;&gt; <span class="hljs-number">0x6</span> &amp; <span class="hljs-number">0x3F</span> | <span class="hljs-number">0x80</span>,
        codePoint &amp; <span class="hljs-number">0x3F</span> | <span class="hljs-number">0x80</span>
      )
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (codePoint &lt; <span class="hljs-number">0x110000</span>) {
      <span class="hljs-keyword">if</span> ((units -= <span class="hljs-number">4</span>) &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>
      bytes.push(
        codePoint &gt;&gt; <span class="hljs-number">0x12</span> | <span class="hljs-number">0xF0</span>,
        codePoint &gt;&gt; <span class="hljs-number">0xC</span> &amp; <span class="hljs-number">0x3F</span> | <span class="hljs-number">0x80</span>,
        codePoint &gt;&gt; <span class="hljs-number">0x6</span> &amp; <span class="hljs-number">0x3F</span> | <span class="hljs-number">0x80</span>,
        codePoint &amp; <span class="hljs-number">0x3F</span> | <span class="hljs-number">0x80</span>
      )
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Invalid code point'</span>)
    }
  }

  <span class="hljs-keyword">return</span> bytes
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">asciiToBytes</span> (<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">var</span> byteArray = []
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; str.length; ++i) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-265" id="section-265"></a>
</div>
<p>Node's code seems to be doing this and not &amp; 0x7F..</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    byteArray.push(str.charCodeAt(i) &amp; <span class="hljs-number">0xFF</span>)
  }
  <span class="hljs-keyword">return</span> byteArray
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">utf16leToBytes</span> (<span class="hljs-params">str, units</span>) </span>{
  <span class="hljs-keyword">var</span> c, hi, lo
  <span class="hljs-keyword">var</span> byteArray = []
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; str.length; ++i) {
    <span class="hljs-keyword">if</span> ((units -= <span class="hljs-number">2</span>) &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>

    c = str.charCodeAt(i)
    hi = c &gt;&gt; <span class="hljs-number">8</span>
    lo = c % <span class="hljs-number">256</span>
    byteArray.push(lo)
    byteArray.push(hi)
  }

  <span class="hljs-keyword">return</span> byteArray
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">base64ToBytes</span> (<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> base64.toByteArray(base64clean(str))
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">blitBuffer</span> (<span class="hljs-params">src, dst, offset, length</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; length; ++i) {
    <span class="hljs-keyword">if</span> ((i + offset &gt;= dst.length) || (i &gt;= src.length)) <span class="hljs-keyword">break</span>
    dst[i + offset] = src[i]
  }
  <span class="hljs-keyword">return</span> i
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isnan</span> (<span class="hljs-params">val</span>) </span>{
  <span class="hljs-keyword">return</span> val !== val <span class="hljs-comment">// eslint-disable-line no-self-compare</span>
}

<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(<span class="hljs-keyword">this</span>, __webpack_require__(<span class="hljs-number">20</span>)))

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 37 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;


exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

<span class="hljs-keyword">var</span> lookup = []
<span class="hljs-keyword">var</span> revLookup = []
<span class="hljs-keyword">var</span> Arr = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Uint8Array</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-built_in">Uint8Array</span> : <span class="hljs-built_in">Array</span>

<span class="hljs-keyword">var</span> code = <span class="hljs-string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = code.length; i &lt; len; ++i) {
  lookup[i] = code[i]
  revLookup[code.charCodeAt(i)] = i
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-266" id="section-266"></a>
</div>
<p>Support decoding URL-safe base64 strings, as Node.js does.
See: https://en.wikipedia.org/wiki/Base64#URL_applications</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">revLookup[<span class="hljs-string">'-'</span>.charCodeAt(<span class="hljs-number">0</span>)] = <span class="hljs-number">62</span>
revLookup[<span class="hljs-string">'_'</span>.charCodeAt(<span class="hljs-number">0</span>)] = <span class="hljs-number">63</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLens</span> (<span class="hljs-params">b64</span>) </span>{
  <span class="hljs-keyword">var</span> len = b64.length

  <span class="hljs-keyword">if</span> (len % <span class="hljs-number">4</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Invalid string. Length must be a multiple of 4'</span>)
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-267" id="section-267"></a>
</div>
<p>Trim off extra bytes after placeholder bytes are found
See: https://github.com/beatgammit/base64-js/issues/42</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> validLen = b64.indexOf(<span class="hljs-string">'='</span>)
  <span class="hljs-keyword">if</span> (validLen === <span class="hljs-number">-1</span>) validLen = len

  <span class="hljs-keyword">var</span> placeHoldersLen = validLen === len
    ? <span class="hljs-number">0</span>
    : <span class="hljs-number">4</span> - (validLen % <span class="hljs-number">4</span>)

  <span class="hljs-keyword">return</span> [validLen, placeHoldersLen]
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-268" id="section-268"></a>
</div>
<p>base64 is 4/3 + up to two characters of the original data</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byteLength</span> (<span class="hljs-params">b64</span>) </span>{
  <span class="hljs-keyword">var</span> lens = getLens(b64)
  <span class="hljs-keyword">var</span> validLen = lens[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">var</span> placeHoldersLen = lens[<span class="hljs-number">1</span>]
  <span class="hljs-keyword">return</span> ((validLen + placeHoldersLen) * <span class="hljs-number">3</span> / <span class="hljs-number">4</span>) - placeHoldersLen
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_byteLength</span> (<span class="hljs-params">b64, validLen, placeHoldersLen</span>) </span>{
  <span class="hljs-keyword">return</span> ((validLen + placeHoldersLen) * <span class="hljs-number">3</span> / <span class="hljs-number">4</span>) - placeHoldersLen
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toByteArray</span> (<span class="hljs-params">b64</span>) </span>{
  <span class="hljs-keyword">var</span> tmp
  <span class="hljs-keyword">var</span> lens = getLens(b64)
  <span class="hljs-keyword">var</span> validLen = lens[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">var</span> placeHoldersLen = lens[<span class="hljs-number">1</span>]

  <span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> Arr(_byteLength(b64, validLen, placeHoldersLen))

  <span class="hljs-keyword">var</span> curByte = <span class="hljs-number">0</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-269" id="section-269"></a>
</div>
<p>if there are placeholders, only get up to the last complete 4 chars</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> len = placeHoldersLen &gt; <span class="hljs-number">0</span>
    ? validLen - <span class="hljs-number">4</span>
    : validLen

  <span class="hljs-keyword">var</span> i
  <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; len; i += <span class="hljs-number">4</span>) {
    tmp =
      (revLookup[b64.charCodeAt(i)] &lt;&lt; <span class="hljs-number">18</span>) |
      (revLookup[b64.charCodeAt(i + <span class="hljs-number">1</span>)] &lt;&lt; <span class="hljs-number">12</span>) |
      (revLookup[b64.charCodeAt(i + <span class="hljs-number">2</span>)] &lt;&lt; <span class="hljs-number">6</span>) |
      revLookup[b64.charCodeAt(i + <span class="hljs-number">3</span>)]
    arr[curByte++] = (tmp &gt;&gt; <span class="hljs-number">16</span>) &amp; <span class="hljs-number">0xFF</span>
    arr[curByte++] = (tmp &gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0xFF</span>
    arr[curByte++] = tmp &amp; <span class="hljs-number">0xFF</span>
  }

  <span class="hljs-keyword">if</span> (placeHoldersLen === <span class="hljs-number">2</span>) {
    tmp =
      (revLookup[b64.charCodeAt(i)] &lt;&lt; <span class="hljs-number">2</span>) |
      (revLookup[b64.charCodeAt(i + <span class="hljs-number">1</span>)] &gt;&gt; <span class="hljs-number">4</span>)
    arr[curByte++] = tmp &amp; <span class="hljs-number">0xFF</span>
  }

  <span class="hljs-keyword">if</span> (placeHoldersLen === <span class="hljs-number">1</span>) {
    tmp =
      (revLookup[b64.charCodeAt(i)] &lt;&lt; <span class="hljs-number">10</span>) |
      (revLookup[b64.charCodeAt(i + <span class="hljs-number">1</span>)] &lt;&lt; <span class="hljs-number">4</span>) |
      (revLookup[b64.charCodeAt(i + <span class="hljs-number">2</span>)] &gt;&gt; <span class="hljs-number">2</span>)
    arr[curByte++] = (tmp &gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0xFF</span>
    arr[curByte++] = tmp &amp; <span class="hljs-number">0xFF</span>
  }

  <span class="hljs-keyword">return</span> arr
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tripletToBase64</span> (<span class="hljs-params">num</span>) </span>{
  <span class="hljs-keyword">return</span> lookup[num &gt;&gt; <span class="hljs-number">18</span> &amp; <span class="hljs-number">0x3F</span>] +
    lookup[num &gt;&gt; <span class="hljs-number">12</span> &amp; <span class="hljs-number">0x3F</span>] +
    lookup[num &gt;&gt; <span class="hljs-number">6</span> &amp; <span class="hljs-number">0x3F</span>] +
    lookup[num &amp; <span class="hljs-number">0x3F</span>]
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodeChunk</span> (<span class="hljs-params">uint8, start, end</span>) </span>{
  <span class="hljs-keyword">var</span> tmp
  <span class="hljs-keyword">var</span> output = []
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = start; i &lt; end; i += <span class="hljs-number">3</span>) {
    tmp =
      ((uint8[i] &lt;&lt; <span class="hljs-number">16</span>) &amp; <span class="hljs-number">0xFF0000</span>) +
      ((uint8[i + <span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0xFF00</span>) +
      (uint8[i + <span class="hljs-number">2</span>] &amp; <span class="hljs-number">0xFF</span>)
    output.push(tripletToBase64(tmp))
  }
  <span class="hljs-keyword">return</span> output.join(<span class="hljs-string">''</span>)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fromByteArray</span> (<span class="hljs-params">uint8</span>) </span>{
  <span class="hljs-keyword">var</span> tmp
  <span class="hljs-keyword">var</span> len = uint8.length
  <span class="hljs-keyword">var</span> extraBytes = len % <span class="hljs-number">3</span> <span class="hljs-comment">// if we have 1 byte left, pad 2 bytes</span>
  <span class="hljs-keyword">var</span> parts = []
  <span class="hljs-keyword">var</span> maxChunkLength = <span class="hljs-number">16383</span> <span class="hljs-comment">// must be multiple of 3</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-270" id="section-270"></a>
</div>
<p>go through the array every three bytes, we'll deal with trailing stuff later</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len2 = len - extraBytes; i &lt; len2; i += maxChunkLength) {
    parts.push(encodeChunk(
      uint8, i, (i + maxChunkLength) &gt; len2 ? len2 : (i + maxChunkLength)
    ))
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-271" id="section-271"></a>
</div>
<p>pad the end with zeros, but make sure to not forget the extra bytes</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (extraBytes === <span class="hljs-number">1</span>) {
    tmp = uint8[len - <span class="hljs-number">1</span>]
    parts.push(
      lookup[tmp &gt;&gt; <span class="hljs-number">2</span>] +
      lookup[(tmp &lt;&lt; <span class="hljs-number">4</span>) &amp; <span class="hljs-number">0x3F</span>] +
      <span class="hljs-string">'=='</span>
    )
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (extraBytes === <span class="hljs-number">2</span>) {
    tmp = (uint8[len - <span class="hljs-number">2</span>] &lt;&lt; <span class="hljs-number">8</span>) + uint8[len - <span class="hljs-number">1</span>]
    parts.push(
      lookup[tmp &gt;&gt; <span class="hljs-number">10</span>] +
      lookup[(tmp &gt;&gt; <span class="hljs-number">4</span>) &amp; <span class="hljs-number">0x3F</span>] +
      lookup[(tmp &lt;&lt; <span class="hljs-number">2</span>) &amp; <span class="hljs-number">0x3F</span>] +
      <span class="hljs-string">'='</span>
    )
  }

  <span class="hljs-keyword">return</span> parts.join(<span class="hljs-string">''</span>)
}


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 38 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

exports.read = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">buffer, offset, isLE, mLen, nBytes</span>) </span>{
  <span class="hljs-keyword">var</span> e, m
  <span class="hljs-keyword">var</span> eLen = (nBytes * <span class="hljs-number">8</span>) - mLen - <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> eMax = (<span class="hljs-number">1</span> &lt;&lt; eLen) - <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> eBias = eMax &gt;&gt; <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> nBits = <span class="hljs-number">-7</span>
  <span class="hljs-keyword">var</span> i = isLE ? (nBytes - <span class="hljs-number">1</span>) : <span class="hljs-number">0</span>
  <span class="hljs-keyword">var</span> d = isLE ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> s = buffer[offset + i]

  i += d

  e = s &amp; ((<span class="hljs-number">1</span> &lt;&lt; (-nBits)) - <span class="hljs-number">1</span>)
  s &gt;&gt;= (-nBits)
  nBits += eLen
  <span class="hljs-keyword">for</span> (; nBits &gt; <span class="hljs-number">0</span>; e = (e * <span class="hljs-number">256</span>) + buffer[offset + i], i += d, nBits -= <span class="hljs-number">8</span>) {}

  m = e &amp; ((<span class="hljs-number">1</span> &lt;&lt; (-nBits)) - <span class="hljs-number">1</span>)
  e &gt;&gt;= (-nBits)
  nBits += mLen
  <span class="hljs-keyword">for</span> (; nBits &gt; <span class="hljs-number">0</span>; m = (m * <span class="hljs-number">256</span>) + buffer[offset + i], i += d, nBits -= <span class="hljs-number">8</span>) {}

  <span class="hljs-keyword">if</span> (e === <span class="hljs-number">0</span>) {
    e = <span class="hljs-number">1</span> - eBias
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e === eMax) {
    <span class="hljs-keyword">return</span> m ? <span class="hljs-literal">NaN</span> : ((s ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>) * <span class="hljs-literal">Infinity</span>)
  } <span class="hljs-keyword">else</span> {
    m = m + <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, mLen)
    e = e - eBias
  }
  <span class="hljs-keyword">return</span> (s ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>) * m * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, e - mLen)
}

exports.write = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">buffer, value, offset, isLE, mLen, nBytes</span>) </span>{
  <span class="hljs-keyword">var</span> e, m, c
  <span class="hljs-keyword">var</span> eLen = (nBytes * <span class="hljs-number">8</span>) - mLen - <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> eMax = (<span class="hljs-number">1</span> &lt;&lt; eLen) - <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> eBias = eMax &gt;&gt; <span class="hljs-number">1</span>
  <span class="hljs-keyword">var</span> rt = (mLen === <span class="hljs-number">23</span> ? <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">-24</span>) - <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">-77</span>) : <span class="hljs-number">0</span>)
  <span class="hljs-keyword">var</span> i = isLE ? <span class="hljs-number">0</span> : (nBytes - <span class="hljs-number">1</span>)
  <span class="hljs-keyword">var</span> d = isLE ? <span class="hljs-number">1</span> : <span class="hljs-number">-1</span>
  <span class="hljs-keyword">var</span> s = value &lt; <span class="hljs-number">0</span> || (value === <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-number">1</span> / value &lt; <span class="hljs-number">0</span>) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>

  value = <span class="hljs-built_in">Math</span>.abs(value)

  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(value) || value === <span class="hljs-literal">Infinity</span>) {
    m = <span class="hljs-built_in">isNaN</span>(value) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>
    e = eMax
  } <span class="hljs-keyword">else</span> {
    e = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.log(value) / <span class="hljs-built_in">Math</span>.LN2)
    <span class="hljs-keyword">if</span> (value * (c = <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, -e)) &lt; <span class="hljs-number">1</span>) {
      e--
      c *= <span class="hljs-number">2</span>
    }
    <span class="hljs-keyword">if</span> (e + eBias &gt;= <span class="hljs-number">1</span>) {
      value += rt / c
    } <span class="hljs-keyword">else</span> {
      value += rt * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, <span class="hljs-number">1</span> - eBias)
    }
    <span class="hljs-keyword">if</span> (value * c &gt;= <span class="hljs-number">2</span>) {
      e++
      c /= <span class="hljs-number">2</span>
    }

    <span class="hljs-keyword">if</span> (e + eBias &gt;= eMax) {
      m = <span class="hljs-number">0</span>
      e = eMax
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (e + eBias &gt;= <span class="hljs-number">1</span>) {
      m = ((value * c) - <span class="hljs-number">1</span>) * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, mLen)
      e = e + eBias
    } <span class="hljs-keyword">else</span> {
      m = value * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, eBias - <span class="hljs-number">1</span>) * <span class="hljs-built_in">Math</span>.pow(<span class="hljs-number">2</span>, mLen)
      e = <span class="hljs-number">0</span>
    }
  }

  <span class="hljs-keyword">for</span> (; mLen &gt;= <span class="hljs-number">8</span>; buffer[offset + i] = m &amp; <span class="hljs-number">0xff</span>, i += d, m /= <span class="hljs-number">256</span>, mLen -= <span class="hljs-number">8</span>) {}

  e = (e &lt;&lt; mLen) | m
  eLen += mLen
  <span class="hljs-keyword">for</span> (; eLen &gt; <span class="hljs-number">0</span>; buffer[offset + i] = e &amp; <span class="hljs-number">0xff</span>, i += d, e /= <span class="hljs-number">256</span>, eLen -= <span class="hljs-number">8</span>) {}

  buffer[offset + i - d] |= s * <span class="hljs-number">128</span>
}


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 39 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

<span class="hljs-keyword">var</span> toString = {}.toString;

<span class="hljs-built_in">module</span>.exports = <span class="hljs-built_in">Array</span>.isArray || <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) </span>{
  <span class="hljs-keyword">return</span> toString.call(arr) == <span class="hljs-string">'[object Array]'</span>;
};


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 40 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-built_in">module</span>.exports = __webpack_require__(<span class="hljs-number">41</span>).default;
<span class="hljs-built_in">module</span>.exports.default = <span class="hljs-built_in">module</span>.exports;


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 41 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">Buffer</span>) </span>{
<span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">"__esModule"</span>, { <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span> });
<span class="hljs-keyword">var</span> pad_string_1 = __webpack_require__(<span class="hljs-number">42</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encode</span>(<span class="hljs-params">input, encoding</span>) </span>{
    <span class="hljs-keyword">if</span> (encoding === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>) { encoding = <span class="hljs-string">"utf8"</span>; }
    <span class="hljs-keyword">if</span> (Buffer.isBuffer(input)) {
        <span class="hljs-keyword">return</span> fromBase64(input.toString(<span class="hljs-string">"base64"</span>));
    }
    <span class="hljs-keyword">return</span> fromBase64(Buffer.from(input, encoding).toString(<span class="hljs-string">"base64"</span>));
}
;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">decode</span>(<span class="hljs-params">base64url, encoding</span>) </span>{
    <span class="hljs-keyword">if</span> (encoding === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>) { encoding = <span class="hljs-string">"utf8"</span>; }
    <span class="hljs-keyword">return</span> Buffer.from(toBase64(base64url), <span class="hljs-string">"base64"</span>).toString(encoding);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toBase64</span>(<span class="hljs-params">base64url</span>) </span>{
    base64url = base64url.toString();
    <span class="hljs-keyword">return</span> pad_string_1.default(base64url)
        .replace(<span class="hljs-regexp">/\-/g</span>, <span class="hljs-string">"+"</span>)
        .replace(<span class="hljs-regexp">/_/g</span>, <span class="hljs-string">"/"</span>);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fromBase64</span>(<span class="hljs-params">base64</span>) </span>{
    <span class="hljs-keyword">return</span> base64
        .replace(<span class="hljs-regexp">/=/g</span>, <span class="hljs-string">""</span>)
        .replace(<span class="hljs-regexp">/\+/g</span>, <span class="hljs-string">"-"</span>)
        .replace(<span class="hljs-regexp">/\//g</span>, <span class="hljs-string">"_"</span>);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toBuffer</span>(<span class="hljs-params">base64url</span>) </span>{
    <span class="hljs-keyword">return</span> Buffer.from(toBase64(base64url), <span class="hljs-string">"base64"</span>);
}
<span class="hljs-keyword">var</span> base64url = encode;
base64url.encode = encode;
base64url.decode = decode;
base64url.toBase64 = toBase64;
base64url.fromBase64 = fromBase64;
base64url.toBuffer = toBuffer;
exports.default = base64url;

<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(<span class="hljs-keyword">this</span>, __webpack_require__(<span class="hljs-number">36</span>).Buffer))

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 42 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">Buffer</span>) </span>{
<span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">"__esModule"</span>, { <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span> });
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">padString</span>(<span class="hljs-params">input</span>) </span>{
    <span class="hljs-keyword">var</span> segmentLength = <span class="hljs-number">4</span>;
    <span class="hljs-keyword">var</span> stringLength = input.length;
    <span class="hljs-keyword">var</span> diff = stringLength % segmentLength;
    <span class="hljs-keyword">if</span> (!diff) {
        <span class="hljs-keyword">return</span> input;
    }
    <span class="hljs-keyword">var</span> position = stringLength;
    <span class="hljs-keyword">var</span> padLength = segmentLength - diff;
    <span class="hljs-keyword">var</span> paddedStringLength = stringLength + padLength;
    <span class="hljs-keyword">var</span> buffer = Buffer.alloc(paddedStringLength);
    buffer.write(input);
    <span class="hljs-keyword">while</span> (padLength--) {
        buffer.write(<span class="hljs-string">"="</span>, position++);
    }
    <span class="hljs-keyword">return</span> buffer.toString();
}
exports.default = padString;

<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(<span class="hljs-keyword">this</span>, __webpack_require__(<span class="hljs-number">36</span>).Buffer))

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 43 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{<span class="hljs-keyword">const</span> TextEncoder = global.TextEncoder
  ? global.TextEncoder  <span class="hljs-comment">// browser</span>
  : __webpack_require__(<span class="hljs-number">44</span>).TextEncoder  <span class="hljs-comment">// node shim</span>
<span class="hljs-built_in">module</span>.exports = TextEncoder

<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(<span class="hljs-keyword">this</span>, __webpack_require__(<span class="hljs-number">20</span>)))

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 44 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

<span class="hljs-comment">/* (ignored) */</span>

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 45 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">Buffer</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-272" id="section-272"></a>
</div>
<div class="dox">
<div class="summary">
<p>Dependencies</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> base64url = __webpack_require__(<span class="hljs-number">40</span>)
<span class="hljs-keyword">let</span> crypto = __webpack_require__(<span class="hljs-number">29</span>)
<span class="hljs-keyword">const</span> TextEncoder = __webpack_require__(<span class="hljs-number">43</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-273" id="section-273"></a>
</div>
<div class="dox">
<div class="summary">
<p>RSASSA-PKCS1-v1_5</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RSASSA_PKCS1_v1_5</span> </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-274" id="section-274"></a>
</div>
<div class="dox">
<div class="summary">
<p>constructor</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bitlength</span>
<span class="dox_type">string</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">constructor</span> (params) {
    <span class="hljs-keyword">this</span>.params = params
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-275" id="section-275"></a>
</div>
<div class="dox">
<div class="summary">
<p>sign</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">key</span>
<span class="dox_type">CryptoKey</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">BufferSource</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  sign (key, data) {
    <span class="hljs-keyword">let</span> algorithm = <span class="hljs-keyword">this</span>.params

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-276" id="section-276"></a>
</div>
<p>TODO
if (!this.sufficientKeySize()) {
return Promise.reject(
new Error(
'A key size of 2048 bits or larger must be used with RSASSA-PKCS1-v1_5'
)
)
}</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    data = <span class="hljs-keyword">new</span> TextEncoder().encode(data)

    <span class="hljs-keyword">return</span> crypto.subtle
      .sign(algorithm, key, data)
      .then(<span class="hljs-function"><span class="hljs-params">signature</span> =&gt;</span> base64url(Buffer.from(signature)))
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-277" id="section-277"></a>
</div>
<div class="dox">
<div class="summary">
<p>verify</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">key</span>
<span class="dox_type">CryptoKey</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">signature</span>
<span class="dox_type">BufferSource</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">BufferSource</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  verify (key, signature, data) {
    <span class="hljs-keyword">let</span> algorithm = <span class="hljs-keyword">this</span>.params

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> signature === <span class="hljs-string">'string'</span>) {
      signature = <span class="hljs-built_in">Uint8Array</span>.from(base64url.toBuffer(signature))
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'string'</span>) {
      data = <span class="hljs-keyword">new</span> TextEncoder().encode(data)
    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-278" id="section-278"></a>
</div>
<p>...</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    <span class="hljs-keyword">return</span> crypto.subtle.verify(algorithm, key, signature, data)
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-279" id="section-279"></a>
</div>
<div class="dox">
<div class="summary">
<p>importKey</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">key</span>
<span class="dox_type">JWK</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">async</span> importKey (key) {
    <span class="hljs-keyword">let</span> jwk = <span class="hljs-built_in">Object</span>.assign({}, key)
    <span class="hljs-keyword">let</span> algorithm = <span class="hljs-keyword">this</span>.params
    <span class="hljs-keyword">let</span> usages = key[<span class="hljs-string">'key_ops'</span>] || []

    <span class="hljs-keyword">if</span> (key.use === <span class="hljs-string">'sig'</span>) {
      usages.push(<span class="hljs-string">'verify'</span>)
    }

    <span class="hljs-keyword">if</span> (key.use === <span class="hljs-string">'enc'</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-280" id="section-280"></a>
</div>
<p>TODO: handle encryption keys</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(key)
    }

    <span class="hljs-keyword">if</span> (key.key_ops) {
      usages = key.key_ops
    }

    <span class="hljs-keyword">return</span> crypto.subtle
      .importKey(<span class="hljs-string">'jwk'</span>, jwk, algorithm, <span class="hljs-literal">true</span>, usages)
      .then(<span class="hljs-function"><span class="hljs-params">cryptoKey</span> =&gt;</span> {
        <span class="hljs-built_in">Object</span>.defineProperty(jwk, <span class="hljs-string">'cryptoKey'</span>, {
          <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">value</span>: cryptoKey
        })

        <span class="hljs-keyword">return</span> jwk
      })
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-281" id="section-281"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = RSASSA_PKCS1_v1_5

<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(<span class="hljs-keyword">this</span>, __webpack_require__(<span class="hljs-number">36</span>).Buffer))

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 46 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-282" id="section-282"></a>
</div>
<div class="dox">
<div class="summary">
<p>Dependencies</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> NotSupportedError = __webpack_require__(<span class="hljs-number">47</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-283" id="section-283"></a>
</div>
<div class="dox">
<div class="summary">
<p>Operations</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> operations = [
  <span class="hljs-string">'sign'</span>,
  <span class="hljs-string">'verify'</span>,
  <span class="hljs-string">'encrypt'</span>,
  <span class="hljs-string">'decrypt'</span>,
  <span class="hljs-string">'importKey'</span>
]

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-284" id="section-284"></a>
</div>
<div class="dox">
<div class="summary">
<p>SupportedAlgorithms</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SupportedAlgorithms</span> </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-285" id="section-285"></a>
</div>
<div class="dox">
<div class="summary">
<p>constructor</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">constructor</span> () {
    operations.forEach(<span class="hljs-function"><span class="hljs-params">op</span> =&gt;</span> {
      <span class="hljs-keyword">this</span>[op] = {}
    })
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-286" id="section-286"></a>
</div>
<div class="dox">
<div class="summary">
<p>Supported Operations</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> operations () {
    <span class="hljs-keyword">return</span> operations
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-287" id="section-287"></a>
</div>
<div class="dox">
<div class="summary">
<p>define</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">alg</span>
<span class="dox_type">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">op</span>
<span class="dox_type">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">argument</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  define (alg, op, argument) {
    <span class="hljs-keyword">let</span> registeredAlgorithms = <span class="hljs-keyword">this</span>[op]
    registeredAlgorithms[alg] = argument
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-288" id="section-288"></a>
</div>
<div class="dox">
<div class="summary">
<p>normalize</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">op</span>
<span class="dox_type">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">alg</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  normalize (op, alg) {
    <span class="hljs-keyword">let</span> registeredAlgorithms = <span class="hljs-keyword">this</span>[op]

    <span class="hljs-keyword">if</span> (!registeredAlgorithms) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">SyntaxError</span>() <span class="hljs-comment">// what kind of error should this be?</span>
    }

    <span class="hljs-keyword">let</span> argument = registeredAlgorithms[alg]

    <span class="hljs-keyword">if</span> (!argument) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> NotSupportedError(alg)
    }

    <span class="hljs-keyword">return</span> argument
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-289" id="section-289"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = SupportedAlgorithms


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 47 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-290" id="section-290"></a>
</div>
<div class="dox">
<div class="summary">
<p>NotSupportedError</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NotSupportedError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Error</span> </span>{
  <span class="hljs-keyword">constructor</span> (alg) {
    <span class="hljs-keyword">super</span>()
    <span class="hljs-keyword">this</span>.message = <span class="hljs-string">`<span class="hljs-subst">${alg}</span> is not a supported algorithm`</span>
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-291" id="section-291"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = NotSupportedError


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 48 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">DataError</span>: __webpack_require__(<span class="hljs-number">49</span>),
  <span class="hljs-attr">NotSupportedError</span>: __webpack_require__(<span class="hljs-number">47</span>)
}


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 49 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-292" id="section-292"></a>
</div>
<div class="dox">
<div class="summary">
<p>DataError</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DataError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Error</span> </span>{
  <span class="hljs-keyword">constructor</span> (message) {
    <span class="hljs-keyword">super</span>(message)
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-293" id="section-293"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = DataError


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 50 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-294" id="section-294"></a>
</div>
<div class="dox">
<div class="summary">
<p>Dependencies</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> JWA = __webpack_require__(<span class="hljs-number">32</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-295" id="section-295"></a>
</div>
<div class="dox">
<div class="summary">
<p>JWK Class</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JWK</span> </span>{
  <span class="hljs-keyword">constructor</span> ({ kty, use, key_ops, alg, kid, x5u, x5c, x5t } = {}) {
    <span class="hljs-keyword">this</span>.kty = kty
    <span class="hljs-keyword">this</span>.use = use
    <span class="hljs-keyword">this</span>.key_ops = key_ops
    <span class="hljs-keyword">this</span>.alg = alg
    <span class="hljs-keyword">this</span>.kid = kid
    <span class="hljs-keyword">this</span>.x5u = x5u
    <span class="hljs-keyword">this</span>.x5c = x5c
    <span class="hljs-keyword">this</span>.x5t = x5t
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-296" id="section-296"></a>
</div>
<div class="dox">
<div class="summary">
<p>importKey</p>
</div>
<div class="body">
<p>TODO:</p>
<ul>
<li>should this be on JWA?</li>
</ul>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> importKey (jwk) {
    <span class="hljs-keyword">return</span> JWA.importKey(jwk)
  }


}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-297" id="section-297"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = JWK


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 51 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-298" id="section-298"></a>
</div>
<div class="dox">
<div class="summary">
<p>Dependencies</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> JWK = __webpack_require__(<span class="hljs-number">50</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-299" id="section-299"></a>
</div>
<div class="dox">
<div class="summary">
<p>JWKSet</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JWKSet</span> </span>{
  <span class="hljs-keyword">constructor</span> ({ keys } = {}) {
    <span class="hljs-keyword">this</span>.keys = keys
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-300" id="section-300"></a>
</div>
<div class="dox">
<div class="summary">
<p>importKeys</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> importKeys (jwks) {
    <span class="hljs-keyword">if</span> (!jwks.keys) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Cannot import JWKSet: keys property is empty'</span>))
    }

    <span class="hljs-keyword">let</span> imported, importing

    <span class="hljs-keyword">try</span> {
      imported = <span class="hljs-keyword">new</span> JWKSet(jwks)
      importing = jwks.keys.map(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> JWK.importKey(key))
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(err)
    }

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all(importing)
      .then(<span class="hljs-function"><span class="hljs-params">keys</span> =&gt;</span> {
        imported.keys = keys
        <span class="hljs-keyword">return</span> imported
      })
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-301" id="section-301"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = JWKSet


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 52 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-302" id="section-302"></a>
</div>
<div class="dox">
<div class="summary">
<p>Dependencies</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> base64url = __webpack_require__(<span class="hljs-number">40</span>)
<span class="hljs-keyword">const</span> JWS = __webpack_require__(<span class="hljs-number">53</span>)
<span class="hljs-keyword">const</span> DataError = __webpack_require__(<span class="hljs-number">49</span>)
<span class="hljs-keyword">const</span> JOSEHeader = __webpack_require__(<span class="hljs-number">54</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-303" id="section-303"></a>
</div>
<div class="dox">
<div class="summary">
<p>JWT</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JWT</span> </span>{
  <span class="hljs-keyword">constructor</span> (data = {}) {
    <span class="hljs-keyword">this</span>.type = data.type
    <span class="hljs-keyword">this</span>.segments = data.segments
    <span class="hljs-keyword">this</span>.header = <span class="hljs-keyword">new</span> JOSEHeader(data.header)
    <span class="hljs-keyword">this</span>.protected = data.protected
    <span class="hljs-keyword">this</span>.unprotected = data.unprotected
    <span class="hljs-keyword">this</span>.iv = data.iv
    <span class="hljs-keyword">this</span>.aad = data.aad
    <span class="hljs-keyword">this</span>.ciphertext = data.ciphertext
    <span class="hljs-keyword">this</span>.tag = data.tag
    <span class="hljs-keyword">this</span>.recipients = data.recipients
    <span class="hljs-keyword">this</span>.payload = data.payload
    <span class="hljs-keyword">this</span>.signatures = data.signatures
    <span class="hljs-keyword">this</span>.signature = data.signature
    <span class="hljs-keyword">this</span>.key = data.key
    <span class="hljs-keyword">this</span>.serialization = data.serialization || <span class="hljs-string">'compact'</span> <span class="hljs-comment">// default</span>
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-304" id="section-304"></a>
</div>
<div class="dox">
<div class="summary">
<p>decode</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">string</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">static</span> decode (data) {
    <span class="hljs-keyword">let</span> ExtendedJWT = <span class="hljs-keyword">this</span>
    <span class="hljs-keyword">let</span> jwt

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data !== <span class="hljs-string">'string'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> DataError(<span class="hljs-string">'JWT must be a string'</span>)
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-305" id="section-305"></a>
</div>
<p>JSON of Flattened JSON Serialization</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (data.startsWith(<span class="hljs-string">'{'</span>)) {
      <span class="hljs-keyword">try</span> {
        data = <span class="hljs-built_in">JSON</span>.parse(data, () =&gt; {})
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> DataError(<span class="hljs-string">'Invalid JWT serialization'</span>)
      }

      <span class="hljs-keyword">if</span> (data.signatures || data.recipients) {
        data.serialization = <span class="hljs-string">'json'</span>
      } <span class="hljs-keyword">else</span> {
        data.serialization = <span class="hljs-string">'flattened'</span>
      }

      jwt = <span class="hljs-keyword">new</span> ExtendedJWT(data, { <span class="hljs-attr">filter</span>: <span class="hljs-literal">false</span> })

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-306" id="section-306"></a>
</div>
<p>Compact Serialization</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">let</span> serialization = <span class="hljs-string">'compact'</span>
        <span class="hljs-keyword">let</span> segments = data.split(<span class="hljs-string">'.'</span>)
        <span class="hljs-keyword">let</span> length = segments.length

        <span class="hljs-keyword">if</span> (length !== <span class="hljs-number">3</span> &amp;&amp; length !== <span class="hljs-number">5</span>) {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Malformed JWT'</span>)
        }

        <span class="hljs-keyword">let</span> header = <span class="hljs-built_in">JSON</span>.parse(base64url.decode(segments[<span class="hljs-number">0</span>]))

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-307" id="section-307"></a>
</div>
<p>JSON Web Signature</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (length === <span class="hljs-number">3</span>) {
          <span class="hljs-keyword">let</span> type = <span class="hljs-string">'JWS'</span>
          <span class="hljs-keyword">let</span> payload = <span class="hljs-built_in">JSON</span>.parse(base64url.decode(segments[<span class="hljs-number">1</span>]))
          <span class="hljs-keyword">let</span> signature = segments[<span class="hljs-number">2</span>]

          jwt = <span class="hljs-keyword">new</span> ExtendedJWT(
              { type, segments, header, payload, signature, serialization },
              { <span class="hljs-attr">filter</span>: <span class="hljs-literal">false</span> }
            )
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-308" id="section-308"></a>
</div>
<p>JSON Web Encryption</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (length === <span class="hljs-number">5</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-309" id="section-309"></a>
</div>
<p>let type = 'JWE'
let [protected, encryption_key, iv, ciphertext, tag] = segments</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-310" id="section-310"></a>
</div>
<p>jwt = new ExtendedJWT({
type,
protected: base64url.decode(JSON.parse(protected)),
encryption_key,
iv,
ciphertext,
tag,
serialization
})</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> DataError(<span class="hljs-string">'Invalid JWT compact serialization'</span>)
      }
    }

    <span class="hljs-keyword">return</span> jwt
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-311" id="section-311"></a>
</div>
<div class="dox">
<div class="summary">
<p>encode</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">header</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">payload</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">key</span>
<span class="dox_type">CryptoKey</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">static</span> encode (header, payload, key) {
    <span class="hljs-keyword">let</span> jwt = <span class="hljs-keyword">new</span> JWT(header, payload)
    <span class="hljs-keyword">return</span> jwt.encode(key)
  }


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-312" id="section-312"></a>
</div>
<div class="dox">
<div class="summary">
<p>verify</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">key</span>
<span class="dox_type">CryptoKey</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">token</span>
<span class="dox_type">string</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> verify (key, token) {
    <span class="hljs-keyword">let</span> jwt = JWT.decode(token)
    jwt.key = key
    <span class="hljs-keyword">return</span> jwt.verify().then(<span class="hljs-function"><span class="hljs-params">verified</span> =&gt;</span> jwt)
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-313" id="section-313"></a>
</div>
<div class="dox">
<div class="summary">
<p>isJWE</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  isJWE () {
    <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>.header.enc
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-314" id="section-314"></a>
</div>
<div class="dox">
<div class="summary">
<p>resolveKeys</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  resolveKeys (jwks) {
    <span class="hljs-keyword">let</span> kid = <span class="hljs-keyword">this</span>.header.kid
    <span class="hljs-keyword">let</span> keys, match

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-315" id="section-315"></a>
</div>
<p>treat an array as the &quot;keys&quot; property of a JWK Set</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(jwks)) {
      keys = jwks
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-316" id="section-316"></a>
</div>
<p>presence of keys indicates object is a JWK Set</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (jwks.keys) {
      keys = jwks.keys
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-317" id="section-317"></a>
</div>
<p>wrap a plain object they is not a JWK Set in Array</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (!jwks.keys &amp;&amp; <span class="hljs-keyword">typeof</span> jwks === <span class="hljs-string">'object'</span>) {
      keys = [jwks]
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-318" id="section-318"></a>
</div>
<p>ensure there are keys to search</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (!keys) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> DataError(<span class="hljs-string">'Invalid JWK argument'</span>)
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-319" id="section-319"></a>
</div>
<p>match by &quot;kid&quot; or &quot;use&quot; header</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (kid) {
      match = keys.find(<span class="hljs-function"><span class="hljs-params">jwk</span> =&gt;</span> jwk.kid === kid)
    } <span class="hljs-keyword">else</span> {
      match = keys.find(<span class="hljs-function"><span class="hljs-params">jwk</span> =&gt;</span> jwk.use === <span class="hljs-string">'sig'</span>)
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-320" id="section-320"></a>
</div>
<p>assign matching key to JWT and return a boolean</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (match) {
      <span class="hljs-keyword">this</span>.key = match.cryptoKey
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-321" id="section-321"></a>
</div>
<div class="dox">
<div class="summary">
<p>encode</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">async</span> encode () {
    <span class="hljs-keyword">let</span> token = <span class="hljs-keyword">this</span>

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isJWE()) {
      <span class="hljs-keyword">return</span> JWE.encrypt(token)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> JWS.sign(token)
    }
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-322" id="section-322"></a>
</div>
<div class="dox">
<div class="summary">
<p>verify</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">async</span> verify () {
    <span class="hljs-keyword">return</span> JWS.verify(<span class="hljs-keyword">this</span>)
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-323" id="section-323"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = JWT


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 53 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-324" id="section-324"></a>
</div>
<div class="dox">
<div class="summary">
<p>Dependencies</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> base64url = __webpack_require__(<span class="hljs-number">40</span>)
<span class="hljs-keyword">const</span> JWA = __webpack_require__(<span class="hljs-number">32</span>)
<span class="hljs-keyword">const</span> { DataError } = __webpack_require__(<span class="hljs-number">48</span>)
<span class="hljs-keyword">const</span> JOSEHeader = __webpack_require__(<span class="hljs-number">54</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-325" id="section-325"></a>
</div>
<div class="dox">
<div class="summary">
<p>JWS</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JWS</span> </span>{
  <span class="hljs-keyword">constructor</span> (data = {}) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-326" id="section-326"></a>
</div>
<p>compact</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">this</span>.header = <span class="hljs-keyword">new</span> JOSEHeader(data.header)
    <span class="hljs-keyword">this</span>.payload = data.payload || {}
    <span class="hljs-keyword">this</span>.signature = data.signature

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-327" id="section-327"></a>
</div>
<p>flattened</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">this</span>.protected = data.protected

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-328" id="section-328"></a>
</div>
<p>JSON serialization</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">this</span>.signatures = data.signatures

    <span class="hljs-keyword">this</span>.verified = <span class="hljs-literal">false</span>
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-329" id="section-329"></a>
</div>
<div class="dox">
<div class="summary">
<p>sign</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">token</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> sign (token) {
    <span class="hljs-keyword">let</span> payload = base64url(<span class="hljs-built_in">JSON</span>.stringify(token.payload))

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-330" id="section-330"></a>
</div>
<p>compact serialization</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (token.serialization === <span class="hljs-string">'compact'</span>) {
      <span class="hljs-keyword">let</span> {key, <span class="hljs-attr">header</span>: {alg}} = token
      <span class="hljs-keyword">let</span> header = base64url(<span class="hljs-built_in">JSON</span>.stringify(token.header))
      <span class="hljs-keyword">let</span> data = <span class="hljs-string">`<span class="hljs-subst">${header}</span>.<span class="hljs-subst">${payload}</span>`</span>

      <span class="hljs-keyword">return</span> JWA.sign(alg, key, data).then(<span class="hljs-function"><span class="hljs-params">signature</span> =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${data}</span>.<span class="hljs-subst">${signature}</span>`</span>)
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-331" id="section-331"></a>
</div>
<p>JSON serialization</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (token.serialization === <span class="hljs-string">'json'</span>) {

    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-332" id="section-332"></a>
</div>
<p>Flattened serialization</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (token.serialization === <span class="hljs-string">'flattened'</span>) {

    }

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-keyword">new</span> DataError(<span class="hljs-string">'Unsupported serialization'</span>))
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-333" id="section-333"></a>
</div>
<div class="dox">
<div class="summary">
<p>verify</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> verify (jwt) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-334" id="section-334"></a>
</div>
<p>multiple signatures</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (jwt.signatures) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-335" id="section-335"></a>
</div>
<p>...</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    }

    <span class="hljs-keyword">let</span> {key, signature, <span class="hljs-attr">header</span>: {alg}} = jwt

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-336" id="section-336"></a>
</div>
<p>one signature</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (jwt.signature) {
      <span class="hljs-keyword">let</span> [header, payload] = jwt.segments
      <span class="hljs-keyword">let</span> data = <span class="hljs-string">`<span class="hljs-subst">${header}</span>.<span class="hljs-subst">${payload}</span>`</span>

      <span class="hljs-keyword">if</span> (alg === <span class="hljs-string">'none'</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-keyword">new</span> DataError(<span class="hljs-string">'Signature provided to verify with alg: none'</span>))
      }

      <span class="hljs-keyword">return</span> JWA.verify(alg, key, signature, data).then(<span class="hljs-function"><span class="hljs-params">verified</span> =&gt;</span> {
        jwt.verified = verified
        <span class="hljs-keyword">return</span> verified
      })
    }

    <span class="hljs-keyword">if</span> (alg === <span class="hljs-string">'none'</span>) {
      <span class="hljs-keyword">if</span> (!key &amp;&amp; !signature) {
        jwt.verified = <span class="hljs-literal">true</span>

        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-literal">true</span>)
      }

      <span class="hljs-keyword">if</span> (key) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-keyword">new</span> DataError(<span class="hljs-string">'Key provided to verify signature with alg: none'</span>))
      }
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-337" id="section-337"></a>
</div>
<p>no signatures to verify</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-keyword">new</span> DataError(<span class="hljs-string">'Missing signature(s)'</span>))
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-338" id="section-338"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = JWS


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 54 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-339" id="section-339"></a>
</div>
<div class="dox">
<div class="summary">
<p>Header</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JOSEHeader</span> </span>{
  <span class="hljs-keyword">constructor</span> ({ typ, cty, alg, jku, kid, x5u, x5c, x5t, crit, enc, zip } = {}) {
    <span class="hljs-keyword">this</span>.typ = typ
    <span class="hljs-keyword">this</span>.cty = cty
    <span class="hljs-keyword">this</span>.alg = alg
    <span class="hljs-keyword">this</span>.jku = jku
    <span class="hljs-keyword">this</span>.kid = kid
    <span class="hljs-keyword">this</span>.x5u = x5u
    <span class="hljs-keyword">this</span>.x5c = x5c
    <span class="hljs-keyword">this</span>.x5t = x5t
    <span class="hljs-keyword">this</span>.crit = crit
    <span class="hljs-keyword">this</span>.enc = enc
    <span class="hljs-keyword">this</span>.zip = zip
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-340" id="section-340"></a>
</div>
<div class="dox">
<div class="summary">
<p>isJWS</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  isJWS () {}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-341" id="section-341"></a>
</div>
<div class="dox">
<div class="summary">
<p>isJWE</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  isJWE () {}
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-342" id="section-342"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-built_in">module</span>.exports = JOSEHeader


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 55 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">Buffer</span>) </span>{<span class="hljs-comment">/**
 * Dependencies
 */</span>
<span class="hljs-keyword">const</span> assert = __webpack_require__(<span class="hljs-number">21</span>);

<span class="hljs-keyword">const</span> base64url = __webpack_require__(<span class="hljs-number">40</span>);

<span class="hljs-keyword">const</span> {
  crypto,
  JWT
} = __webpack_require__(<span class="hljs-number">28</span>);

<span class="hljs-keyword">const</span> FormUrlEncoded = __webpack_require__(<span class="hljs-number">56</span>);

<span class="hljs-keyword">const</span> {
  URL
} = __webpack_require__(<span class="hljs-number">27</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-343" id="section-343"></a>
</div>
<div class="dox">
<div class="summary">
<p>Authentication Request</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthenticationRequest</span> </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-344" id="section-344"></a>
</div>
<div class="dox">
<div class="summary">
<p>create</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">rp</span>
<span class="dox_type">RelyingParty</span>
<span>– instance of RelyingParty
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">Object</span>
<span><ul>
<li>optional request parameters</li>
</ul>
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">session</span>
<span class="dox_type">Object</span>
<span>– reference to localStorage or other session object
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">static</span> create(rp, options, session) {
    <span class="hljs-keyword">const</span> {
      provider,
      defaults,
      registration
    } = rp;
    <span class="hljs-keyword">let</span> issuer, endpoint, client, params;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-345" id="section-345"></a>
</div>
<p>validate presence of OP configuration, RP client registration,
and default parameters</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      assert(provider.configuration, <span class="hljs-string">'RelyingParty provider OpenID Configuration is missing'</span>);
      assert(defaults.authenticate, <span class="hljs-string">'RelyingParty default authentication parameters are missing'</span>);
      assert(registration, <span class="hljs-string">'RelyingParty client registration is missing'</span>); <span class="hljs-comment">// define basic elements of the request</span>

      issuer = provider.configuration.issuer;
      endpoint = provider.configuration.authorization_endpoint;
      client = {
        <span class="hljs-attr">client_id</span>: registration.client_id
      };
      params = <span class="hljs-built_in">Object</span>.assign(defaults.authenticate, client, options); <span class="hljs-comment">// validate presence of required configuration and parameters</span>

      assert(issuer, <span class="hljs-string">'Missing issuer in provider OpenID Configuration'</span>);
      assert(endpoint, <span class="hljs-string">'Missing authorization_endpoint in provider OpenID Configuration'</span>);
      assert(params.scope, <span class="hljs-string">'Missing scope parameter in authentication request'</span>);
      assert(params.response_type, <span class="hljs-string">'Missing response_type parameter in authentication request'</span>);
      assert(params.client_id, <span class="hljs-string">'Missing client_id parameter in authentication request'</span>);
      assert(params.redirect_uri, <span class="hljs-string">'Missing redirect_uri parameter in authentication request'</span>); <span class="hljs-comment">// generate state and nonce random octets</span>

      params.state = <span class="hljs-built_in">Array</span>.from(crypto.getRandomValues(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(<span class="hljs-number">16</span>)));
      params.nonce = <span class="hljs-built_in">Array</span>.from(crypto.getRandomValues(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(<span class="hljs-number">16</span>))); <span class="hljs-comment">// hash the state and nonce parameter values</span>

      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all([crypto.subtle.digest({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-256'</span>
      }, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(params.state)), crypto.subtle.digest({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-256'</span>
      }, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(params.nonce))]);
    }) <span class="hljs-comment">// serialize the request with original values, store in session by</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-346" id="section-346"></a>
</div>
<p>encoded state param, and replace state/nonce octets with encoded
digests</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    .then(<span class="hljs-function"><span class="hljs-params">digests</span> =&gt;</span> {
      <span class="hljs-keyword">let</span> state = base64url(Buffer.from(digests[<span class="hljs-number">0</span>]));
      <span class="hljs-keyword">let</span> nonce = base64url(Buffer.from(digests[<span class="hljs-number">1</span>]));
      <span class="hljs-keyword">let</span> key = <span class="hljs-string">`<span class="hljs-subst">${issuer}</span>/requestHistory/<span class="hljs-subst">${state}</span>`</span>; <span class="hljs-comment">// store the request params for response validation</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-347" id="section-347"></a>
</div>
<p>with serialized octet values for state and nonce</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
      session[key] = <span class="hljs-built_in">JSON</span>.stringify(params); <span class="hljs-comment">// replace state and nonce octets with base64url encoded digests</span>

      params.state = state;
      params.nonce = nonce;
    }).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> AuthenticationRequest.generateSessionKeys()).then(<span class="hljs-function"><span class="hljs-params">sessionKeys</span> =&gt;</span> {
      AuthenticationRequest.storeSessionKeys(sessionKeys, params, session);
    }) <span class="hljs-comment">// optionally encode a JWT with the request parameters</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-348" id="section-348"></a>
</div>
<p>and replace params with `{ request: <jwt> }</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    .then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (provider.configuration.request_parameter_supported) {
        <span class="hljs-keyword">return</span> AuthenticationRequest.encodeRequestParams(params).then(<span class="hljs-function"><span class="hljs-params">encodedParams</span> =&gt;</span> {
          params = encodedParams;
        });
      }
    }) <span class="hljs-comment">// render the request URI and terminate the algorithm</span>
    .then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
      <span class="hljs-keyword">let</span> url = <span class="hljs-keyword">new</span> URL(endpoint);
      url.search = FormUrlEncoded.encode(params);
      <span class="hljs-keyword">return</span> url.href;
    });
  }

  <span class="hljs-keyword">static</span> generateSessionKeys() {
    <span class="hljs-keyword">return</span> crypto.subtle.generateKey({
      <span class="hljs-attr">name</span>: <span class="hljs-string">"RSASSA-PKCS1-v1_5"</span>,
      <span class="hljs-attr">modulusLength</span>: <span class="hljs-number">2048</span>,
      <span class="hljs-attr">publicExponent</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>([<span class="hljs-number">0x01</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x01</span>]),
      <span class="hljs-attr">hash</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"SHA-256"</span>
      }
    }, <span class="hljs-literal">true</span>, [<span class="hljs-string">"sign"</span>, <span class="hljs-string">"verify"</span>]).then(<span class="hljs-function"><span class="hljs-params">keyPair</span> =&gt;</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-349" id="section-349"></a>
</div>
<p>returns a keypair object</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all([crypto.subtle.exportKey(<span class="hljs-string">'jwk'</span>, keyPair.publicKey), crypto.subtle.exportKey(<span class="hljs-string">'jwk'</span>, keyPair.privateKey)]);
    }).then(<span class="hljs-function"><span class="hljs-params">jwkPair</span> =&gt;</span> {
      <span class="hljs-keyword">let</span> [publicJwk, privateJwk] = jwkPair;
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">public</span>: publicJwk,
        <span class="hljs-attr">private</span>: privateJwk
      };
    });
  }

  <span class="hljs-keyword">static</span> storeSessionKeys(sessionKeys, params, session) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-350" id="section-350"></a>
</div>
<p>store the private one in session, public one goes into params</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    session[<span class="hljs-string">'oidc.session.privateKey'</span>] = <span class="hljs-built_in">JSON</span>.stringify(sessionKeys.private);
    params.key = sessionKeys.public;
  }

  <span class="hljs-keyword">static</span> encodeRequestParams(params) {
    <span class="hljs-keyword">const</span> excludeParams = [<span class="hljs-string">'scope'</span>, <span class="hljs-string">'client_id'</span>, <span class="hljs-string">'response_type'</span>, <span class="hljs-string">'state'</span>];
    <span class="hljs-keyword">const</span> keysToEncode = <span class="hljs-built_in">Object</span>.keys(params).filter(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> !excludeParams.includes(key));
    <span class="hljs-keyword">let</span> payload = {};
    keysToEncode.forEach(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
      payload[key] = params[key];
    });
    <span class="hljs-keyword">let</span> requestParamJwt = <span class="hljs-keyword">new</span> JWT({
      <span class="hljs-attr">header</span>: {
        <span class="hljs-attr">alg</span>: <span class="hljs-string">'none'</span>
      },
      payload
    }, {
      <span class="hljs-attr">filter</span>: <span class="hljs-literal">false</span>
    });
    <span class="hljs-keyword">return</span> requestParamJwt.encode().then(<span class="hljs-function"><span class="hljs-params">requestParamCompact</span> =&gt;</span> {
      <span class="hljs-keyword">let</span> newParams = {
        <span class="hljs-attr">scope</span>: params[<span class="hljs-string">'scope'</span>],
        <span class="hljs-attr">client_id</span>: params[<span class="hljs-string">'client_id'</span>],
        <span class="hljs-attr">response_type</span>: params[<span class="hljs-string">'response_type'</span>],
        <span class="hljs-attr">request</span>: requestParamCompact,
        <span class="hljs-attr">state</span>: params[<span class="hljs-string">'state'</span>]
      };
      <span class="hljs-keyword">return</span> newParams;
    });
  }

}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-351" id="section-351"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

<span class="hljs-built_in">module</span>.exports = AuthenticationRequest;
<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(<span class="hljs-keyword">this</span>, __webpack_require__(<span class="hljs-number">36</span>).Buffer))

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 56 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-352" id="section-352"></a>
</div>
<div class="dox">
<div class="summary">
<p>Dependencies</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-353" id="section-353"></a>
</div>
<div class="dox">
<div class="summary">
<p>FormUrlEncoded</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FormUrlEncoded</span> </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-354" id="section-354"></a>
</div>
<div class="dox">
<div class="summary">
<p>Encode</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">static</span> encode(data) {
    <span class="hljs-keyword">let</span> pairs = [];
    <span class="hljs-built_in">Object</span>.keys(data).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
      pairs.push(<span class="hljs-built_in">encodeURIComponent</span>(key) + <span class="hljs-string">'='</span> + <span class="hljs-built_in">encodeURIComponent</span>(data[key]));
    });
    <span class="hljs-keyword">return</span> pairs.join(<span class="hljs-string">'&amp;'</span>);
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-355" id="section-355"></a>
</div>
<div class="dox">
<div class="summary">
<p>Decode</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">string</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> decode(data) {
    <span class="hljs-keyword">let</span> obj = {};
    data.split(<span class="hljs-string">'&amp;'</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">property</span>) </span>{
      <span class="hljs-keyword">let</span> pair = property.split(<span class="hljs-string">'='</span>);
      <span class="hljs-keyword">let</span> key = <span class="hljs-built_in">decodeURIComponent</span>(pair[<span class="hljs-number">0</span>]);
      <span class="hljs-keyword">let</span> val = <span class="hljs-built_in">decodeURIComponent</span>(pair[<span class="hljs-number">1</span>]);
      obj[key] = val;
    });
    <span class="hljs-keyword">return</span> obj;
  }

}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-356" id="section-356"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

<span class="hljs-built_in">module</span>.exports = FormUrlEncoded;

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 57 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global, Buffer</span>) </span>{<span class="hljs-comment">/**
 * Dependencies
 */</span>
<span class="hljs-keyword">const</span> {
  URL
} = __webpack_require__(<span class="hljs-number">27</span>);

<span class="hljs-keyword">const</span> assert = __webpack_require__(<span class="hljs-number">21</span>);

<span class="hljs-keyword">const</span> {
  crypto
} = __webpack_require__(<span class="hljs-number">28</span>);

<span class="hljs-keyword">const</span> base64url = __webpack_require__(<span class="hljs-number">40</span>);

<span class="hljs-keyword">const</span> fetch = __webpack_require__(<span class="hljs-number">5</span>);

<span class="hljs-keyword">const</span> Headers = fetch.Headers ? fetch.Headers : global.Headers;

<span class="hljs-keyword">const</span> FormUrlEncoded = __webpack_require__(<span class="hljs-number">56</span>);

<span class="hljs-keyword">const</span> IDToken = __webpack_require__(<span class="hljs-number">58</span>);

<span class="hljs-keyword">const</span> Session = __webpack_require__(<span class="hljs-number">59</span>);

<span class="hljs-keyword">const</span> onHttpError = __webpack_require__(<span class="hljs-number">60</span>);

<span class="hljs-keyword">const</span> HttpError = __webpack_require__(<span class="hljs-number">62</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-357" id="section-357"></a>
</div>
<div class="dox">
<div class="summary">
<p>AuthenticationResponse</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthenticationResponse</span> </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-358" id="section-358"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">rp</span>
<span>{RelyingParty}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[redirect]</span>
<span>{string} req.query
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[body]</span>
<span>{string} req.body.text
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">session</span>
<span>{Session|Storage} req.session or localStorage or similar
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">params</span>
<span>{object} hashmap
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mode</span>
<span>{string} 'query'/'fragment'/'form_post',   determined in <code>parseResponse()</code>
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">constructor</span>({
    rp,
    redirect,
    body,
    session,
    mode,
    params = {}
  }) {
    <span class="hljs-keyword">this</span>.rp = rp;
    <span class="hljs-keyword">this</span>.redirect = redirect;
    <span class="hljs-keyword">this</span>.body = body;
    <span class="hljs-keyword">this</span>.session = session;
    <span class="hljs-keyword">this</span>.mode = mode;
    <span class="hljs-keyword">this</span>.params = params;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-359" id="section-359"></a>
</div>
<div class="dox">
<div class="summary">
<p>validateResponse</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">string</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> validateResponse(response) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(response).then(<span class="hljs-keyword">this</span>.parseResponse).then(<span class="hljs-keyword">this</span>.errorResponse).then(<span class="hljs-keyword">this</span>.matchRequest).then(<span class="hljs-keyword">this</span>.validateStateParam).then(<span class="hljs-keyword">this</span>.validateResponseMode).then(<span class="hljs-keyword">this</span>.validateResponseParams).then(<span class="hljs-keyword">this</span>.exchangeAuthorizationCode).then(<span class="hljs-keyword">this</span>.validateIDToken).then(Session.fromAuthResponse);
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-360" id="section-360"></a>
</div>
<div class="dox">
<div class="summary">
<p>parseResponse</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> parseResponse(response) {
    <span class="hljs-keyword">let</span> {
      redirect,
      body
    } = response; <span class="hljs-comment">// response must be either a redirect uri or request body, but not both</span>

    <span class="hljs-keyword">if</span> (redirect &amp;&amp; body || !redirect &amp;&amp; !body) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> HttpError(<span class="hljs-number">400</span>, <span class="hljs-string">'Invalid response mode'</span>);
    } <span class="hljs-comment">// parse redirect uri</span>


    <span class="hljs-keyword">if</span> (redirect) {
      <span class="hljs-keyword">let</span> url = <span class="hljs-keyword">new</span> URL(redirect);
      <span class="hljs-keyword">let</span> {
        search,
        hash
      } = url;

      <span class="hljs-keyword">if</span> (search &amp;&amp; hash || !search &amp;&amp; !hash) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> HttpError(<span class="hljs-number">400</span>, <span class="hljs-string">'Invalid response mode'</span>);
      }

      <span class="hljs-keyword">if</span> (search) {
        response.params = FormUrlEncoded.decode(search.substring(<span class="hljs-number">1</span>));
        response.mode = <span class="hljs-string">'query'</span>;
      }

      <span class="hljs-keyword">if</span> (hash) {
        response.params = FormUrlEncoded.decode(hash.substring(<span class="hljs-number">1</span>));
        response.mode = <span class="hljs-string">'fragment'</span>;
      }
    } <span class="hljs-comment">// parse request form body</span>


    <span class="hljs-keyword">if</span> (body) {
      response.params = FormUrlEncoded.decode(body);
      response.mode = <span class="hljs-string">'form_post'</span>;
    }

    <span class="hljs-keyword">return</span> response;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-361" id="section-361"></a>
</div>
<div class="dox">
<div class="summary">
<p>errorResponse</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">AuthenticationResponse</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> errorResponse(response) {
    <span class="hljs-keyword">const</span> errorCode = response.params.error;

    <span class="hljs-keyword">if</span> (errorCode) {
      <span class="hljs-keyword">const</span> errorParams = {};
      errorParams[<span class="hljs-string">'error'</span>] = errorCode;
      errorParams[<span class="hljs-string">'error_description'</span>] = response.params[<span class="hljs-string">'error_description'</span>];
      errorParams[<span class="hljs-string">'error_uri'</span>] = response.params[<span class="hljs-string">'error_uri'</span>];
      errorParams[<span class="hljs-string">'state'</span>] = response.params[<span class="hljs-string">'state'</span>];
      <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`AuthenticationResponse error: <span class="hljs-subst">${errorCode}</span>`</span>);
      error.info = errorParams;
      <span class="hljs-keyword">throw</span> error;
    }

    <span class="hljs-keyword">return</span> response;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-362" id="section-362"></a>
</div>
<div class="dox">
<div class="summary">
<p>matchRequest</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> matchRequest(response) {
    <span class="hljs-keyword">let</span> {
      rp,
      params,
      session
    } = response;
    <span class="hljs-keyword">let</span> state = params.state;
    <span class="hljs-keyword">let</span> issuer = rp.provider.configuration.issuer;

    <span class="hljs-keyword">if</span> (!state) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Missing state parameter in authentication response'</span>);
    }

    <span class="hljs-keyword">let</span> key = <span class="hljs-string">`<span class="hljs-subst">${issuer}</span>/requestHistory/<span class="hljs-subst">${state}</span>`</span>;
    <span class="hljs-keyword">let</span> request = session[key];

    <span class="hljs-keyword">if</span> (!request) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Mismatching state parameter in authentication response'</span>);
    }

    response.request = <span class="hljs-built_in">JSON</span>.parse(request);
    <span class="hljs-keyword">return</span> response;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-363" id="section-363"></a>
</div>
<div class="dox">
<div class="summary">
<p>validateStateParam</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> validateStateParam(response) {
    <span class="hljs-keyword">let</span> octets = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(response.request.state);
    <span class="hljs-keyword">let</span> encoded = response.params.state;
    <span class="hljs-keyword">return</span> crypto.subtle.digest({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-256'</span>
    }, octets).then(<span class="hljs-function"><span class="hljs-params">digest</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (encoded !== base64url(Buffer.from(digest))) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Mismatching state parameter in authentication response'</span>);
      }

      <span class="hljs-keyword">return</span> response;
    });
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-364" id="section-364"></a>
</div>
<div class="dox">
<div class="summary">
<p>validateResponseMode</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> validateResponseMode(response) {
    <span class="hljs-keyword">if</span> (response.request.response_type !== <span class="hljs-string">'code'</span> &amp;&amp; response.mode === <span class="hljs-string">'query'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Invalid response mode'</span>);
    }

    <span class="hljs-keyword">return</span> response;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-365" id="section-365"></a>
</div>
<div class="dox">
<div class="summary">
<p>validateResponseParams</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> validateResponseParams(response) {
    <span class="hljs-keyword">let</span> {
      request,
      params
    } = response;
    <span class="hljs-keyword">let</span> expectedParams = request.response_type.split(<span class="hljs-string">' '</span>);

    <span class="hljs-keyword">if</span> (expectedParams.includes(<span class="hljs-string">'code'</span>)) {
      assert(params.code, <span class="hljs-string">'Missing authorization code in authentication response'</span>); <span class="hljs-comment">// TODO assert novelty of code</span>
    }

    <span class="hljs-keyword">if</span> (expectedParams.includes(<span class="hljs-string">'id_token'</span>)) {
      assert(params.id_token, <span class="hljs-string">'Missing id_token in authentication response'</span>);
    }

    <span class="hljs-keyword">if</span> (expectedParams.includes(<span class="hljs-string">'token'</span>)) {
      assert(params.access_token, <span class="hljs-string">'Missing access_token in authentication response'</span>);
      assert(params.token_type, <span class="hljs-string">'Missing token_type in authentication response'</span>);
    }

    <span class="hljs-keyword">return</span> response;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-366" id="section-366"></a>
</div>
<div class="dox">
<div class="summary">
<p>exchangeAuthorizationCode</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> exchangeAuthorizationCode(response) {
    <span class="hljs-keyword">let</span> {
      rp,
      params,
      request
    } = response;
    <span class="hljs-keyword">let</span> code = params.code; <span class="hljs-comment">// only exchange the authorization code when the response type is "code"</span>

    <span class="hljs-keyword">if</span> (!code || request[<span class="hljs-string">'response_type'</span>] !== <span class="hljs-string">'code'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(response);
    }

    <span class="hljs-keyword">let</span> {
      provider,
      registration
    } = rp;
    <span class="hljs-keyword">let</span> id = registration[<span class="hljs-string">'client_id'</span>];
    <span class="hljs-keyword">let</span> secret = registration[<span class="hljs-string">'client_secret'</span>]; <span class="hljs-comment">// verify the client is not public</span>

    <span class="hljs-keyword">if</span> (!secret) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Client cannot exchange authorization code because '</span> + <span class="hljs-string">'it is not a confidential client'</span>));
    } <span class="hljs-comment">// initialize token request arguments</span>


    <span class="hljs-keyword">let</span> endpoint = provider.configuration.token_endpoint;
    <span class="hljs-keyword">let</span> method = <span class="hljs-string">'POST'</span>; <span class="hljs-comment">// initialize headers</span>

    <span class="hljs-keyword">let</span> headers = <span class="hljs-keyword">new</span> Headers({
      <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/x-www-form-urlencoded'</span>
    }); <span class="hljs-comment">// initialize the token request parameters</span>

    <span class="hljs-keyword">let</span> bodyContents = {
      <span class="hljs-string">'grant_type'</span>: <span class="hljs-string">'authorization_code'</span>,
      <span class="hljs-string">'code'</span>: code,
      <span class="hljs-string">'redirect_uri'</span>: request[<span class="hljs-string">'redirect_uri'</span>]
    }; <span class="hljs-comment">// determine client authentication method</span>

    <span class="hljs-keyword">let</span> authMethod = registration[<span class="hljs-string">'token_endpoint_auth_method'</span>] || <span class="hljs-string">'client_secret_basic'</span>; <span class="hljs-comment">// client secret basic authentication</span>

    <span class="hljs-keyword">if</span> (authMethod === <span class="hljs-string">'client_secret_basic'</span>) {
      <span class="hljs-keyword">let</span> credentials = <span class="hljs-keyword">new</span> Buffer(<span class="hljs-string">`<span class="hljs-subst">${id}</span>:<span class="hljs-subst">${secret}</span>`</span>).toString(<span class="hljs-string">'base64'</span>);
      headers.set(<span class="hljs-string">'Authorization'</span>, <span class="hljs-string">`Basic <span class="hljs-subst">${credentials}</span>`</span>);
    } <span class="hljs-comment">// client secret post authentication</span>


    <span class="hljs-keyword">if</span> (authMethod === <span class="hljs-string">'client_secret_post'</span>) {
      bodyContents[<span class="hljs-string">'client_id'</span>] = id;
      bodyContents[<span class="hljs-string">'client_secret'</span>] = secret;
    }

    <span class="hljs-keyword">let</span> body = FormUrlEncoded.encode(bodyContents); <span class="hljs-comment">// TODO</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-367" id="section-367"></a>
</div>
<p>client_secret_jwt authentication
private_key_jwt
make the token request</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    <span class="hljs-keyword">return</span> fetch(endpoint, {
      method,
      headers,
      body
    }).then(onHttpError(<span class="hljs-string">'Error exchanging authorization code'</span>)).then(<span class="hljs-function"><span class="hljs-params">tokenResponse</span> =&gt;</span> tokenResponse.json()).then(<span class="hljs-function"><span class="hljs-params">tokenResponse</span> =&gt;</span> {
      assert(tokenResponse[<span class="hljs-string">'access_token'</span>], <span class="hljs-string">'Missing access_token in token response'</span>);
      assert(tokenResponse[<span class="hljs-string">'token_type'</span>], <span class="hljs-string">'Missing token_type in token response'</span>);
      assert(tokenResponse[<span class="hljs-string">'id_token'</span>], <span class="hljs-string">'Missing id_token in token response'</span>); <span class="hljs-comment">// anything else?</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-368" id="section-368"></a>
</div>
<p>IS THIS THE RIGHT THING TO DO HERE?</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
      response.params = <span class="hljs-built_in">Object</span>.assign(response.params, tokenResponse);
      <span class="hljs-keyword">return</span> response;
    });
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-369" id="section-369"></a>
</div>
<div class="dox">
<div class="summary">
<p>validateIDToken</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> validateIDToken(response) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-370" id="section-370"></a>
</div>
<p>only validate the ID Token if present in the response</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (!response.params.id_token) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(response);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(response).then(AuthenticationResponse.decryptIDToken).then(AuthenticationResponse.decodeIDToken).then(AuthenticationResponse.validateIssuer).then(AuthenticationResponse.validateAudience).then(AuthenticationResponse.resolveKeys).then(AuthenticationResponse.verifySignature).then(AuthenticationResponse.validateExpires).then(AuthenticationResponse.verifyNonce).then(AuthenticationResponse.validateAcr).then(AuthenticationResponse.validateAuthTime).then(AuthenticationResponse.validateAccessTokenHash).then(AuthenticationResponse.validateAuthorizationCodeHash);
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-371" id="section-371"></a>
</div>
<div class="dox">
<div class="summary">
<p>decryptIDToken</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> decryptIDToken(response) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-372" id="section-372"></a>
</div>
<p>TODO</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(response);
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-373" id="section-373"></a>
</div>
<div class="dox">
<div class="summary">
<p>decodeIDToken</p>
</div>
<div class="body">
<p>Note: If the <code>id_token</code> is not present in params, this method does not
get called (short-circuited in <code>validateIDToken()</code>).</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span>{AuthenticationResponse}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response.params</span>
<span>{object}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[response.params.id_token]</span>
<span>{string} IDToken encoded as a JWT
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> decodeIDToken(response) {
    <span class="hljs-keyword">let</span> jwt = response.params.id_token;

    <span class="hljs-keyword">try</span> {
      response.decoded = IDToken.decode(jwt);
    } <span class="hljs-keyword">catch</span> (decodeError) {
      <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> HttpError(<span class="hljs-number">400</span>, <span class="hljs-string">'Error decoding ID Token'</span>);
      error.cause = decodeError;
      error.info = {
        <span class="hljs-attr">id_token</span>: jwt
      };
      <span class="hljs-keyword">throw</span> error;
    }

    <span class="hljs-keyword">return</span> response;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-374" id="section-374"></a>
</div>
<div class="dox">
<div class="summary">
<p>validateIssuer</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> validateIssuer(response) {
    <span class="hljs-keyword">let</span> configuration = response.rp.provider.configuration;
    <span class="hljs-keyword">let</span> payload = response.decoded.payload; <span class="hljs-comment">// validate issuer of token matches this relying party's provider</span>

    <span class="hljs-keyword">if</span> (payload.iss !== configuration.issuer) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Mismatching issuer in ID Token'</span>);
    }

    <span class="hljs-keyword">return</span> response;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-375" id="section-375"></a>
</div>
<div class="dox">
<div class="summary">
<p>validateAudience</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> validateAudience(response) {
    <span class="hljs-keyword">let</span> registration = response.rp.registration;
    <span class="hljs-keyword">let</span> {
      aud,
      azp
    } = response.decoded.payload; <span class="hljs-comment">// validate audience includes this relying party</span>

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> aud === <span class="hljs-string">'string'</span> &amp;&amp; aud !== registration[<span class="hljs-string">'client_id'</span>]) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Mismatching audience in id_token'</span>);
    } <span class="hljs-comment">// validate audience includes this relying party</span>


    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(aud) &amp;&amp; !aud.includes(registration[<span class="hljs-string">'client_id'</span>])) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Mismatching audience in id_token'</span>);
    } <span class="hljs-comment">// validate authorized party is present if required</span>


    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(aud) &amp;&amp; !azp) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Missing azp claim in id_token'</span>);
    } <span class="hljs-comment">// validate authorized party is this relying party</span>


    <span class="hljs-keyword">if</span> (azp &amp;&amp; azp !== registration[<span class="hljs-string">'client_id'</span>]) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Mismatching azp claim in id_token'</span>);
    }

    <span class="hljs-keyword">return</span> response;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-376" id="section-376"></a>
</div>
<div class="dox">
<div class="summary">
<p>resolveKeys</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> resolveKeys(response) {
    <span class="hljs-keyword">let</span> rp = response.rp;
    <span class="hljs-keyword">let</span> provider = rp.provider;
    <span class="hljs-keyword">let</span> decoded = response.decoded;
    <span class="hljs-keyword">let</span> isFreshJwks = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(provider.jwks).then(<span class="hljs-function"><span class="hljs-params">jwks</span> =&gt;</span> jwks ? jwks : (isFreshJwks = <span class="hljs-literal">true</span>, rp.jwks())).then(<span class="hljs-function"><span class="hljs-params">jwks</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (decoded.resolveKeys(jwks)) {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(response);
      }

      <span class="hljs-keyword">if</span> (!isFreshJwks) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-377" id="section-377"></a>
</div>
<p>The OP JWK Set cached by the RP may be stale due to key rotation by the OP.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">return</span> rp.jwks().then(<span class="hljs-function"><span class="hljs-params">jwks</span> =&gt;</span> {
          <span class="hljs-keyword">if</span> (decoded.resolveKeys(jwks)) {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(response);
          }

          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Cannot resolve signing key for ID Token'</span>);
        });
      }

      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Cannot resolve signing key for ID Token'</span>);
    });
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-378" id="section-378"></a>
</div>
<div class="dox">
<div class="summary">
<p>verifySignature</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> verifySignature(response) {
    <span class="hljs-keyword">let</span> alg = response.decoded.header.alg;
    <span class="hljs-keyword">let</span> registration = response.rp.registration;
    <span class="hljs-keyword">let</span> expectedAlgorithm = registration[<span class="hljs-string">'id_token_signed_response_alg'</span>] || <span class="hljs-string">'RS256'</span>; <span class="hljs-comment">// validate signing algorithm matches expectation</span>

    <span class="hljs-keyword">if</span> (alg !== expectedAlgorithm) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Expected ID Token to be signed with <span class="hljs-subst">${expectedAlgorithm}</span>`</span>);
    }

    <span class="hljs-keyword">return</span> response.decoded.verify().then(<span class="hljs-function"><span class="hljs-params">verified</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (!verified) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Invalid ID Token signature'</span>);
      }

      <span class="hljs-keyword">return</span> response;
    });
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-379" id="section-379"></a>
</div>
<div class="dox">
<div class="summary">
<p>validateExpires</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> validateExpires(response) {
    <span class="hljs-keyword">let</span> exp = response.decoded.payload.exp; <span class="hljs-comment">// validate expiration of token</span>

    <span class="hljs-keyword">if</span> (exp &lt;= <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Date</span>.now() / <span class="hljs-number">1000</span>)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Expired ID Token'</span>);
    }

    <span class="hljs-keyword">return</span> response;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-380" id="section-380"></a>
</div>
<div class="dox">
<div class="summary">
<p>verifyNonce</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> verifyNonce(response) {
    <span class="hljs-keyword">let</span> octets = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(response.request.nonce);
    <span class="hljs-keyword">let</span> nonce = response.decoded.payload.nonce;

    <span class="hljs-keyword">if</span> (!nonce) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Missing nonce in ID Token'</span>);
    }

    <span class="hljs-keyword">return</span> crypto.subtle.digest({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'SHA-256'</span>
    }, octets).then(<span class="hljs-function"><span class="hljs-params">digest</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (nonce !== base64url(Buffer.from(digest))) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Mismatching nonce in ID Token'</span>);
      }

      <span class="hljs-keyword">return</span> response;
    });
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-381" id="section-381"></a>
</div>
<div class="dox">
<div class="summary">
<p>validateAcr</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> validateAcr(response) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-382" id="section-382"></a>
</div>
<p>TODO</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> response;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-383" id="section-383"></a>
</div>
<div class="dox">
<div class="summary">
<p>validateAuthTime</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> validateAuthTime(response) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-384" id="section-384"></a>
</div>
<p>TODO</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> response;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-385" id="section-385"></a>
</div>
<div class="dox">
<div class="summary">
<p>validateAccessTokenHash</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> validateAccessTokenHash(response) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-386" id="section-386"></a>
</div>
<p>TODO</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> response;
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-387" id="section-387"></a>
</div>
<div class="dox">
<div class="summary">
<p>validateAuthorizationCodeHash</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span class="dox_type">Object</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> validateAuthorizationCodeHash(response) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-388" id="section-388"></a>
</div>
<p>TODO</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> response;
  }

}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-389" id="section-389"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

<span class="hljs-built_in">module</span>.exports = AuthenticationResponse;
<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(<span class="hljs-keyword">this</span>, __webpack_require__(<span class="hljs-number">20</span>), __webpack_require__(<span class="hljs-number">36</span>).Buffer))

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 58 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-390" id="section-390"></a>
</div>
<div class="dox">
<div class="summary">
<p>Local dependencies</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">const</span> {
  JWT
} = __webpack_require__(<span class="hljs-number">28</span>);

<span class="hljs-keyword">const</span> REQUIRED_CLAIMS = [<span class="hljs-string">'iss'</span>, <span class="hljs-string">'sub'</span>, <span class="hljs-string">'aud'</span>, <span class="hljs-string">'exp'</span>, <span class="hljs-string">'iat'</span>];

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TokenClaimsSet</span> </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-391" id="section-391"></a>
</div>
<div class="dox">
<div class="summary">
<p>Claims inherited from JWT:</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">iss</span>
<span>{string} Issuer URL
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">sub</span>
<span>{string} Subject identifier
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">aud</span>
<span>{string|Array<string>} Audience
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">exp</span>
<span>{number} Expiration (seconds since epoch, RFC3339)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">iat</span>
<span>{number} Expiration (seconds since epoch, RFC3339)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[nbf]</span>
<span>{number} Not Before (seconds since epoch, RFC3339)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[jti]</span>
<span>{string} JWT Identifier
Claims specific to ID Token:
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[auth_time]</span>
<span>{number} Time when user authn occurred (RFC3339)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[nonce]</span>
<span>{string}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[acr]</span>
<span>{string} Authentication Context Class Reference
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[amr]</span>
<span>{string} Authentication Methods References
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[azp]</span>
<span>{string} Authorized party
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">constructor</span>({
    iss,
    sub,
    aud,
    exp,
    iat,
    nbf,
    jti,
    auth_time,
    nonce,
    acr,
    amr
  } = {}) {
    <span class="hljs-keyword">this</span>.iss = iss;
    <span class="hljs-keyword">this</span>.sub = sub;
    <span class="hljs-keyword">this</span>.aud = aud;
    <span class="hljs-keyword">this</span>.exp = exp;
    <span class="hljs-keyword">this</span>.iat = iat;
    <span class="hljs-keyword">this</span>.nbf = nbf;
    <span class="hljs-keyword">this</span>.jti = jti;
    <span class="hljs-keyword">this</span>.auth_time = auth_time;
    <span class="hljs-keyword">this</span>.nonce = nonce;
    <span class="hljs-keyword">this</span>.acr = acr;
    <span class="hljs-keyword">this</span>.amr = amr;
  }

  validate() {
    <span class="hljs-keyword">let</span> valid = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">let</span> error;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> claim <span class="hljs-keyword">of</span> REQUIRED_CLAIMS) {
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>[claim]) {
          valid = <span class="hljs-literal">false</span>;
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Required claim <span class="hljs-subst">${claim}</span> is missing.`</span>);
        }
      }
    } <span class="hljs-keyword">catch</span> (validationError) {
      error = validationError;
    }

    <span class="hljs-keyword">return</span> {
      valid,
      error
    };
  }

}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-392" id="section-392"></a>
</div>
<div class="dox">
<div class="summary">
<p>IDToken</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">IDToken</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">JWT</span> </span>{
  <span class="hljs-keyword">constructor</span>(data = {}) {
    <span class="hljs-keyword">super</span>(data);
    <span class="hljs-keyword">this</span>.payload = <span class="hljs-keyword">new</span> TokenClaimsSet(data.payload);
  }

  validate() {
    <span class="hljs-keyword">const</span> payloadResult = <span class="hljs-keyword">this</span>.payload.validate();

    <span class="hljs-keyword">if</span> (!payloadResult.valid) {
      <span class="hljs-keyword">return</span> payloadResult;
    }

    <span class="hljs-keyword">let</span> valid = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">let</span> error;
    <span class="hljs-keyword">return</span> {
      valid,
      error
    };
  }

}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-393" id="section-393"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

<span class="hljs-built_in">module</span>.exports = IDToken;
<span class="hljs-built_in">module</span>.exports.TokenClaimsSet = TokenClaimsSet;

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 59 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;


<span class="hljs-keyword">const</span> fetch = __webpack_require__(<span class="hljs-number">5</span>);

<span class="hljs-keyword">const</span> onHttpError = __webpack_require__(<span class="hljs-number">60</span>);

<span class="hljs-keyword">const</span> PoPToken = __webpack_require__(<span class="hljs-number">61</span>);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Session</span> </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-394" id="section-394"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span>{Object}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options.credentialType</span>
<span>{string} 'access_token' or 'pop_token'
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options.issuer</span>
<span>{string} Identity provider (issuer of ID/Access Token)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options.authorization</span>
<span>{object}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options.authorization.client_id</span>
<span>{string} OIDC/OAuth2 client id
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[options.authorization.id_token]</span>
<span>{string} Compact-serialized id_token param
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[options.authorization.access_token]</span>
<span>{string} Compact-serialized access_token param
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[options.authorization.refresh_token]</span>
<span>{string} Compact-serialized refresh_token
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[options.sessionKey]</span>
<span>{string} Serialized client session key generated   during the Authentication Request, used to issue PoPTokens
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[options.idClaims]</span>
<span>{object} Decoded/verified ID Token JWT payload
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[options.accessClaims]</span>
<span>{object} Decoded/verified Access Token JWT payload
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">constructor</span>(options) {
    <span class="hljs-keyword">this</span>.credentialType = options.credentialType || <span class="hljs-string">'access_token'</span>;
    <span class="hljs-keyword">this</span>.issuer = options.issuer;
    <span class="hljs-keyword">this</span>.authorization = options.authorization || {};
    <span class="hljs-keyword">this</span>.sessionKey = options.sessionKey;
    <span class="hljs-keyword">this</span>.idClaims = options.idClaims;
    <span class="hljs-keyword">this</span>.accessClaims = options.accessClaims;
  }

  <span class="hljs-keyword">static</span> <span class="hljs-keyword">from</span>(options) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Session(options);
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-395" id="section-395"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">response</span>
<span>{AuthenticationResponse}
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> fromAuthResponse(response) {
    <span class="hljs-keyword">const</span> RelyingParty = __webpack_require__(<span class="hljs-number">19</span>); <span class="hljs-comment">// import here due to circular dep</span>


    <span class="hljs-keyword">let</span> idClaims = response.decoded &amp;&amp; response.decoded.payload || {};
    <span class="hljs-keyword">let</span> {
      rp
    } = response;
    <span class="hljs-keyword">let</span> registration = rp.registration;
    <span class="hljs-keyword">let</span> rpAuthOptions = rp.defaults.authenticate || {};
    <span class="hljs-keyword">let</span> credentialType = rpAuthOptions[<span class="hljs-string">'credential_type'</span>] || rp.defaults.popToken ? <span class="hljs-string">'pop_token'</span> : <span class="hljs-string">'access_token'</span>;
    <span class="hljs-keyword">let</span> sessionKey = response.session[RelyingParty.SESSION_PRIVATE_KEY];
    <span class="hljs-keyword">let</span> options = {
      credentialType,
      sessionKey,
      <span class="hljs-attr">issuer</span>: idClaims.iss,
      idClaims,
      <span class="hljs-attr">authorization</span>: {
        <span class="hljs-attr">client_id</span>: registration[<span class="hljs-string">'client_id'</span>],
        <span class="hljs-attr">access_token</span>: response.params[<span class="hljs-string">'access_token'</span>],
        <span class="hljs-attr">id_token</span>: response.params[<span class="hljs-string">'id_token'</span>],
        <span class="hljs-attr">refresh_token</span>: response.params[<span class="hljs-string">'refresh_token'</span>]
      }
    };
    <span class="hljs-keyword">return</span> Session.from(options);
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-396" id="section-396"></a>
</div>
<div class="dox">
<div class="summary">
<p>Authenticated fetch() getter</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">get</span> fetch() {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-397" id="section-397"></a>
</div>
<div class="dox">
<div class="summary">
<p>fetch() function signature</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">url</span>
<span>{RequestInfo|string}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span>{object}
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">url, options</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hasCredentials()) {
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fetchWithCredentials(url, options);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> fetch(url, options);
        }
      }).then(onHttpError(<span class="hljs-string">'Error while fetching resource'</span>));
    };
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-398" id="section-398"></a>
</div>
<div class="dox">
<div class="summary">
<p>bearerTokenFor</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">url</span>
<span>{string}
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  bearerTokenFor(url) {
    <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">this</span>.credentialType) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'pop_token'</span>:
        <span class="hljs-keyword">return</span> PoPToken.issueFor(url, <span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">default</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-399" id="section-399"></a>
</div>
<p>'access_token' etc</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-keyword">this</span>.authorization[<span class="hljs-keyword">this</span>.credentialType]);
    }
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-400" id="section-400"></a>
</div>
<div class="dox">
<div class="summary">
<p>hasCredentials</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  hasCredentials() {
    <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">this</span>.credentialType) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'pop_token'</span>:
        <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>.authorization[<span class="hljs-string">'id_token'</span>];

      <span class="hljs-keyword">default</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-401" id="section-401"></a>
</div>
<p>'access_token' etc</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">return</span> !!<span class="hljs-keyword">this</span>.authorization[<span class="hljs-keyword">this</span>.credentialType];
    }
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-402" id="section-402"></a>
</div>
<div class="dox">
<div class="summary">
<p>fetchWithCredentials</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">url</span>
<span>{RequestInfo|string}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span>{object}
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  fetchWithCredentials(url, options = {}) {
    options.headers = options.headers || {};
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.bearerTokenFor(url).then(<span class="hljs-function"><span class="hljs-params">token</span> =&gt;</span> {
      options.headers.authorization = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
      <span class="hljs-keyword">return</span> fetch(url, options);
    });
  }

}

<span class="hljs-built_in">module</span>.exports = Session;

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 60 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-403" id="section-403"></a>
</div>
<div class="dox">
<div class="summary">
<p>Throws an error when a fetch response status code indicates a 400 or 500
HTTP error. (The whatwg fetch api does not normally reject on http error
responses).</p>
</div>
<div class="body">
<p>Usage:</p>
<pre><code>return fetch(url)
  .then(onHttpError('Error while fetching resource')
  .catch(err =&gt; console.log(err))
<p>// -&gt; 'Error while fetching resource: 404 Not Found' error
// if a 404 response is encountered
</code></pre></p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[message]</span>
<span>{string} Optional error message to clarify context
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Object</span>
<span>fetch response object (passed through if no error)
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onHttpError</span>(<span class="hljs-params">message = <span class="hljs-string">'fetch error'</span></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (response.status &gt;= <span class="hljs-number">200</span> &amp;&amp; response.status &lt; <span class="hljs-number">300</span>) {
      <span class="hljs-keyword">return</span> response;
    }

    <span class="hljs-keyword">let</span> errorMessage = <span class="hljs-string">`<span class="hljs-subst">${message}</span>: <span class="hljs-subst">${response.status}</span> <span class="hljs-subst">${response.statusText}</span>`</span>;
    <span class="hljs-keyword">let</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(errorMessage);
    error.response = response;
    error.statusCode = response.status;
    <span class="hljs-keyword">throw</span> error;
  };
}

<span class="hljs-built_in">module</span>.exports = onHttpError;

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 61 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;


<span class="hljs-keyword">const</span> {
  URL
} = __webpack_require__(<span class="hljs-number">27</span>);

<span class="hljs-keyword">const</span> {
  JWT,
  JWK
} = __webpack_require__(<span class="hljs-number">28</span>);

<span class="hljs-keyword">const</span> DEFAULT_MAX_AGE = <span class="hljs-number">3600</span>; <span class="hljs-comment">// Default token expiration, in seconds</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PoPToken</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">JWT</span> </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-404" id="section-404"></a>
</div>
<div class="dox">
<div class="summary">
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">resourceServerUri</span>
<span>{string} RS URI for which this token is intended
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">session</span>
<span>{Session}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">session.sessionKey</span>
<span>{string}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">session.authorization.client_id</span>
<span>{string}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">session.authorization.id_token</span>
<span>{string}
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">static</span> issueFor(resourceServerUri, session) {
    <span class="hljs-keyword">if</span> (!resourceServerUri) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Cannot issue PoPToken - missing resource server URI'</span>);
    }

    <span class="hljs-keyword">if</span> (!session.sessionKey) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Cannot issue PoPToken - missing session key'</span>);
    }

    <span class="hljs-keyword">if</span> (!session.authorization.id_token) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Cannot issue PoPToken - missing id token'</span>);
    }

    <span class="hljs-keyword">let</span> jwk = <span class="hljs-built_in">JSON</span>.parse(session.sessionKey);
    <span class="hljs-keyword">return</span> JWK.importKey(jwk).then(<span class="hljs-function"><span class="hljs-params">importedSessionJwk</span> =&gt;</span> {
      <span class="hljs-keyword">let</span> options = {
        <span class="hljs-attr">aud</span>: <span class="hljs-keyword">new</span> URL(resourceServerUri).origin,
        <span class="hljs-attr">key</span>: importedSessionJwk,
        <span class="hljs-attr">iss</span>: session.authorization.client_id,
        <span class="hljs-attr">id_token</span>: session.authorization.id_token
      };
      <span class="hljs-keyword">return</span> PoPToken.issue(options);
    }).then(<span class="hljs-function"><span class="hljs-params">jwt</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> jwt.encode();
    });
  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-405" id="section-405"></a>
</div>
<div class="dox">
<div class="summary">
<p>issue</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span>{Object}
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options.iss</span>
<span>{string} Token issuer (RP client_id)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options.aud</span>
<span>{string|Array<string>} Audience for the token   (such as the Resource Server url)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options.key</span>
<span>{JWK} Proof of Possession (private) signing key, see   https://tools.ietf.org/html/rfc7800#section-3.1
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options.id_token</span>
<span>{string} JWT compact encoded ID Token
Optional:
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[options.iat]</span>
<span>{number} Issued at timestamp (in seconds)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[options.max]</span>
<span>{number} Max token lifetime in seconds
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">

  <span class="hljs-keyword">static</span> issue(options) {
    <span class="hljs-keyword">let</span> {
      aud,
      iss,
      key
    } = options;
    <span class="hljs-keyword">let</span> alg = key.alg;
    <span class="hljs-keyword">let</span> iat = options.iat || <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Date</span>.now() / <span class="hljs-number">1000</span>);
    <span class="hljs-keyword">let</span> max = options.max || DEFAULT_MAX_AGE;
    <span class="hljs-keyword">let</span> exp = iat + max; <span class="hljs-comment">// token expiration</span>

    <span class="hljs-keyword">let</span> header = {
      alg
    };
    <span class="hljs-keyword">let</span> payload = {
      iss,
      aud,
      exp,
      iat,
      <span class="hljs-attr">id_token</span>: options.id_token,
      <span class="hljs-attr">token_type</span>: <span class="hljs-string">'pop'</span>
    };
    <span class="hljs-keyword">let</span> jwt = <span class="hljs-keyword">new</span> PoPToken({
      header,
      payload,
      <span class="hljs-attr">key</span>: key.cryptoKey
    }, {
      <span class="hljs-attr">filter</span>: <span class="hljs-literal">false</span>
    });
    <span class="hljs-keyword">return</span> jwt;
  }

}

<span class="hljs-built_in">module</span>.exports = PoPToken;

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 62 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

exports = <span class="hljs-built_in">module</span>.exports = HttpError
<span class="hljs-keyword">var</span> StandardError = __webpack_require__(<span class="hljs-number">63</span>)
<span class="hljs-keyword">var</span> STATUS_CODE_TO_NAME = __webpack_require__(<span class="hljs-number">64</span>)
<span class="hljs-keyword">var</span> STATUS_NAME_TO_CODE = exports

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">HttpError</span>(<span class="hljs-params">code, msg, props</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> code == <span class="hljs-string">"string"</span>) code = STATUS_NAME_TO_CODE[code]
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> code != <span class="hljs-string">"number"</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">"Non-numeric HTTP code"</span>)
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> msg == <span class="hljs-string">"object"</span> &amp;&amp; msg != <span class="hljs-literal">null</span>) { props = msg; msg = <span class="hljs-literal">null</span> }
  StandardError.call(<span class="hljs-keyword">this</span>, msg || STATUS_CODE_TO_NAME[code], props)
  <span class="hljs-keyword">this</span>.code = code
}

HttpError.prototype = <span class="hljs-built_in">Object</span>.create(StandardError.prototype, {
  <span class="hljs-attr">constructor</span>: {<span class="hljs-attr">value</span>: HttpError, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>}
})

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-406" id="section-406"></a>
</div>
<p>Set name explicitly for when the code gets minified.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">HttpError.prototype.name = <span class="hljs-string">"HttpError"</span>

<span class="hljs-built_in">Object</span>.defineProperties(HttpError.prototype, {
  <span class="hljs-attr">statusCode</span>: alias(<span class="hljs-string">"code"</span>),
  <span class="hljs-attr">statusMessage</span>: alias(<span class="hljs-string">"message"</span>),

  <span class="hljs-attr">status</span>: {
    <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.code },
    <span class="hljs-attr">set</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{
      <span class="hljs-built_in">Object</span>.defineProperty(<span class="hljs-keyword">this</span>, <span class="hljs-string">"status"</span>, {
        <span class="hljs-attr">value</span>: value, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>
      })
    }
  }
})

HttpError.prototype.toString = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.name + <span class="hljs-string">": "</span> + <span class="hljs-keyword">this</span>.code + <span class="hljs-string">" "</span> + <span class="hljs-keyword">this</span>.message
}

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> code <span class="hljs-keyword">in</span> STATUS_CODE_TO_NAME) {
  <span class="hljs-keyword">var</span> name = STATUS_CODE_TO_NAME[code]
  exports[name.replace(<span class="hljs-string">"'"</span>, <span class="hljs-string">""</span>).replace(<span class="hljs-regexp">/[- ]/g</span>, <span class="hljs-string">"_"</span>).toUpperCase()] = +code
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">alias</span>(<span class="hljs-params">name</span>) </span>{
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[name] },
    <span class="hljs-attr">set</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[name] = value }
  }
}


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 63 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

<span class="hljs-keyword">var</span> has = <span class="hljs-built_in">Object</span>.hasOwnProperty
<span class="hljs-keyword">var</span> proto = <span class="hljs-built_in">Object</span>.getPrototypeOf
<span class="hljs-keyword">var</span> trace = <span class="hljs-built_in">Error</span>.captureStackTrace
<span class="hljs-built_in">module</span>.exports = StandardError

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">StandardError</span>(<span class="hljs-params">msg, props</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-407" id="section-407"></a>
</div>
<p>Let all properties be enumerable for easier serialization.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (msg &amp;&amp; <span class="hljs-keyword">typeof</span> msg == <span class="hljs-string">"object"</span>) props = msg, msg = <span class="hljs-literal">undefined</span>
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.message = msg

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-408" id="section-408"></a>
</div>
<p>Name has to be an own property (or on the prototype a single step up) for
the stack to be printed with the correct name.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (props) <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> props) <span class="hljs-keyword">this</span>[key] = props[key]
  <span class="hljs-keyword">if</span> (!has.call(<span class="hljs-keyword">this</span>, <span class="hljs-string">"name"</span>))
    <span class="hljs-keyword">this</span>.name = has.call(proto(<span class="hljs-keyword">this</span>), <span class="hljs-string">"name"</span>)? <span class="hljs-keyword">this</span>.name : <span class="hljs-keyword">this</span>.constructor.name

  <span class="hljs-keyword">if</span> (trace &amp;&amp; !(<span class="hljs-string">"stack"</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>)) trace(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.constructor)
}

StandardError.prototype = <span class="hljs-built_in">Object</span>.create(<span class="hljs-built_in">Error</span>.prototype, {
  <span class="hljs-attr">constructor</span>: {<span class="hljs-attr">value</span>: StandardError, <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>}
})

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-409" id="section-409"></a>
</div>
<p>Set name explicitly for when the code gets minified.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">StandardError.prototype.name = <span class="hljs-string">"StandardError"</span>


<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 64 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module</span>) </span>{

<span class="hljs-built_in">module</span>.exports = <span class="hljs-built_in">JSON</span>.parse(<span class="hljs-string">"{\"100\":\"Continue\",\"101\":\"Switching Protocols\",\"102\":\"Processing\",\"200\":\"OK\",\"201\":\"Created\",\"202\":\"Accepted\",\"203\":\"Non-Authoritative Information\",\"204\":\"No Content\",\"205\":\"Reset Content\",\"206\":\"Partial Content\",\"207\":\"Multi-Status\",\"208\":\"Already Reported\",\"226\":\"IM Used\",\"300\":\"Multiple Choices\",\"301\":\"Moved Permanently\",\"302\":\"Found\",\"303\":\"See Other\",\"304\":\"Not Modified\",\"305\":\"Use Proxy\",\"307\":\"Temporary Redirect\",\"308\":\"Permanent Redirect\",\"400\":\"Bad Request\",\"401\":\"Unauthorized\",\"402\":\"Payment Required\",\"403\":\"Forbidden\",\"404\":\"Not Found\",\"405\":\"Method Not Allowed\",\"406\":\"Not Acceptable\",\"407\":\"Proxy Authentication Required\",\"408\":\"Request Timeout\",\"409\":\"Conflict\",\"410\":\"Gone\",\"411\":\"Length Required\",\"412\":\"Precondition Failed\",\"413\":\"Payload Too Large\",\"414\":\"URI Too Long\",\"415\":\"Unsupported Media Type\",\"416\":\"Range Not Satisfiable\",\"417\":\"Expectation Failed\",\"418\":\"I'm a teapot\",\"421\":\"Misdirected Request\",\"422\":\"Unprocessable Entity\",\"423\":\"Locked\",\"424\":\"Failed Dependency\",\"425\":\"Unordered Collection\",\"426\":\"Upgrade Required\",\"428\":\"Precondition Required\",\"429\":\"Too Many Requests\",\"431\":\"Request Header Fields Too Large\",\"500\":\"Internal Server Error\",\"501\":\"Not Implemented\",\"502\":\"Bad Gateway\",\"503\":\"Service Unavailable\",\"504\":\"Gateway Timeout\",\"505\":\"HTTP Version Not Supported\",\"506\":\"Variant Also Negotiates\",\"507\":\"Insufficient Storage\",\"508\":\"Loop Detected\",\"509\":\"Bandwidth Limit Exceeded\",\"510\":\"Not Extended\",\"511\":\"Network Authentication Required\"}"</span>);

<span class="hljs-comment">/***/</span> }),
<span class="hljs-comment">/* 65 */</span>
<span class="hljs-comment">/***/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, __webpack_exports__, __webpack_require__</span>) </span>{

<span class="hljs-meta">"use strict"</span>;
__webpack_require__.r(__webpack_exports__);
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"openIdpPopup"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> openIdpPopup; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"obtainSession"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> obtainSession; });
<span class="hljs-comment">/* harmony export (binding) */</span> __webpack_require__.d(__webpack_exports__, <span class="hljs-string">"popupHandler"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> popupHandler; });
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _ipc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(<span class="hljs-number">10</span>);
<span class="hljs-comment">/* harmony import */</span> <span class="hljs-keyword">var</span> _url_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(<span class="hljs-number">6</span>);


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">openIdpPopup</span>(<span class="hljs-params">popupUri</span>) </span>{
  <span class="hljs-keyword">const</span> width = <span class="hljs-number">650</span>;
  <span class="hljs-keyword">const</span> height = <span class="hljs-number">400</span>;
  <span class="hljs-keyword">const</span> left = <span class="hljs-built_in">window</span>.screenX + (<span class="hljs-built_in">window</span>.innerWidth - width) / <span class="hljs-number">2</span>;
  <span class="hljs-keyword">const</span> top = <span class="hljs-built_in">window</span>.screenY + (<span class="hljs-built_in">window</span>.innerHeight - height) / <span class="hljs-number">2</span>;
  <span class="hljs-keyword">const</span> settings = <span class="hljs-string">"width="</span>.concat(width, <span class="hljs-string">",height="</span>).concat(height, <span class="hljs-string">",left="</span>).concat(left, <span class="hljs-string">",top="</span>).concat(top);
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.open(popupUri, <span class="hljs-string">'solid-auth-client'</span>, settings);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">obtainSession</span>(<span class="hljs-params">store, popup, options</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> popupServer = <span class="hljs-keyword">new</span> _ipc__WEBPACK_IMPORTED_MODULE_0__[<span class="hljs-string">"Server"</span>](popup, <span class="hljs-built_in">Object</span>(_url_util__WEBPACK_IMPORTED_MODULE_1__[<span class="hljs-string">"originOf"</span>])(options.popupUri || <span class="hljs-string">''</span>), popupHandler(store, options, session =&gt; {
      popupServer.stop();
      resolve(session);
    }));
    popupServer.start();
  });
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">popupHandler</span>(<span class="hljs-params">store, {
  popupUri,
  callbackUri
}, foundSessionCb</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> (method, ...args) =&gt; {
    <span class="hljs-keyword">switch</span> (method) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-410" id="section-410"></a>
</div>
<p>Origin</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">case</span> <span class="hljs-string">'getAppOrigin'</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.location.origin;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-411" id="section-411"></a>
</div>
<p>Storage</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
      <span class="hljs-keyword">case</span> <span class="hljs-string">'storage/getItem'</span>:
        <span class="hljs-keyword">return</span> store.getItem(...args);

      <span class="hljs-keyword">case</span> <span class="hljs-string">'storage/setItem'</span>:
        <span class="hljs-keyword">return</span> store.setItem(...args);

      <span class="hljs-keyword">case</span> <span class="hljs-string">'storage/removeItem'</span>:
        <span class="hljs-keyword">return</span> store.removeItem(...args);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-412" id="section-412"></a>
</div>
<p>Login</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
      <span class="hljs-keyword">case</span> <span class="hljs-string">'getLoginOptions'</span>:
        <span class="hljs-keyword">return</span> {
          popupUri,
          callbackUri
        };

      <span class="hljs-keyword">case</span> <span class="hljs-string">'foundSession'</span>:
        foundSessionCb(...args);
    }
  };
}

<span class="hljs-comment">/***/</span> })
<span class="hljs-comment">/******/</span> ])[<span class="hljs-string">"default"</span>];
});
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="sourcemappingurlsolid-auth-client.bundle.js.map">
  <h1>
    <a href="#sourcemappingurlsolid-auth-client.bundle.js.map" name="sourcemappingurlsolid-auth-client.bundle.js.map" class="pilcrow"></a>
sourceMappingURL=solid-auth-client.bundle.js.map
  </h1>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"></pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
