<!DOCTYPE html>
<html>
<head>
  <title>popup.html</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../";
    var thisFile = "build\\popup.html";
    var defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>popup.html</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Select your Identity Provider<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app-container"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="handlebars"><span class="xml">/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' &amp;&amp; Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode &amp; 1: value is a module id, require it
/******/ 	// mode &amp; 2: merge all properties of value into the ns
/******/ 	// mode &amp; 4: return value when already ns object
/******/ 	// mode &amp; 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode &amp; 1) value = __webpack_require__(value);
/******/ 		if(mode &amp; 8) return value;
/******/ 		if((mode &amp; 4) &amp;&amp; typeof value === 'object' &amp;&amp; value &amp;&amp; value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode &amp; 2 &amp;&amp; typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module &amp;&amp; module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2);
/* harmony import */ var _src_ipc__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5);
/* harmony import */ var _src_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6);
/* harmony import */ var _components_IdpCallback__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(7);
/* harmony import */ var _components_IdpSelect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(71);
/* harmony import */ var _components_NoParent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(76);
/* harmony import */ var _idps_json__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(77);
var _idps_json__WEBPACK_IMPORTED_MODULE_7___namespace = /*#__PURE__*/__webpack_require__.t(77, 1);
/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(78);
/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_index_css__WEBPACK_IMPORTED_MODULE_8__);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i <span class="hljs-tag">&lt; <span class="hljs-attr">arguments.length</span>; <span class="hljs-attr">i</span>++) { <span class="hljs-attr">var</span> <span class="hljs-attr">source</span> = <span class="hljs-string">arguments[i]</span> != <span class="hljs-string">null</span> ? <span class="hljs-attr">arguments</span>[<span class="hljs-attr">i</span>] <span class="hljs-attr">:</span> {}; <span class="hljs-attr">if</span> (<span class="hljs-attr">i</span> % <span class="hljs-attr">2</span>) { <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">source</span>), <span class="hljs-attr">true</span>)<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) { <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span>()(<span class="hljs-attr">target</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">source</span>[<span class="hljs-attr">key</span>]); }); } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">Object.getOwnPropertyDescriptors</span>) { <span class="hljs-attr">Object.defineProperties</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">Object.getOwnPropertyDescriptors</span>(<span class="hljs-attr">source</span>)); } <span class="hljs-attr">else</span> { <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">source</span>))<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) { <span class="hljs-attr">Object.defineProperty</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">Object.getOwnPropertyDescriptor</span>(<span class="hljs-attr">source</span>, <span class="hljs-attr">key</span>)); }); } } <span class="hljs-attr">return</span> <span class="hljs-attr">target</span>; }

/* <span class="hljs-attr">global</span> <span class="hljs-attr">sessionStorage</span> */









<span class="hljs-attr">findAppOrigin</span>()<span class="hljs-attr">.then</span>(<span class="hljs-attr">appOrigin</span> =&gt;</span> {
  const baseUrl = window.location.href.replace(/(\/\/[^/]*\/).*/, '$1');
  const host = baseUrl.replace(/^[^:]+:|\//g, '');
  const appName = "".trim() || host;
  let element;

  if (!appOrigin) {
    element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement(_components_NoParent__WEBPACK_IMPORTED_MODULE_6__["default"], {
      appName: appName
    });
  } else if (window.location.hash) {
    element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement(_components_IdpCallback__WEBPACK_IMPORTED_MODULE_4__["default"], {
      appOrigin: appOrigin,
      afterLoggedIn: () =&gt; setTimeout(window.close, 750)
    });
  } else {
    const idps = [..._idps_json__WEBPACK_IMPORTED_MODULE_7__];

    if (!idps.some(idp =&gt; idp.url === baseUrl)) {
      idps.unshift({
        displayName: host,
        url: baseUrl
      });
    }

    element = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement(_components_IdpSelect__WEBPACK_IMPORTED_MODULE_5__["default"], {
      idps: idps,
      appOrigin: appOrigin,
      appName: appName
    });
  }

  react__WEBPACK_IMPORTED_MODULE_1__["default"].render(element, document.getElementById('app-container'));
}).catch(error =&gt; {
  window.alert(error);
  window.close();
});

async function findAppOrigin() {
  if (!window.opener) {
    return null;
  }

  let appOrigin = await getStoredAppOrigin();

  if (appOrigin) {
    return appOrigin;
  }

  const client = new _src_ipc__WEBPACK_IMPORTED_MODULE_2__["Client"](window.opener, '*');
  appOrigin = await client.request('getAppOrigin');
  await storeAppOrigin(appOrigin);
  return appOrigin;
}

async function getStoredAppOrigin() {
  const {
    appOrigin
  } = await Object(_src_storage__WEBPACK_IMPORTED_MODULE_3__["getData"])(sessionStorage);
  return appOrigin;
}

function storeAppOrigin(origin) {
  return Object(_src_storage__WEBPACK_IMPORTED_MODULE_3__["updateStorage"])(sessionStorage, data =&gt; _objectSpread(_objectSpread({}, data), {}, {
    appOrigin: origin
  }));
}

/***/ }),
/* 1 */
/***/ (function(module, exports) {

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

module.exports = _defineProperty;

/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "version", function() { return tn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Children", function() { return N; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return H; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hydrate", function() { return Z; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unmountComponentAtNode", function() { return on; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createPortal", function() { return P; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createFactory", function() { return en; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cloneElement", function() { return un; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isValidElement", function() { return rn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findDOMNode", function() { return cn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PureComponent", function() { return w; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "memo", function() { return C; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "forwardRef", function() { return k; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unstable_batchedUpdates", function() { return ln; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StrictMode", function() { return fn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Suspense", function() { return F; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SuspenseList", function() { return I; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lazy", function() { return D; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED", function() { return nn; });
/* harmony import */ var preact_hooks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useState", function() { return preact_hooks__WEBPACK_IMPORTED_MODULE_0__["useState"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useReducer", function() { return preact_hooks__WEBPACK_IMPORTED_MODULE_0__["useReducer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useEffect", function() { return preact_hooks__WEBPACK_IMPORTED_MODULE_0__["useEffect"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useLayoutEffect", function() { return preact_hooks__WEBPACK_IMPORTED_MODULE_0__["useLayoutEffect"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useRef", function() { return preact_hooks__WEBPACK_IMPORTED_MODULE_0__["useRef"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useImperativeHandle", function() { return preact_hooks__WEBPACK_IMPORTED_MODULE_0__["useImperativeHandle"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useMemo", function() { return preact_hooks__WEBPACK_IMPORTED_MODULE_0__["useMemo"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useCallback", function() { return preact_hooks__WEBPACK_IMPORTED_MODULE_0__["useCallback"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useContext", function() { return preact_hooks__WEBPACK_IMPORTED_MODULE_0__["useContext"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useDebugValue", function() { return preact_hooks__WEBPACK_IMPORTED_MODULE_0__["useDebugValue"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useErrorBoundary", function() { return preact_hooks__WEBPACK_IMPORTED_MODULE_0__["useErrorBoundary"]; });

/* harmony import */ var preact__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createElement", function() { return preact__WEBPACK_IMPORTED_MODULE_1__["createElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createContext", function() { return preact__WEBPACK_IMPORTED_MODULE_1__["createContext"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createRef", function() { return preact__WEBPACK_IMPORTED_MODULE_1__["createRef"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Fragment", function() { return preact__WEBPACK_IMPORTED_MODULE_1__["Fragment"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Component", function() { return preact__WEBPACK_IMPORTED_MODULE_1__["Component"]; });

function S(n,t){for(var e in t)n[e]=t[e];return n}function g(n,t){for(var e in n)if("__source"!==e&amp;&amp;!(e in t))return!0;for(var r in t)if("__source"!==r&amp;&amp;n[r]!==t[r])return!0;return!1}function w(n){this.props=n}function C(n,t){function e(n){var e=this.props.ref,r=e==n.ref;return!r&amp;&amp;e&amp;&amp;(e.call?e(null):e.current=null),t?!t(this.props,n)||!r:g(this.props,n)}function r(t){return this.shouldComponentUpdate=e,Object(preact__WEBPACK_IMPORTED_MODULE_1__["createElement"])(n,t)}return r.displayName="Memo("+(n.displayName||n.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(w.prototype=new preact__WEBPACK_IMPORTED_MODULE_1__["Component"]).isPureReactComponent=!0,w.prototype.shouldComponentUpdate=function(n,t){return g(this.props,n)||g(this.state,t)};var R=preact__WEBPACK_IMPORTED_MODULE_1__["options"].__b;preact__WEBPACK_IMPORTED_MODULE_1__["options"].__b=function(n){n.type&amp;&amp;n.type.__f&amp;&amp;n.ref&amp;&amp;(n.props.ref=n.ref,n.ref=null),R&amp;&amp;R(n)};var x="undefined"!=typeof Symbol&amp;&amp;Symbol.for&amp;&amp;Symbol.for("react.forward_ref")||3911;function k(n){function t(t,e){var r=S({},t);return delete r.ref,n(r,(e=t.ref||e)&amp;&amp;("object"!=typeof e||"current"in e)?e:null)}return t.$$typeof=x,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(n.displayName||n.name)+")",t}var A=function(n,t){return null==n?null:Object(preact__WEBPACK_IMPORTED_MODULE_1__["toChildArray"])(Object(preact__WEBPACK_IMPORTED_MODULE_1__["toChildArray"])(n).map(t))},N={map:A,forEach:A,count:function(n){return n?Object(preact__WEBPACK_IMPORTED_MODULE_1__["toChildArray"])(n).length:0},only:function(n){var t=Object(preact__WEBPACK_IMPORTED_MODULE_1__["toChildArray"])(n);if(1!==t.length)throw"Children.only";return t[0]},toArray:preact__WEBPACK_IMPORTED_MODULE_1__["toChildArray"]},O=preact__WEBPACK_IMPORTED_MODULE_1__["options"].__e;function L(n){return n&amp;&amp;(n.__c&amp;&amp;n.__c.__H&amp;&amp;(n.__c.__H.__.forEach(function(n){"function"==typeof n.__c&amp;&amp;n.__c()}),n.__c.__H=null),(n=S({},n)).__c=null,n.__k=n.__k&amp;&amp;n.__k.map(L)),n}function U(n){return n&amp;&amp;(n.__v=null,n.__k=n.__k&amp;&amp;n.__k.map(U)),n}function F(){this.__u=0,this.t=null,this.__b=null}function M(n){var t=n.__.__c;return t&amp;&amp;t.__e&amp;&amp;t.__e(n)}function D(n){var t,e,r;function u(u){if(t||(t=n()).then(function(n){e=n.default||n},function(n){r=n}),r)throw r;if(!e)throw t;return Object(preact__WEBPACK_IMPORTED_MODULE_1__["createElement"])(e,u)}return u.displayName="Lazy",u.__f=!0,u}function I(){this.u=null,this.o=null}preact__WEBPACK_IMPORTED_MODULE_1__["options"].__e=function(n,t,e){if(n.then)for(var r,u=t;u=u.__;)if((r=u.__c)&amp;&amp;r.__c)return null==t.__e&amp;&amp;(t.__e=e.__e,t.__k=e.__k),r.__c(n,t.__c);O(n,t,e)},(F.prototype=new preact__WEBPACK_IMPORTED_MODULE_1__["Component"]).__c=function(n,t){var e=this;null==e.t&amp;&amp;(e.t=[]),e.t.push(t);var r=M(e.__v),u=!1,o=function(){u||(u=!0,t.componentWillUnmount=t.__c,r?r(i):i())};t.__c=t.componentWillUnmount,t.componentWillUnmount=function(){o(),t.__c&amp;&amp;t.__c()};var i=function(){var n;if(!--e.__u)for(e.__v.__k[0]=U(e.state.__e),e.setState({__e:e.__b=null});n=e.t.pop();)n.forceUpdate()},c=e.__v;c&amp;&amp;!0===c.__h||e.__u++||e.setState({__e:e.__b=e.__v.__k[0]}),n.then(o,o)},F.prototype.componentWillUnmount=function(){this.t=[]},F.prototype.render=function(n,t){this.__b&amp;&amp;(this.__v.__k&amp;&amp;(this.__v.__k[0]=L(this.__b)),this.__b=null);var e=t.__e&amp;&amp;Object(preact__WEBPACK_IMPORTED_MODULE_1__["createElement"])(preact__WEBPACK_IMPORTED_MODULE_1__["Fragment"],null,n.fallback);return e&amp;&amp;(e.__h=null),[Object(preact__WEBPACK_IMPORTED_MODULE_1__["createElement"])(preact__WEBPACK_IMPORTED_MODULE_1__["Fragment"],null,t.__e?null:n.children),e]};var T=function(n,t,e){if(++e[1]===e[0]&amp;&amp;n.o.delete(t),n.props.revealOrder&amp;&amp;("t"!==n.props.revealOrder[0]||!n.o.size))for(e=n.u;e;){for(;e.length&gt;3;)e.pop()();if(e[1]<span class="hljs-tag">&lt;<span class="hljs-name">e[0])break;n.u=e=e[2]}};function</span> <span class="hljs-attr">W</span>(<span class="hljs-attr">n</span>){<span class="hljs-attr">return</span> <span class="hljs-attr">this.getChildContext</span>=<span class="hljs-string">function(){return</span> <span class="hljs-attr">n.context</span>},<span class="hljs-attr">n.children</span>}<span class="hljs-attr">function</span> <span class="hljs-attr">j</span>(<span class="hljs-attr">n</span>){<span class="hljs-attr">var</span> <span class="hljs-attr">t</span>=<span class="hljs-string">this,e</span>=<span class="hljs-string">n.i,r</span>=<span class="hljs-string">Object(preact__WEBPACK_IMPORTED_MODULE_1__[</span>"<span class="hljs-attr">createElement</span>"])(<span class="hljs-attr">W</span>,{<span class="hljs-attr">context:t.context</span>},<span class="hljs-attr">n.__v</span>);<span class="hljs-attr">t.componentWillUnmount</span>=<span class="hljs-string">function(){var</span> <span class="hljs-attr">n</span>=<span class="hljs-string">t.l.parentNode;n&amp;&amp;n.removeChild(t.l),Object(preact__WEBPACK_IMPORTED_MODULE_1__[</span>"<span class="hljs-attr">__u</span>"])(<span class="hljs-attr">t.s</span>)},<span class="hljs-attr">t.i</span>&amp;&amp;<span class="hljs-attr">t.i</span>!==<span class="hljs-string">e&amp;&amp;(t.componentWillUnmount(),t.h</span>=<span class="hljs-string">!1),n.__v?t.h?(e.__k</span>=<span class="hljs-string">t.__k,Object(preact__WEBPACK_IMPORTED_MODULE_1__[</span>"<span class="hljs-attr">render</span>"])(<span class="hljs-attr">r</span>,<span class="hljs-attr">e</span>),<span class="hljs-attr">t.__k</span>=<span class="hljs-string">e.__k):(t.l</span>=<span class="hljs-string">document.createTextNode(</span>""),<span class="hljs-attr">t.__k</span>=<span class="hljs-string">e.__k,Object(preact__WEBPACK_IMPORTED_MODULE_1__[</span>"<span class="hljs-attr">hydrate</span>"])("",<span class="hljs-attr">e</span>),<span class="hljs-attr">e.appendChild</span>(<span class="hljs-attr">t.l</span>),<span class="hljs-attr">t.h</span>=<span class="hljs-string">!0,t.i</span>=<span class="hljs-string">e,Object(preact__WEBPACK_IMPORTED_MODULE_1__[</span>"<span class="hljs-attr">render</span>"])(<span class="hljs-attr">r</span>,<span class="hljs-attr">e</span>,<span class="hljs-attr">t.l</span>),<span class="hljs-attr">e.__k</span>=<span class="hljs-string">t.__k,t.__k</span>=<span class="hljs-string">t.l.__k):t.h&amp;&amp;t.componentWillUnmount(),t.s</span>=<span class="hljs-string">r}function</span> <span class="hljs-attr">P</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">t</span>){<span class="hljs-attr">return</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">createElement</span>"])(<span class="hljs-attr">j</span>,{<span class="hljs-attr">__v:n</span>,<span class="hljs-attr">i:t</span>})}(<span class="hljs-attr">I.prototype</span>=<span class="hljs-string">new</span> <span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">Component</span>"])<span class="hljs-attr">.__e</span>=<span class="hljs-string">function(n){var</span> <span class="hljs-attr">t</span>=<span class="hljs-string">this,e</span>=<span class="hljs-string">M(t.__v),r</span>=<span class="hljs-string">t.o.get(n);return</span> <span class="hljs-attr">r</span>[<span class="hljs-attr">0</span>]++,<span class="hljs-attr">function</span>(<span class="hljs-attr">u</span>){<span class="hljs-attr">var</span> <span class="hljs-attr">o</span>=<span class="hljs-string">function(){t.props.revealOrder?(r.push(u),T(t,n,r)):u()};e?e(o):o()}},I.prototype.render</span>=<span class="hljs-string">function(n){this.u</span>=<span class="hljs-string">null,this.o</span>=<span class="hljs-string">new</span> <span class="hljs-attr">Map</span>;<span class="hljs-attr">var</span> <span class="hljs-attr">t</span>=<span class="hljs-string">Object(preact__WEBPACK_IMPORTED_MODULE_1__[</span>"<span class="hljs-attr">toChildArray</span>"])(<span class="hljs-attr">n.children</span>);<span class="hljs-attr">n.revealOrder</span>&amp;&amp;"<span class="hljs-attr">b</span>"===<span class="hljs-string">n.revealOrder[0]&amp;&amp;t.reverse();for(var</span> <span class="hljs-attr">e</span>=<span class="hljs-string">t.length;e--;)this.o.set(t[e],this.u</span>=<span class="hljs-string">[1,0,this.u]);return</span> <span class="hljs-attr">n.children</span>},<span class="hljs-attr">I.prototype.componentDidUpdate</span>=<span class="hljs-string">I.prototype.componentDidMount</span>=<span class="hljs-string">function(){var</span> <span class="hljs-attr">n</span>=<span class="hljs-string">this;this.o.forEach(function(t,e){T(n,e,t)})};var</span> <span class="hljs-attr">z</span>=<span class="hljs-string">"undefined"</span>!=<span class="hljs-string">typeof</span> <span class="hljs-attr">Symbol</span>&amp;&amp;<span class="hljs-attr">Symbol.for</span>&amp;&amp;<span class="hljs-attr">Symbol.for</span>("<span class="hljs-attr">react.element</span>")||<span class="hljs-attr">60103</span>,<span class="hljs-attr">V</span>=<span class="hljs-string">/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,B</span>=<span class="hljs-string">"undefined"</span>!=<span class="hljs-string">typeof</span> <span class="hljs-attr">Symbol</span>?/<span class="hljs-attr">fil</span>|<span class="hljs-attr">che</span>|<span class="hljs-attr">rad</span>/<span class="hljs-attr">i:</span>/<span class="hljs-attr">fil</span>|<span class="hljs-attr">che</span>|<span class="hljs-attr">ra</span>/<span class="hljs-attr">i</span>;<span class="hljs-attr">function</span> <span class="hljs-attr">H</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">t</span>,<span class="hljs-attr">e</span>){<span class="hljs-attr">return</span> <span class="hljs-attr">null</span>==<span class="hljs-string">t.__k&amp;&amp;(t.textContent</span>=<span class="hljs-string">""</span>),<span class="hljs-attr">Object</span>(<span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">render</span>"])(<span class="hljs-attr">n</span>,<span class="hljs-attr">t</span>),"<span class="hljs-attr">function</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">e</span>&amp;&amp;<span class="hljs-attr">e</span>(),<span class="hljs-attr">n</span>?<span class="hljs-attr">n.__c:null</span>}<span class="hljs-attr">function</span> <span class="hljs-attr">Z</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">t</span>,<span class="hljs-attr">e</span>){<span class="hljs-attr">return</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">hydrate</span>"])(<span class="hljs-attr">n</span>,<span class="hljs-attr">t</span>),"<span class="hljs-attr">function</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">e</span>&amp;&amp;<span class="hljs-attr">e</span>(),<span class="hljs-attr">n</span>?<span class="hljs-attr">n.__c:null</span>}<span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">Component</span>"]<span class="hljs-attr">.prototype.isReactComponent</span>=<span class="hljs-string">{},[</span>"<span class="hljs-attr">componentWillMount</span>","<span class="hljs-attr">componentWillReceiveProps</span>","<span class="hljs-attr">componentWillUpdate</span>"]<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span>(<span class="hljs-attr">n</span>){<span class="hljs-attr">Object.defineProperty</span>(<span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">Component</span>"]<span class="hljs-attr">.prototype</span>,<span class="hljs-attr">n</span>,{<span class="hljs-attr">configurable:</span>!<span class="hljs-attr">0</span>,<span class="hljs-attr">get:function</span>(){<span class="hljs-attr">return</span> <span class="hljs-attr">this</span>["<span class="hljs-attr">UNSAFE_</span>"+<span class="hljs-attr">n</span>]},<span class="hljs-attr">set:function</span>(<span class="hljs-attr">t</span>){<span class="hljs-attr">Object.defineProperty</span>(<span class="hljs-attr">this</span>,<span class="hljs-attr">n</span>,{<span class="hljs-attr">configurable:</span>!<span class="hljs-attr">0</span>,<span class="hljs-attr">writable:</span>!<span class="hljs-attr">0</span>,<span class="hljs-attr">value:t</span>})}})});<span class="hljs-attr">var</span> <span class="hljs-attr">Y</span>=<span class="hljs-string">preact__WEBPACK_IMPORTED_MODULE_1__[</span>"<span class="hljs-attr">options</span>"]<span class="hljs-attr">.event</span>;<span class="hljs-attr">function</span> $(){}<span class="hljs-attr">function</span> <span class="hljs-attr">q</span>(){<span class="hljs-attr">return</span> <span class="hljs-attr">this.cancelBubble</span>}<span class="hljs-attr">function</span> <span class="hljs-attr">G</span>(){<span class="hljs-attr">return</span> <span class="hljs-attr">this.defaultPrevented</span>}<span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">options</span>"]<span class="hljs-attr">.event</span>=<span class="hljs-string">function(n){return</span> <span class="hljs-attr">Y</span>&amp;&amp;(<span class="hljs-attr">n</span>=<span class="hljs-string">Y(n)),n.persist</span>=<span class="hljs-string">$,n.isPropagationStopped</span>=<span class="hljs-string">q,n.isDefaultPrevented</span>=<span class="hljs-string">G,n.nativeEvent</span>=<span class="hljs-string">n};var</span> <span class="hljs-attr">J</span>,<span class="hljs-attr">K</span>=<span class="hljs-string">{configurable:!0,get:function(){return</span> <span class="hljs-attr">this.class</span>}},<span class="hljs-attr">Q</span>=<span class="hljs-string">preact__WEBPACK_IMPORTED_MODULE_1__[</span>"<span class="hljs-attr">options</span>"]<span class="hljs-attr">.vnode</span>;<span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">options</span>"]<span class="hljs-attr">.vnode</span>=<span class="hljs-string">function(n){var</span> <span class="hljs-attr">t</span>=<span class="hljs-string">n.type,e</span>=<span class="hljs-string">n.props,r</span>=<span class="hljs-string">e;if(</span>"<span class="hljs-attr">string</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">t</span>){<span class="hljs-attr">for</span>(<span class="hljs-attr">var</span> <span class="hljs-attr">u</span> <span class="hljs-attr">in</span> <span class="hljs-attr">r</span>=<span class="hljs-string">{},e){var</span> <span class="hljs-attr">o</span>=<span class="hljs-string">e[u];</span>"<span class="hljs-attr">defaultValue</span>"===<span class="hljs-string">u&amp;&amp;</span>"<span class="hljs-attr">value</span>"<span class="hljs-attr">in</span> <span class="hljs-attr">e</span>&amp;&amp;<span class="hljs-attr">null</span>==<span class="hljs-string">e.value?u</span>=<span class="hljs-string">"value"</span><span class="hljs-attr">:</span>"<span class="hljs-attr">download</span>"===<span class="hljs-string">u&amp;&amp;!0</span>===<span class="hljs-string">o?o</span>=<span class="hljs-string">""</span><span class="hljs-attr">:</span>/<span class="hljs-attr">ondoubleclick</span>/<span class="hljs-attr">i.test</span>(<span class="hljs-attr">u</span>)?<span class="hljs-attr">u</span>=<span class="hljs-string">"ondblclick"</span><span class="hljs-attr">:</span>/^<span class="hljs-attr">onchange</span>(<span class="hljs-attr">textarea</span>|<span class="hljs-attr">input</span>)/<span class="hljs-attr">i.test</span>(<span class="hljs-attr">u</span>+<span class="hljs-attr">t</span>)&amp;&amp;!<span class="hljs-attr">B.test</span>(<span class="hljs-attr">e.type</span>)?<span class="hljs-attr">u</span>=<span class="hljs-string">"oninput"</span><span class="hljs-attr">:</span>/^<span class="hljs-attr">on</span>(<span class="hljs-attr">Ani</span>|<span class="hljs-attr">Tra</span>|<span class="hljs-attr">Tou</span>|<span class="hljs-attr">BeforeInp</span>)/<span class="hljs-attr">.test</span>(<span class="hljs-attr">u</span>)?<span class="hljs-attr">u</span>=<span class="hljs-string">u.toLowerCase():V.test(u)?u</span>=<span class="hljs-string">u.replace(/[A-Z0-9]/,</span>"<span class="hljs-attr">-</span>$&amp;")<span class="hljs-attr">.toLowerCase</span>()<span class="hljs-attr">:null</span>===<span class="hljs-string">o&amp;&amp;(o</span>=<span class="hljs-string">void</span> <span class="hljs-attr">0</span>),<span class="hljs-attr">r</span>[<span class="hljs-attr">u</span>]=<span class="hljs-string">o}</span>"<span class="hljs-attr">select</span>"==<span class="hljs-string">t&amp;&amp;r.multiple&amp;&amp;Array.isArray(r.value)&amp;&amp;(r.value</span>=<span class="hljs-string">Object(preact__WEBPACK_IMPORTED_MODULE_1__[</span>"<span class="hljs-attr">toChildArray</span>"])(<span class="hljs-attr">e.children</span>)<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span>(<span class="hljs-attr">n</span>){<span class="hljs-attr">n.props.selected</span>=<span class="hljs-string">-1!</span>=<span class="hljs-string">r.value.indexOf(n.props.value)})),n.props</span>=<span class="hljs-string">r}t&amp;&amp;e.class!</span>=<span class="hljs-string">e.className&amp;&amp;(K.enumerable</span>=<span class="hljs-string">"className"</span><span class="hljs-attr">in</span> <span class="hljs-attr">e</span>,<span class="hljs-attr">null</span>!=<span class="hljs-string">e.className&amp;&amp;(r.class</span>=<span class="hljs-string">e.className),Object.defineProperty(r,</span>"<span class="hljs-attr">className</span>",<span class="hljs-attr">K</span>)),<span class="hljs-attr">n.</span>$$<span class="hljs-attr">typeof</span>=<span class="hljs-string">z,Q&amp;&amp;Q(n)};var</span> <span class="hljs-attr">X</span>=<span class="hljs-string">preact__WEBPACK_IMPORTED_MODULE_1__[</span>"<span class="hljs-attr">options</span>"]<span class="hljs-attr">.__r</span>;<span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">options</span>"]<span class="hljs-attr">.__r</span>=<span class="hljs-string">function(n){X&amp;&amp;X(n),J</span>=<span class="hljs-string">n.__c};var</span> <span class="hljs-attr">nn</span>=<span class="hljs-string">{ReactCurrentDispatcher:{current:{readContext:function(n){return</span> <span class="hljs-attr">J.__n</span>[<span class="hljs-attr">n.__c</span>]<span class="hljs-attr">.props.value</span>}}}},<span class="hljs-attr">tn</span>=<span class="hljs-string">"16.8.0"</span>;<span class="hljs-attr">function</span> <span class="hljs-attr">en</span>(<span class="hljs-attr">n</span>){<span class="hljs-attr">return</span> <span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">createElement</span>"]<span class="hljs-attr">.bind</span>(<span class="hljs-attr">null</span>,<span class="hljs-attr">n</span>)}<span class="hljs-attr">function</span> <span class="hljs-attr">rn</span>(<span class="hljs-attr">n</span>){<span class="hljs-attr">return</span>!!<span class="hljs-attr">n</span>&amp;&amp;<span class="hljs-attr">n.</span>$$<span class="hljs-attr">typeof</span>===<span class="hljs-string">z}function</span> <span class="hljs-attr">un</span>(<span class="hljs-attr">n</span>){<span class="hljs-attr">return</span> <span class="hljs-attr">rn</span>(<span class="hljs-attr">n</span>)?<span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">cloneElement</span>"]<span class="hljs-attr">.apply</span>(<span class="hljs-attr">null</span>,<span class="hljs-attr">arguments</span>)<span class="hljs-attr">:n</span>}<span class="hljs-attr">function</span> <span class="hljs-attr">on</span>(<span class="hljs-attr">n</span>){<span class="hljs-attr">return</span>!!<span class="hljs-attr">n.__k</span>&amp;&amp;(<span class="hljs-attr">Object</span>(<span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">render</span>"])(<span class="hljs-attr">null</span>,<span class="hljs-attr">n</span>),!<span class="hljs-attr">0</span>)}<span class="hljs-attr">function</span> <span class="hljs-attr">cn</span>(<span class="hljs-attr">n</span>){<span class="hljs-attr">return</span> <span class="hljs-attr">n</span>&amp;&amp;(<span class="hljs-attr">n.base</span>||<span class="hljs-attr">1</span>===<span class="hljs-string">n.nodeType&amp;&amp;n)||null}var</span> <span class="hljs-attr">ln</span>=<span class="hljs-string">function(n,t){return</span> <span class="hljs-attr">n</span>(<span class="hljs-attr">t</span>)},<span class="hljs-attr">fn</span>=<span class="hljs-string">preact__WEBPACK_IMPORTED_MODULE_1__[</span>"<span class="hljs-attr">Fragment</span>"];/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">default</span> <span class="hljs-attr">export</span> */ <span class="hljs-attr">__webpack_exports__</span>["<span class="hljs-attr">default</span>"] = <span class="hljs-string">({useState:preact_hooks__WEBPACK_IMPORTED_MODULE_0__[</span>"<span class="hljs-attr">useState</span>"],<span class="hljs-attr">useReducer:preact_hooks__WEBPACK_IMPORTED_MODULE_0__</span>["<span class="hljs-attr">useReducer</span>"],<span class="hljs-attr">useEffect:preact_hooks__WEBPACK_IMPORTED_MODULE_0__</span>["<span class="hljs-attr">useEffect</span>"],<span class="hljs-attr">useLayoutEffect:preact_hooks__WEBPACK_IMPORTED_MODULE_0__</span>["<span class="hljs-attr">useLayoutEffect</span>"],<span class="hljs-attr">useRef:preact_hooks__WEBPACK_IMPORTED_MODULE_0__</span>["<span class="hljs-attr">useRef</span>"],<span class="hljs-attr">useImperativeHandle:preact_hooks__WEBPACK_IMPORTED_MODULE_0__</span>["<span class="hljs-attr">useImperativeHandle</span>"],<span class="hljs-attr">useMemo:preact_hooks__WEBPACK_IMPORTED_MODULE_0__</span>["<span class="hljs-attr">useMemo</span>"],<span class="hljs-attr">useCallback:preact_hooks__WEBPACK_IMPORTED_MODULE_0__</span>["<span class="hljs-attr">useCallback</span>"],<span class="hljs-attr">useContext:preact_hooks__WEBPACK_IMPORTED_MODULE_0__</span>["<span class="hljs-attr">useContext</span>"],<span class="hljs-attr">useDebugValue:preact_hooks__WEBPACK_IMPORTED_MODULE_0__</span>["<span class="hljs-attr">useDebugValue</span>"],<span class="hljs-attr">version:</span>"<span class="hljs-attr">16.8.0</span>",<span class="hljs-attr">Children:N</span>,<span class="hljs-attr">render:H</span>,<span class="hljs-attr">hydrate:Z</span>,<span class="hljs-attr">unmountComponentAtNode:on</span>,<span class="hljs-attr">createPortal:P</span>,<span class="hljs-attr">createElement:preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">createElement</span>"],<span class="hljs-attr">createContext:preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">createContext</span>"],<span class="hljs-attr">createFactory:en</span>,<span class="hljs-attr">cloneElement:un</span>,<span class="hljs-attr">createRef:preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">createRef</span>"],<span class="hljs-attr">Fragment:preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">Fragment</span>"],<span class="hljs-attr">isValidElement:rn</span>,<span class="hljs-attr">findDOMNode:cn</span>,<span class="hljs-attr">Component:preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">Component</span>"],<span class="hljs-attr">PureComponent:w</span>,<span class="hljs-attr">memo:C</span>,<span class="hljs-attr">forwardRef:k</span>,<span class="hljs-attr">unstable_batchedUpdates:ln</span>,<span class="hljs-attr">StrictMode:preact__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">Fragment</span>"],<span class="hljs-attr">Suspense:F</span>,<span class="hljs-attr">SuspenseList:I</span>,<span class="hljs-attr">lazy:D</span>,<span class="hljs-attr">__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:nn</span>});
//# <span class="hljs-attr">sourceMappingURL</span>=<span class="hljs-string">compat.module.js.map</span>


/***/ }),
/* <span class="hljs-attr">3</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">__webpack_exports__</span>, <span class="hljs-attr">__webpack_require__</span>) {

"<span class="hljs-attr">use</span> <span class="hljs-attr">strict</span>";
<span class="hljs-attr">__webpack_require__.r</span>(<span class="hljs-attr">__webpack_exports__</span>);
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">export</span> (<span class="hljs-attr">binding</span>) */ <span class="hljs-attr">__webpack_require__.d</span>(<span class="hljs-attr">__webpack_exports__</span>, "<span class="hljs-attr">useState</span>", <span class="hljs-attr">function</span>() { <span class="hljs-attr">return</span> <span class="hljs-attr">m</span>; });
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">export</span> (<span class="hljs-attr">binding</span>) */ <span class="hljs-attr">__webpack_require__.d</span>(<span class="hljs-attr">__webpack_exports__</span>, "<span class="hljs-attr">useReducer</span>", <span class="hljs-attr">function</span>() { <span class="hljs-attr">return</span> <span class="hljs-attr">p</span>; });
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">export</span> (<span class="hljs-attr">binding</span>) */ <span class="hljs-attr">__webpack_require__.d</span>(<span class="hljs-attr">__webpack_exports__</span>, "<span class="hljs-attr">useEffect</span>", <span class="hljs-attr">function</span>() { <span class="hljs-attr">return</span> <span class="hljs-attr">y</span>; });
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">export</span> (<span class="hljs-attr">binding</span>) */ <span class="hljs-attr">__webpack_require__.d</span>(<span class="hljs-attr">__webpack_exports__</span>, "<span class="hljs-attr">useLayoutEffect</span>", <span class="hljs-attr">function</span>() { <span class="hljs-attr">return</span> <span class="hljs-attr">l</span>; });
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">export</span> (<span class="hljs-attr">binding</span>) */ <span class="hljs-attr">__webpack_require__.d</span>(<span class="hljs-attr">__webpack_exports__</span>, "<span class="hljs-attr">useRef</span>", <span class="hljs-attr">function</span>() { <span class="hljs-attr">return</span> <span class="hljs-attr">h</span>; });
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">export</span> (<span class="hljs-attr">binding</span>) */ <span class="hljs-attr">__webpack_require__.d</span>(<span class="hljs-attr">__webpack_exports__</span>, "<span class="hljs-attr">useImperativeHandle</span>", <span class="hljs-attr">function</span>() { <span class="hljs-attr">return</span> <span class="hljs-attr">s</span>; });
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">export</span> (<span class="hljs-attr">binding</span>) */ <span class="hljs-attr">__webpack_require__.d</span>(<span class="hljs-attr">__webpack_exports__</span>, "<span class="hljs-attr">useMemo</span>", <span class="hljs-attr">function</span>() { <span class="hljs-attr">return</span> <span class="hljs-attr">_</span>; });
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">export</span> (<span class="hljs-attr">binding</span>) */ <span class="hljs-attr">__webpack_require__.d</span>(<span class="hljs-attr">__webpack_exports__</span>, "<span class="hljs-attr">useCallback</span>", <span class="hljs-attr">function</span>() { <span class="hljs-attr">return</span> <span class="hljs-attr">A</span>; });
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">export</span> (<span class="hljs-attr">binding</span>) */ <span class="hljs-attr">__webpack_require__.d</span>(<span class="hljs-attr">__webpack_exports__</span>, "<span class="hljs-attr">useContext</span>", <span class="hljs-attr">function</span>() { <span class="hljs-attr">return</span> <span class="hljs-attr">F</span>; });
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">export</span> (<span class="hljs-attr">binding</span>) */ <span class="hljs-attr">__webpack_require__.d</span>(<span class="hljs-attr">__webpack_exports__</span>, "<span class="hljs-attr">useDebugValue</span>", <span class="hljs-attr">function</span>() { <span class="hljs-attr">return</span> <span class="hljs-attr">T</span>; });
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">export</span> (<span class="hljs-attr">binding</span>) */ <span class="hljs-attr">__webpack_require__.d</span>(<span class="hljs-attr">__webpack_exports__</span>, "<span class="hljs-attr">useErrorBoundary</span>", <span class="hljs-attr">function</span>() { <span class="hljs-attr">return</span> <span class="hljs-attr">d</span>; });
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_0__</span> = <span class="hljs-string">__webpack_require__(4);</span>
<span class="hljs-attr">var</span> <span class="hljs-attr">t</span>,<span class="hljs-attr">u</span>,<span class="hljs-attr">r</span>,<span class="hljs-attr">o</span>=<span class="hljs-string">0,i</span>=<span class="hljs-string">[],c</span>=<span class="hljs-string">preact__WEBPACK_IMPORTED_MODULE_0__[</span>"<span class="hljs-attr">options</span>"]<span class="hljs-attr">.__r</span>,<span class="hljs-attr">f</span>=<span class="hljs-string">preact__WEBPACK_IMPORTED_MODULE_0__[</span>"<span class="hljs-attr">options</span>"]<span class="hljs-attr">.diffed</span>,<span class="hljs-attr">e</span>=<span class="hljs-string">preact__WEBPACK_IMPORTED_MODULE_0__[</span>"<span class="hljs-attr">options</span>"]<span class="hljs-attr">.__c</span>,<span class="hljs-attr">a</span>=<span class="hljs-string">preact__WEBPACK_IMPORTED_MODULE_0__[</span>"<span class="hljs-attr">options</span>"]<span class="hljs-attr">.unmount</span>;<span class="hljs-attr">function</span> <span class="hljs-attr">v</span>(<span class="hljs-attr">t</span>,<span class="hljs-attr">r</span>){<span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_0__</span>["<span class="hljs-attr">options</span>"]<span class="hljs-attr">.__h</span>&amp;&amp;<span class="hljs-attr">preact__WEBPACK_IMPORTED_MODULE_0__</span>["<span class="hljs-attr">options</span>"]<span class="hljs-attr">.__h</span>(<span class="hljs-attr">u</span>,<span class="hljs-attr">t</span>,<span class="hljs-attr">o</span>||<span class="hljs-attr">r</span>),<span class="hljs-attr">o</span>=<span class="hljs-string">0;var</span> <span class="hljs-attr">i</span>=<span class="hljs-string">u.__H||(u.__H</span>=<span class="hljs-string">{__:[],__h:[]});return</span> <span class="hljs-attr">t</span>&gt;</span>=i.__.length&amp;&amp;i.__.push({}),i.__[t]}function m(n){return o=1,p(k,n)}function p(n,r,o){var i=v(t++,2);return i.t=n,i.__c||(i.__=[o?o(r):k(void 0,r),function(n){var t=i.t(i.__[0],n);i.__[0]!==t&amp;&amp;(i.__=[t,i.__[1]],i.__c.setState({}))}],i.__c=u),i.__}function y(r,o){var i=v(t++,3);!preact__WEBPACK_IMPORTED_MODULE_0__["options"].__s&amp;&amp;j(i.__H,o)&amp;&amp;(i.__=r,i.__H=o,u.__H.__h.push(i))}function l(r,o){var i=v(t++,4);!preact__WEBPACK_IMPORTED_MODULE_0__["options"].__s&amp;&amp;j(i.__H,o)&amp;&amp;(i.__=r,i.__H=o,u.__h.push(i))}function h(n){return o=5,_(function(){return{current:n}},[])}function s(n,t,u){o=6,l(function(){"function"==typeof n?n(t()):n&amp;&amp;(n.current=t())},null==u?u:u.concat(n))}function _(n,u){var r=v(t++,7);return j(r.__H,u)&amp;&amp;(r.__=n(),r.__H=u,r.__h=n),r.__}function A(n,t){return o=8,_(function(){return n},t)}function F(n){var r=u.context[n.__c],o=v(t++,9);return o.__c=n,r?(null==o.__&amp;&amp;(o.__=!0,r.sub(u)),r.props.value):n.__}function T(t,u){preact__WEBPACK_IMPORTED_MODULE_0__["options"].useDebugValue&amp;&amp;preact__WEBPACK_IMPORTED_MODULE_0__["options"].useDebugValue(u?u(t):t)}function d(n){var r=v(t++,10),o=m();return r.__=n,u.componentDidCatch||(u.componentDidCatch=function(n){r.__&amp;&amp;r.__(n),o[1](n)}),[o[0],function(){o[1](void 0)}]}function q(){i.forEach(function(t){if(t.__P)try{t.__H.__h.forEach(b),t.__H.__h.forEach(g),t.__H.__h=[]}catch(u){t.__H.__h=[],preact__WEBPACK_IMPORTED_MODULE_0__["options"].__e(u,t.__v)}}),i=[]}preact__WEBPACK_IMPORTED_MODULE_0__["options"].__r=function(n){c&amp;&amp;c(n),t=0;var r=(u=n.__c).__H;r&amp;&amp;(r.__h.forEach(b),r.__h.forEach(g),r.__h=[])},preact__WEBPACK_IMPORTED_MODULE_0__["options"].diffed=function(t){f&amp;&amp;f(t);var u=t.__c;u&amp;&amp;u.__H&amp;&amp;u.__H.__h.length&amp;&amp;(1!==i.push(u)&amp;&amp;r===preact__WEBPACK_IMPORTED_MODULE_0__["options"].requestAnimationFrame||((r=preact__WEBPACK_IMPORTED_MODULE_0__["options"].requestAnimationFrame)||function(n){var t,u=function(){clearTimeout(r),x&amp;&amp;cancelAnimationFrame(t),setTimeout(n)},r=setTimeout(u,100);x&amp;&amp;(t=requestAnimationFrame(u))})(q))},preact__WEBPACK_IMPORTED_MODULE_0__["options"].__c=function(t,u){u.some(function(t){try{t.__h.forEach(b),t.__h=t.__h.filter(function(n){return!n.__||g(n)})}catch(r){u.some(function(n){n.__h&amp;&amp;(n.__h=[])}),u=[],preact__WEBPACK_IMPORTED_MODULE_0__["options"].__e(r,t.__v)}}),e&amp;&amp;e(t,u)},preact__WEBPACK_IMPORTED_MODULE_0__["options"].unmount=function(t){a&amp;&amp;a(t);var u=t.__c;if(u&amp;&amp;u.__H)try{u.__H.__.forEach(b)}catch(t){preact__WEBPACK_IMPORTED_MODULE_0__["options"].__e(t,u.__v)}};var x="function"==typeof requestAnimationFrame;function b(n){"function"==typeof n.__c&amp;&amp;n.__c()}function g(n){n.__c=n.__()}function j(n,t){return!n||n.length!==t.length||t.some(function(t,u){return t!==n[u]})}function k(n,t){return"function"==typeof t?t(n):t}
//# sourceMappingURL=hooks.module.js.map


/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return O; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hydrate", function() { return S; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createElement", function() { return h; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return h; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Fragment", function() { return p; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createRef", function() { return y; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isValidElement", function() { return l; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Component", function() { return d; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cloneElement", function() { return q; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createContext", function() { return B; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toChildArray", function() { return b; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__u", function() { return L; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "options", function() { return n; });
var n,l,u,i,t,o,r,f={},e=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(n,l){for(var u in l)n[u]=l[u];return n}function a(n){var l=n.parentNode;l&amp;&amp;l.removeChild(n)}function h(n,l,u){var i,t,o,r=arguments,f={};for(o in l)"key"==o?i=l[o]:"ref"==o?t=l[o]:f[o]=l[o];if(arguments.length&gt;3)for(u=[u],o=3;o<span class="hljs-tag">&lt;<span class="hljs-name">arguments.length;o++)u.push(r[o]);if(null!=u&amp;&amp;(f.children=u),"function"==typeof</span> <span class="hljs-attr">n</span>&amp;&amp;<span class="hljs-attr">null</span>!=<span class="hljs-string">n.defaultProps)for(o</span> <span class="hljs-attr">in</span> <span class="hljs-attr">n.defaultProps</span>)<span class="hljs-attr">void</span> <span class="hljs-attr">0</span>===<span class="hljs-string">f[o]&amp;&amp;(f[o]</span>=<span class="hljs-string">n.defaultProps[o]);return</span> <span class="hljs-attr">v</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">f</span>,<span class="hljs-attr">i</span>,<span class="hljs-attr">t</span>,<span class="hljs-attr">null</span>)}<span class="hljs-attr">function</span> <span class="hljs-attr">v</span>(<span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>,<span class="hljs-attr">i</span>,<span class="hljs-attr">t</span>,<span class="hljs-attr">o</span>){<span class="hljs-attr">var</span> <span class="hljs-attr">r</span>=<span class="hljs-string">{type:l,props:u,key:i,ref:t,__k:null,__:null,__b:0,__e:null,__d:void</span> <span class="hljs-attr">0</span>,<span class="hljs-attr">__c:null</span>,<span class="hljs-attr">__h:null</span>,<span class="hljs-attr">constructor:void</span> <span class="hljs-attr">0</span>,<span class="hljs-attr">__v:o</span>};<span class="hljs-attr">return</span> <span class="hljs-attr">null</span>==<span class="hljs-string">o&amp;&amp;(r.__v</span>=<span class="hljs-string">r),null!</span>=<span class="hljs-string">n.vnode&amp;&amp;n.vnode(r),r}function</span> <span class="hljs-attr">y</span>(){<span class="hljs-attr">return</span>{<span class="hljs-attr">current:null</span>}}<span class="hljs-attr">function</span> <span class="hljs-attr">p</span>(<span class="hljs-attr">n</span>){<span class="hljs-attr">return</span> <span class="hljs-attr">n.children</span>}<span class="hljs-attr">function</span> <span class="hljs-attr">d</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>){<span class="hljs-attr">this.props</span>=<span class="hljs-string">n,this.context</span>=<span class="hljs-string">l}function</span> <span class="hljs-attr">_</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>){<span class="hljs-attr">if</span>(<span class="hljs-attr">null</span>==<span class="hljs-string">l)return</span> <span class="hljs-attr">n.__</span>?<span class="hljs-attr">_</span>(<span class="hljs-attr">n.__</span>,<span class="hljs-attr">n.__.__k.indexOf</span>(<span class="hljs-attr">n</span>)+<span class="hljs-attr">1</span>)<span class="hljs-attr">:null</span>;<span class="hljs-attr">for</span>(<span class="hljs-attr">var</span> <span class="hljs-attr">u</span>;<span class="hljs-attr">l</span>&lt;<span class="hljs-attr">n.__k.length</span>;<span class="hljs-attr">l</span>++)<span class="hljs-attr">if</span>(<span class="hljs-attr">null</span>!=<span class="hljs-string">(u</span>=<span class="hljs-string">n.__k[l])&amp;&amp;null!</span>=<span class="hljs-string">u.__e)return</span> <span class="hljs-attr">u.__e</span>;<span class="hljs-attr">return</span>"<span class="hljs-attr">function</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">n.type</span>?<span class="hljs-attr">_</span>(<span class="hljs-attr">n</span>)<span class="hljs-attr">:null</span>}<span class="hljs-attr">function</span> <span class="hljs-attr">w</span>(<span class="hljs-attr">n</span>){<span class="hljs-attr">var</span> <span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>;<span class="hljs-attr">if</span>(<span class="hljs-attr">null</span>!=<span class="hljs-string">(n</span>=<span class="hljs-string">n.__)&amp;&amp;null!</span>=<span class="hljs-string">n.__c){for(n.__e</span>=<span class="hljs-string">n.__c.base</span>=<span class="hljs-string">null,l</span>=<span class="hljs-string">0;l</span>&lt;<span class="hljs-attr">n.__k.length</span>;<span class="hljs-attr">l</span>++)<span class="hljs-attr">if</span>(<span class="hljs-attr">null</span>!=<span class="hljs-string">(u</span>=<span class="hljs-string">n.__k[l])&amp;&amp;null!</span>=<span class="hljs-string">u.__e){n.__e</span>=<span class="hljs-string">n.__c.base</span>=<span class="hljs-string">u.__e;break}return</span> <span class="hljs-attr">w</span>(<span class="hljs-attr">n</span>)}}<span class="hljs-attr">function</span> <span class="hljs-attr">k</span>(<span class="hljs-attr">l</span>){(!<span class="hljs-attr">l.__d</span>&amp;&amp;(<span class="hljs-attr">l.__d</span>=<span class="hljs-string">!0)&amp;&amp;u.push(l)&amp;&amp;!g.__r++||t!</span>==<span class="hljs-string">n.debounceRendering)&amp;&amp;((t</span>=<span class="hljs-string">n.debounceRendering)||i)(g)}function</span> <span class="hljs-attr">g</span>(){<span class="hljs-attr">for</span>(<span class="hljs-attr">var</span> <span class="hljs-attr">n</span>;<span class="hljs-attr">g.__r</span>=<span class="hljs-string">u.length;)n</span>=<span class="hljs-string">u.sort(function(n,l){return</span> <span class="hljs-attr">n.__v.__b-l.__v.__b</span>}),<span class="hljs-attr">u</span>=<span class="hljs-string">[],n.some(function(n){var</span> <span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>,<span class="hljs-attr">i</span>,<span class="hljs-attr">t</span>,<span class="hljs-attr">o</span>,<span class="hljs-attr">r</span>,<span class="hljs-attr">f</span>;<span class="hljs-attr">n.__d</span>&amp;&amp;(<span class="hljs-attr">r</span>=<span class="hljs-string">(o</span>=<span class="hljs-string">(l</span>=<span class="hljs-string">n).__v).__e,(f</span>=<span class="hljs-string">l.__P)&amp;&amp;(u</span>=<span class="hljs-string">[],(i</span>=<span class="hljs-string">s({},o)).__v</span>=<span class="hljs-string">i,t</span>=<span class="hljs-string">$(f,o,i,l.__n,void</span> <span class="hljs-attr">0</span>!==<span class="hljs-string">f.ownerSVGElement,null!</span>=<span class="hljs-string">o.__h?[r]:null,u,null</span>==<span class="hljs-string">r?_(o):r,o.__h),j(u,o),t!</span>=<span class="hljs-string">r&amp;&amp;w(o)))})}function</span> <span class="hljs-attr">m</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>,<span class="hljs-attr">i</span>,<span class="hljs-attr">t</span>,<span class="hljs-attr">o</span>,<span class="hljs-attr">r</span>,<span class="hljs-attr">c</span>,<span class="hljs-attr">s</span>,<span class="hljs-attr">h</span>){<span class="hljs-attr">var</span> <span class="hljs-attr">y</span>,<span class="hljs-attr">d</span>,<span class="hljs-attr">w</span>,<span class="hljs-attr">k</span>,<span class="hljs-attr">g</span>,<span class="hljs-attr">m</span>,<span class="hljs-attr">b</span>,<span class="hljs-attr">A</span>=<span class="hljs-string">i&amp;&amp;i.__k||e,P</span>=<span class="hljs-string">A.length;for(s</span>==<span class="hljs-string">f&amp;&amp;(s</span>=<span class="hljs-string">null!</span>=<span class="hljs-string">r?r[0]:P?_(i,0):null),u.__k</span>=<span class="hljs-string">[],y</span>=<span class="hljs-string">0;y</span>&lt;<span class="hljs-attr">l.length</span>;<span class="hljs-attr">y</span>++)<span class="hljs-attr">if</span>(<span class="hljs-attr">null</span>!=<span class="hljs-string">(k</span>=<span class="hljs-string">u.__k[y]</span>=<span class="hljs-string">null</span>==<span class="hljs-string">(k</span>=<span class="hljs-string">l[y])||</span>"<span class="hljs-attr">boolean</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">k</span>?<span class="hljs-attr">null:</span>"<span class="hljs-attr">string</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">k</span>||"<span class="hljs-attr">number</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">k</span>?<span class="hljs-attr">v</span>(<span class="hljs-attr">null</span>,<span class="hljs-attr">k</span>,<span class="hljs-attr">null</span>,<span class="hljs-attr">null</span>,<span class="hljs-attr">k</span>)<span class="hljs-attr">:Array.isArray</span>(<span class="hljs-attr">k</span>)?<span class="hljs-attr">v</span>(<span class="hljs-attr">p</span>,{<span class="hljs-attr">children:k</span>},<span class="hljs-attr">null</span>,<span class="hljs-attr">null</span>,<span class="hljs-attr">null</span>)<span class="hljs-attr">:null</span>!=<span class="hljs-string">k.__e||null!</span>=<span class="hljs-string">k.__c?v(k.type,k.props,k.key,null,k.__v):k)){if(k.__</span>=<span class="hljs-string">u,k.__b</span>=<span class="hljs-string">u.__b+1,null</span>===<span class="hljs-string">(w</span>=<span class="hljs-string">A[y])||w&amp;&amp;k.key</span>==<span class="hljs-string">w.key&amp;&amp;k.type</span>===<span class="hljs-string">w.type)A[y]</span>=<span class="hljs-string">void</span> <span class="hljs-attr">0</span>;<span class="hljs-attr">else</span> <span class="hljs-attr">for</span>(<span class="hljs-attr">d</span>=<span class="hljs-string">0;d</span>&lt;<span class="hljs-attr">P</span>;<span class="hljs-attr">d</span>++){<span class="hljs-attr">if</span>((<span class="hljs-attr">w</span>=<span class="hljs-string">A[d])&amp;&amp;k.key</span>==<span class="hljs-string">w.key&amp;&amp;k.type</span>===<span class="hljs-string">w.type){A[d]</span>=<span class="hljs-string">void</span> <span class="hljs-attr">0</span>;<span class="hljs-attr">break</span>}<span class="hljs-attr">w</span>=<span class="hljs-string">null}g</span>=<span class="hljs-string">$(n,k,w</span>=<span class="hljs-string">w||f,t,o,r,c,s,h),(d</span>=<span class="hljs-string">k.ref)&amp;&amp;w.ref!</span>=<span class="hljs-string">d&amp;&amp;(b||(b</span>=<span class="hljs-string">[]),w.ref&amp;&amp;b.push(w.ref,null,k),b.push(d,k.__c||g,k)),null!</span>=<span class="hljs-string">g?(null</span>==<span class="hljs-string">m&amp;&amp;(m</span>=<span class="hljs-string">g),s</span>=<span class="hljs-string">x(n,k,w,A,r,g,s),h||</span>"<span class="hljs-attr">option</span>"!=<span class="hljs-string">u.type?</span>"<span class="hljs-attr">function</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">u.type</span>&amp;&amp;(<span class="hljs-attr">u.__d</span>=<span class="hljs-string">s):n.value</span>=<span class="hljs-string">""</span>)<span class="hljs-attr">:s</span>&amp;&amp;<span class="hljs-attr">w.__e</span>==<span class="hljs-string">s&amp;&amp;s.parentNode!</span>=<span class="hljs-string">n&amp;&amp;(s</span>=<span class="hljs-string">_(w))}if(u.__e</span>=<span class="hljs-string">m,null!</span>=<span class="hljs-string">r&amp;&amp;</span>"<span class="hljs-attr">function</span>"!=<span class="hljs-string">typeof</span> <span class="hljs-attr">u.type</span>)<span class="hljs-attr">for</span>(<span class="hljs-attr">y</span>=<span class="hljs-string">r.length;y--;)null!</span>=<span class="hljs-string">r[y]&amp;&amp;a(r[y]);for(y</span>=<span class="hljs-string">P;y--;)null!</span>=<span class="hljs-string">A[y]&amp;&amp;L(A[y],A[y]);if(b)for(y</span>=<span class="hljs-string">0;y</span>&lt;<span class="hljs-attr">b.length</span>;<span class="hljs-attr">y</span>++)<span class="hljs-attr">I</span>(<span class="hljs-attr">b</span>[<span class="hljs-attr">y</span>],<span class="hljs-attr">b</span>[++<span class="hljs-attr">y</span>],<span class="hljs-attr">b</span>[++<span class="hljs-attr">y</span>])}<span class="hljs-attr">function</span> <span class="hljs-attr">b</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>){<span class="hljs-attr">return</span> <span class="hljs-attr">l</span>=<span class="hljs-string">l||[],null</span>==<span class="hljs-string">n||</span>"<span class="hljs-attr">boolean</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">n</span>||(<span class="hljs-attr">Array.isArray</span>(<span class="hljs-attr">n</span>)?<span class="hljs-attr">n.some</span>(<span class="hljs-attr">function</span>(<span class="hljs-attr">n</span>){<span class="hljs-attr">b</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>)})<span class="hljs-attr">:l.push</span>(<span class="hljs-attr">n</span>)),<span class="hljs-attr">l</span>}<span class="hljs-attr">function</span> <span class="hljs-attr">x</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>,<span class="hljs-attr">i</span>,<span class="hljs-attr">t</span>,<span class="hljs-attr">o</span>,<span class="hljs-attr">r</span>){<span class="hljs-attr">var</span> <span class="hljs-attr">f</span>,<span class="hljs-attr">e</span>,<span class="hljs-attr">c</span>;<span class="hljs-attr">if</span>(<span class="hljs-attr">void</span> <span class="hljs-attr">0</span>!==<span class="hljs-string">l.__d)f</span>=<span class="hljs-string">l.__d,l.__d</span>=<span class="hljs-string">void</span> <span class="hljs-attr">0</span>;<span class="hljs-attr">else</span> <span class="hljs-attr">if</span>(<span class="hljs-attr">t</span>==<span class="hljs-string">u||o!</span>=<span class="hljs-string">r||null</span>==<span class="hljs-string">o.parentNode)n:if(null</span>==<span class="hljs-string">r||r.parentNode!</span>==<span class="hljs-string">n)n.appendChild(o),f</span>=<span class="hljs-string">null;else{for(e</span>=<span class="hljs-string">r,c</span>=<span class="hljs-string">0;(e</span>=<span class="hljs-string">e.nextSibling)&amp;&amp;c</span>&lt;<span class="hljs-attr">i.length</span>;<span class="hljs-attr">c</span>+=<span class="hljs-string">2)if(e</span>==<span class="hljs-string">o)break</span> <span class="hljs-attr">n</span>;<span class="hljs-attr">n.insertBefore</span>(<span class="hljs-attr">o</span>,<span class="hljs-attr">r</span>),<span class="hljs-attr">f</span>=<span class="hljs-string">r}return</span> <span class="hljs-attr">void</span> <span class="hljs-attr">0</span>!==<span class="hljs-string">f?f:o.nextSibling}function</span> <span class="hljs-attr">A</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>,<span class="hljs-attr">i</span>,<span class="hljs-attr">t</span>){<span class="hljs-attr">var</span> <span class="hljs-attr">o</span>;<span class="hljs-attr">for</span>(<span class="hljs-attr">o</span> <span class="hljs-attr">in</span> <span class="hljs-attr">u</span>)"<span class="hljs-attr">children</span>"===<span class="hljs-string">o||</span>"<span class="hljs-attr">key</span>"===<span class="hljs-string">o||o</span> <span class="hljs-attr">in</span> <span class="hljs-attr">l</span>||<span class="hljs-attr">C</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">o</span>,<span class="hljs-attr">null</span>,<span class="hljs-attr">u</span>[<span class="hljs-attr">o</span>],<span class="hljs-attr">i</span>);<span class="hljs-attr">for</span>(<span class="hljs-attr">o</span> <span class="hljs-attr">in</span> <span class="hljs-attr">l</span>)<span class="hljs-attr">t</span>&amp;&amp;"<span class="hljs-attr">function</span>"!=<span class="hljs-string">typeof</span> <span class="hljs-attr">l</span>[<span class="hljs-attr">o</span>]||"<span class="hljs-attr">children</span>"===<span class="hljs-string">o||</span>"<span class="hljs-attr">key</span>"===<span class="hljs-string">o||</span>"<span class="hljs-attr">value</span>"===<span class="hljs-string">o||</span>"<span class="hljs-attr">checked</span>"===<span class="hljs-string">o||u[o]</span>===<span class="hljs-string">l[o]||C(n,o,l[o],u[o],i)}function</span> <span class="hljs-attr">P</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>){"<span class="hljs-attr">-</span>"===<span class="hljs-string">l[0]?n.setProperty(l,u):n[l]</span>=<span class="hljs-string">null</span>==<span class="hljs-string">u?</span>""<span class="hljs-attr">:</span>"<span class="hljs-attr">number</span>"!=<span class="hljs-string">typeof</span> <span class="hljs-attr">u</span>||<span class="hljs-attr">c.test</span>(<span class="hljs-attr">l</span>)?<span class="hljs-attr">u:u</span>+"<span class="hljs-attr">px</span>"}<span class="hljs-attr">function</span> <span class="hljs-attr">C</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>,<span class="hljs-attr">i</span>,<span class="hljs-attr">t</span>){<span class="hljs-attr">var</span> <span class="hljs-attr">o</span>,<span class="hljs-attr">r</span>,<span class="hljs-attr">f</span>;<span class="hljs-attr">if</span>(<span class="hljs-attr">t</span>&amp;&amp;"<span class="hljs-attr">className</span>"==<span class="hljs-string">l&amp;&amp;(l</span>=<span class="hljs-string">"class"</span>),"<span class="hljs-attr">style</span>"===<span class="hljs-string">l)if(</span>"<span class="hljs-attr">string</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">u</span>)<span class="hljs-attr">n.style.cssText</span>=<span class="hljs-string">u;else{if(</span>"<span class="hljs-attr">string</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">i</span>&amp;&amp;(<span class="hljs-attr">n.style.cssText</span>=<span class="hljs-string">i</span>=<span class="hljs-string">""</span>),<span class="hljs-attr">i</span>)<span class="hljs-attr">for</span>(<span class="hljs-attr">l</span> <span class="hljs-attr">in</span> <span class="hljs-attr">i</span>)<span class="hljs-attr">u</span>&amp;&amp;<span class="hljs-attr">l</span> <span class="hljs-attr">in</span> <span class="hljs-attr">u</span>||<span class="hljs-attr">P</span>(<span class="hljs-attr">n.style</span>,<span class="hljs-attr">l</span>,"");<span class="hljs-attr">if</span>(<span class="hljs-attr">u</span>)<span class="hljs-attr">for</span>(<span class="hljs-attr">l</span> <span class="hljs-attr">in</span> <span class="hljs-attr">u</span>)<span class="hljs-attr">i</span>&amp;&amp;<span class="hljs-attr">u</span>[<span class="hljs-attr">l</span>]===<span class="hljs-string">i[l]||P(n.style,l,u[l])}else</span>"<span class="hljs-attr">o</span>"===<span class="hljs-string">l[0]&amp;&amp;</span>"<span class="hljs-attr">n</span>"===<span class="hljs-string">l[1]?(o</span>=<span class="hljs-string">l!</span>==<span class="hljs-string">(l</span>=<span class="hljs-string">l.replace(/Capture$/,</span>"")),(<span class="hljs-attr">r</span>=<span class="hljs-string">l.toLowerCase())in</span> <span class="hljs-attr">n</span>&amp;&amp;(<span class="hljs-attr">l</span>=<span class="hljs-string">r),l</span>=<span class="hljs-string">l.slice(2),n.l||(n.l</span>=<span class="hljs-string">{}),n.l[l+o]</span>=<span class="hljs-string">u,f</span>=<span class="hljs-string">o?N:z,u?i||n.addEventListener(l,f,o):n.removeEventListener(l,f,o)):</span>"<span class="hljs-attr">list</span>"!==<span class="hljs-string">l&amp;&amp;</span>"<span class="hljs-attr">tagName</span>"!==<span class="hljs-string">l&amp;&amp;</span>"<span class="hljs-attr">form</span>"!==<span class="hljs-string">l&amp;&amp;</span>"<span class="hljs-attr">type</span>"!==<span class="hljs-string">l&amp;&amp;</span>"<span class="hljs-attr">size</span>"!==<span class="hljs-string">l&amp;&amp;</span>"<span class="hljs-attr">download</span>"!==<span class="hljs-string">l&amp;&amp;</span>"<span class="hljs-attr">href</span>"!==<span class="hljs-string">l&amp;&amp;!t&amp;&amp;l</span> <span class="hljs-attr">in</span> <span class="hljs-attr">n</span>?<span class="hljs-attr">n</span>[<span class="hljs-attr">l</span>]=<span class="hljs-string">null</span>==<span class="hljs-string">u?</span>""<span class="hljs-attr">:u:</span>"<span class="hljs-attr">function</span>"!=<span class="hljs-string">typeof</span> <span class="hljs-attr">u</span>&amp;&amp;"<span class="hljs-attr">dangerouslySetInnerHTML</span>"!==<span class="hljs-string">l&amp;&amp;(l!</span>==<span class="hljs-string">(l</span>=<span class="hljs-string">l.replace(/xlink:?/,</span>""))?<span class="hljs-attr">null</span>==<span class="hljs-string">u||!1</span>===<span class="hljs-string">u?n.removeAttributeNS(</span>"<span class="hljs-attr">http:</span>//<span class="hljs-attr">www.w3.org</span>/<span class="hljs-attr">1999</span>/<span class="hljs-attr">xlink</span>",<span class="hljs-attr">l.toLowerCase</span>())<span class="hljs-attr">:n.setAttributeNS</span>("<span class="hljs-attr">http:</span>//<span class="hljs-attr">www.w3.org</span>/<span class="hljs-attr">1999</span>/<span class="hljs-attr">xlink</span>",<span class="hljs-attr">l.toLowerCase</span>(),<span class="hljs-attr">u</span>)<span class="hljs-attr">:null</span>==<span class="hljs-string">u||!1</span>===<span class="hljs-string">u&amp;&amp;!/^ar/.test(l)?n.removeAttribute(l):n.setAttribute(l,u))}function</span> <span class="hljs-attr">z</span>(<span class="hljs-attr">l</span>){<span class="hljs-attr">this.l</span>[<span class="hljs-attr">l.type</span>+!<span class="hljs-attr">1</span>](<span class="hljs-attr">n.event</span>?<span class="hljs-attr">n.event</span>(<span class="hljs-attr">l</span>)<span class="hljs-attr">:l</span>)}<span class="hljs-attr">function</span> <span class="hljs-attr">N</span>(<span class="hljs-attr">l</span>){<span class="hljs-attr">this.l</span>[<span class="hljs-attr">l.type</span>+!<span class="hljs-attr">0</span>](<span class="hljs-attr">n.event</span>?<span class="hljs-attr">n.event</span>(<span class="hljs-attr">l</span>)<span class="hljs-attr">:l</span>)}<span class="hljs-attr">function</span> <span class="hljs-attr">T</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>){<span class="hljs-attr">var</span> <span class="hljs-attr">i</span>,<span class="hljs-attr">t</span>;<span class="hljs-attr">for</span>(<span class="hljs-attr">i</span>=<span class="hljs-string">0;i</span>&lt;<span class="hljs-attr">n.__k.length</span>;<span class="hljs-attr">i</span>++)(<span class="hljs-attr">t</span>=<span class="hljs-string">n.__k[i])&amp;&amp;(t.__</span>=<span class="hljs-string">n,t.__e&amp;&amp;(</span>"<span class="hljs-attr">function</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">t.type</span>&amp;&amp;<span class="hljs-attr">t.__k.length</span>&gt;</span>1&amp;&amp;T(t,l,u),l=x(u,t,t,n.__k,null,t.__e,l),"function"==typeof n.type&amp;&amp;(n.__d=l)))}function $(l,u,i,t,o,r,f,e,c){var a,h,v,y,_,w,k,g,b,x,A,P=u.type;if(void 0!==u.constructor)return null;null!=i.__h&amp;&amp;(c=i.__h,e=u.__e=i.__e,u.__h=null,r=[e]),(a=n.__b)&amp;&amp;a(u);try{n:if("function"==typeof P){if(g=u.props,b=(a=P.contextType)&amp;&amp;t[a.__c],x=a?b?b.props.value:a.__:t,i.__c?k=(h=u.__c=i.__c).__=h.__E:("prototype"in P&amp;&amp;P.prototype.render?u.__c=h=new P(g,x):(u.__c=h=new d(g,x),h.constructor=P,h.render=M),b&amp;&amp;b.sub(h),h.props=g,h.state||(h.state={}),h.context=x,h.__n=t,v=h.__d=!0,h.__h=[]),null==h.__s&amp;&amp;(h.__s=h.state),null!=P.getDerivedStateFromProps&amp;&amp;(h.__s==h.state&amp;&amp;(h.__s=s({},h.__s)),s(h.__s,P.getDerivedStateFromProps(g,h.__s))),y=h.props,_=h.state,v)null==P.getDerivedStateFromProps&amp;&amp;null!=h.componentWillMount&amp;&amp;h.componentWillMount(),null!=h.componentDidMount&amp;&amp;h.__h.push(h.componentDidMount);else{if(null==P.getDerivedStateFromProps&amp;&amp;g!==y&amp;&amp;null!=h.componentWillReceiveProps&amp;&amp;h.componentWillReceiveProps(g,x),!h.__e&amp;&amp;null!=h.shouldComponentUpdate&amp;&amp;!1===h.shouldComponentUpdate(g,h.__s,x)||u.__v===i.__v){h.props=g,h.state=h.__s,u.__v!==i.__v&amp;&amp;(h.__d=!1),h.__v=u,u.__e=i.__e,u.__k=i.__k,h.__h.length&amp;&amp;f.push(h),T(u,e,l);break n}null!=h.componentWillUpdate&amp;&amp;h.componentWillUpdate(g,h.__s,x),null!=h.componentDidUpdate&amp;&amp;h.__h.push(function(){h.componentDidUpdate(y,_,w)})}h.context=x,h.props=g,h.state=h.__s,(a=n.__r)&amp;&amp;a(u),h.__d=!1,h.__v=u,h.__P=l,a=h.render(h.props,h.state,h.context),h.state=h.__s,null!=h.getChildContext&amp;&amp;(t=s(s({},t),h.getChildContext())),v||null==h.getSnapshotBeforeUpdate||(w=h.getSnapshotBeforeUpdate(y,_)),A=null!=a&amp;&amp;a.type==p&amp;&amp;null==a.key?a.props.children:a,m(l,Array.isArray(A)?A:[A],u,i,t,o,r,f,e,c),h.base=u.__e,u.__h=null,h.__h.length&amp;&amp;f.push(h),k&amp;&amp;(h.__E=h.__=null),h.__e=!1}else null==r&amp;&amp;u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=H(i.__e,u,i,t,o,r,f,c);(a=n.diffed)&amp;&amp;a(u)}catch(l){u.__v=null,(c||null!=r)&amp;&amp;(u.__e=e,u.__h=!!c,r[r.indexOf(e)]=null),n.__e(l,u,i)}return u.__e}function j(l,u){n.__c&amp;&amp;n.__c(u,l),l.some(function(u){try{l=u.__h,u.__h=[],l.some(function(n){n.call(u)})}catch(l){n.__e(l,u.__v)}})}function H(n,l,u,i,t,o,r,c){var s,a,h,v,y,p=u.props,d=l.props;if(t="svg"===l.type||t,null!=o)for(s=0;s<span class="hljs-tag">&lt;<span class="hljs-name">o.length;s++)if(null!=(a=o[s])&amp;&amp;((null===l.type?3===a.nodeType:a.localName===l.type)||n==a)){n=a,o[s]=null;break}if(null==n){if(null===l.type)return</span> <span class="hljs-attr">document.createTextNode</span>(<span class="hljs-attr">d</span>);<span class="hljs-attr">n</span>=<span class="hljs-string">t?document.createElementNS(</span>"<span class="hljs-attr">http:</span>//<span class="hljs-attr">www.w3.org</span>/<span class="hljs-attr">2000</span>/<span class="hljs-attr">svg</span>",<span class="hljs-attr">l.type</span>)<span class="hljs-attr">:document.createElement</span>(<span class="hljs-attr">l.type</span>,<span class="hljs-attr">d.is</span>&amp;&amp;{<span class="hljs-attr">is:d.is</span>}),<span class="hljs-attr">o</span>=<span class="hljs-string">null,c</span>=<span class="hljs-string">!1}if(null</span>===<span class="hljs-string">l.type)p</span>===<span class="hljs-string">d||c&amp;&amp;n.data</span>===<span class="hljs-string">d||(n.data</span>=<span class="hljs-string">d);else{if(null!</span>=<span class="hljs-string">o&amp;&amp;(o</span>=<span class="hljs-string">e.slice.call(n.childNodes)),h</span>=<span class="hljs-string">(p</span>=<span class="hljs-string">u.props||f).dangerouslySetInnerHTML,v</span>=<span class="hljs-string">d.dangerouslySetInnerHTML,!c){if(null!</span>=<span class="hljs-string">o)for(p</span>=<span class="hljs-string">{},y</span>=<span class="hljs-string">0;y</span>&lt;<span class="hljs-attr">n.attributes.length</span>;<span class="hljs-attr">y</span>++)<span class="hljs-attr">p</span>[<span class="hljs-attr">n.attributes</span>[<span class="hljs-attr">y</span>]<span class="hljs-attr">.name</span>]=<span class="hljs-string">n.attributes[y].value;(v||h)&amp;&amp;(v&amp;&amp;(h&amp;&amp;v.__html</span>==<span class="hljs-string">h.__html||v.__html</span>===<span class="hljs-string">n.innerHTML)||(n.innerHTML</span>=<span class="hljs-string">v&amp;&amp;v.__html||</span>""))}<span class="hljs-attr">A</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">d</span>,<span class="hljs-attr">p</span>,<span class="hljs-attr">t</span>,<span class="hljs-attr">c</span>),<span class="hljs-attr">v</span>?<span class="hljs-attr">l.__k</span>=<span class="hljs-string">[]:(s</span>=<span class="hljs-string">l.props.children,m(n,Array.isArray(s)?s:[s],l,u,i,</span>"<span class="hljs-attr">foreignObject</span>"!==<span class="hljs-string">l.type&amp;&amp;t,o,r,f,c)),c||(</span>"<span class="hljs-attr">value</span>"<span class="hljs-attr">in</span> <span class="hljs-attr">d</span>&amp;&amp;<span class="hljs-attr">void</span> <span class="hljs-attr">0</span>!==<span class="hljs-string">(s</span>=<span class="hljs-string">d.value)&amp;&amp;(s!</span>==<span class="hljs-string">n.value||</span>"<span class="hljs-attr">progress</span>"===<span class="hljs-string">l.type&amp;&amp;!s)&amp;&amp;C(n,</span>"<span class="hljs-attr">value</span>",<span class="hljs-attr">s</span>,<span class="hljs-attr">p.value</span>,!<span class="hljs-attr">1</span>),"<span class="hljs-attr">checked</span>"<span class="hljs-attr">in</span> <span class="hljs-attr">d</span>&amp;&amp;<span class="hljs-attr">void</span> <span class="hljs-attr">0</span>!==<span class="hljs-string">(s</span>=<span class="hljs-string">d.checked)&amp;&amp;s!</span>==<span class="hljs-string">n.checked&amp;&amp;C(n,</span>"<span class="hljs-attr">checked</span>",<span class="hljs-attr">s</span>,<span class="hljs-attr">p.checked</span>,!<span class="hljs-attr">1</span>))}<span class="hljs-attr">return</span> <span class="hljs-attr">n</span>}<span class="hljs-attr">function</span> <span class="hljs-attr">I</span>(<span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>,<span class="hljs-attr">i</span>){<span class="hljs-attr">try</span>{"<span class="hljs-attr">function</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">l</span>?<span class="hljs-attr">l</span>(<span class="hljs-attr">u</span>)<span class="hljs-attr">:l.current</span>=<span class="hljs-string">u}catch(l){n.__e(l,i)}}function</span> <span class="hljs-attr">L</span>(<span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>,<span class="hljs-attr">i</span>){<span class="hljs-attr">var</span> <span class="hljs-attr">t</span>,<span class="hljs-attr">o</span>,<span class="hljs-attr">r</span>;<span class="hljs-attr">if</span>(<span class="hljs-attr">n.unmount</span>&amp;&amp;<span class="hljs-attr">n.unmount</span>(<span class="hljs-attr">l</span>),(<span class="hljs-attr">t</span>=<span class="hljs-string">l.ref)&amp;&amp;(t.current&amp;&amp;t.current!</span>==<span class="hljs-string">l.__e||I(t,null,u)),i||</span>"<span class="hljs-attr">function</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">l.type</span>||(<span class="hljs-attr">i</span>=<span class="hljs-string">null!</span>=<span class="hljs-string">(o</span>=<span class="hljs-string">l.__e)),l.__e</span>=<span class="hljs-string">l.__d</span>=<span class="hljs-string">void</span> <span class="hljs-attr">0</span>,<span class="hljs-attr">null</span>!=<span class="hljs-string">(t</span>=<span class="hljs-string">l.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(l){n.__e(l,u)}t.base</span>=<span class="hljs-string">t.__P</span>=<span class="hljs-string">null}if(t</span>=<span class="hljs-string">l.__k)for(r</span>=<span class="hljs-string">0;r</span>&lt;<span class="hljs-attr">t.length</span>;<span class="hljs-attr">r</span>++)<span class="hljs-attr">t</span>[<span class="hljs-attr">r</span>]&amp;&amp;<span class="hljs-attr">L</span>(<span class="hljs-attr">t</span>[<span class="hljs-attr">r</span>],<span class="hljs-attr">u</span>,<span class="hljs-attr">i</span>);<span class="hljs-attr">null</span>!=<span class="hljs-string">o&amp;&amp;a(o)}function</span> <span class="hljs-attr">M</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>){<span class="hljs-attr">return</span> <span class="hljs-attr">this.constructor</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">u</span>)}<span class="hljs-attr">function</span> <span class="hljs-attr">O</span>(<span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>,<span class="hljs-attr">i</span>){<span class="hljs-attr">var</span> <span class="hljs-attr">t</span>,<span class="hljs-attr">r</span>,<span class="hljs-attr">c</span>;<span class="hljs-attr">n.__</span>&amp;&amp;<span class="hljs-attr">n.__</span>(<span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>),<span class="hljs-attr">r</span>=<span class="hljs-string">(t</span>=<span class="hljs-string">i</span>===<span class="hljs-string">o)?null:i&amp;&amp;i.__k||u.__k,l</span>=<span class="hljs-string">h(p,null,[l]),c</span>=<span class="hljs-string">[],$(u,(t?u:i||u).__k</span>=<span class="hljs-string">l,r||f,f,void</span> <span class="hljs-attr">0</span>!==<span class="hljs-string">u.ownerSVGElement,i&amp;&amp;!t?[i]:r?null:u.childNodes.length?e.slice.call(u.childNodes):null,c,i||f,t),j(c,l)}function</span> <span class="hljs-attr">S</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>){<span class="hljs-attr">O</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>,<span class="hljs-attr">o</span>)}<span class="hljs-attr">function</span> <span class="hljs-attr">q</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>,<span class="hljs-attr">u</span>){<span class="hljs-attr">var</span> <span class="hljs-attr">i</span>,<span class="hljs-attr">t</span>,<span class="hljs-attr">o</span>,<span class="hljs-attr">r</span>=<span class="hljs-string">arguments,f</span>=<span class="hljs-string">s({},n.props);for(o</span> <span class="hljs-attr">in</span> <span class="hljs-attr">l</span>)"<span class="hljs-attr">key</span>"==<span class="hljs-string">o?i</span>=<span class="hljs-string">l[o]:</span>"<span class="hljs-attr">ref</span>"==<span class="hljs-string">o?t</span>=<span class="hljs-string">l[o]:f[o]</span>=<span class="hljs-string">l[o];if(arguments.length</span>&gt;</span>3)for(u=[u],o=3;o<span class="hljs-tag">&lt;<span class="hljs-name">arguments.length;o++)u.push(r[o]);return</span> <span class="hljs-attr">null</span>!=<span class="hljs-string">u&amp;&amp;(f.children</span>=<span class="hljs-string">u),v(n.type,f,i||n.key,t||n.ref,null)}function</span> <span class="hljs-attr">B</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>){<span class="hljs-attr">var</span> <span class="hljs-attr">u</span>=<span class="hljs-string">{__c:l</span>=<span class="hljs-string">"__cC"</span>+<span class="hljs-attr">r</span>++,<span class="hljs-attr">__:n</span>,<span class="hljs-attr">Consumer:function</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">l</span>){<span class="hljs-attr">return</span> <span class="hljs-attr">n.children</span>(<span class="hljs-attr">l</span>)},<span class="hljs-attr">Provider:function</span>(<span class="hljs-attr">n</span>,<span class="hljs-attr">u</span>,<span class="hljs-attr">i</span>){<span class="hljs-attr">return</span> <span class="hljs-attr">this.getChildContext</span>||(<span class="hljs-attr">u</span>=<span class="hljs-string">[],(i</span>=<span class="hljs-string">{})[l]</span>=<span class="hljs-string">this,this.getChildContext</span>=<span class="hljs-string">function(){return</span> <span class="hljs-attr">i</span>},<span class="hljs-attr">this.shouldComponentUpdate</span>=<span class="hljs-string">function(n){this.props.value!</span>==<span class="hljs-string">n.value&amp;&amp;u.some(k)},this.sub</span>=<span class="hljs-string">function(n){u.push(n);var</span> <span class="hljs-attr">l</span>=<span class="hljs-string">n.componentWillUnmount;n.componentWillUnmount</span>=<span class="hljs-string">function(){u.splice(u.indexOf(n),1),l&amp;&amp;l.call(n)}}),n.children}};return</span> <span class="hljs-attr">u.Provider.__</span>=<span class="hljs-string">u.Consumer.contextType</span>=<span class="hljs-string">u}n</span>=<span class="hljs-string">{__e:function(n,l){for(var</span> <span class="hljs-attr">u</span>,<span class="hljs-attr">i</span>,<span class="hljs-attr">t</span>,<span class="hljs-attr">o</span>=<span class="hljs-string">l.__h;l</span>=<span class="hljs-string">l.__;)if((u</span>=<span class="hljs-string">l.__c)&amp;&amp;!u.__)try{if((i</span>=<span class="hljs-string">u.constructor)&amp;&amp;null!</span>=<span class="hljs-string">i.getDerivedStateFromError&amp;&amp;(u.setState(i.getDerivedStateFromError(n)),t</span>=<span class="hljs-string">u.__d),null!</span>=<span class="hljs-string">u.componentDidCatch&amp;&amp;(u.componentDidCatch(n),t</span>=<span class="hljs-string">u.__d),t)return</span> <span class="hljs-attr">l.__h</span>=<span class="hljs-string">o,u.__E</span>=<span class="hljs-string">u}catch(l){n</span>=<span class="hljs-string">l}throw</span> <span class="hljs-attr">n</span>}},<span class="hljs-attr">l</span>=<span class="hljs-string">function(n){return</span> <span class="hljs-attr">null</span>!=<span class="hljs-string">n&amp;&amp;void</span> <span class="hljs-attr">0</span>===<span class="hljs-string">n.constructor},d.prototype.setState</span>=<span class="hljs-string">function(n,l){var</span> <span class="hljs-attr">u</span>;<span class="hljs-attr">u</span>=<span class="hljs-string">null!</span>=<span class="hljs-string">this.__s&amp;&amp;this.__s!</span>==<span class="hljs-string">this.state?this.__s:this.__s</span>=<span class="hljs-string">s({},this.state),</span>"<span class="hljs-attr">function</span>"==<span class="hljs-string">typeof</span> <span class="hljs-attr">n</span>&amp;&amp;(<span class="hljs-attr">n</span>=<span class="hljs-string">n(s({},u),this.props)),n&amp;&amp;s(u,n),null!</span>=<span class="hljs-string">n&amp;&amp;this.__v&amp;&amp;(l&amp;&amp;this.__h.push(l),k(this))},d.prototype.forceUpdate</span>=<span class="hljs-string">function(n){this.__v&amp;&amp;(this.__e</span>=<span class="hljs-string">!0,n&amp;&amp;this.__h.push(n),k(this))},d.prototype.render</span>=<span class="hljs-string">p,u</span>=<span class="hljs-string">[],i</span>=<span class="hljs-string">"function"</span>==<span class="hljs-string">typeof</span> <span class="hljs-attr">Promise</span>?<span class="hljs-attr">Promise.prototype.then.bind</span>(<span class="hljs-attr">Promise.resolve</span>())<span class="hljs-attr">:setTimeout</span>,<span class="hljs-attr">g.__r</span>=<span class="hljs-string">0,o</span>=<span class="hljs-string">f,r</span>=<span class="hljs-string">0;</span>
//# <span class="hljs-attr">sourceMappingURL</span>=<span class="hljs-string">preact.module.js.map</span>


/***/ }),
/* <span class="hljs-attr">5</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">__webpack_exports__</span>, <span class="hljs-attr">__webpack_require__</span>) {

"<span class="hljs-attr">use</span> <span class="hljs-attr">strict</span>";
<span class="hljs-attr">__webpack_require__.r</span>(<span class="hljs-attr">__webpack_exports__</span>);
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">export</span> (<span class="hljs-attr">binding</span>) */ <span class="hljs-attr">__webpack_require__.d</span>(<span class="hljs-attr">__webpack_exports__</span>, "<span class="hljs-attr">Server</span>", <span class="hljs-attr">function</span>() { <span class="hljs-attr">return</span> <span class="hljs-attr">Server</span>; });
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">export</span> (<span class="hljs-attr">binding</span>) */ <span class="hljs-attr">__webpack_require__.d</span>(<span class="hljs-attr">__webpack_exports__</span>, "<span class="hljs-attr">Client</span>", <span class="hljs-attr">function</span>() { <span class="hljs-attr">return</span> <span class="hljs-attr">Client</span>; });
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__</span> = <span class="hljs-string">__webpack_require__(1);</span>
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span> = <span class="hljs-string">/*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);</span>


/*
  <span class="hljs-attr">This</span> <span class="hljs-attr">module</span> <span class="hljs-attr">describes</span> <span class="hljs-attr">a</span> <span class="hljs-attr">simple</span> <span class="hljs-attr">IPC</span> <span class="hljs-attr">interface</span> <span class="hljs-attr">for</span> <span class="hljs-attr">communicating</span> <span class="hljs-attr">between</span> <span class="hljs-attr">browser</span> <span class="hljs-attr">windows.</span>
  <span class="hljs-attr">window.postMessage</span>() <span class="hljs-attr">is</span> <span class="hljs-attr">the</span> <span class="hljs-attr">transport</span> <span class="hljs-attr">interface</span>, <span class="hljs-attr">and</span> <span class="hljs-attr">a</span> <span class="hljs-attr">request</span>/<span class="hljs-attr">response</span> <span class="hljs-attr">interface</span>
  <span class="hljs-attr">is</span> <span class="hljs-attr">defined</span> <span class="hljs-attr">on</span> <span class="hljs-attr">top</span> <span class="hljs-attr">of</span> <span class="hljs-attr">it</span> <span class="hljs-attr">as</span> <span class="hljs-attr">follows:</span>

  <span class="hljs-attr">const</span> <span class="hljs-attr">request</span> = <span class="hljs-string">{</span>
    '<span class="hljs-attr">solid-auth-client</span>'<span class="hljs-attr">:</span> {
      <span class="hljs-attr">id:</span> <span class="hljs-attr">1234</span>,
      <span class="hljs-attr">method:</span> '<span class="hljs-attr">doSomethingPlease</span>',
      <span class="hljs-attr">args:</span> [ '<span class="hljs-attr">one</span>', '<span class="hljs-attr">two</span>', '<span class="hljs-attr">three</span>' ]
    }
  }

  <span class="hljs-attr">const</span> <span class="hljs-attr">response</span> = <span class="hljs-string">{</span>
    '<span class="hljs-attr">solid-auth-client</span>'<span class="hljs-attr">:</span> {
      <span class="hljs-attr">id:</span> <span class="hljs-attr">1234</span>,
      <span class="hljs-attr">ret:</span> '<span class="hljs-attr">the_value</span>'
    }
  }
*/
<span class="hljs-attr">const</span> <span class="hljs-attr">NAMESPACE</span> = <span class="hljs-string">'solid-auth-client'</span>;
/**
 * <span class="hljs-attr">Receives</span> <span class="hljs-attr">and</span> <span class="hljs-attr">handles</span> <span class="hljs-attr">remote</span> <span class="hljs-attr">procedure</span> <span class="hljs-attr">calls.</span>
 */

<span class="hljs-attr">class</span> <span class="hljs-attr">Server</span> {
  <span class="hljs-attr">constructor</span>(<span class="hljs-attr">clientWindow</span>, <span class="hljs-attr">clientOrigin</span>, <span class="hljs-attr">handle</span>) {
    <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span>()(<span class="hljs-attr">this</span>, "<span class="hljs-attr">_clientWindow</span>", <span class="hljs-attr">void</span> <span class="hljs-attr">0</span>);

    <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span>()(<span class="hljs-attr">this</span>, "<span class="hljs-attr">_clientOrigin</span>", <span class="hljs-attr">void</span> <span class="hljs-attr">0</span>);

    <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span>()(<span class="hljs-attr">this</span>, "<span class="hljs-attr">_handler</span>", <span class="hljs-attr">void</span> <span class="hljs-attr">0</span>);

    <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span>()(<span class="hljs-attr">this</span>, "<span class="hljs-attr">_messageListener</span>", <span class="hljs-attr">void</span> <span class="hljs-attr">0</span>);

    <span class="hljs-attr">this._clientWindow</span> = <span class="hljs-string">clientWindow;</span>
    <span class="hljs-attr">this._clientOrigin</span> = <span class="hljs-string">clientOrigin;</span>
    <span class="hljs-attr">this._handler</span> = <span class="hljs-string">handle;</span>

    <span class="hljs-attr">this._messageListener</span> = <span class="hljs-string">event</span> =&gt;</span> this._handleMessage(event);
  }

  async _handleMessage({
    data,
    origin
  }) {
    // Ensure we can post to the origin
    if (origin !== this._clientOrigin) {
      console.warn("solid-auth-client is listening to ".concat(this._clientOrigin, " ") + "so ignored a message received from ".concat(origin, "."));
      return;
    } // Parse the request and send it to the handler


    const req = data &amp;&amp; data[NAMESPACE];

    if (req &amp;&amp; req.method) {
      const {
        id,
        method,
        args
      } = req;
      const ret = await this._handler(method, ...args);

      this._clientWindow.postMessage({
        [NAMESPACE]: {
          id,
          ret
        }
      }, this._clientOrigin);
    }
  }

  start() {
    window.addEventListener('message', this._messageListener);
  }

  stop() {
    window.removeEventListener('message', this._messageListener);
  }

}
/**
 * Makes remote procedure calls.
 */

class Client {
  constructor(serverWindow, serverOrigin) {
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_serverWindow", void 0);

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_serverOrigin", void 0);

    this._serverWindow = serverWindow;
    this._serverOrigin = serverOrigin;
  }

  request(method, ...args) {
    // Send the request as a message to the server window
    const id = Math.random();

    this._serverWindow.postMessage({
      [NAMESPACE]: {
        id,
        method,
        args
      }
    }, this._serverOrigin); // Create a promise that resolves to the request's return value


    return new Promise((resolve, reject) =&gt; {
      // Listen for responses to the request
      window.addEventListener('message', responseListener); // Cancel if the response takes too long

      const timeout = setTimeout(() =&gt; {
        reject(new Error('Could not connect to main window.'));
        window.removeEventListener('message', responseListener);
      }, 2000); // Processes a possible response to the request

      function responseListener({
        data
      }) {
        const resp = data &amp;&amp; data[NAMESPACE]; // eslint-disable-next-line no-prototype-builtins

        if (resp &amp;&amp; resp.id === id &amp;&amp; resp.hasOwnProperty('ret')) {
          resolve(resp.ret);
          clearTimeout(timeout);
          window.removeEventListener('message', responseListener);
        }
      }
    });
  }

}

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NAMESPACE", function() { return NAMESPACE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultStorage", function() { return defaultStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getData", function() { return getData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateStorage", function() { return updateStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "asyncStorage", function() { return asyncStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "memStorage", function() { return memStorage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ipcStorage", function() { return ipcStorage; });
/* harmony import */ var _ipc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);

const NAMESPACE = 'solid-auth-client';
const defaultStorage = () =&gt; {
  const hasLocalStorage = typeof window !== 'undefined' &amp;&amp; 'localStorage' in window;
  return asyncStorage(hasLocalStorage ? window.localStorage : memStorage());
};
/**
 * Gets the deserialized stored data
 */

async function getData(store) {
  let serialized;
  let data;

  try {
    serialized = await store.getItem(NAMESPACE);
    data = JSON.parse(serialized || '{}');
  } catch (e) {
    console.warn('Could not deserialize data:', serialized);
    console.error(e);
    data = {};
  }

  return data;
}
/**
 * Updates a Storage object without mutating its intermediate representation.
 */

async function updateStorage(store, update) {
  const currentData = await getData(store);
  const newData = update(currentData);
  await store.setItem(NAMESPACE, JSON.stringify(newData));
  return newData;
}
/**
 * Takes a synchronous storage interface and wraps it with an async interface.
 */

function asyncStorage(storage) {
  return {
    getItem: key =&gt; {
      return Promise.resolve(storage.getItem(key));
    },
    setItem: (key, val) =&gt; {
      return Promise.resolve(storage.setItem(key, val));
    },
    removeItem: key =&gt; {
      return Promise.resolve(storage.removeItem(key));
    }
  };
}
const memStorage = () =&gt; {
  const store = {};
  return {
    getItem: key =&gt; {
      if (typeof store[key] === 'undefined') return null;
      return store[key];
    },
    setItem: (key, val) =&gt; {
      store[key] = val;
    },
    removeItem: key =&gt; {
      delete store[key];
    }
  };
};
function ipcStorage(client) {
  return {
    getItem: key =&gt; client.request('storage/getItem', key),
    setItem: (key, val) =&gt; client.request('storage/setItem', key, val),
    removeItem: key =&gt; client.request('storage/removeItem', key)
  };
}

/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return IdpCallback; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2);
/* harmony import */ var _src__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8);
/* harmony import */ var _src_ipc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5);
/* harmony import */ var _src_storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6);





class IdpCallback extends react__WEBPACK_IMPORTED_MODULE_1__["Component"] {
  constructor(...args) {
    super(...args);

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "state", {
      loggedIn: false
    });

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "client", new _src_ipc__WEBPACK_IMPORTED_MODULE_3__["Client"](window.opener, this.props.appOrigin));
  }

  async componentDidMount() {
    const storage = Object(_src_storage__WEBPACK_IMPORTED_MODULE_4__["ipcStorage"])(this.client);
    const session = await _src__WEBPACK_IMPORTED_MODULE_2__["default"].currentSession(storage);
    await this.client.request('foundSession', session);
    this.setState({
      loggedIn: true
    });
  }

  componentDidUpdate() {
    const {
      afterLoggedIn
    } = this.props;

    if (this.state.loggedIn) {
      afterLoggedIn();
    }
  }

  render() {
    const message = this.state.loggedIn ? 'Logged in!' : 'Logging in…';
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement("h1", {
      class: "center"
    }, message);
  }

}

/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _solid_auth_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9);
 // Export a singleton instance of SolidAuthClient

const auth = new _solid_auth_client__WEBPACK_IMPORTED_MODULE_0__["default"]();
/* harmony default export */ __webpack_exports__["default"] = (auth); // Bind methods to instance, so they can be invoked as regular functions
// (e.g., to pass around the fetch function)

Object.getOwnPropertyNames(_solid_auth_client__WEBPACK_IMPORTED_MODULE_0__["default"].prototype).forEach(property =&gt; {
  const value = auth[property];

  if (typeof value === 'function') {
    auth[property] = value.bind(auth);
  }
}); // Expose window.SolidAuthClient for backward compatibility

if (typeof window !== 'undefined') {
  if ('SolidAuthClient' in window) {
    console.warn('Caution: multiple versions of solid-auth-client active.');
  } else {
    let warned = false;
    Object.defineProperty(window, 'SolidAuthClient', {
      enumerable: true,
      get: () =&gt; {
        if (!warned) {
          warned = true;
          console.warn('window.SolidAuthClient has been deprecated.');
          console.warn('Please use window.solid.auth instead.');
        }

        return auth;
      }
    });
  }
}

/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SolidAuthClient; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(10);
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _authn_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(11);
/* harmony import */ var _popup__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(70);
/* harmony import */ var _session__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(15);
/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(6);
/* harmony import */ var _url_util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(13);
/* harmony import */ var _webid_oidc__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(16);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i <span class="hljs-tag">&lt; <span class="hljs-attr">arguments.length</span>; <span class="hljs-attr">i</span>++) { <span class="hljs-attr">var</span> <span class="hljs-attr">source</span> = <span class="hljs-string">arguments[i]</span> != <span class="hljs-string">null</span> ? <span class="hljs-attr">arguments</span>[<span class="hljs-attr">i</span>] <span class="hljs-attr">:</span> {}; <span class="hljs-attr">if</span> (<span class="hljs-attr">i</span> % <span class="hljs-attr">2</span>) { <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">source</span>), <span class="hljs-attr">true</span>)<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) { <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span>()(<span class="hljs-attr">target</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">source</span>[<span class="hljs-attr">key</span>]); }); } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">Object.getOwnPropertyDescriptors</span>) { <span class="hljs-attr">Object.defineProperties</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">Object.getOwnPropertyDescriptors</span>(<span class="hljs-attr">source</span>)); } <span class="hljs-attr">else</span> { <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">source</span>))<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) { <span class="hljs-attr">Object.defineProperty</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">Object.getOwnPropertyDescriptor</span>(<span class="hljs-attr">source</span>, <span class="hljs-attr">key</span>)); }); } } <span class="hljs-attr">return</span> <span class="hljs-attr">target</span>; }

/* <span class="hljs-attr">global</span> <span class="hljs-attr">fetch</span> */






 // <span class="hljs-attr">Store</span> <span class="hljs-attr">the</span> <span class="hljs-attr">global</span> <span class="hljs-attr">fetch</span>, <span class="hljs-attr">so</span> <span class="hljs-attr">the</span> <span class="hljs-attr">user</span> <span class="hljs-attr">is</span> <span class="hljs-attr">free</span> <span class="hljs-attr">to</span> <span class="hljs-attr">override</span> <span class="hljs-attr">it</span>

<span class="hljs-attr">const</span> <span class="hljs-attr">globalFetch</span> = <span class="hljs-string">fetch;</span>
<span class="hljs-attr">class</span> <span class="hljs-attr">SolidAuthClient</span> <span class="hljs-attr">extends</span> <span class="hljs-attr">events__WEBPACK_IMPORTED_MODULE_1___default.a</span> {
  <span class="hljs-attr">constructor</span>(<span class="hljs-attr">...args</span>) {
    <span class="hljs-attr">super</span>(<span class="hljs-attr">...args</span>);

    <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span>()(<span class="hljs-attr">this</span>, "<span class="hljs-attr">_pendingSession</span>", <span class="hljs-attr">void</span> <span class="hljs-attr">0</span>);
  }

  <span class="hljs-attr">fetch</span>(<span class="hljs-attr">input</span>, <span class="hljs-attr">options</span>) {
    <span class="hljs-attr">this.emit</span>('<span class="hljs-attr">request</span>', <span class="hljs-attr">Object</span>(<span class="hljs-attr">_url_util__WEBPACK_IMPORTED_MODULE_6__</span>["<span class="hljs-attr">toUrlString</span>"])(<span class="hljs-attr">input</span>));
    <span class="hljs-attr">return</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_authn_fetch__WEBPACK_IMPORTED_MODULE_2__</span>["<span class="hljs-attr">authnFetch</span>"])(<span class="hljs-attr">Object</span>(<span class="hljs-attr">_storage__WEBPACK_IMPORTED_MODULE_5__</span>["<span class="hljs-attr">defaultStorage</span>"])(), <span class="hljs-attr">globalFetch</span>, <span class="hljs-attr">input</span>, <span class="hljs-attr">options</span>);
  }

  <span class="hljs-attr">login</span>(<span class="hljs-attr">idp</span>, <span class="hljs-attr">options</span>) {
    <span class="hljs-attr">options</span> = <span class="hljs-string">_objectSpread(_objectSpread({},</span> <span class="hljs-attr">defaultLoginOptions</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">_url_util__WEBPACK_IMPORTED_MODULE_6__</span>["<span class="hljs-attr">currentUrlNoParams</span>"])())), <span class="hljs-attr">options</span>);
    <span class="hljs-attr">return</span> <span class="hljs-attr">_webid_oidc__WEBPACK_IMPORTED_MODULE_7__</span>["<span class="hljs-attr">login</span>"](<span class="hljs-attr">idp</span>, <span class="hljs-attr">options</span>);
  }

  <span class="hljs-attr">async</span> <span class="hljs-attr">popupLogin</span>(<span class="hljs-attr">options</span>) {
    <span class="hljs-attr">options</span> = <span class="hljs-string">_objectSpread(_objectSpread({},</span> <span class="hljs-attr">defaultLoginOptions</span>()), <span class="hljs-attr">options</span>);

    <span class="hljs-attr">if</span> (!/<span class="hljs-attr">https</span>?<span class="hljs-attr">:</span>/<span class="hljs-attr">.test</span>(<span class="hljs-attr">options.popupUri</span>)) {
      <span class="hljs-attr">options.popupUri</span> = <span class="hljs-string">new</span> <span class="hljs-attr">URL</span>(<span class="hljs-attr">options.popupUri</span> || '/<span class="hljs-attr">.well-known</span>/<span class="hljs-attr">solid</span>/<span class="hljs-attr">login</span>', <span class="hljs-attr">window.location</span>)<span class="hljs-attr">.toString</span>();
    }

    <span class="hljs-attr">if</span> (!<span class="hljs-attr">options.callbackUri</span>) {
      <span class="hljs-attr">options.callbackUri</span> = <span class="hljs-string">options.popupUri;</span>
    }

    <span class="hljs-attr">const</span> <span class="hljs-attr">popup</span> = <span class="hljs-string">Object(_popup__WEBPACK_IMPORTED_MODULE_3__[</span>"<span class="hljs-attr">openIdpPopup</span>"])(<span class="hljs-attr">options.popupUri</span>);
    <span class="hljs-attr">const</span> <span class="hljs-attr">session</span> = <span class="hljs-string">await</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_popup__WEBPACK_IMPORTED_MODULE_3__</span>["<span class="hljs-attr">obtainSession</span>"])(<span class="hljs-attr">options.storage</span>, <span class="hljs-attr">popup</span>, <span class="hljs-attr">options</span>);
    <span class="hljs-attr">this.emit</span>('<span class="hljs-attr">login</span>', <span class="hljs-attr">session</span>);
    <span class="hljs-attr">this.emit</span>('<span class="hljs-attr">session</span>', <span class="hljs-attr">session</span>);
    <span class="hljs-attr">return</span> <span class="hljs-attr">session</span>;
  }

  <span class="hljs-attr">async</span> <span class="hljs-attr">currentSession</span>(<span class="hljs-attr">storage</span> = <span class="hljs-string">Object(_storage__WEBPACK_IMPORTED_MODULE_5__[</span>"<span class="hljs-attr">defaultStorage</span>"])()) {
    // <span class="hljs-attr">Try</span> <span class="hljs-attr">to</span> <span class="hljs-attr">obtain</span> <span class="hljs-attr">a</span> <span class="hljs-attr">stored</span> <span class="hljs-attr">or</span> <span class="hljs-attr">pending</span> <span class="hljs-attr">session</span>
    <span class="hljs-attr">let</span> <span class="hljs-attr">session</span> = <span class="hljs-string">this._pendingSession</span> || (<span class="hljs-attr">await</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_session__WEBPACK_IMPORTED_MODULE_4__</span>["<span class="hljs-attr">getSession</span>"])(<span class="hljs-attr">storage</span>)); // <span class="hljs-attr">If</span> <span class="hljs-attr">none</span> <span class="hljs-attr">found</span>, <span class="hljs-attr">attempt</span> <span class="hljs-attr">to</span> <span class="hljs-attr">create</span> <span class="hljs-attr">a</span> <span class="hljs-attr">new</span> <span class="hljs-attr">session</span>

    <span class="hljs-attr">if</span> (!<span class="hljs-attr">session</span>) {
      // <span class="hljs-attr">Try</span> <span class="hljs-attr">to</span> <span class="hljs-attr">create</span> <span class="hljs-attr">a</span> <span class="hljs-attr">new</span> <span class="hljs-attr">OIDC</span> <span class="hljs-attr">session</span> <span class="hljs-attr">from</span> <span class="hljs-attr">stored</span> <span class="hljs-attr">tokens</span>
      <span class="hljs-attr">try</span> {
        <span class="hljs-attr">this._pendingSession</span> = <span class="hljs-string">_webid_oidc__WEBPACK_IMPORTED_MODULE_7__[</span>"<span class="hljs-attr">currentSession</span>"](<span class="hljs-attr">storage</span>);
        <span class="hljs-attr">session</span> = <span class="hljs-string">await</span> <span class="hljs-attr">this._pendingSession</span>;
      } <span class="hljs-attr">catch</span> (<span class="hljs-attr">err</span>) {
        <span class="hljs-attr">console.error</span>(<span class="hljs-attr">err</span>);
      } // <span class="hljs-attr">Save</span> <span class="hljs-attr">the</span> <span class="hljs-attr">new</span> <span class="hljs-attr">session</span> <span class="hljs-attr">and</span> <span class="hljs-attr">emit</span> <span class="hljs-attr">session</span> <span class="hljs-attr">events</span>


      <span class="hljs-attr">if</span> (<span class="hljs-attr">session</span>) {
        <span class="hljs-attr">await</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_session__WEBPACK_IMPORTED_MODULE_4__</span>["<span class="hljs-attr">saveSession</span>"])(<span class="hljs-attr">storage</span>)(<span class="hljs-attr">session</span>);
        <span class="hljs-attr">this.emit</span>('<span class="hljs-attr">login</span>', <span class="hljs-attr">session</span>);
        <span class="hljs-attr">this.emit</span>('<span class="hljs-attr">session</span>', <span class="hljs-attr">session</span>);
      }

      <span class="hljs-attr">delete</span> <span class="hljs-attr">this._pendingSession</span>;
    }

    <span class="hljs-attr">return</span> <span class="hljs-attr">session</span>;
  }

  <span class="hljs-attr">async</span> <span class="hljs-attr">trackSession</span>(<span class="hljs-attr">callback</span>) {
    /* <span class="hljs-attr">eslint-disable</span> <span class="hljs-attr">standard</span>/<span class="hljs-attr">no-callback-literal</span> */
    <span class="hljs-attr">callback</span>(<span class="hljs-attr">await</span> <span class="hljs-attr">this.currentSession</span>());
    <span class="hljs-attr">this.on</span>('<span class="hljs-attr">session</span>', <span class="hljs-attr">callback</span>);
  }

  <span class="hljs-attr">stopTrackSession</span>(<span class="hljs-attr">callback</span>) {
    <span class="hljs-attr">this.removeListener</span>('<span class="hljs-attr">session</span>', <span class="hljs-attr">callback</span>);
  }

  <span class="hljs-attr">async</span> <span class="hljs-attr">logout</span>(<span class="hljs-attr">storage</span> = <span class="hljs-string">Object(_storage__WEBPACK_IMPORTED_MODULE_5__[</span>"<span class="hljs-attr">defaultStorage</span>"])()) {
    <span class="hljs-attr">const</span> <span class="hljs-attr">session</span> = <span class="hljs-string">await</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_session__WEBPACK_IMPORTED_MODULE_4__</span>["<span class="hljs-attr">getSession</span>"])(<span class="hljs-attr">storage</span>);

    <span class="hljs-attr">if</span> (<span class="hljs-attr">session</span>) {
      <span class="hljs-attr">try</span> {
        <span class="hljs-attr">await</span> <span class="hljs-attr">_webid_oidc__WEBPACK_IMPORTED_MODULE_7__</span>["<span class="hljs-attr">logout</span>"](<span class="hljs-attr">storage</span>, <span class="hljs-attr">globalFetch</span>);
        <span class="hljs-attr">this.emit</span>('<span class="hljs-attr">logout</span>');
        <span class="hljs-attr">this.emit</span>('<span class="hljs-attr">session</span>', <span class="hljs-attr">null</span>);
      } <span class="hljs-attr">catch</span> (<span class="hljs-attr">err</span>) {
        <span class="hljs-attr">console.warn</span>('<span class="hljs-attr">Error</span> <span class="hljs-attr">logging</span> <span class="hljs-attr">out:</span>');
        <span class="hljs-attr">console.error</span>(<span class="hljs-attr">err</span>);
      }

      <span class="hljs-attr">await</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_session__WEBPACK_IMPORTED_MODULE_4__</span>["<span class="hljs-attr">clearSession</span>"])(<span class="hljs-attr">storage</span>);
    }
  }

}

<span class="hljs-attr">function</span> <span class="hljs-attr">defaultLoginOptions</span>(<span class="hljs-attr">url</span>) {
  <span class="hljs-attr">return</span> {
    <span class="hljs-attr">callbackUri:</span> <span class="hljs-attr">url</span> ? <span class="hljs-attr">url.split</span>('#')[<span class="hljs-attr">0</span>] <span class="hljs-attr">:</span> '',
    <span class="hljs-attr">popupUri:</span> '',
    <span class="hljs-attr">storage:</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_storage__WEBPACK_IMPORTED_MODULE_5__</span>["<span class="hljs-attr">defaultStorage</span>"])()
  };
}

/***/ }),
/* <span class="hljs-attr">10</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">exports</span>, <span class="hljs-attr">__webpack_require__</span>) {

"<span class="hljs-attr">use</span> <span class="hljs-attr">strict</span>";
// <span class="hljs-attr">Copyright</span> <span class="hljs-attr">Joyent</span>, <span class="hljs-attr">Inc.</span> <span class="hljs-attr">and</span> <span class="hljs-attr">other</span> <span class="hljs-attr">Node</span> <span class="hljs-attr">contributors.</span>
//
// <span class="hljs-attr">Permission</span> <span class="hljs-attr">is</span> <span class="hljs-attr">hereby</span> <span class="hljs-attr">granted</span>, <span class="hljs-attr">free</span> <span class="hljs-attr">of</span> <span class="hljs-attr">charge</span>, <span class="hljs-attr">to</span> <span class="hljs-attr">any</span> <span class="hljs-attr">person</span> <span class="hljs-attr">obtaining</span> <span class="hljs-attr">a</span>
// <span class="hljs-attr">copy</span> <span class="hljs-attr">of</span> <span class="hljs-attr">this</span> <span class="hljs-attr">software</span> <span class="hljs-attr">and</span> <span class="hljs-attr">associated</span> <span class="hljs-attr">documentation</span> <span class="hljs-attr">files</span> (<span class="hljs-attr">the</span>
// "<span class="hljs-attr">Software</span>"), <span class="hljs-attr">to</span> <span class="hljs-attr">deal</span> <span class="hljs-attr">in</span> <span class="hljs-attr">the</span> <span class="hljs-attr">Software</span> <span class="hljs-attr">without</span> <span class="hljs-attr">restriction</span>, <span class="hljs-attr">including</span>
// <span class="hljs-attr">without</span> <span class="hljs-attr">limitation</span> <span class="hljs-attr">the</span> <span class="hljs-attr">rights</span> <span class="hljs-attr">to</span> <span class="hljs-attr">use</span>, <span class="hljs-attr">copy</span>, <span class="hljs-attr">modify</span>, <span class="hljs-attr">merge</span>, <span class="hljs-attr">publish</span>,
// <span class="hljs-attr">distribute</span>, <span class="hljs-attr">sublicense</span>, <span class="hljs-attr">and</span>/<span class="hljs-attr">or</span> <span class="hljs-attr">sell</span> <span class="hljs-attr">copies</span> <span class="hljs-attr">of</span> <span class="hljs-attr">the</span> <span class="hljs-attr">Software</span>, <span class="hljs-attr">and</span> <span class="hljs-attr">to</span> <span class="hljs-attr">permit</span>
// <span class="hljs-attr">persons</span> <span class="hljs-attr">to</span> <span class="hljs-attr">whom</span> <span class="hljs-attr">the</span> <span class="hljs-attr">Software</span> <span class="hljs-attr">is</span> <span class="hljs-attr">furnished</span> <span class="hljs-attr">to</span> <span class="hljs-attr">do</span> <span class="hljs-attr">so</span>, <span class="hljs-attr">subject</span> <span class="hljs-attr">to</span> <span class="hljs-attr">the</span>
// <span class="hljs-attr">following</span> <span class="hljs-attr">conditions:</span>
//
// <span class="hljs-attr">The</span> <span class="hljs-attr">above</span> <span class="hljs-attr">copyright</span> <span class="hljs-attr">notice</span> <span class="hljs-attr">and</span> <span class="hljs-attr">this</span> <span class="hljs-attr">permission</span> <span class="hljs-attr">notice</span> <span class="hljs-attr">shall</span> <span class="hljs-attr">be</span> <span class="hljs-attr">included</span>
// <span class="hljs-attr">in</span> <span class="hljs-attr">all</span> <span class="hljs-attr">copies</span> <span class="hljs-attr">or</span> <span class="hljs-attr">substantial</span> <span class="hljs-attr">portions</span> <span class="hljs-attr">of</span> <span class="hljs-attr">the</span> <span class="hljs-attr">Software.</span>
//
// <span class="hljs-attr">THE</span> <span class="hljs-attr">SOFTWARE</span> <span class="hljs-attr">IS</span> <span class="hljs-attr">PROVIDED</span> "<span class="hljs-attr">AS</span> <span class="hljs-attr">IS</span>", <span class="hljs-attr">WITHOUT</span> <span class="hljs-attr">WARRANTY</span> <span class="hljs-attr">OF</span> <span class="hljs-attr">ANY</span> <span class="hljs-attr">KIND</span>, <span class="hljs-attr">EXPRESS</span>
// <span class="hljs-attr">OR</span> <span class="hljs-attr">IMPLIED</span>, <span class="hljs-attr">INCLUDING</span> <span class="hljs-attr">BUT</span> <span class="hljs-attr">NOT</span> <span class="hljs-attr">LIMITED</span> <span class="hljs-attr">TO</span> <span class="hljs-attr">THE</span> <span class="hljs-attr">WARRANTIES</span> <span class="hljs-attr">OF</span>
// <span class="hljs-attr">MERCHANTABILITY</span>, <span class="hljs-attr">FITNESS</span> <span class="hljs-attr">FOR</span> <span class="hljs-attr">A</span> <span class="hljs-attr">PARTICULAR</span> <span class="hljs-attr">PURPOSE</span> <span class="hljs-attr">AND</span> <span class="hljs-attr">NONINFRINGEMENT.</span> <span class="hljs-attr">IN</span>
// <span class="hljs-attr">NO</span> <span class="hljs-attr">EVENT</span> <span class="hljs-attr">SHALL</span> <span class="hljs-attr">THE</span> <span class="hljs-attr">AUTHORS</span> <span class="hljs-attr">OR</span> <span class="hljs-attr">COPYRIGHT</span> <span class="hljs-attr">HOLDERS</span> <span class="hljs-attr">BE</span> <span class="hljs-attr">LIABLE</span> <span class="hljs-attr">FOR</span> <span class="hljs-attr">ANY</span> <span class="hljs-attr">CLAIM</span>,
// <span class="hljs-attr">DAMAGES</span> <span class="hljs-attr">OR</span> <span class="hljs-attr">OTHER</span> <span class="hljs-attr">LIABILITY</span>, <span class="hljs-attr">WHETHER</span> <span class="hljs-attr">IN</span> <span class="hljs-attr">AN</span> <span class="hljs-attr">ACTION</span> <span class="hljs-attr">OF</span> <span class="hljs-attr">CONTRACT</span>, <span class="hljs-attr">TORT</span> <span class="hljs-attr">OR</span>
// <span class="hljs-attr">OTHERWISE</span>, <span class="hljs-attr">ARISING</span> <span class="hljs-attr">FROM</span>, <span class="hljs-attr">OUT</span> <span class="hljs-attr">OF</span> <span class="hljs-attr">OR</span> <span class="hljs-attr">IN</span> <span class="hljs-attr">CONNECTION</span> <span class="hljs-attr">WITH</span> <span class="hljs-attr">THE</span> <span class="hljs-attr">SOFTWARE</span> <span class="hljs-attr">OR</span> <span class="hljs-attr">THE</span>
// <span class="hljs-attr">USE</span> <span class="hljs-attr">OR</span> <span class="hljs-attr">OTHER</span> <span class="hljs-attr">DEALINGS</span> <span class="hljs-attr">IN</span> <span class="hljs-attr">THE</span> <span class="hljs-attr">SOFTWARE.</span>



<span class="hljs-attr">var</span> <span class="hljs-attr">R</span> = <span class="hljs-string">typeof</span> <span class="hljs-attr">Reflect</span> === <span class="hljs-string">'object'</span> ? <span class="hljs-attr">Reflect</span> <span class="hljs-attr">:</span> <span class="hljs-attr">null</span>
<span class="hljs-attr">var</span> <span class="hljs-attr">ReflectApply</span> = <span class="hljs-string">R</span> &amp;&amp; <span class="hljs-attr">typeof</span> <span class="hljs-attr">R.apply</span> === <span class="hljs-string">'function'</span>
  ? <span class="hljs-attr">R.apply</span>
  <span class="hljs-attr">:</span> <span class="hljs-attr">function</span> <span class="hljs-attr">ReflectApply</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">receiver</span>, <span class="hljs-attr">args</span>) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">Function.prototype.apply.call</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">receiver</span>, <span class="hljs-attr">args</span>);
  }

<span class="hljs-attr">var</span> <span class="hljs-attr">ReflectOwnKeys</span>
<span class="hljs-attr">if</span> (<span class="hljs-attr">R</span> &amp;&amp; <span class="hljs-attr">typeof</span> <span class="hljs-attr">R.ownKeys</span> === <span class="hljs-string">'function'</span>) {
  <span class="hljs-attr">ReflectOwnKeys</span> = <span class="hljs-string">R.ownKeys</span>
} <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">Object.getOwnPropertySymbols</span>) {
  <span class="hljs-attr">ReflectOwnKeys</span> = <span class="hljs-string">function</span> <span class="hljs-attr">ReflectOwnKeys</span>(<span class="hljs-attr">target</span>) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">Object.getOwnPropertyNames</span>(<span class="hljs-attr">target</span>)
      <span class="hljs-attr">.concat</span>(<span class="hljs-attr">Object.getOwnPropertySymbols</span>(<span class="hljs-attr">target</span>));
  };
} <span class="hljs-attr">else</span> {
  <span class="hljs-attr">ReflectOwnKeys</span> = <span class="hljs-string">function</span> <span class="hljs-attr">ReflectOwnKeys</span>(<span class="hljs-attr">target</span>) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">Object.getOwnPropertyNames</span>(<span class="hljs-attr">target</span>);
  };
}

<span class="hljs-attr">function</span> <span class="hljs-attr">ProcessEmitWarning</span>(<span class="hljs-attr">warning</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">console</span> &amp;&amp; <span class="hljs-attr">console.warn</span>) <span class="hljs-attr">console.warn</span>(<span class="hljs-attr">warning</span>);
}

<span class="hljs-attr">var</span> <span class="hljs-attr">NumberIsNaN</span> = <span class="hljs-string">Number.isNaN</span> || <span class="hljs-attr">function</span> <span class="hljs-attr">NumberIsNaN</span>(<span class="hljs-attr">value</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">value</span> !== <span class="hljs-string">value;</span>
}

<span class="hljs-attr">function</span> <span class="hljs-attr">EventEmitter</span>() {
  <span class="hljs-attr">EventEmitter.init.call</span>(<span class="hljs-attr">this</span>);
}
<span class="hljs-attr">module.exports</span> = <span class="hljs-string">EventEmitter;</span>
<span class="hljs-attr">module.exports.once</span> = <span class="hljs-string">once;</span>

// <span class="hljs-attr">Backwards-compat</span> <span class="hljs-attr">with</span> <span class="hljs-attr">node</span> <span class="hljs-attr">0.10.x</span>
<span class="hljs-attr">EventEmitter.EventEmitter</span> = <span class="hljs-string">EventEmitter;</span>

<span class="hljs-attr">EventEmitter.prototype._events</span> = <span class="hljs-string">undefined;</span>
<span class="hljs-attr">EventEmitter.prototype._eventsCount</span> = <span class="hljs-string">0;</span>
<span class="hljs-attr">EventEmitter.prototype._maxListeners</span> = <span class="hljs-string">undefined;</span>

// <span class="hljs-attr">By</span> <span class="hljs-attr">default</span> <span class="hljs-attr">EventEmitters</span> <span class="hljs-attr">will</span> <span class="hljs-attr">print</span> <span class="hljs-attr">a</span> <span class="hljs-attr">warning</span> <span class="hljs-attr">if</span> <span class="hljs-attr">more</span> <span class="hljs-attr">than</span> <span class="hljs-attr">10</span> <span class="hljs-attr">listeners</span> <span class="hljs-attr">are</span>
// <span class="hljs-attr">added</span> <span class="hljs-attr">to</span> <span class="hljs-attr">it.</span> <span class="hljs-attr">This</span> <span class="hljs-attr">is</span> <span class="hljs-attr">a</span> <span class="hljs-attr">useful</span> <span class="hljs-attr">default</span> <span class="hljs-attr">which</span> <span class="hljs-attr">helps</span> <span class="hljs-attr">finding</span> <span class="hljs-attr">memory</span> <span class="hljs-attr">leaks.</span>
<span class="hljs-attr">var</span> <span class="hljs-attr">defaultMaxListeners</span> = <span class="hljs-string">10;</span>

<span class="hljs-attr">function</span> <span class="hljs-attr">checkListener</span>(<span class="hljs-attr">listener</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">listener</span> !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('<span class="hljs-attr">The</span> "<span class="hljs-attr">listener</span>" <span class="hljs-attr">argument</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">of</span> <span class="hljs-attr">type</span> <span class="hljs-attr">Function.</span> <span class="hljs-attr">Received</span> <span class="hljs-attr">type</span> ' + <span class="hljs-attr">typeof</span> <span class="hljs-attr">listener</span>);
  }
}

<span class="hljs-attr">Object.defineProperty</span>(<span class="hljs-attr">EventEmitter</span>, '<span class="hljs-attr">defaultMaxListeners</span>', {
  <span class="hljs-attr">enumerable:</span> <span class="hljs-attr">true</span>,
  <span class="hljs-attr">get:</span> <span class="hljs-attr">function</span>() {
    <span class="hljs-attr">return</span> <span class="hljs-attr">defaultMaxListeners</span>;
  },
  <span class="hljs-attr">set:</span> <span class="hljs-attr">function</span>(<span class="hljs-attr">arg</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">arg</span> !== <span class="hljs-string">'number'</span> || <span class="hljs-attr">arg</span> &lt; <span class="hljs-attr">0</span> || <span class="hljs-attr">NumberIsNaN</span>(<span class="hljs-attr">arg</span>)) {
      <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('<span class="hljs-attr">The</span> <span class="hljs-attr">value</span> <span class="hljs-attr">of</span> "<span class="hljs-attr">defaultMaxListeners</span>" <span class="hljs-attr">is</span> <span class="hljs-attr">out</span> <span class="hljs-attr">of</span> <span class="hljs-attr">range.</span> <span class="hljs-attr">It</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">a</span> <span class="hljs-attr">non-negative</span> <span class="hljs-attr">number.</span> <span class="hljs-attr">Received</span> ' + <span class="hljs-attr">arg</span> + '<span class="hljs-attr">.</span>');
    }
    <span class="hljs-attr">defaultMaxListeners</span> = <span class="hljs-string">arg;</span>
  }
});

<span class="hljs-attr">EventEmitter.init</span> = <span class="hljs-string">function()</span> {

  <span class="hljs-attr">if</span> (<span class="hljs-attr">this._events</span> === <span class="hljs-string">undefined</span> ||
      <span class="hljs-attr">this._events</span> === <span class="hljs-string">Object.getPrototypeOf(this)._events)</span> {
    <span class="hljs-attr">this._events</span> = <span class="hljs-string">Object.create(null);</span>
    <span class="hljs-attr">this._eventsCount</span> = <span class="hljs-string">0;</span>
  }

  <span class="hljs-attr">this._maxListeners</span> = <span class="hljs-string">this._maxListeners</span> || <span class="hljs-attr">undefined</span>;
};

// <span class="hljs-attr">Obviously</span> <span class="hljs-attr">not</span> <span class="hljs-attr">all</span> <span class="hljs-attr">Emitters</span> <span class="hljs-attr">should</span> <span class="hljs-attr">be</span> <span class="hljs-attr">limited</span> <span class="hljs-attr">to</span> <span class="hljs-attr">10.</span> <span class="hljs-attr">This</span> <span class="hljs-attr">function</span> <span class="hljs-attr">allows</span>
// <span class="hljs-attr">that</span> <span class="hljs-attr">to</span> <span class="hljs-attr">be</span> <span class="hljs-attr">increased.</span> <span class="hljs-attr">Set</span> <span class="hljs-attr">to</span> <span class="hljs-attr">zero</span> <span class="hljs-attr">for</span> <span class="hljs-attr">unlimited.</span>
<span class="hljs-attr">EventEmitter.prototype.setMaxListeners</span> = <span class="hljs-string">function</span> <span class="hljs-attr">setMaxListeners</span>(<span class="hljs-attr">n</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">n</span> !== <span class="hljs-string">'number'</span> || <span class="hljs-attr">n</span> &lt; <span class="hljs-attr">0</span> || <span class="hljs-attr">NumberIsNaN</span>(<span class="hljs-attr">n</span>)) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('<span class="hljs-attr">The</span> <span class="hljs-attr">value</span> <span class="hljs-attr">of</span> "<span class="hljs-attr">n</span>" <span class="hljs-attr">is</span> <span class="hljs-attr">out</span> <span class="hljs-attr">of</span> <span class="hljs-attr">range.</span> <span class="hljs-attr">It</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">a</span> <span class="hljs-attr">non-negative</span> <span class="hljs-attr">number.</span> <span class="hljs-attr">Received</span> ' + <span class="hljs-attr">n</span> + '<span class="hljs-attr">.</span>');
  }
  <span class="hljs-attr">this._maxListeners</span> = <span class="hljs-string">n;</span>
  <span class="hljs-attr">return</span> <span class="hljs-attr">this</span>;
};

<span class="hljs-attr">function</span> <span class="hljs-attr">_getMaxListeners</span>(<span class="hljs-attr">that</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">that._maxListeners</span> === <span class="hljs-string">undefined)</span>
    <span class="hljs-attr">return</span> <span class="hljs-attr">EventEmitter.defaultMaxListeners</span>;
  <span class="hljs-attr">return</span> <span class="hljs-attr">that._maxListeners</span>;
}

<span class="hljs-attr">EventEmitter.prototype.getMaxListeners</span> = <span class="hljs-string">function</span> <span class="hljs-attr">getMaxListeners</span>() {
  <span class="hljs-attr">return</span> <span class="hljs-attr">_getMaxListeners</span>(<span class="hljs-attr">this</span>);
};

<span class="hljs-attr">EventEmitter.prototype.emit</span> = <span class="hljs-string">function</span> <span class="hljs-attr">emit</span>(<span class="hljs-attr">type</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">args</span> = <span class="hljs-string">[];</span>
  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">1;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">arguments.length</span>; <span class="hljs-attr">i</span>++) <span class="hljs-attr">args.push</span>(<span class="hljs-attr">arguments</span>[<span class="hljs-attr">i</span>]);
  <span class="hljs-attr">var</span> <span class="hljs-attr">doError</span> = <span class="hljs-string">(type</span> === <span class="hljs-string">'error'</span>);

  <span class="hljs-attr">var</span> <span class="hljs-attr">events</span> = <span class="hljs-string">this._events;</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">events</span> !== <span class="hljs-string">undefined)</span>
    <span class="hljs-attr">doError</span> = <span class="hljs-string">(doError</span> &amp;&amp; <span class="hljs-attr">events.error</span> === <span class="hljs-string">undefined);</span>
  <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (!<span class="hljs-attr">doError</span>)
    <span class="hljs-attr">return</span> <span class="hljs-attr">false</span>;

  // <span class="hljs-attr">If</span> <span class="hljs-attr">there</span> <span class="hljs-attr">is</span> <span class="hljs-attr">no</span> '<span class="hljs-attr">error</span>' <span class="hljs-attr">event</span> <span class="hljs-attr">listener</span> <span class="hljs-attr">then</span> <span class="hljs-attr">throw.</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">doError</span>) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">er</span>;
    <span class="hljs-attr">if</span> (<span class="hljs-attr">args.length</span> &gt;</span> 0)
      er = args[0];
    if (er instanceof Error) {
      // Note: The comments on the `throw` lines are intentional, they show
      // up in Node's output if this results in an unhandled exception.
      throw er; // Unhandled 'error' event
    }
    // At least give some kind of context to the user
    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));
    err.context = er;
    throw err; // Unhandled 'error' event
  }

  var handler = events[type];

  if (handler === undefined)
    return false;

  if (typeof handler === 'function') {
    ReflectApply(handler, this, args);
  } else {
    var len = handler.length;
    var listeners = arrayClone(handler, len);
    for (var i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attr">len</span>; ++<span class="hljs-attr">i</span>)
      <span class="hljs-attr">ReflectApply</span>(<span class="hljs-attr">listeners</span>[<span class="hljs-attr">i</span>], <span class="hljs-attr">this</span>, <span class="hljs-attr">args</span>);
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">true</span>;
};

<span class="hljs-attr">function</span> <span class="hljs-attr">_addListener</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">type</span>, <span class="hljs-attr">listener</span>, <span class="hljs-attr">prepend</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">m</span>;
  <span class="hljs-attr">var</span> <span class="hljs-attr">events</span>;
  <span class="hljs-attr">var</span> <span class="hljs-attr">existing</span>;

  <span class="hljs-attr">checkListener</span>(<span class="hljs-attr">listener</span>);

  <span class="hljs-attr">events</span> = <span class="hljs-string">target._events;</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">events</span> === <span class="hljs-string">undefined)</span> {
    <span class="hljs-attr">events</span> = <span class="hljs-string">target._events</span> = <span class="hljs-string">Object.create(null);</span>
    <span class="hljs-attr">target._eventsCount</span> = <span class="hljs-string">0;</span>
  } <span class="hljs-attr">else</span> {
    // <span class="hljs-attr">To</span> <span class="hljs-attr">avoid</span> <span class="hljs-attr">recursion</span> <span class="hljs-attr">in</span> <span class="hljs-attr">the</span> <span class="hljs-attr">case</span> <span class="hljs-attr">that</span> <span class="hljs-attr">type</span> === <span class="hljs-string">"newListener"</span>! <span class="hljs-attr">Before</span>
    // <span class="hljs-attr">adding</span> <span class="hljs-attr">it</span> <span class="hljs-attr">to</span> <span class="hljs-attr">the</span> <span class="hljs-attr">listeners</span>, <span class="hljs-attr">first</span> <span class="hljs-attr">emit</span> "<span class="hljs-attr">newListener</span>"<span class="hljs-attr">.</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">events.newListener</span> !== <span class="hljs-string">undefined)</span> {
      <span class="hljs-attr">target.emit</span>('<span class="hljs-attr">newListener</span>', <span class="hljs-attr">type</span>,
                  <span class="hljs-attr">listener.listener</span> ? <span class="hljs-attr">listener.listener</span> <span class="hljs-attr">:</span> <span class="hljs-attr">listener</span>);

      // <span class="hljs-attr">Re-assign</span> `<span class="hljs-attr">events</span>` <span class="hljs-attr">because</span> <span class="hljs-attr">a</span> <span class="hljs-attr">newListener</span> <span class="hljs-attr">handler</span> <span class="hljs-attr">could</span> <span class="hljs-attr">have</span> <span class="hljs-attr">caused</span> <span class="hljs-attr">the</span>
      // <span class="hljs-attr">this._events</span> <span class="hljs-attr">to</span> <span class="hljs-attr">be</span> <span class="hljs-attr">assigned</span> <span class="hljs-attr">to</span> <span class="hljs-attr">a</span> <span class="hljs-attr">new</span> <span class="hljs-attr">object</span>
      <span class="hljs-attr">events</span> = <span class="hljs-string">target._events;</span>
    }
    <span class="hljs-attr">existing</span> = <span class="hljs-string">events[type];</span>
  }

  <span class="hljs-attr">if</span> (<span class="hljs-attr">existing</span> === <span class="hljs-string">undefined)</span> {
    // <span class="hljs-attr">Optimize</span> <span class="hljs-attr">the</span> <span class="hljs-attr">case</span> <span class="hljs-attr">of</span> <span class="hljs-attr">one</span> <span class="hljs-attr">listener.</span> <span class="hljs-attr">Don</span>'<span class="hljs-attr">t</span> <span class="hljs-attr">need</span> <span class="hljs-attr">the</span> <span class="hljs-attr">extra</span> <span class="hljs-attr">array</span> <span class="hljs-attr">object.</span>
    <span class="hljs-attr">existing</span> = <span class="hljs-string">events[type]</span> = <span class="hljs-string">listener;</span>
    ++<span class="hljs-attr">target._eventsCount</span>;
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">existing</span> === <span class="hljs-string">'function'</span>) {
      // <span class="hljs-attr">Adding</span> <span class="hljs-attr">the</span> <span class="hljs-attr">second</span> <span class="hljs-attr">element</span>, <span class="hljs-attr">need</span> <span class="hljs-attr">to</span> <span class="hljs-attr">change</span> <span class="hljs-attr">to</span> <span class="hljs-attr">array.</span>
      <span class="hljs-attr">existing</span> = <span class="hljs-string">events[type]</span> =
        <span class="hljs-string">prepend</span> ? [<span class="hljs-attr">listener</span>, <span class="hljs-attr">existing</span>] <span class="hljs-attr">:</span> [<span class="hljs-attr">existing</span>, <span class="hljs-attr">listener</span>];
      // <span class="hljs-attr">If</span> <span class="hljs-attr">we</span>'<span class="hljs-attr">ve</span> <span class="hljs-attr">already</span> <span class="hljs-attr">got</span> <span class="hljs-attr">an</span> <span class="hljs-attr">array</span>, <span class="hljs-attr">just</span> <span class="hljs-attr">append.</span>
    } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">prepend</span>) {
      <span class="hljs-attr">existing.unshift</span>(<span class="hljs-attr">listener</span>);
    } <span class="hljs-attr">else</span> {
      <span class="hljs-attr">existing.push</span>(<span class="hljs-attr">listener</span>);
    }

    // <span class="hljs-attr">Check</span> <span class="hljs-attr">for</span> <span class="hljs-attr">listener</span> <span class="hljs-attr">leak</span>
    <span class="hljs-attr">m</span> = <span class="hljs-string">_getMaxListeners(target);</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">m</span> &gt;</span> 0 &amp;&amp; existing.length &gt; m &amp;&amp; !existing.warned) {
      existing.warned = true;
      // No error code for this since it is a Warning
      // eslint-disable-next-line no-restricted-syntax
      var w = new Error('Possible EventEmitter memory leak detected. ' +
                          existing.length + ' ' + String(type) + ' listeners ' +
                          'added. Use emitter.setMaxListeners() to ' +
                          'increase limit');
      w.name = 'MaxListenersExceededWarning';
      w.emitter = target;
      w.type = type;
      w.count = existing.length;
      ProcessEmitWarning(w);
    }
  }

  return target;
}

EventEmitter.prototype.addListener = function addListener(type, listener) {
  return _addListener(this, type, listener, false);
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.prependListener =
    function prependListener(type, listener) {
      return _addListener(this, type, listener, true);
    };

function onceWrapper() {
  if (!this.fired) {
    this.target.removeListener(this.type, this.wrapFn);
    this.fired = true;
    if (arguments.length === 0)
      return this.listener.call(this.target);
    return this.listener.apply(this.target, arguments);
  }
}

function _onceWrap(target, type, listener) {
  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };
  var wrapped = onceWrapper.bind(state);
  wrapped.listener = listener;
  state.wrapFn = wrapped;
  return wrapped;
}

EventEmitter.prototype.once = function once(type, listener) {
  checkListener(listener);
  this.on(type, _onceWrap(this, type, listener));
  return this;
};

EventEmitter.prototype.prependOnceListener =
    function prependOnceListener(type, listener) {
      checkListener(listener);
      this.prependListener(type, _onceWrap(this, type, listener));
      return this;
    };

// Emits a 'removeListener' event if and only if the listener was removed.
EventEmitter.prototype.removeListener =
    function removeListener(type, listener) {
      var list, events, position, i, originalListener;

      checkListener(listener);

      events = this._events;
      if (events === undefined)
        return this;

      list = events[type];
      if (list === undefined)
        return this;

      if (list === listener || list.listener === listener) {
        if (--this._eventsCount === 0)
          this._events = Object.create(null);
        else {
          delete events[type];
          if (events.removeListener)
            this.emit('removeListener', type, list.listener || listener);
        }
      } else if (typeof list !== 'function') {
        position = -1;

        for (i = list.length - 1; i &gt;= 0; i--) {
          if (list[i] === listener || list[i].listener === listener) {
            originalListener = list[i].listener;
            position = i;
            break;
          }
        }

        if (position <span class="hljs-tag">&lt; <span class="hljs-attr">0</span>)
          <span class="hljs-attr">return</span> <span class="hljs-attr">this</span>;

        <span class="hljs-attr">if</span> (<span class="hljs-attr">position</span> === <span class="hljs-string">0)</span>
          <span class="hljs-attr">list.shift</span>();
        <span class="hljs-attr">else</span> {
          <span class="hljs-attr">spliceOne</span>(<span class="hljs-attr">list</span>, <span class="hljs-attr">position</span>);
        }

        <span class="hljs-attr">if</span> (<span class="hljs-attr">list.length</span> === <span class="hljs-string">1)</span>
          <span class="hljs-attr">events</span>[<span class="hljs-attr">type</span>] = <span class="hljs-string">list[0];</span>

        <span class="hljs-attr">if</span> (<span class="hljs-attr">events.removeListener</span> !== <span class="hljs-string">undefined)</span>
          <span class="hljs-attr">this.emit</span>('<span class="hljs-attr">removeListener</span>', <span class="hljs-attr">type</span>, <span class="hljs-attr">originalListener</span> || <span class="hljs-attr">listener</span>);
      }

      <span class="hljs-attr">return</span> <span class="hljs-attr">this</span>;
    };

<span class="hljs-attr">EventEmitter.prototype.off</span> = <span class="hljs-string">EventEmitter.prototype.removeListener;</span>

<span class="hljs-attr">EventEmitter.prototype.removeAllListeners</span> =
    <span class="hljs-string">function</span> <span class="hljs-attr">removeAllListeners</span>(<span class="hljs-attr">type</span>) {
      <span class="hljs-attr">var</span> <span class="hljs-attr">listeners</span>, <span class="hljs-attr">events</span>, <span class="hljs-attr">i</span>;

      <span class="hljs-attr">events</span> = <span class="hljs-string">this._events;</span>
      <span class="hljs-attr">if</span> (<span class="hljs-attr">events</span> === <span class="hljs-string">undefined)</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">this</span>;

      // <span class="hljs-attr">not</span> <span class="hljs-attr">listening</span> <span class="hljs-attr">for</span> <span class="hljs-attr">removeListener</span>, <span class="hljs-attr">no</span> <span class="hljs-attr">need</span> <span class="hljs-attr">to</span> <span class="hljs-attr">emit</span>
      <span class="hljs-attr">if</span> (<span class="hljs-attr">events.removeListener</span> === <span class="hljs-string">undefined)</span> {
        <span class="hljs-attr">if</span> (<span class="hljs-attr">arguments.length</span> === <span class="hljs-string">0)</span> {
          <span class="hljs-attr">this._events</span> = <span class="hljs-string">Object.create(null);</span>
          <span class="hljs-attr">this._eventsCount</span> = <span class="hljs-string">0;</span>
        } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">events</span>[<span class="hljs-attr">type</span>] !== <span class="hljs-string">undefined)</span> {
          <span class="hljs-attr">if</span> (<span class="hljs-attr">--this._eventsCount</span> === <span class="hljs-string">0)</span>
            <span class="hljs-attr">this._events</span> = <span class="hljs-string">Object.create(null);</span>
          <span class="hljs-attr">else</span>
            <span class="hljs-attr">delete</span> <span class="hljs-attr">events</span>[<span class="hljs-attr">type</span>];
        }
        <span class="hljs-attr">return</span> <span class="hljs-attr">this</span>;
      }

      // <span class="hljs-attr">emit</span> <span class="hljs-attr">removeListener</span> <span class="hljs-attr">for</span> <span class="hljs-attr">all</span> <span class="hljs-attr">listeners</span> <span class="hljs-attr">on</span> <span class="hljs-attr">all</span> <span class="hljs-attr">events</span>
      <span class="hljs-attr">if</span> (<span class="hljs-attr">arguments.length</span> === <span class="hljs-string">0)</span> {
        <span class="hljs-attr">var</span> <span class="hljs-attr">keys</span> = <span class="hljs-string">Object.keys(events);</span>
        <span class="hljs-attr">var</span> <span class="hljs-attr">key</span>;
        <span class="hljs-attr">for</span> (<span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">keys.length</span>; ++<span class="hljs-attr">i</span>) {
          <span class="hljs-attr">key</span> = <span class="hljs-string">keys[i];</span>
          <span class="hljs-attr">if</span> (<span class="hljs-attr">key</span> === <span class="hljs-string">'removeListener'</span>) <span class="hljs-attr">continue</span>;
          <span class="hljs-attr">this.removeAllListeners</span>(<span class="hljs-attr">key</span>);
        }
        <span class="hljs-attr">this.removeAllListeners</span>('<span class="hljs-attr">removeListener</span>');
        <span class="hljs-attr">this._events</span> = <span class="hljs-string">Object.create(null);</span>
        <span class="hljs-attr">this._eventsCount</span> = <span class="hljs-string">0;</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">this</span>;
      }

      <span class="hljs-attr">listeners</span> = <span class="hljs-string">events[type];</span>

      <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">listeners</span> === <span class="hljs-string">'function'</span>) {
        <span class="hljs-attr">this.removeListener</span>(<span class="hljs-attr">type</span>, <span class="hljs-attr">listeners</span>);
      } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">listeners</span> !== <span class="hljs-string">undefined)</span> {
        // <span class="hljs-attr">LIFO</span> <span class="hljs-attr">order</span>
        <span class="hljs-attr">for</span> (<span class="hljs-attr">i</span> = <span class="hljs-string">listeners.length</span> <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>; <span class="hljs-attr">i</span> &gt;</span>= 0; i--) {
          this.removeListener(type, listeners[i]);
        }
      }

      return this;
    };

function _listeners(target, type, unwrap) {
  var events = target._events;

  if (events === undefined)
    return [];

  var evlistener = events[type];
  if (evlistener === undefined)
    return [];

  if (typeof evlistener === 'function')
    return unwrap ? [evlistener.listener || evlistener] : [evlistener];

  return unwrap ?
    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);
}

EventEmitter.prototype.listeners = function listeners(type) {
  return _listeners(this, type, true);
};

EventEmitter.prototype.rawListeners = function rawListeners(type) {
  return _listeners(this, type, false);
};

EventEmitter.listenerCount = function(emitter, type) {
  if (typeof emitter.listenerCount === 'function') {
    return emitter.listenerCount(type);
  } else {
    return listenerCount.call(emitter, type);
  }
};

EventEmitter.prototype.listenerCount = listenerCount;
function listenerCount(type) {
  var events = this._events;

  if (events !== undefined) {
    var evlistener = events[type];

    if (typeof evlistener === 'function') {
      return 1;
    } else if (evlistener !== undefined) {
      return evlistener.length;
    }
  }

  return 0;
}

EventEmitter.prototype.eventNames = function eventNames() {
  return this._eventsCount &gt; 0 ? ReflectOwnKeys(this._events) : [];
};

function arrayClone(arr, n) {
  var copy = new Array(n);
  for (var i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attr">n</span>; ++<span class="hljs-attr">i</span>)
    <span class="hljs-attr">copy</span>[<span class="hljs-attr">i</span>] = <span class="hljs-string">arr[i];</span>
  <span class="hljs-attr">return</span> <span class="hljs-attr">copy</span>;
}

<span class="hljs-attr">function</span> <span class="hljs-attr">spliceOne</span>(<span class="hljs-attr">list</span>, <span class="hljs-attr">index</span>) {
  <span class="hljs-attr">for</span> (; <span class="hljs-attr">index</span> + <span class="hljs-attr">1</span> &lt; <span class="hljs-attr">list.length</span>; <span class="hljs-attr">index</span>++)
    <span class="hljs-attr">list</span>[<span class="hljs-attr">index</span>] = <span class="hljs-string">list[index</span> + <span class="hljs-attr">1</span>];
  <span class="hljs-attr">list.pop</span>();
}

<span class="hljs-attr">function</span> <span class="hljs-attr">unwrapListeners</span>(<span class="hljs-attr">arr</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">ret</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Array</span>(<span class="hljs-attr">arr.length</span>);
  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">ret.length</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">ret</span>[<span class="hljs-attr">i</span>] = <span class="hljs-string">arr[i].listener</span> || <span class="hljs-attr">arr</span>[<span class="hljs-attr">i</span>];
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">ret</span>;
}

<span class="hljs-attr">function</span> <span class="hljs-attr">once</span>(<span class="hljs-attr">emitter</span>, <span class="hljs-attr">name</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Promise</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">resolve</span>, <span class="hljs-attr">reject</span>) {
    <span class="hljs-attr">function</span> <span class="hljs-attr">eventListener</span>() {
      <span class="hljs-attr">if</span> (<span class="hljs-attr">errorListener</span> !== <span class="hljs-string">undefined)</span> {
        <span class="hljs-attr">emitter.removeListener</span>('<span class="hljs-attr">error</span>', <span class="hljs-attr">errorListener</span>);
      }
      <span class="hljs-attr">resolve</span>([]<span class="hljs-attr">.slice.call</span>(<span class="hljs-attr">arguments</span>));
    };
    <span class="hljs-attr">var</span> <span class="hljs-attr">errorListener</span>;

    // <span class="hljs-attr">Adding</span> <span class="hljs-attr">an</span> <span class="hljs-attr">error</span> <span class="hljs-attr">listener</span> <span class="hljs-attr">is</span> <span class="hljs-attr">not</span> <span class="hljs-attr">optional</span> <span class="hljs-attr">because</span>
    // <span class="hljs-attr">if</span> <span class="hljs-attr">an</span> <span class="hljs-attr">error</span> <span class="hljs-attr">is</span> <span class="hljs-attr">thrown</span> <span class="hljs-attr">on</span> <span class="hljs-attr">an</span> <span class="hljs-attr">event</span> <span class="hljs-attr">emitter</span> <span class="hljs-attr">we</span> <span class="hljs-attr">cannot</span>
    // <span class="hljs-attr">guarantee</span> <span class="hljs-attr">that</span> <span class="hljs-attr">the</span> <span class="hljs-attr">actual</span> <span class="hljs-attr">event</span> <span class="hljs-attr">we</span> <span class="hljs-attr">are</span> <span class="hljs-attr">waiting</span> <span class="hljs-attr">will</span>
    // <span class="hljs-attr">be</span> <span class="hljs-attr">fired.</span> <span class="hljs-attr">The</span> <span class="hljs-attr">result</span> <span class="hljs-attr">could</span> <span class="hljs-attr">be</span> <span class="hljs-attr">a</span> <span class="hljs-attr">silent</span> <span class="hljs-attr">way</span> <span class="hljs-attr">to</span> <span class="hljs-attr">create</span>
    // <span class="hljs-attr">memory</span> <span class="hljs-attr">or</span> <span class="hljs-attr">file</span> <span class="hljs-attr">descriptor</span> <span class="hljs-attr">leaks</span>, <span class="hljs-attr">which</span> <span class="hljs-attr">is</span> <span class="hljs-attr">something</span>
    // <span class="hljs-attr">we</span> <span class="hljs-attr">should</span> <span class="hljs-attr">avoid.</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">name</span> !== <span class="hljs-string">'error'</span>) {
      <span class="hljs-attr">errorListener</span> = <span class="hljs-string">function</span> <span class="hljs-attr">errorListener</span>(<span class="hljs-attr">err</span>) {
        <span class="hljs-attr">emitter.removeListener</span>(<span class="hljs-attr">name</span>, <span class="hljs-attr">eventListener</span>);
        <span class="hljs-attr">reject</span>(<span class="hljs-attr">err</span>);
      };

      <span class="hljs-attr">emitter.once</span>('<span class="hljs-attr">error</span>', <span class="hljs-attr">errorListener</span>);
    }

    <span class="hljs-attr">emitter.once</span>(<span class="hljs-attr">name</span>, <span class="hljs-attr">eventListener</span>);
  });
}


/***/ }),
/* <span class="hljs-attr">11</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">__webpack_exports__</span>, <span class="hljs-attr">__webpack_require__</span>) {

"<span class="hljs-attr">use</span> <span class="hljs-attr">strict</span>";
<span class="hljs-attr">__webpack_require__.r</span>(<span class="hljs-attr">__webpack_exports__</span>);
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">export</span> (<span class="hljs-attr">binding</span>) */ <span class="hljs-attr">__webpack_require__.d</span>(<span class="hljs-attr">__webpack_exports__</span>, "<span class="hljs-attr">authnFetch</span>", <span class="hljs-attr">function</span>() { <span class="hljs-attr">return</span> <span class="hljs-attr">authnFetch</span>; });
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__</span> = <span class="hljs-string">__webpack_require__(1);</span>
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span> = <span class="hljs-string">/*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);</span>
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1__</span> = <span class="hljs-string">__webpack_require__(12);</span>
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1___default</span> = <span class="hljs-string">/*#__PURE__*/__webpack_require__.n(isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1__);</span>
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">_url_util__WEBPACK_IMPORTED_MODULE_2__</span> = <span class="hljs-string">__webpack_require__(13);</span>
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">_host__WEBPACK_IMPORTED_MODULE_3__</span> = <span class="hljs-string">__webpack_require__(14);</span>
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">_session__WEBPACK_IMPORTED_MODULE_4__</span> = <span class="hljs-string">__webpack_require__(15);</span>
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">_webid_oidc__WEBPACK_IMPORTED_MODULE_5__</span> = <span class="hljs-string">__webpack_require__(16);</span>


<span class="hljs-attr">function</span> <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">object</span>, <span class="hljs-attr">enumerableOnly</span>) { <span class="hljs-attr">var</span> <span class="hljs-attr">keys</span> = <span class="hljs-string">Object.keys(object);</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">Object.getOwnPropertySymbols</span>) { <span class="hljs-attr">var</span> <span class="hljs-attr">symbols</span> = <span class="hljs-string">Object.getOwnPropertySymbols(object);</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">enumerableOnly</span>) <span class="hljs-attr">symbols</span> = <span class="hljs-string">symbols.filter(function</span> (<span class="hljs-attr">sym</span>) { <span class="hljs-attr">return</span> <span class="hljs-attr">Object.getOwnPropertyDescriptor</span>(<span class="hljs-attr">object</span>, <span class="hljs-attr">sym</span>)<span class="hljs-attr">.enumerable</span>; }); <span class="hljs-attr">keys.push.apply</span>(<span class="hljs-attr">keys</span>, <span class="hljs-attr">symbols</span>); } <span class="hljs-attr">return</span> <span class="hljs-attr">keys</span>; }

<span class="hljs-attr">function</span> <span class="hljs-attr">_objectSpread</span>(<span class="hljs-attr">target</span>) { <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">1;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">arguments.length</span>; <span class="hljs-attr">i</span>++) { <span class="hljs-attr">var</span> <span class="hljs-attr">source</span> = <span class="hljs-string">arguments[i]</span> != <span class="hljs-string">null</span> ? <span class="hljs-attr">arguments</span>[<span class="hljs-attr">i</span>] <span class="hljs-attr">:</span> {}; <span class="hljs-attr">if</span> (<span class="hljs-attr">i</span> % <span class="hljs-attr">2</span>) { <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">source</span>), <span class="hljs-attr">true</span>)<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) { <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span>()(<span class="hljs-attr">target</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">source</span>[<span class="hljs-attr">key</span>]); }); } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">Object.getOwnPropertyDescriptors</span>) { <span class="hljs-attr">Object.defineProperties</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">Object.getOwnPropertyDescriptors</span>(<span class="hljs-attr">source</span>)); } <span class="hljs-attr">else</span> { <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">source</span>))<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) { <span class="hljs-attr">Object.defineProperty</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">Object.getOwnPropertyDescriptor</span>(<span class="hljs-attr">source</span>, <span class="hljs-attr">key</span>)); }); } } <span class="hljs-attr">return</span> <span class="hljs-attr">target</span>; }






<span class="hljs-attr">async</span> <span class="hljs-attr">function</span> <span class="hljs-attr">authnFetch</span>(<span class="hljs-attr">storage</span>, <span class="hljs-attr">fetch</span>, <span class="hljs-attr">input</span>, <span class="hljs-attr">options</span>) {
  // <span class="hljs-attr">Copy</span> <span class="hljs-attr">headers</span> <span class="hljs-attr">into</span> <span class="hljs-attr">a</span> <span class="hljs-attr">modifiable</span> <span class="hljs-attr">object</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">options</span>) {
    <span class="hljs-attr">const</span> <span class="hljs-attr">headers</span> = <span class="hljs-string">copyHeaders(options.headers);</span>
    <span class="hljs-attr">options</span> = <span class="hljs-string">_objectSpread(_objectSpread({},</span> <span class="hljs-attr">options</span>), {}, {
      <span class="hljs-attr">headers</span>
    });
  } // <span class="hljs-attr">If</span> <span class="hljs-attr">not</span> <span class="hljs-attr">authenticated</span>, <span class="hljs-attr">perform</span> <span class="hljs-attr">a</span> <span class="hljs-attr">regular</span> <span class="hljs-attr">fetch</span>


  <span class="hljs-attr">const</span> <span class="hljs-attr">session</span> = <span class="hljs-string">await</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_session__WEBPACK_IMPORTED_MODULE_4__</span>["<span class="hljs-attr">getSession</span>"])(<span class="hljs-attr">storage</span>);

  <span class="hljs-attr">if</span> (!<span class="hljs-attr">session</span>) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">fetch</span>(<span class="hljs-attr">input</span>, <span class="hljs-attr">options</span>);
  } // <span class="hljs-attr">If</span> <span class="hljs-attr">we</span> <span class="hljs-attr">know</span> <span class="hljs-attr">the</span> <span class="hljs-attr">server</span> <span class="hljs-attr">expects</span> <span class="hljs-attr">credentials</span>, <span class="hljs-attr">send</span> <span class="hljs-attr">them</span>


  <span class="hljs-attr">if</span> (<span class="hljs-attr">await</span> <span class="hljs-attr">shouldShareCredentials</span>(<span class="hljs-attr">storage</span>, <span class="hljs-attr">input</span>)) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_webid_oidc__WEBPACK_IMPORTED_MODULE_5__</span>["<span class="hljs-attr">fetchWithCredentials</span>"])(<span class="hljs-attr">session</span>, <span class="hljs-attr">fetch</span>, <span class="hljs-attr">input</span>, <span class="hljs-attr">options</span>);
  } // <span class="hljs-attr">If</span> <span class="hljs-attr">we</span> <span class="hljs-attr">don</span>'<span class="hljs-attr">t</span> <span class="hljs-attr">know</span> <span class="hljs-attr">for</span> <span class="hljs-attr">sure</span>, <span class="hljs-attr">try</span> <span class="hljs-attr">a</span> <span class="hljs-attr">regular</span> <span class="hljs-attr">fetch</span> <span class="hljs-attr">first</span>


  <span class="hljs-attr">let</span> <span class="hljs-attr">resp</span> = <span class="hljs-string">await</span> <span class="hljs-attr">fetch</span>(<span class="hljs-attr">input</span>, <span class="hljs-attr">options</span>); // <span class="hljs-attr">If</span> <span class="hljs-attr">the</span> <span class="hljs-attr">server</span> <span class="hljs-attr">then</span> <span class="hljs-attr">requests</span> <span class="hljs-attr">credentials</span>, <span class="hljs-attr">send</span> <span class="hljs-attr">them</span>

  <span class="hljs-attr">if</span> (<span class="hljs-attr">resp.status</span> === <span class="hljs-string">401)</span> {
    <span class="hljs-attr">await</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_host__WEBPACK_IMPORTED_MODULE_3__</span>["<span class="hljs-attr">updateHostFromResponse</span>"])(<span class="hljs-attr">storage</span>)(<span class="hljs-attr">resp</span>);

    <span class="hljs-attr">if</span> (<span class="hljs-attr">await</span> <span class="hljs-attr">shouldShareCredentials</span>(<span class="hljs-attr">storage</span>, <span class="hljs-attr">input</span>)) {
      <span class="hljs-attr">resp</span> = <span class="hljs-string">Object(_webid_oidc__WEBPACK_IMPORTED_MODULE_5__[</span>"<span class="hljs-attr">fetchWithCredentials</span>"])(<span class="hljs-attr">session</span>, <span class="hljs-attr">fetch</span>, <span class="hljs-attr">input</span>, <span class="hljs-attr">options</span>);
    }
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">resp</span>;
}

<span class="hljs-attr">async</span> <span class="hljs-attr">function</span> <span class="hljs-attr">shouldShareCredentials</span>(<span class="hljs-attr">storage</span>, <span class="hljs-attr">input</span>) {
  <span class="hljs-attr">const</span> <span class="hljs-attr">requestHost</span> = <span class="hljs-string">await</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_host__WEBPACK_IMPORTED_MODULE_3__</span>["<span class="hljs-attr">getHost</span>"])(<span class="hljs-attr">storage</span>)(<span class="hljs-attr">Object</span>(<span class="hljs-attr">_url_util__WEBPACK_IMPORTED_MODULE_2__</span>["<span class="hljs-attr">toUrlString</span>"])(<span class="hljs-attr">input</span>));
  <span class="hljs-attr">return</span> <span class="hljs-attr">requestHost</span> != <span class="hljs-string">null</span> &amp;&amp; <span class="hljs-attr">requestHost.requiresAuth</span>;
}

<span class="hljs-attr">function</span> <span class="hljs-attr">copyHeaders</span>(<span class="hljs-attr">origHeaders</span>) {
  <span class="hljs-attr">const</span> <span class="hljs-attr">headers</span> = <span class="hljs-string">{};</span>

  <span class="hljs-attr">if</span> (<span class="hljs-attr">origHeaders</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">origHeaders.forEach</span> === <span class="hljs-string">'function'</span>) {
      <span class="hljs-attr">origHeaders.forEach</span>((<span class="hljs-attr">value</span>, <span class="hljs-attr">key</span>) =&gt;</span> {
        headers[key] = value;
      });
    } else {
      for (const key in origHeaders) {
        headers[key] = origHeaders[key];
      }
    }
  }

  return headers;
}

/***/ }),
/* 12 */
/***/ (function(module, exports) {

module.exports = fetch;

/***/ }),
/* 13 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "currentUrl", function() { return currentUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "currentUrlNoParams", function() { return currentUrlNoParams; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "navigateTo", function() { return navigateTo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "originOf", function() { return originOf; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toUrlString", function() { return toUrlString; });
/* eslint-env browser */
function getLocation() {
  return typeof window !== 'undefined' ? window.location : {
    href: 'https://example.org/',
    pathname: '/',
    origin: 'example.org'
  };
}

const currentUrl = () =&gt; getLocation().href;
const currentUrlNoParams = () =&gt; getLocation().origin + getLocation().pathname;
const navigateTo = url =&gt; {
  getLocation().href = url;
};
const originOf = url =&gt; new URL(url).origin;
const toUrlString = url =&gt; {
  if (typeof url !== 'string') {
    url = 'url' in url ? url.url : url.toString();
  }

  return new URL(url, currentUrl()).toString();
};

/***/ }),
/* 14 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getHost", function() { return getHost; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "saveHost", function() { return saveHost; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateHostFromResponse", function() { return updateHostFromResponse; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _session__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(15);
/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6);
/* harmony import */ var _webid_oidc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i <span class="hljs-tag">&lt; <span class="hljs-attr">arguments.length</span>; <span class="hljs-attr">i</span>++) { <span class="hljs-attr">var</span> <span class="hljs-attr">source</span> = <span class="hljs-string">arguments[i]</span> != <span class="hljs-string">null</span> ? <span class="hljs-attr">arguments</span>[<span class="hljs-attr">i</span>] <span class="hljs-attr">:</span> {}; <span class="hljs-attr">if</span> (<span class="hljs-attr">i</span> % <span class="hljs-attr">2</span>) { <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">source</span>), <span class="hljs-attr">true</span>)<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) { <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span>()(<span class="hljs-attr">target</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">source</span>[<span class="hljs-attr">key</span>]); }); } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">Object.getOwnPropertyDescriptors</span>) { <span class="hljs-attr">Object.defineProperties</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">Object.getOwnPropertyDescriptors</span>(<span class="hljs-attr">source</span>)); } <span class="hljs-attr">else</span> { <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">source</span>))<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) { <span class="hljs-attr">Object.defineProperty</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">Object.getOwnPropertyDescriptor</span>(<span class="hljs-attr">source</span>, <span class="hljs-attr">key</span>)); }); } } <span class="hljs-attr">return</span> <span class="hljs-attr">target</span>; }

/* <span class="hljs-attr">globalRequest</span>, <span class="hljs-attr">Response</span>, <span class="hljs-attr">URL</span> */



<span class="hljs-attr">function</span> <span class="hljs-attr">getHost</span>(<span class="hljs-attr">storage</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">async</span> <span class="hljs-attr">url</span> =&gt;</span> {
    const {
      host
    } = new URL(url);
    const session = await Object(_session__WEBPACK_IMPORTED_MODULE_1__["getSession"])(storage);

    if (session &amp;&amp; host === new URL(session.idp).host) {
      return {
        url: host,
        requiresAuth: true
      };
    }

    const {
      hosts
    } = await Object(_storage__WEBPACK_IMPORTED_MODULE_2__["getData"])(storage);
    return hosts &amp;&amp; hosts[host];
  };
}
function saveHost(storage) {
  return async ({
    url,
    requiresAuth
  }) =&gt; {
    await Object(_storage__WEBPACK_IMPORTED_MODULE_2__["updateStorage"])(storage, data =&gt; _objectSpread(_objectSpread({}, data), {}, {
      hosts: _objectSpread(_objectSpread({}, data.hosts), {}, {
        [url]: {
          requiresAuth
        }
      })
    }));
  };
}
function updateHostFromResponse(storage) {
  return async resp =&gt; {
    if (_webid_oidc__WEBPACK_IMPORTED_MODULE_3__["requiresAuth"](resp)) {
      const {
        host
      } = new URL(resp.url);
      await saveHost(storage)({
        url: host,
        requiresAuth: true
      });
    }
  };
}

/***/ }),
/* 15 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSession", function() { return getSession; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "saveSession", function() { return saveSession; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clearSession", function() { return clearSession; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i <span class="hljs-tag">&lt; <span class="hljs-attr">arguments.length</span>; <span class="hljs-attr">i</span>++) { <span class="hljs-attr">var</span> <span class="hljs-attr">source</span> = <span class="hljs-string">arguments[i]</span> != <span class="hljs-string">null</span> ? <span class="hljs-attr">arguments</span>[<span class="hljs-attr">i</span>] <span class="hljs-attr">:</span> {}; <span class="hljs-attr">if</span> (<span class="hljs-attr">i</span> % <span class="hljs-attr">2</span>) { <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">source</span>), <span class="hljs-attr">true</span>)<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) { <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span>()(<span class="hljs-attr">target</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">source</span>[<span class="hljs-attr">key</span>]); }); } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">Object.getOwnPropertyDescriptors</span>) { <span class="hljs-attr">Object.defineProperties</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">Object.getOwnPropertyDescriptors</span>(<span class="hljs-attr">source</span>)); } <span class="hljs-attr">else</span> { <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">source</span>))<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) { <span class="hljs-attr">Object.defineProperty</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">Object.getOwnPropertyDescriptor</span>(<span class="hljs-attr">source</span>, <span class="hljs-attr">key</span>)); }); } } <span class="hljs-attr">return</span> <span class="hljs-attr">target</span>; }


<span class="hljs-attr">async</span> <span class="hljs-attr">function</span> <span class="hljs-attr">getSession</span>(<span class="hljs-attr">storage</span>) {
  <span class="hljs-attr">const</span> <span class="hljs-attr">data</span> = <span class="hljs-string">await</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_storage__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">getData</span>"])(<span class="hljs-attr">storage</span>);
  <span class="hljs-attr">return</span> <span class="hljs-attr">data.session</span> || <span class="hljs-attr">null</span>;
}
<span class="hljs-attr">function</span> <span class="hljs-attr">saveSession</span>(<span class="hljs-attr">storage</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">async</span> <span class="hljs-attr">session</span> =&gt;</span> {
    const data = await Object(_storage__WEBPACK_IMPORTED_MODULE_1__["updateStorage"])(storage, data =&gt; _objectSpread(_objectSpread({}, data), {}, {
      session
    }));
    return data.session;
  };
}
async function clearSession(storage) {
  await Object(_storage__WEBPACK_IMPORTED_MODULE_1__["updateStorage"])(storage, data =&gt; _objectSpread(_objectSpread({}, data), {}, {
    session: null
  }));
}

/***/ }),
/* 16 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "login", function() { return login; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "currentSession", function() { return currentSession; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "logout", function() { return logout; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRegisteredRp", function() { return getRegisteredRp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "requiresAuth", function() { return requiresAuth; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fetchWithCredentials", function() { return fetchWithCredentials; });
/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17);
/* harmony import */ var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var auth_header__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(19);
/* harmony import */ var auth_header__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(auth_header__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(23);
/* harmony import */ var _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _solid_oidc_rp_src_PoPToken__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(66);
/* harmony import */ var _solid_oidc_rp_src_PoPToken__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_solid_oidc_rp_src_PoPToken__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _url_util__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13);
/* harmony import */ var _storage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(6);



function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i <span class="hljs-tag">&lt; <span class="hljs-attr">arguments.length</span>; <span class="hljs-attr">i</span>++) { <span class="hljs-attr">var</span> <span class="hljs-attr">source</span> = <span class="hljs-string">arguments[i]</span> != <span class="hljs-string">null</span> ? <span class="hljs-attr">arguments</span>[<span class="hljs-attr">i</span>] <span class="hljs-attr">:</span> {}; <span class="hljs-attr">if</span> (<span class="hljs-attr">i</span> % <span class="hljs-attr">2</span>) { <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">source</span>), <span class="hljs-attr">true</span>)<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) { <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default</span>()(<span class="hljs-attr">target</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">source</span>[<span class="hljs-attr">key</span>]); }); } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">Object.getOwnPropertyDescriptors</span>) { <span class="hljs-attr">Object.defineProperties</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">Object.getOwnPropertyDescriptors</span>(<span class="hljs-attr">source</span>)); } <span class="hljs-attr">else</span> { <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">source</span>))<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) { <span class="hljs-attr">Object.defineProperty</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">Object.getOwnPropertyDescriptor</span>(<span class="hljs-attr">source</span>, <span class="hljs-attr">key</span>)); }); } } <span class="hljs-attr">return</span> <span class="hljs-attr">target</span>; }

/* <span class="hljs-attr">global</span> <span class="hljs-attr">Response</span> */





<span class="hljs-attr">async</span> <span class="hljs-attr">function</span> <span class="hljs-attr">login</span>(<span class="hljs-attr">idp</span>, <span class="hljs-attr">options</span>) {
  <span class="hljs-attr">try</span> {
    <span class="hljs-attr">const</span> <span class="hljs-attr">rp</span> = <span class="hljs-string">await</span> <span class="hljs-attr">getRegisteredRp</span>(<span class="hljs-attr">idp</span>, <span class="hljs-attr">options</span>);
    <span class="hljs-attr">await</span> <span class="hljs-attr">saveAppHashFragment</span>(<span class="hljs-attr">options.storage</span>);
    <span class="hljs-attr">return</span> <span class="hljs-attr">sendAuthRequest</span>(<span class="hljs-attr">rp</span>, <span class="hljs-attr">options</span>);
  } <span class="hljs-attr">catch</span> (<span class="hljs-attr">err</span>) {
    <span class="hljs-attr">console.warn</span>('<span class="hljs-attr">Error</span> <span class="hljs-attr">logging</span> <span class="hljs-attr">in</span> <span class="hljs-attr">with</span> <span class="hljs-attr">WebID-OIDC</span>');
    <span class="hljs-attr">console.error</span>(<span class="hljs-attr">err</span>);
    <span class="hljs-attr">return</span> <span class="hljs-attr">null</span>;
  }
}
<span class="hljs-attr">async</span> <span class="hljs-attr">function</span> <span class="hljs-attr">currentSession</span>(<span class="hljs-attr">storage</span> = <span class="hljs-string">Object(_storage__WEBPACK_IMPORTED_MODULE_6__[</span>"<span class="hljs-attr">defaultStorage</span>"])()) {
  <span class="hljs-attr">try</span> {
    // <span class="hljs-attr">Obtain</span> <span class="hljs-attr">the</span> <span class="hljs-attr">Relying</span> <span class="hljs-attr">Party</span>
    <span class="hljs-attr">const</span> <span class="hljs-attr">rp</span> = <span class="hljs-string">await</span> <span class="hljs-attr">getStoredRp</span>(<span class="hljs-attr">storage</span>);

    <span class="hljs-attr">if</span> (!<span class="hljs-attr">rp</span>) {
      <span class="hljs-attr">return</span> <span class="hljs-attr">null</span>;
    } // <span class="hljs-attr">Obtain</span> <span class="hljs-attr">and</span> <span class="hljs-attr">clear</span> <span class="hljs-attr">the</span> <span class="hljs-attr">OIDC</span> <span class="hljs-attr">URL</span> <span class="hljs-attr">fragment</span>


    <span class="hljs-attr">const</span> <span class="hljs-attr">url</span> = <span class="hljs-string">Object(_url_util__WEBPACK_IMPORTED_MODULE_5__[</span>"<span class="hljs-attr">currentUrl</span>"])();

    <span class="hljs-attr">if</span> (!/#(<span class="hljs-attr">.</span>*&amp;)?<span class="hljs-attr">access_token</span>=<span class="hljs-string">/.test(url))</span> {
      <span class="hljs-attr">return</span> <span class="hljs-attr">null</span>;
    }

    <span class="hljs-attr">window.location.hash</span> = <span class="hljs-string">''</span>;
    <span class="hljs-attr">await</span> <span class="hljs-attr">restoreAppHashFragment</span>(<span class="hljs-attr">storage</span>); // <span class="hljs-attr">Obtain</span> <span class="hljs-attr">a</span> <span class="hljs-attr">session</span> <span class="hljs-attr">from</span> <span class="hljs-attr">the</span> <span class="hljs-attr">Relying</span> <span class="hljs-attr">Party</span>

    <span class="hljs-attr">const</span> <span class="hljs-attr">storeData</span> = <span class="hljs-string">await</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_storage__WEBPACK_IMPORTED_MODULE_6__</span>["<span class="hljs-attr">getData</span>"])(<span class="hljs-attr">storage</span>);
    <span class="hljs-attr">const</span> <span class="hljs-attr">session</span> = <span class="hljs-string">await</span> <span class="hljs-attr">rp.validateResponse</span>(<span class="hljs-attr">url</span>, <span class="hljs-attr">storeData</span>);

    <span class="hljs-attr">if</span> (!<span class="hljs-attr">session</span>) {
      <span class="hljs-attr">return</span> <span class="hljs-attr">null</span>;
    }

    <span class="hljs-attr">return</span> <span class="hljs-attr">_objectSpread</span>(<span class="hljs-attr">_objectSpread</span>({}, <span class="hljs-attr">session</span>), {}, {
      <span class="hljs-attr">webId:</span> <span class="hljs-attr">session.idClaims.sub</span>,
      <span class="hljs-attr">idp:</span> <span class="hljs-attr">session.issuer</span>
    });
  } <span class="hljs-attr">catch</span> (<span class="hljs-attr">err</span>) {
    <span class="hljs-attr">console.warn</span>('<span class="hljs-attr">Error</span> <span class="hljs-attr">finding</span> <span class="hljs-attr">a</span> <span class="hljs-attr">WebID-OIDC</span> <span class="hljs-attr">session</span>');
    <span class="hljs-attr">console.error</span>(<span class="hljs-attr">err</span>);
    <span class="hljs-attr">return</span> <span class="hljs-attr">null</span>;
  }
}
<span class="hljs-attr">async</span> <span class="hljs-attr">function</span> <span class="hljs-attr">logout</span>(<span class="hljs-attr">storage</span>, <span class="hljs-attr">fetch</span>) {
  <span class="hljs-attr">const</span> <span class="hljs-attr">rp</span> = <span class="hljs-string">await</span> <span class="hljs-attr">getStoredRp</span>(<span class="hljs-attr">storage</span>);

  <span class="hljs-attr">if</span> (<span class="hljs-attr">rp</span>) {
    <span class="hljs-attr">try</span> {
      // <span class="hljs-attr">First</span> <span class="hljs-attr">log</span> <span class="hljs-attr">out</span> <span class="hljs-attr">from</span> <span class="hljs-attr">the</span> <span class="hljs-attr">IDP</span>
      <span class="hljs-attr">await</span> <span class="hljs-attr">rp.logout</span>(); // <span class="hljs-attr">Then</span>, <span class="hljs-attr">log</span> <span class="hljs-attr">out</span> <span class="hljs-attr">from</span> <span class="hljs-attr">the</span> <span class="hljs-attr">RP</span>

      <span class="hljs-attr">try</span> {
        <span class="hljs-attr">await</span> <span class="hljs-attr">fetch</span>('/<span class="hljs-attr">.well-known</span>/<span class="hljs-attr">solid</span>/<span class="hljs-attr">logout</span>', {
          <span class="hljs-attr">credentials:</span> '<span class="hljs-attr">include</span>'
        });
      } <span class="hljs-attr">catch</span> (<span class="hljs-attr">e</span>) {
        // <span class="hljs-attr">Ignore</span> <span class="hljs-attr">errors</span> <span class="hljs-attr">for</span> <span class="hljs-attr">when</span> <span class="hljs-attr">we</span> <span class="hljs-attr">are</span> <span class="hljs-attr">not</span> <span class="hljs-attr">on</span> <span class="hljs-attr">a</span> <span class="hljs-attr">Solid</span> <span class="hljs-attr">pod</span>
        // <span class="hljs-attr">But</span> <span class="hljs-attr">tell</span> <span class="hljs-attr">users</span> <span class="hljs-attr">it</span> <span class="hljs-attr">is</span> <span class="hljs-attr">harmless</span> <span class="hljs-attr">because</span> <span class="hljs-attr">they</span> <span class="hljs-attr">will</span> <span class="hljs-attr">see</span> <span class="hljs-attr">the</span> <span class="hljs-attr">GET</span> <span class="hljs-attr">failure</span> <span class="hljs-attr">in</span> <span class="hljs-attr">the</span> <span class="hljs-attr">console</span>
        <span class="hljs-attr">console.info</span>("<span class="hljs-attr">Couldn</span>'<span class="hljs-attr">t</span> <span class="hljs-attr">find</span> /<span class="hljs-attr">.well-known</span>/<span class="hljs-attr">solid</span>/<span class="hljs-attr">logout</span>, <span class="hljs-attr">this</span> <span class="hljs-attr">is</span> <span class="hljs-attr">harmless.</span>");
      }
    } <span class="hljs-attr">catch</span> (<span class="hljs-attr">err</span>) {
      <span class="hljs-attr">console.warn</span>('<span class="hljs-attr">Error</span> <span class="hljs-attr">logging</span> <span class="hljs-attr">out</span> <span class="hljs-attr">of</span> <span class="hljs-attr">the</span> <span class="hljs-attr">WebID-OIDC</span> <span class="hljs-attr">session</span>');
      <span class="hljs-attr">console.error</span>(<span class="hljs-attr">err</span>);
    }
  }
}
<span class="hljs-attr">async</span> <span class="hljs-attr">function</span> <span class="hljs-attr">getRegisteredRp</span>(<span class="hljs-attr">idp</span>, <span class="hljs-attr">options</span>) {
  // <span class="hljs-attr">To</span> <span class="hljs-attr">reuse</span> <span class="hljs-attr">a</span> <span class="hljs-attr">possible</span> <span class="hljs-attr">previous</span> <span class="hljs-attr">RP</span>,
  // <span class="hljs-attr">it</span> <span class="hljs-attr">be</span> <span class="hljs-attr">for</span> <span class="hljs-attr">the</span> <span class="hljs-attr">same</span> <span class="hljs-attr">IDP</span> <span class="hljs-attr">and</span> <span class="hljs-attr">redirect</span> <span class="hljs-attr">URI</span>
  <span class="hljs-attr">let</span> <span class="hljs-attr">rp</span> = <span class="hljs-string">await</span> <span class="hljs-attr">getStoredRp</span>(<span class="hljs-attr">options.storage</span>);

  <span class="hljs-attr">if</span> (!<span class="hljs-attr">rp</span> || <span class="hljs-attr">rp.provider.url</span> !== <span class="hljs-string">idp</span> || !<span class="hljs-attr">rp.registration.redirect_uris.includes</span>(<span class="hljs-attr">options.callbackUri</span>)) {
    // <span class="hljs-attr">Register</span> <span class="hljs-attr">a</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RP</span>
    <span class="hljs-attr">rp</span> = <span class="hljs-string">await</span> <span class="hljs-attr">registerRp</span>(<span class="hljs-attr">idp</span>, <span class="hljs-attr">options</span>);
    <span class="hljs-attr">await</span> <span class="hljs-attr">storeRp</span>(<span class="hljs-attr">options.storage</span>, <span class="hljs-attr">idp</span>, <span class="hljs-attr">rp</span>);
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">rp</span>;
}

<span class="hljs-attr">async</span> <span class="hljs-attr">function</span> <span class="hljs-attr">getStoredRp</span>(<span class="hljs-attr">storage</span>) {
  <span class="hljs-attr">const</span> <span class="hljs-attr">data</span> = <span class="hljs-string">await</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_storage__WEBPACK_IMPORTED_MODULE_6__</span>["<span class="hljs-attr">getData</span>"])(<span class="hljs-attr">storage</span>);
  <span class="hljs-attr">const</span> {
    <span class="hljs-attr">rpConfig</span>
  } = <span class="hljs-string">data;</span>

  <span class="hljs-attr">if</span> (<span class="hljs-attr">rpConfig</span>) {
    <span class="hljs-attr">rpConfig.store</span> = <span class="hljs-string">storage;</span>
    <span class="hljs-attr">return</span> <span class="hljs-attr">_solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default.a.from</span>(<span class="hljs-attr">rpConfig</span>);
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">return</span> <span class="hljs-attr">null</span>;
  }
}

<span class="hljs-attr">async</span> <span class="hljs-attr">function</span> <span class="hljs-attr">storeRp</span>(<span class="hljs-attr">storage</span>, <span class="hljs-attr">idp</span>, <span class="hljs-attr">rp</span>) {
  <span class="hljs-attr">await</span> <span class="hljs-attr">Object</span>(<span class="hljs-attr">_storage__WEBPACK_IMPORTED_MODULE_6__</span>["<span class="hljs-attr">updateStorage</span>"])(<span class="hljs-attr">storage</span>, <span class="hljs-attr">data</span> =&gt;</span> _objectSpread(_objectSpread({}, data), {}, {
    rpConfig: rp
  }));
  return rp;
}

function registerRp(idp, opts) {
  const {
    storage,
    callbackUri
  } = opts;
  const responseType = 'id_token token';
  const clientNameI18n = {};
  Object.entries(opts).filter(([key, _]) =&gt; key.startsWith('clientName#')).forEach(([key, value]) =&gt; clientNameI18n[key.replace('clientName#', 'client_name#')] = value);
  const supplementaryOptions = {
    logo_uri: opts.logoUri,
    contacts: opts.contacts,
    client_name: opts.clientName
  };

  const registration = _objectSpread(_objectSpread({
    issuer: idp,
    grant_types: ['implicit'],
    redirect_uris: [callbackUri],
    response_types: [responseType],
    scope: 'openid profile'
  }, clientNameI18n), supplementaryOptions); // Note that overrides @solid/oidc-rp/RelyingParty defaults (i.e. not merged)


  const options = {
    defaults: {
      authenticate: {
        redirect_uri: callbackUri,
        response_type: responseType,
        display: 'page',
        scope: ['openid']
      }
    },
    store: storage
  };
  return _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default.a.register(idp, registration, options);
}

async function sendAuthRequest(rp, {
  callbackUri,
  storage
}) {
  const data = await Object(_storage__WEBPACK_IMPORTED_MODULE_6__["getData"])(storage);
  const url = await rp.createRequest({
    redirect_uri: callbackUri
  }, data);
  await Object(_storage__WEBPACK_IMPORTED_MODULE_6__["updateStorage"])(storage, () =&gt; data);
  return Object(_url_util__WEBPACK_IMPORTED_MODULE_5__["navigateTo"])(url);
}

async function saveAppHashFragment(store) {
  await Object(_storage__WEBPACK_IMPORTED_MODULE_6__["updateStorage"])(store, data =&gt; _objectSpread(_objectSpread({}, data), {}, {
    appHashFragment: window.location.hash
  }));
}

async function restoreAppHashFragment(store) {
  await Object(_storage__WEBPACK_IMPORTED_MODULE_6__["updateStorage"])(store, (_ref) =&gt; {
    let {
      appHashFragment = ''
    } = _ref,
        data = _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default()(_ref, ["appHashFragment"]);

    window.location.hash = appHashFragment;
    return data;
  });
}
/**
 * Answers whether a HTTP response requires WebID-OIDC authentication.
 */


function requiresAuth(resp) {
  if (resp.status !== 401) {
    return false;
  }

  const wwwAuthHeader = resp.headers.get('www-authenticate');

  if (!wwwAuthHeader) {
    return false;
  }

  const auth = auth_header__WEBPACK_IMPORTED_MODULE_2__["parse"](wwwAuthHeader);
  return auth.scheme === 'Bearer' &amp;&amp; auth.params &amp;&amp; auth.params.scope === 'openid webid';
}
/**
 * Fetches a resource, providing the WebID-OIDC ID Token as authentication.
 * Assumes that the resource has requested those tokens in a previous response.
 */

async function fetchWithCredentials(session, fetch, input, options) {
  // Add Authorization header (assuming a modifiable headers object)
  const headers = (options ? options.headers : input.headers) || {};
  const popToken = await _solid_oidc_rp_src_PoPToken__WEBPACK_IMPORTED_MODULE_4___default.a.issueFor(Object(_url_util__WEBPACK_IMPORTED_MODULE_5__["toUrlString"])(input), session);
  headers.authorization = "Bearer ".concat(popToken);
  return fetch(input, _objectSpread(_objectSpread({}, options), {}, {
    credentials: 'include',
    headers
  }));
}

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

var objectWithoutPropertiesLoose = __webpack_require__(18);

function _objectWithoutProperties(source, excluded) {
  if (source == null) return {};
  var target = objectWithoutPropertiesLoose(source, excluded);
  var key, i;

  if (Object.getOwnPropertySymbols) {
    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);

    for (i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attr">sourceSymbolKeys.length</span>; <span class="hljs-attr">i</span>++) {
      <span class="hljs-attr">key</span> = <span class="hljs-string">sourceSymbolKeys[i];</span>
      <span class="hljs-attr">if</span> (<span class="hljs-attr">excluded.indexOf</span>(<span class="hljs-attr">key</span>) &gt;</span>= 0) continue;
      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
      target[key] = source[key];
    }
  }

  return target;
}

module.exports = _objectWithoutProperties;

/***/ }),
/* 18 */
/***/ (function(module, exports) {

function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;

  for (i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attr">sourceKeys.length</span>; <span class="hljs-attr">i</span>++) {
    <span class="hljs-attr">key</span> = <span class="hljs-string">sourceKeys[i];</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">excluded.indexOf</span>(<span class="hljs-attr">key</span>) &gt;</span>= 0) continue;
    target[key] = source[key];
  }

  return target;
}

module.exports = _objectWithoutPropertiesLoose;

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
Object.defineProperty(exports, "format", {
  enumerable: true,
  get: function get() {
    return _format.default;
  }
});
Object.defineProperty(exports, "parse", {
  enumerable: true,
  get: function get() {
    return _parse.default;
  }
});

var _format = _interopRequireDefault(__webpack_require__(20));

var _parse = _interopRequireDefault(__webpack_require__(22));

function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { default: obj }; }
//# sourceMappingURL=index.js.map

/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _util = __webpack_require__(21);

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i <span class="hljs-tag">&lt; <span class="hljs-attr">arr.length</span>; <span class="hljs-attr">i</span>++) { <span class="hljs-attr">arr2</span>[<span class="hljs-attr">i</span>] = <span class="hljs-string">arr[i];</span> } <span class="hljs-attr">return</span> <span class="hljs-attr">arr2</span>; } }

<span class="hljs-attr">function</span> <span class="hljs-attr">_slicedToArray</span>(<span class="hljs-attr">arr</span>, <span class="hljs-attr">i</span>) { <span class="hljs-attr">return</span> <span class="hljs-attr">_arrayWithHoles</span>(<span class="hljs-attr">arr</span>) || <span class="hljs-attr">_iterableToArrayLimit</span>(<span class="hljs-attr">arr</span>, <span class="hljs-attr">i</span>) || <span class="hljs-attr">_nonIterableRest</span>(); }

<span class="hljs-attr">function</span> <span class="hljs-attr">_nonIterableRest</span>() { <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>("<span class="hljs-attr">Invalid</span> <span class="hljs-attr">attempt</span> <span class="hljs-attr">to</span> <span class="hljs-attr">destructure</span> <span class="hljs-attr">non-iterable</span> <span class="hljs-attr">instance</span>"); }

<span class="hljs-attr">function</span> <span class="hljs-attr">_iterableToArrayLimit</span>(<span class="hljs-attr">arr</span>, <span class="hljs-attr">i</span>) { <span class="hljs-attr">var</span> <span class="hljs-attr">_arr</span> = <span class="hljs-string">[];</span> <span class="hljs-attr">var</span> <span class="hljs-attr">_n</span> = <span class="hljs-string">true;</span> <span class="hljs-attr">var</span> <span class="hljs-attr">_d</span> = <span class="hljs-string">false;</span> <span class="hljs-attr">var</span> <span class="hljs-attr">_e</span> = <span class="hljs-string">undefined;</span> <span class="hljs-attr">try</span> { <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">_i</span> = <span class="hljs-string">arr[Symbol.iterator](),</span> <span class="hljs-attr">_s</span>; !(<span class="hljs-attr">_n</span> = <span class="hljs-string">(_s</span> = <span class="hljs-string">_i.next()).done);</span> <span class="hljs-attr">_n</span> = <span class="hljs-string">true)</span> { <span class="hljs-attr">_arr.push</span>(<span class="hljs-attr">_s.value</span>); <span class="hljs-attr">if</span> (<span class="hljs-attr">i</span> &amp;&amp; <span class="hljs-attr">_arr.length</span> === <span class="hljs-string">i)</span> <span class="hljs-attr">break</span>; } } <span class="hljs-attr">catch</span> (<span class="hljs-attr">err</span>) { <span class="hljs-attr">_d</span> = <span class="hljs-string">true;</span> <span class="hljs-attr">_e</span> = <span class="hljs-string">err;</span> } <span class="hljs-attr">finally</span> { <span class="hljs-attr">try</span> { <span class="hljs-attr">if</span> (!<span class="hljs-attr">_n</span> &amp;&amp; <span class="hljs-attr">_i</span>["<span class="hljs-attr">return</span>"] != <span class="hljs-string">null)</span> <span class="hljs-attr">_i</span>["<span class="hljs-attr">return</span>"](); } <span class="hljs-attr">finally</span> { <span class="hljs-attr">if</span> (<span class="hljs-attr">_d</span>) <span class="hljs-attr">throw</span> <span class="hljs-attr">_e</span>; } } <span class="hljs-attr">return</span> <span class="hljs-attr">_arr</span>; }

<span class="hljs-attr">function</span> <span class="hljs-attr">_arrayWithHoles</span>(<span class="hljs-attr">arr</span>) { <span class="hljs-attr">if</span> (<span class="hljs-attr">Array.isArray</span>(<span class="hljs-attr">arr</span>)) <span class="hljs-attr">return</span> <span class="hljs-attr">arr</span>; }

<span class="hljs-attr">var</span> <span class="hljs-attr">xxx</span> = <span class="hljs-string">function</span> <span class="hljs-attr">xxx</span>(<span class="hljs-attr">key</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">function</span> (<span class="hljs-attr">value</span>) {
    <span class="hljs-attr">return</span> `${<span class="hljs-attr">key</span>}=<span class="hljs-string">${value</span> &amp;&amp; !(<span class="hljs-attr">0</span>, <span class="hljs-attr">_util.isToken</span>)(<span class="hljs-attr">value</span>) ? (<span class="hljs-attr">0</span>, <span class="hljs-attr">_util.quote</span>)(<span class="hljs-attr">value</span>) <span class="hljs-attr">:</span> <span class="hljs-attr">value</span>}`;
  };
};

<span class="hljs-attr">var</span> <span class="hljs-attr">build</span> = <span class="hljs-string">function</span> <span class="hljs-attr">build</span>(<span class="hljs-attr">params</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">params.reduce</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">prev</span>, <span class="hljs-attr">_ref</span>) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">_ref2</span> = <span class="hljs-string">_slicedToArray(_ref,</span> <span class="hljs-attr">2</span>),
        <span class="hljs-attr">key</span> = <span class="hljs-string">_ref2[0],</span>
        <span class="hljs-attr">values</span> = <span class="hljs-string">_ref2[1];</span>

    <span class="hljs-attr">var</span> <span class="hljs-attr">transform</span> = <span class="hljs-string">xxx(key);</span>

    <span class="hljs-attr">if</span> (!(<span class="hljs-attr">0</span>, <span class="hljs-attr">_util.isToken</span>)(<span class="hljs-attr">key</span>)) {
      <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>();
    }

    <span class="hljs-attr">if</span> (<span class="hljs-attr">Array.isArray</span>(<span class="hljs-attr">values</span>)) {
      <span class="hljs-attr">return</span> <span class="hljs-attr">_toConsumableArray</span>(<span class="hljs-attr">prev</span>)<span class="hljs-attr">.concat</span>(<span class="hljs-attr">_toConsumableArray</span>(<span class="hljs-attr">values.map</span>(<span class="hljs-attr">transform</span>)));
    }

    <span class="hljs-attr">return</span> <span class="hljs-attr">_toConsumableArray</span>(<span class="hljs-attr">prev</span>)<span class="hljs-attr">.concat</span>([<span class="hljs-attr">transform</span>(<span class="hljs-attr">values</span>)]);
  }, []);
};

<span class="hljs-attr">var</span> <span class="hljs-attr">challenge</span> = <span class="hljs-string">function</span> <span class="hljs-attr">challenge</span>(<span class="hljs-attr">params</span>, <span class="hljs-attr">options</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">Array.isArray</span>(<span class="hljs-attr">params</span>)) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">build</span>(<span class="hljs-attr">params</span>);
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">params</span> === <span class="hljs-string">'object'</span>) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">entries</span> = <span class="hljs-string">params;</span>
    <span class="hljs-attr">return</span> <span class="hljs-attr">challenge</span>(<span class="hljs-attr">Object.keys</span>(<span class="hljs-attr">params</span>)<span class="hljs-attr">.map</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) {
      <span class="hljs-attr">return</span> [<span class="hljs-attr">key</span>, <span class="hljs-attr">entries</span>[<span class="hljs-attr">key</span>]];
    }), <span class="hljs-attr">options</span>);
  }

  <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>();
};

<span class="hljs-attr">var</span> <span class="hljs-attr">_default</span> = <span class="hljs-string">function</span> <span class="hljs-attr">_default</span>(<span class="hljs-attr">scheme</span>, <span class="hljs-attr">token</span>, <span class="hljs-attr">params</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">obj</span> = <span class="hljs-string">typeof</span> <span class="hljs-attr">scheme</span> === <span class="hljs-string">'string'</span> ? {
    <span class="hljs-attr">scheme</span>,
    <span class="hljs-attr">token</span>,
    <span class="hljs-attr">params</span>
  } <span class="hljs-attr">:</span> <span class="hljs-attr">scheme</span>;

  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">obj</span> !== <span class="hljs-string">'object'</span>) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>();
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (!(<span class="hljs-attr">0</span>, <span class="hljs-attr">_util.isScheme</span>)(<span class="hljs-attr">obj.scheme</span>)) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('<span class="hljs-attr">Invalid</span> <span class="hljs-attr">scheme.</span>');
  }

  <span class="hljs-attr">return</span> [<span class="hljs-attr">obj.scheme</span>]<span class="hljs-attr">.concat</span>(<span class="hljs-attr">_toConsumableArray</span>(<span class="hljs-attr">typeof</span> <span class="hljs-attr">obj.token</span> !== <span class="hljs-string">'undefined'</span> ? [<span class="hljs-attr">obj.token</span>] <span class="hljs-attr">:</span> []), <span class="hljs-attr">_toConsumableArray</span>(<span class="hljs-attr">typeof</span> <span class="hljs-attr">obj.params</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-attr">challenge</span>(<span class="hljs-attr">obj.params</span>) <span class="hljs-attr">:</span> []))<span class="hljs-attr">.join</span>(' ');
};

<span class="hljs-attr">exports.default</span> = <span class="hljs-string">_default;</span>
//# <span class="hljs-attr">sourceMappingURL</span>=<span class="hljs-string">format.js.map</span>

/***/ }),
/* <span class="hljs-attr">21</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">exports</span>, <span class="hljs-attr">__webpack_require__</span>) {

"<span class="hljs-attr">use</span> <span class="hljs-attr">strict</span>";


<span class="hljs-attr">Object.defineProperty</span>(<span class="hljs-attr">exports</span>, "<span class="hljs-attr">__esModule</span>", {
  <span class="hljs-attr">value:</span> <span class="hljs-attr">true</span>
});
<span class="hljs-attr">exports.unquote</span> = <span class="hljs-string">exports.quote</span> = <span class="hljs-string">exports.isScheme</span> = <span class="hljs-string">exports.isToken</span> = <span class="hljs-string">void</span> <span class="hljs-attr">0</span>;
<span class="hljs-attr">var</span> <span class="hljs-attr">token</span> = <span class="hljs-string">/^[^\u0000-\u001F\u007F()</span>&lt;&gt;</span>@,;:\\"/?={}\[\]\u0020\u0009]+$/;

var isToken = function isToken(str) {
  return typeof str === 'string' &amp;&amp; token.test(str);
};

exports.isToken = isToken;
var isScheme = isToken;
exports.isScheme = isScheme;

var quote = function quote(str) {
  return `"${str.replace(/"/g, '\\"')}"`;
};

exports.quote = quote;

var unquote = function unquote(str) {
  return str.substr(1, str.length - 2).replace(/\\"/g, '"');
};

exports.unquote = unquote;
//# sourceMappingURL=util.js.map

/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _util = __webpack_require__(21);

// lol dis
var body = /((?:[a-zA-Z0-9._~+\/-]+=*(?:\s+|$))|[^\u0000-\u001F\u007F()<span class="hljs-tag">&lt;&gt;</span>@,;:\\"/?={}\[\]\u0020\u0009]+)(?:=([^\\"=\s,]+|"(?:[^"\\]|\\.)*"))?/g; // eslint-disable-line

var normalize = function normalize(prev, _cur) {
  // Fixup quoted strings and tokens with spaces around them
  var cur = _cur.charAt(0) === '"' ? (0, _util.unquote)(_cur) : _cur.trim(); // Marshal

  if (Array.isArray(prev)) {
    return prev.concat(cur);
  } else if (typeof prev === 'string') {
    return [prev, cur];
  }

  return cur;
};

var parseProperties = function parseProperties(scheme, string) {
  var token = null;
  var params = {}; // eslint-disable-next-line no-constant-condition

  while (true) {
    var res = body.exec(string);

    if (res === null) {
      break;
    }

    if (res[2]) {
      params[res[1]] = normalize(params[res[1]], res[2]);
    } else {
      token = normalize(token, res[1]);
    }
  }

  return {
    scheme,
    params,
    token
  };
};

var _default = function _default(str) {
  if (typeof str !== 'string') {
    throw new TypeError('Header value must be a string.');
  }

  var start = str.indexOf(' ');
  var scheme = str.substr(0, start);

  if (!(0, _util.isScheme)(scheme)) {
    throw new TypeError(`Invalid scheme ${scheme}`);
  }

  return parseProperties(scheme, str.substr(start));
};

exports.default = _default;
//# sourceMappingURL=parse.js.map

/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = __webpack_require__(24);

/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/**
 * Dependencies
 */
const assert = __webpack_require__(26);

const fetch = __webpack_require__(12);

const {
  URL
} = __webpack_require__(32);

const Headers = fetch.Headers ? fetch.Headers : global.Headers;

const {
  JWKSet
} = __webpack_require__(33);

const AuthenticationRequest = __webpack_require__(60);

const AuthenticationResponse = __webpack_require__(62);

const onHttpError = __webpack_require__(65);

const FormUrlEncoded = __webpack_require__(61);
/**
 * RelyingParty
 *
 * @class
 * Client interface for OpenID Connect Relying Party.
 *
 * @example
 *  let client = RelyingParty({
 *    provider: {
 *      name: 'Anvil Research, Inc.',
 *      url: 'https://forge.anvil.io'
 *      // configuration
 *      // jwks
 *    },
 *    defaults: {
 *      popToken: false,
 *      authenticate: {
 *        response_type: 'code',
 *        display: 'popup',
 *        scope: 'openid profile email'
 *      },
 *      register: {
 *        client_name: 'Example',
 *        client_uri: 'https://example.com',
 *        logo_uri: 'https://example.com/assets/logo.png',
 *        redirect_uris: ['https://app.example.com/callback'],
 *        response_types: ['code', 'code id_token token'],
 *        grant_types: ['authorization_code'],
 *        default_max_age: 7200,
 *        post_logout_redirect_uris: ['https://app.example.com']
 *      },
 *    },
 *    registration: {
 *      // if you have it saved somewhere
 *    },
 *    store: localStorage || req.session
 *  })
 *
 *  client.discover() =&gt; Promise
 *  client.jwks() =&gt; Promise
 *  client.authenticate()
 *  client.authenticateUri()
 *  client.validateResponse(uri) =&gt; Promise
 *  client.userinfo() =&gt; Promise
 *  client.logout()
 */


class RelyingParty {
  constructor({
    provider = {},
    defaults,
    registration = {},
    store = {}
  } = {}) {
    this.provider = provider;
    this.defaults = defaults || {
      popToken: false,
      authenticate: {
        response_type: 'id_token token',
        display: 'page',
        scope: ['openid']
      }
    };
    this.registration = registration;
    this.store = store;
  }
  /**
   * from
   *
   * @description
   * Create a RelyingParty instance from a previously registered client.
   *
   * @param {Object} data
   * @returns {Promise<span class="hljs-tag">&lt;<span class="hljs-name">RelyingParty</span>&gt;</span>}
   */


  static async from(data) {
    const rp = new RelyingParty(data);
    const validation = rp.validate(); // schema validation

    if (!validation.valid) {
      throw validation.error;
    }

    const jwks = rp.provider.jwks; // request the JWK Set if missing

    if (!jwks) {
      return rp.jwks().then(() =&gt; rp);
    } // otherwise import the JWK Set to webcrypto


    return JWKSet.importKeys(jwks).then(jwks =&gt; {
      rp.provider.jwks = jwks;
      return rp;
    });
  }
  /**
   * register
   *
   * @param issuer {string} Provider URL
   * @param registration {Object} Client dynamic registration options
   * @param options {Object}
   * @param options.defaults
   * @param [options.store] {Session|Storage}
   * @param [oobRegistration] {Object} Object providing getRegistration(key) function for out-of-band registrations
   * @param [idpId] {string} A tag identifying the provider used for looking up out-of-band registration data.
   * @returns {Promise<span class="hljs-tag">&lt;<span class="hljs-name">RelyingParty</span>&gt;</span>} RelyingParty instance, registered.
   */


  static register(issuer, registration, options, idpId, oobRegistration) {
    const rp = new RelyingParty({
      provider: {
        url: issuer
      },
      defaults: Object.assign({}, options.defaults),
      store: options.store
    });
    return Promise.resolve().then(() =&gt; rp.discover()).then(() =&gt; rp.jwks()).then(() =&gt; {
      assert(rp.provider.configuration, 'OpenID Configuration is not initialized.');
      return rp.provider.configuration.registration_endpoint ? rp.register(registration) : rp.getRegistration(registration, idpId, oobRegistration);
    }).then(() =&gt; rp);
  }

  validate() {
    if (!this.provider || !this.provider.url) {
      return {
        valid: false,
        error: new Error('Provider url is required.')
      };
    }

    return {
      valid: true
    };
  }
  /**
   * Discover
   *
   * @description Fetches the issuer's OpenID Configuration.
   * @returns {Promise<span class="hljs-tag">&lt;<span class="hljs-name">Object</span>&gt;</span>} Resolves with the provider configuration response
   */


  discover() {
    try {
      let issuer = this.provider.url;
      assert(issuer, 'RelyingParty provider must define "url"');
      let url = new URL(issuer);
      url.pathname = '.well-known/openid-configuration';
      return fetch(url.toString()).then(onHttpError('Error fetching openid configuration')).then(response =&gt; {
        return response.json().then(json =&gt; this.provider.configuration = json);
      });
    } catch (error) {
      return Promise.reject(error);
    }
  }
  /**
   * Register
   *
   * @description Register's a client with provider as a Relying Party
   *
   * @param options {Object}
   * @returns {Promise<span class="hljs-tag">&lt;<span class="hljs-name">Object</span>&gt;</span>} Resolves with the registration response object
   */


  register(options) {
    try {
      let configuration = this.provider.configuration;
      assert(configuration, 'OpenID Configuration is not initialized.');
      assert(configuration.registration_endpoint, 'OpenID Configuration is missing registration_endpoint.');
      let uri = configuration.registration_endpoint;
      let method = 'post';
      let headers = new Headers({
        'Content-Type': 'application/json'
      });
      let params = this.defaults.register;
      let body = JSON.stringify(Object.assign({}, params, options));
      return fetch(uri, {
        method,
        headers,
        body
      }).then(onHttpError('Error registering client')).then(response =&gt; {
        return response.json().then(json =&gt; this.registration = json);
      });
    } catch (error) {
      return Promise.reject(error);
    }
  }

  serialize() {
    return JSON.stringify(this);
  }
  /**
   * @description
   * Retrieves an existing Relying Party registration for a provider which does
   * not support dynamic registration and which requires pre-registration by
   * some 'out of band' method.
   *
   * @param options {Object}
   * @param idp {string} Key identifying which registration data should be retrieved.
   * @returns {Promise<span class="hljs-tag">&lt;<span class="hljs-name">Object</span>&gt;</span>} Resolves with the registration response object.
   */


  getRegistration(options, idp, oobRegistration) {
    return Promise.resolve().then(() =&gt; {
      return this.registration = oobRegistration.getRegistration(idp);
    }).catch(error =&gt; {
      throw error;
    });
  }
  /**
   * jwks
   *
   * @description Promises the issuer's JWK Set.
   * @returns {Promise}
   */


  jwks() {
    try {
      let configuration = this.provider.configuration;
      assert(configuration, 'OpenID Configuration is not initialized.');
      assert(configuration.jwks_uri, 'OpenID Configuration is missing jwks_uri.');
      let uri = configuration.jwks_uri;
      return fetch(uri).then(onHttpError('Error resolving provider keys')).then(response =&gt; {
        return response.json().then(json =&gt; JWKSet.importKeys(json)).then(jwks =&gt; this.provider.jwks = jwks);
      });
    } catch (error) {
      return Promise.reject(error);
    }
  }
  /**
   * createRequest
   *
   * @param options {Object} Authn request options hashmap
   * @param options.redirect_uri {string}
   * @param options.response_type {string} e.g. 'code' or 'id_token token'
   * @param session {Session|Storage} req.session or localStorage
   * @returns {Promise<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>} Authn request URL
   */


  createRequest(options, session) {
    return AuthenticationRequest.create(this, options, session || this.store);
  }
  /**
   * Validate Response
   *
   * @param response {string} req.query or req.body.text
   * @param session {Session|Storage} req.session or localStorage or similar
   *
   * @returns {Promise<span class="hljs-tag">&lt;<span class="hljs-name">Session</span>&gt;</span>}
   */


  validateResponse(response, session = this.store) {
    let options;

    if (response.match(/^http(s?):\/\//)) {
      options = {
        rp: this,
        redirect: response,
        session
      };
    } else {
      options = {
        rp: this,
        body: response,
        session
      };
    }

    const authResponse = new AuthenticationResponse(options);
    return AuthenticationResponse.validateResponse(authResponse);
  }
  /**
   * userinfo
   *
   * @description
   * Promises the authenticated user's claims.
   * access_token can be supplied directly. If not, it is retrieved from storage, if available.
   * Depending on when userinfo is called, access_token may not yet have been saved to storage.
   *
   * @param accessToken {string=} Optional access token from current user session for use against the User Info endpoint
   * @returns {Promise}
   */


  userinfo(accessToken) {
    try {
      let configuration = this.provider.configuration;
      assert(configuration, 'OpenID Configuration is not initialized.');
      assert(configuration.userinfo_endpoint, 'OpenID Configuration is missing userinfo_endpoint.');
      accessToken = accessToken || this.store.access_token;
      assert(accessToken, 'Missing access token.');
      let uri = configuration.userinfo_endpoint;
      let headers = new Headers({
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${accessToken}`
      });
      return fetch(uri, {
        headers
      }).then(onHttpError('Error fetching userinfo')).then(response =&gt; response.json());
    } catch (error) {
      return Promise.reject(error);
    }
  }
  /**
   * logoutRequest
   *
   * Composes and returns the logout request URI, based on the OP's
   * `end_session_endpoint`, with appropriate parameters.
   *
   * Note: Calling client code has the responsibility to clear the local
   * session state (for example, by calling `rp.clearSession()`). In addition,
   * some IdPs (such as Google) may not provide an `end_session_endpoint`,
   * in which case, this method will return null.
   *
   * @see https://openid.net/specs/openid-connect-session-1_0.html#RPLogout
   *
   * @throws {Error} If provider config is not initialized
   *
   * @throws {Error} If `post_logout_redirect_uri` was provided without a
   *   corresponding `id_token_hint`
   *
   * @param [options={}] {object}
   *
   * @param [options.id_token_hint] {string} RECOMMENDED.
   *   Previously issued ID Token passed to the logout endpoint as
   *   a hint about the End-User's current authenticated session with the
   *   Client. This is used as an indication of the identity of the End-User
   *   that the RP is requesting be logged out by the OP. The OP *need not* be
   *   listed as an audience of the ID Token when it is used as an
   *   `id_token_hint` value.
   *
   * @param [options.post_logout_redirect_uri] {string} OPTIONAL. URL to which
   *   the RP is requesting that the End-User's User Agent be redirected after
   *   a logout has been performed. The value MUST have been previously
   *   registered with the OP, either using the `post_logout_redirect_uris`
   *   Registration parameter or via another mechanism. If supplied, the OP
   *   SHOULD honor this request following the logout.
   *
   *   Note: The requirement to validate the uri for previous registration means
   *   that, in practice, the `id_token_hint` is REQUIRED if
   *   `post_logout_redirect_uri` is used. Otherwise, the OP has no way to get
   *   the `client_id` to load the saved client registration, to validate the
   *   uri. The only way it can get it is by decoding the `id_token_hint`.
   *
   * @param [options.state] {string} OPTIONAL. Opaque value used by the RP to
   *   maintain state between the logout request and the callback to the
   *   endpoint specified by the `post_logout_redirect_uri` query parameter. If
   *   included in the logout request, the OP passes this value back to the RP
   *   using the `state` query parameter when redirecting the User Agent back to
   *   the RP.
   *
   * TODO: In the future, consider adding `response_mode` param, for the OP to
   *   determine how to return the `state` back the RP.
   *   @see http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html#ResponseModes
   *
   * TODO: Handle special cases for popular providers (Google, MSFT)
   *
   * @returns {string|null} Logout uri (or null if no end_session_endpoint was
   *   provided in the IdP config)
   */


  logoutRequest(options = {}) {
    const {
      id_token_hint,
      post_logout_redirect_uri,
      state
    } = options;
    let configuration;
    assert(this.provider, 'OpenID Configuration is not initialized');
    configuration = this.provider.configuration;
    assert(configuration, 'OpenID Configuration is not initialized');

    if (!configuration.end_session_endpoint) {
      console.log(`OpenId Configuration for ` + `${configuration.issuer} is missing end_session_endpoint`);
      return null;
    }

    if (post_logout_redirect_uri &amp;&amp; !id_token_hint) {
      throw new Error('id_token_hint is required when using post_logout_redirect_uri');
    }

    const params = {};

    if (id_token_hint) {
      params.id_token_hint = id_token_hint;
    }

    if (post_logout_redirect_uri) {
      params.post_logout_redirect_uri = post_logout_redirect_uri;
    }

    if (state) {
      params.state = state;
    }

    const url = new URL(configuration.end_session_endpoint);
    url.search = FormUrlEncoded.encode(params);
    return url.href;
  }
  /**
   * Logout
   *
   * @deprecated
   *
   * TODO: Add deprecation warnings, then remove. Client code should
   *   use `logoutRequest()` instead
   *
   * @returns {Promise}
   */


  logout() {
    let configuration;

    try {
      assert(this.provider, 'OpenID Configuration is not initialized.');
      configuration = this.provider.configuration;
      assert(configuration, 'OpenID Configuration is not initialized.');
    } catch (error) {
      return Promise.reject(error);
    }

    if (!configuration.end_session_endpoint) {
      this.clearSession();
      return Promise.resolve(undefined);
    }

    let uri = configuration.end_session_endpoint;
    let method = 'get';
    return fetch(uri, {
      method,
      credentials: 'include'
    }).then(onHttpError('Error logging out')).then(() =&gt; this.clearSession()); // TODO: Validate `frontchannel_logout_uri` if necessary

    /**
     * frontchannel_logout_uri - OPTIONAL. RP URL that will cause the RP to log
     * itself out when rendered in an iframe by the OP.
     *
     * An `iss` (issuer) query parameter and a `sid`
     * (session ID) query parameter MAY be included by the OP to enable the RP
     * to validate the request and to determine which of the potentially
     * multiple sessions is to be logged out. If a sid (session ID) query
     * parameter is included, an iss (issuer) query parameter MUST also be
     * included.
     * @see https://openid.net/specs/openid-connect-frontchannel-1_0.html#RPLogout
     */
  }

  clearSession() {
    let session = this.store;

    if (!session) {
      return;
    }

    delete session[SESSION_PRIVATE_KEY];
  }
  /**
   * @param uri {string} Target Resource Server URI
   * @param idToken {IDToken} ID Token to be embedded in the PoP token
   *
   * @returns {Promise<span class="hljs-tag">&lt;<span class="hljs-name">PoPToken</span>&gt;</span>}
   */


  popTokenFor(uri, idToken) {
    return PoPToken.issueFor(uri, idToken);
  }

}

const SESSION_PRIVATE_KEY = 'oidc.session.privateKey';
RelyingParty.SESSION_PRIVATE_KEY = SESSION_PRIVATE_KEY;
module.exports = RelyingParty;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 25 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {

var objectAssign = __webpack_require__(27);

// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js
// original notice:

/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <span class="hljs-tag">&lt;<span class="hljs-name">feross@feross.org</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">http:</span>//<span class="hljs-attr">feross.org</span>&gt;</span>
 * @license  MIT
 */
function compare(a, b) {
  if (a === b) {
    return 0;
  }

  var x = a.length;
  var y = b.length;

  for (var i = 0, len = Math.min(x, y); i <span class="hljs-tag">&lt; <span class="hljs-attr">len</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">a</span>[<span class="hljs-attr">i</span>] !== <span class="hljs-string">b[i])</span> {
      <span class="hljs-attr">x</span> = <span class="hljs-string">a[i];</span>
      <span class="hljs-attr">y</span> = <span class="hljs-string">b[i];</span>
      <span class="hljs-attr">break</span>;
    }
  }

  <span class="hljs-attr">if</span> (<span class="hljs-attr">x</span> &lt; <span class="hljs-attr">y</span>) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">-1</span>;
  }
  <span class="hljs-attr">if</span> (<span class="hljs-attr">y</span> &lt; <span class="hljs-attr">x</span>) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">1</span>;
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">0</span>;
}
<span class="hljs-attr">function</span> <span class="hljs-attr">isBuffer</span>(<span class="hljs-attr">b</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">global.Buffer</span> &amp;&amp; <span class="hljs-attr">typeof</span> <span class="hljs-attr">global.Buffer.isBuffer</span> === <span class="hljs-string">'function'</span>) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">global.Buffer.isBuffer</span>(<span class="hljs-attr">b</span>);
  }
  <span class="hljs-attr">return</span> !!(<span class="hljs-attr">b</span> != <span class="hljs-string">null</span> &amp;&amp; <span class="hljs-attr">b._isBuffer</span>);
}

// <span class="hljs-attr">based</span> <span class="hljs-attr">on</span> <span class="hljs-attr">node</span> <span class="hljs-attr">assert</span>, <span class="hljs-attr">original</span> <span class="hljs-attr">notice:</span>
// <span class="hljs-attr">NB:</span> <span class="hljs-attr">The</span> <span class="hljs-attr">URL</span> <span class="hljs-attr">to</span> <span class="hljs-attr">the</span> <span class="hljs-attr">CommonJS</span> <span class="hljs-attr">spec</span> <span class="hljs-attr">is</span> <span class="hljs-attr">kept</span> <span class="hljs-attr">just</span> <span class="hljs-attr">for</span> <span class="hljs-attr">tradition.</span>
//     <span class="hljs-attr">node-assert</span> <span class="hljs-attr">has</span> <span class="hljs-attr">evolved</span> <span class="hljs-attr">a</span> <span class="hljs-attr">lot</span> <span class="hljs-attr">since</span> <span class="hljs-attr">then</span>, <span class="hljs-attr">both</span> <span class="hljs-attr">in</span> <span class="hljs-attr">API</span> <span class="hljs-attr">and</span> <span class="hljs-attr">behavior.</span>

// <span class="hljs-attr">http:</span>//<span class="hljs-attr">wiki.commonjs.org</span>/<span class="hljs-attr">wiki</span>/<span class="hljs-attr">Unit_Testing</span>/<span class="hljs-attr">1.0</span>
//
// <span class="hljs-attr">THIS</span> <span class="hljs-attr">IS</span> <span class="hljs-attr">NOT</span> <span class="hljs-attr">TESTED</span> <span class="hljs-attr">NOR</span> <span class="hljs-attr">LIKELY</span> <span class="hljs-attr">TO</span> <span class="hljs-attr">WORK</span> <span class="hljs-attr">OUTSIDE</span> <span class="hljs-attr">V8</span>!
//
// <span class="hljs-attr">Originally</span> <span class="hljs-attr">from</span> <span class="hljs-attr">narwhal.js</span> (<span class="hljs-attr">http:</span>//<span class="hljs-attr">narwhaljs.org</span>)
// <span class="hljs-attr">Copyright</span> (<span class="hljs-attr">c</span>) <span class="hljs-attr">2009</span> <span class="hljs-attr">Thomas</span> <span class="hljs-attr">Robinson</span> &lt;<span class="hljs-attr">280north.com</span>&gt;</span>
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the 'Software'), to
// deal in the Software without restriction, including without limitation the
// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
// sell copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

var util = __webpack_require__(28);
var hasOwn = Object.prototype.hasOwnProperty;
var pSlice = Array.prototype.slice;
var functionsHaveNames = (function () {
  return function foo() {}.name === 'foo';
}());
function pToString (obj) {
  return Object.prototype.toString.call(obj);
}
function isView(arrbuf) {
  if (isBuffer(arrbuf)) {
    return false;
  }
  if (typeof global.ArrayBuffer !== 'function') {
    return false;
  }
  if (typeof ArrayBuffer.isView === 'function') {
    return ArrayBuffer.isView(arrbuf);
  }
  if (!arrbuf) {
    return false;
  }
  if (arrbuf instanceof DataView) {
    return true;
  }
  if (arrbuf.buffer &amp;&amp; arrbuf.buffer instanceof ArrayBuffer) {
    return true;
  }
  return false;
}
// 1. The assert module provides functions that throw
// AssertionError's when particular conditions are not met. The
// assert module must conform to the following interface.

var assert = module.exports = ok;

// 2. The AssertionError is defined in assert.
// new assert.AssertionError({ message: message,
//                             actual: actual,
//                             expected: expected })

var regex = /\s*function\s+([^\(\s]*)\s*/;
// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js
function getName(func) {
  if (!util.isFunction(func)) {
    return;
  }
  if (functionsHaveNames) {
    return func.name;
  }
  var str = func.toString();
  var match = str.match(regex);
  return match &amp;&amp; match[1];
}
assert.AssertionError = function AssertionError(options) {
  this.name = 'AssertionError';
  this.actual = options.actual;
  this.expected = options.expected;
  this.operator = options.operator;
  if (options.message) {
    this.message = options.message;
    this.generatedMessage = false;
  } else {
    this.message = getMessage(this);
    this.generatedMessage = true;
  }
  var stackStartFunction = options.stackStartFunction || fail;
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, stackStartFunction);
  } else {
    // non v8 browsers so we can have a stacktrace
    var err = new Error();
    if (err.stack) {
      var out = err.stack;

      // try to strip useless frames
      var fn_name = getName(stackStartFunction);
      var idx = out.indexOf('\n' + fn_name);
      if (idx &gt;= 0) {
        // once we have located the function frame
        // we need to strip out everything before it (and its line)
        var next_line = out.indexOf('\n', idx + 1);
        out = out.substring(next_line + 1);
      }

      this.stack = out;
    }
  }
};

// assert.AssertionError instanceof Error
util.inherits(assert.AssertionError, Error);

function truncate(s, n) {
  if (typeof s === 'string') {
    return s.length <span class="hljs-tag">&lt; <span class="hljs-attr">n</span> ? <span class="hljs-attr">s</span> <span class="hljs-attr">:</span> <span class="hljs-attr">s.slice</span>(<span class="hljs-attr">0</span>, <span class="hljs-attr">n</span>);
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">return</span> <span class="hljs-attr">s</span>;
  }
}
<span class="hljs-attr">function</span> <span class="hljs-attr">inspect</span>(<span class="hljs-attr">something</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">functionsHaveNames</span> || !<span class="hljs-attr">util.isFunction</span>(<span class="hljs-attr">something</span>)) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">util.inspect</span>(<span class="hljs-attr">something</span>);
  }
  <span class="hljs-attr">var</span> <span class="hljs-attr">rawname</span> = <span class="hljs-string">getName(something);</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">name</span> = <span class="hljs-string">rawname</span> ? '<span class="hljs-attr">:</span> ' + <span class="hljs-attr">rawname</span> <span class="hljs-attr">:</span> '';
  <span class="hljs-attr">return</span> '[<span class="hljs-attr">Function</span>' +  <span class="hljs-attr">name</span> + ']';
}
<span class="hljs-attr">function</span> <span class="hljs-attr">getMessage</span>(<span class="hljs-attr">self</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">truncate</span>(<span class="hljs-attr">inspect</span>(<span class="hljs-attr">self.actual</span>), <span class="hljs-attr">128</span>) + ' ' +
         <span class="hljs-attr">self.operator</span> + ' ' +
         <span class="hljs-attr">truncate</span>(<span class="hljs-attr">inspect</span>(<span class="hljs-attr">self.expected</span>), <span class="hljs-attr">128</span>);
}

// <span class="hljs-attr">At</span> <span class="hljs-attr">present</span> <span class="hljs-attr">only</span> <span class="hljs-attr">the</span> <span class="hljs-attr">three</span> <span class="hljs-attr">keys</span> <span class="hljs-attr">mentioned</span> <span class="hljs-attr">above</span> <span class="hljs-attr">are</span> <span class="hljs-attr">used</span> <span class="hljs-attr">and</span>
// <span class="hljs-attr">understood</span> <span class="hljs-attr">by</span> <span class="hljs-attr">the</span> <span class="hljs-attr">spec.</span> <span class="hljs-attr">Implementations</span> <span class="hljs-attr">or</span> <span class="hljs-attr">sub</span> <span class="hljs-attr">modules</span> <span class="hljs-attr">can</span> <span class="hljs-attr">pass</span>
// <span class="hljs-attr">other</span> <span class="hljs-attr">keys</span> <span class="hljs-attr">to</span> <span class="hljs-attr">the</span> <span class="hljs-attr">AssertionError</span>'<span class="hljs-attr">s</span> <span class="hljs-attr">constructor</span> <span class="hljs-attr">-</span> <span class="hljs-attr">they</span> <span class="hljs-attr">will</span> <span class="hljs-attr">be</span>
// <span class="hljs-attr">ignored.</span>

// <span class="hljs-attr">3.</span> <span class="hljs-attr">All</span> <span class="hljs-attr">of</span> <span class="hljs-attr">the</span> <span class="hljs-attr">following</span> <span class="hljs-attr">functions</span> <span class="hljs-attr">must</span> <span class="hljs-attr">throw</span> <span class="hljs-attr">an</span> <span class="hljs-attr">AssertionError</span>
// <span class="hljs-attr">when</span> <span class="hljs-attr">a</span> <span class="hljs-attr">corresponding</span> <span class="hljs-attr">condition</span> <span class="hljs-attr">is</span> <span class="hljs-attr">not</span> <span class="hljs-attr">met</span>, <span class="hljs-attr">with</span> <span class="hljs-attr">a</span> <span class="hljs-attr">message</span> <span class="hljs-attr">that</span>
// <span class="hljs-attr">may</span> <span class="hljs-attr">be</span> <span class="hljs-attr">undefined</span> <span class="hljs-attr">if</span> <span class="hljs-attr">not</span> <span class="hljs-attr">provided.</span>  <span class="hljs-attr">All</span> <span class="hljs-attr">assertion</span> <span class="hljs-attr">methods</span> <span class="hljs-attr">provide</span>
// <span class="hljs-attr">both</span> <span class="hljs-attr">the</span> <span class="hljs-attr">actual</span> <span class="hljs-attr">and</span> <span class="hljs-attr">expected</span> <span class="hljs-attr">values</span> <span class="hljs-attr">to</span> <span class="hljs-attr">the</span> <span class="hljs-attr">assertion</span> <span class="hljs-attr">error</span> <span class="hljs-attr">for</span>
// <span class="hljs-attr">display</span> <span class="hljs-attr">purposes.</span>

<span class="hljs-attr">function</span> <span class="hljs-attr">fail</span>(<span class="hljs-attr">actual</span>, <span class="hljs-attr">expected</span>, <span class="hljs-attr">message</span>, <span class="hljs-attr">operator</span>, <span class="hljs-attr">stackStartFunction</span>) {
  <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">assert.AssertionError</span>({
    <span class="hljs-attr">message:</span> <span class="hljs-attr">message</span>,
    <span class="hljs-attr">actual:</span> <span class="hljs-attr">actual</span>,
    <span class="hljs-attr">expected:</span> <span class="hljs-attr">expected</span>,
    <span class="hljs-attr">operator:</span> <span class="hljs-attr">operator</span>,
    <span class="hljs-attr">stackStartFunction:</span> <span class="hljs-attr">stackStartFunction</span>
  });
}

// <span class="hljs-attr">EXTENSION</span>! <span class="hljs-attr">allows</span> <span class="hljs-attr">for</span> <span class="hljs-attr">well</span> <span class="hljs-attr">behaved</span> <span class="hljs-attr">errors</span> <span class="hljs-attr">defined</span> <span class="hljs-attr">elsewhere.</span>
<span class="hljs-attr">assert.fail</span> = <span class="hljs-string">fail;</span>

// <span class="hljs-attr">4.</span> <span class="hljs-attr">Pure</span> <span class="hljs-attr">assertion</span> <span class="hljs-attr">tests</span> <span class="hljs-attr">whether</span> <span class="hljs-attr">a</span> <span class="hljs-attr">value</span> <span class="hljs-attr">is</span> <span class="hljs-attr">truthy</span>, <span class="hljs-attr">as</span> <span class="hljs-attr">determined</span>
// <span class="hljs-attr">by</span> !!<span class="hljs-attr">guard.</span>
// <span class="hljs-attr">assert.ok</span>(<span class="hljs-attr">guard</span>, <span class="hljs-attr">message_opt</span>);
// <span class="hljs-attr">This</span> <span class="hljs-attr">statement</span> <span class="hljs-attr">is</span> <span class="hljs-attr">equivalent</span> <span class="hljs-attr">to</span> <span class="hljs-attr">assert.equal</span>(<span class="hljs-attr">true</span>, !!<span class="hljs-attr">guard</span>,
// <span class="hljs-attr">message_opt</span>);<span class="hljs-attr">.</span> <span class="hljs-attr">To</span> <span class="hljs-attr">test</span> <span class="hljs-attr">strictly</span> <span class="hljs-attr">for</span> <span class="hljs-attr">the</span> <span class="hljs-attr">value</span> <span class="hljs-attr">true</span>, <span class="hljs-attr">use</span>
// <span class="hljs-attr">assert.strictEqual</span>(<span class="hljs-attr">true</span>, <span class="hljs-attr">guard</span>, <span class="hljs-attr">message_opt</span>);<span class="hljs-attr">.</span>

<span class="hljs-attr">function</span> <span class="hljs-attr">ok</span>(<span class="hljs-attr">value</span>, <span class="hljs-attr">message</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">value</span>) <span class="hljs-attr">fail</span>(<span class="hljs-attr">value</span>, <span class="hljs-attr">true</span>, <span class="hljs-attr">message</span>, '==<span class="hljs-string">', assert.ok);
}
assert.ok = ok;

// 5. The equality assertion tests shallow, coercive equality with
// ==.
// assert.equal(actual, expected, message_opt);

assert.equal = function equal(actual, expected, message) {
  if (actual != expected) fail(actual, expected, message, '</span>==<span class="hljs-string">', assert.equal);
};

// 6. The non-equality assertion tests for whether two objects are not equal
// with != assert.notEqual(actual, expected, message_opt);

assert.notEqual = function notEqual(actual, expected, message) {
  if (actual == expected) {
    fail(actual, expected, message, '</span>!=<span class="hljs-string">', assert.notEqual);
  }
};

// 7. The equivalence assertion tests a deep equality relation.
// assert.deepEqual(actual, expected, message_opt);

assert.deepEqual = function deepEqual(actual, expected, message) {
  if (!_deepEqual(actual, expected, false)) {
    fail(actual, expected, message, '</span><span class="hljs-attr">deepEqual</span>', <span class="hljs-attr">assert.deepEqual</span>);
  }
};

<span class="hljs-attr">assert.deepStrictEqual</span> = <span class="hljs-string">function</span> <span class="hljs-attr">deepStrictEqual</span>(<span class="hljs-attr">actual</span>, <span class="hljs-attr">expected</span>, <span class="hljs-attr">message</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">_deepEqual</span>(<span class="hljs-attr">actual</span>, <span class="hljs-attr">expected</span>, <span class="hljs-attr">true</span>)) {
    <span class="hljs-attr">fail</span>(<span class="hljs-attr">actual</span>, <span class="hljs-attr">expected</span>, <span class="hljs-attr">message</span>, '<span class="hljs-attr">deepStrictEqual</span>', <span class="hljs-attr">assert.deepStrictEqual</span>);
  }
};

<span class="hljs-attr">function</span> <span class="hljs-attr">_deepEqual</span>(<span class="hljs-attr">actual</span>, <span class="hljs-attr">expected</span>, <span class="hljs-attr">strict</span>, <span class="hljs-attr">memos</span>) {
  // <span class="hljs-attr">7.1.</span> <span class="hljs-attr">All</span> <span class="hljs-attr">identical</span> <span class="hljs-attr">values</span> <span class="hljs-attr">are</span> <span class="hljs-attr">equivalent</span>, <span class="hljs-attr">as</span> <span class="hljs-attr">determined</span> <span class="hljs-attr">by</span> ===<span class="hljs-string">.</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">actual</span> === <span class="hljs-string">expected)</span> {
    <span class="hljs-attr">return</span> <span class="hljs-attr">true</span>;
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">isBuffer</span>(<span class="hljs-attr">actual</span>) &amp;&amp; <span class="hljs-attr">isBuffer</span>(<span class="hljs-attr">expected</span>)) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">compare</span>(<span class="hljs-attr">actual</span>, <span class="hljs-attr">expected</span>) === <span class="hljs-string">0;</span>

  // <span class="hljs-attr">7.2.</span> <span class="hljs-attr">If</span> <span class="hljs-attr">the</span> <span class="hljs-attr">expected</span> <span class="hljs-attr">value</span> <span class="hljs-attr">is</span> <span class="hljs-attr">a</span> <span class="hljs-attr">Date</span> <span class="hljs-attr">object</span>, <span class="hljs-attr">the</span> <span class="hljs-attr">actual</span> <span class="hljs-attr">value</span> <span class="hljs-attr">is</span>
  // <span class="hljs-attr">equivalent</span> <span class="hljs-attr">if</span> <span class="hljs-attr">it</span> <span class="hljs-attr">is</span> <span class="hljs-attr">also</span> <span class="hljs-attr">a</span> <span class="hljs-attr">Date</span> <span class="hljs-attr">object</span> <span class="hljs-attr">that</span> <span class="hljs-attr">refers</span> <span class="hljs-attr">to</span> <span class="hljs-attr">the</span> <span class="hljs-attr">same</span> <span class="hljs-attr">time.</span>
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">util.isDate</span>(<span class="hljs-attr">actual</span>) &amp;&amp; <span class="hljs-attr">util.isDate</span>(<span class="hljs-attr">expected</span>)) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">actual.getTime</span>() === <span class="hljs-string">expected.getTime();</span>

  // <span class="hljs-attr">7.3</span> <span class="hljs-attr">If</span> <span class="hljs-attr">the</span> <span class="hljs-attr">expected</span> <span class="hljs-attr">value</span> <span class="hljs-attr">is</span> <span class="hljs-attr">a</span> <span class="hljs-attr">RegExp</span> <span class="hljs-attr">object</span>, <span class="hljs-attr">the</span> <span class="hljs-attr">actual</span> <span class="hljs-attr">value</span> <span class="hljs-attr">is</span>
  // <span class="hljs-attr">equivalent</span> <span class="hljs-attr">if</span> <span class="hljs-attr">it</span> <span class="hljs-attr">is</span> <span class="hljs-attr">also</span> <span class="hljs-attr">a</span> <span class="hljs-attr">RegExp</span> <span class="hljs-attr">object</span> <span class="hljs-attr">with</span> <span class="hljs-attr">the</span> <span class="hljs-attr">same</span> <span class="hljs-attr">source</span> <span class="hljs-attr">and</span>
  // <span class="hljs-attr">properties</span> (`<span class="hljs-attr">global</span>`, `<span class="hljs-attr">multiline</span>`, `<span class="hljs-attr">lastIndex</span>`, `<span class="hljs-attr">ignoreCase</span>`)<span class="hljs-attr">.</span>
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">util.isRegExp</span>(<span class="hljs-attr">actual</span>) &amp;&amp; <span class="hljs-attr">util.isRegExp</span>(<span class="hljs-attr">expected</span>)) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">actual.source</span> === <span class="hljs-string">expected.source</span> &amp;&amp;
           <span class="hljs-attr">actual.global</span> === <span class="hljs-string">expected.global</span> &amp;&amp;
           <span class="hljs-attr">actual.multiline</span> === <span class="hljs-string">expected.multiline</span> &amp;&amp;
           <span class="hljs-attr">actual.lastIndex</span> === <span class="hljs-string">expected.lastIndex</span> &amp;&amp;
           <span class="hljs-attr">actual.ignoreCase</span> === <span class="hljs-string">expected.ignoreCase;</span>

  // <span class="hljs-attr">7.4.</span> <span class="hljs-attr">Other</span> <span class="hljs-attr">pairs</span> <span class="hljs-attr">that</span> <span class="hljs-attr">do</span> <span class="hljs-attr">not</span> <span class="hljs-attr">both</span> <span class="hljs-attr">pass</span> <span class="hljs-attr">typeof</span> <span class="hljs-attr">value</span> == <span class="hljs-string">'object'</span>,
  // <span class="hljs-attr">equivalence</span> <span class="hljs-attr">is</span> <span class="hljs-attr">determined</span> <span class="hljs-attr">by</span> ==<span class="hljs-string">.</span>
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> ((<span class="hljs-attr">actual</span> === <span class="hljs-string">null</span> || <span class="hljs-attr">typeof</span> <span class="hljs-attr">actual</span> !== <span class="hljs-string">'object'</span>) &amp;&amp;
             (<span class="hljs-attr">expected</span> === <span class="hljs-string">null</span> || <span class="hljs-attr">typeof</span> <span class="hljs-attr">expected</span> !== <span class="hljs-string">'object'</span>)) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">strict</span> ? <span class="hljs-attr">actual</span> === <span class="hljs-string">expected</span> <span class="hljs-attr">:</span> <span class="hljs-attr">actual</span> == <span class="hljs-string">expected;</span>

  // <span class="hljs-attr">If</span> <span class="hljs-attr">both</span> <span class="hljs-attr">values</span> <span class="hljs-attr">are</span> <span class="hljs-attr">instances</span> <span class="hljs-attr">of</span> <span class="hljs-attr">typed</span> <span class="hljs-attr">arrays</span>, <span class="hljs-attr">wrap</span> <span class="hljs-attr">their</span> <span class="hljs-attr">underlying</span>
  // <span class="hljs-attr">ArrayBuffers</span> <span class="hljs-attr">in</span> <span class="hljs-attr">a</span> <span class="hljs-attr">Buffer</span> <span class="hljs-attr">each</span> <span class="hljs-attr">to</span> <span class="hljs-attr">increase</span> <span class="hljs-attr">performance</span>
  // <span class="hljs-attr">This</span> <span class="hljs-attr">optimization</span> <span class="hljs-attr">requires</span> <span class="hljs-attr">the</span> <span class="hljs-attr">arrays</span> <span class="hljs-attr">to</span> <span class="hljs-attr">have</span> <span class="hljs-attr">the</span> <span class="hljs-attr">same</span> <span class="hljs-attr">type</span> <span class="hljs-attr">as</span> <span class="hljs-attr">checked</span> <span class="hljs-attr">by</span>
  // <span class="hljs-attr">Object.prototype.toString</span> (<span class="hljs-attr">aka</span> <span class="hljs-attr">pToString</span>)<span class="hljs-attr">.</span> <span class="hljs-attr">Never</span> <span class="hljs-attr">perform</span> <span class="hljs-attr">binary</span>
  // <span class="hljs-attr">comparisons</span> <span class="hljs-attr">for</span> <span class="hljs-attr">Float</span>*<span class="hljs-attr">Arrays</span>, <span class="hljs-attr">though</span>, <span class="hljs-attr">since</span> <span class="hljs-attr">e.g.</span> +<span class="hljs-attr">0</span> === <span class="hljs-string">-0</span> <span class="hljs-attr">but</span> <span class="hljs-attr">their</span>
  // <span class="hljs-attr">bit</span> <span class="hljs-attr">patterns</span> <span class="hljs-attr">are</span> <span class="hljs-attr">not</span> <span class="hljs-attr">identical.</span>
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">isView</span>(<span class="hljs-attr">actual</span>) &amp;&amp; <span class="hljs-attr">isView</span>(<span class="hljs-attr">expected</span>) &amp;&amp;
             <span class="hljs-attr">pToString</span>(<span class="hljs-attr">actual</span>) === <span class="hljs-string">pToString(expected)</span> &amp;&amp;
             !(<span class="hljs-attr">actual</span> <span class="hljs-attr">instanceof</span> <span class="hljs-attr">Float32Array</span> ||
               <span class="hljs-attr">actual</span> <span class="hljs-attr">instanceof</span> <span class="hljs-attr">Float64Array</span>)) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">compare</span>(<span class="hljs-attr">new</span> <span class="hljs-attr">Uint8Array</span>(<span class="hljs-attr">actual.buffer</span>),
                   <span class="hljs-attr">new</span> <span class="hljs-attr">Uint8Array</span>(<span class="hljs-attr">expected.buffer</span>)) === <span class="hljs-string">0;</span>

  // <span class="hljs-attr">7.5</span> <span class="hljs-attr">For</span> <span class="hljs-attr">all</span> <span class="hljs-attr">other</span> <span class="hljs-attr">Object</span> <span class="hljs-attr">pairs</span>, <span class="hljs-attr">including</span> <span class="hljs-attr">Array</span> <span class="hljs-attr">objects</span>, <span class="hljs-attr">equivalence</span> <span class="hljs-attr">is</span>
  // <span class="hljs-attr">determined</span> <span class="hljs-attr">by</span> <span class="hljs-attr">having</span> <span class="hljs-attr">the</span> <span class="hljs-attr">same</span> <span class="hljs-attr">number</span> <span class="hljs-attr">of</span> <span class="hljs-attr">owned</span> <span class="hljs-attr">properties</span> (<span class="hljs-attr">as</span> <span class="hljs-attr">verified</span>
  // <span class="hljs-attr">with</span> <span class="hljs-attr">Object.prototype.hasOwnProperty.call</span>), <span class="hljs-attr">the</span> <span class="hljs-attr">same</span> <span class="hljs-attr">set</span> <span class="hljs-attr">of</span> <span class="hljs-attr">keys</span>
  // (<span class="hljs-attr">although</span> <span class="hljs-attr">not</span> <span class="hljs-attr">necessarily</span> <span class="hljs-attr">the</span> <span class="hljs-attr">same</span> <span class="hljs-attr">order</span>), <span class="hljs-attr">equivalent</span> <span class="hljs-attr">values</span> <span class="hljs-attr">for</span> <span class="hljs-attr">every</span>
  // <span class="hljs-attr">corresponding</span> <span class="hljs-attr">key</span>, <span class="hljs-attr">and</span> <span class="hljs-attr">an</span> <span class="hljs-attr">identical</span> '<span class="hljs-attr">prototype</span>' <span class="hljs-attr">property.</span> <span class="hljs-attr">Note:</span> <span class="hljs-attr">this</span>
  // <span class="hljs-attr">accounts</span> <span class="hljs-attr">for</span> <span class="hljs-attr">both</span> <span class="hljs-attr">named</span> <span class="hljs-attr">and</span> <span class="hljs-attr">indexed</span> <span class="hljs-attr">properties</span> <span class="hljs-attr">on</span> <span class="hljs-attr">Arrays.</span>
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">isBuffer</span>(<span class="hljs-attr">actual</span>) !== <span class="hljs-string">isBuffer(expected))</span> {
    <span class="hljs-attr">return</span> <span class="hljs-attr">false</span>;
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">memos</span> = <span class="hljs-string">memos</span> || {<span class="hljs-attr">actual:</span> [], <span class="hljs-attr">expected:</span> []};

    <span class="hljs-attr">var</span> <span class="hljs-attr">actualIndex</span> = <span class="hljs-string">memos.actual.indexOf(actual);</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">actualIndex</span> !== <span class="hljs-string">-1)</span> {
      <span class="hljs-attr">if</span> (<span class="hljs-attr">actualIndex</span> === <span class="hljs-string">memos.expected.indexOf(expected))</span> {
        <span class="hljs-attr">return</span> <span class="hljs-attr">true</span>;
      }
    }

    <span class="hljs-attr">memos.actual.push</span>(<span class="hljs-attr">actual</span>);
    <span class="hljs-attr">memos.expected.push</span>(<span class="hljs-attr">expected</span>);

    <span class="hljs-attr">return</span> <span class="hljs-attr">objEquiv</span>(<span class="hljs-attr">actual</span>, <span class="hljs-attr">expected</span>, <span class="hljs-attr">strict</span>, <span class="hljs-attr">memos</span>);
  }
}

<span class="hljs-attr">function</span> <span class="hljs-attr">isArguments</span>(<span class="hljs-attr">object</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">Object.prototype.toString.call</span>(<span class="hljs-attr">object</span>) == <span class="hljs-string">'[object Arguments]'</span>;
}

<span class="hljs-attr">function</span> <span class="hljs-attr">objEquiv</span>(<span class="hljs-attr">a</span>, <span class="hljs-attr">b</span>, <span class="hljs-attr">strict</span>, <span class="hljs-attr">actualVisitedObjects</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">a</span> === <span class="hljs-string">null</span> || <span class="hljs-attr">a</span> === <span class="hljs-string">undefined</span> || <span class="hljs-attr">b</span> === <span class="hljs-string">null</span> || <span class="hljs-attr">b</span> === <span class="hljs-string">undefined)</span>
    <span class="hljs-attr">return</span> <span class="hljs-attr">false</span>;
  // <span class="hljs-attr">if</span> <span class="hljs-attr">one</span> <span class="hljs-attr">is</span> <span class="hljs-attr">a</span> <span class="hljs-attr">primitive</span>, <span class="hljs-attr">the</span> <span class="hljs-attr">other</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">same</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">util.isPrimitive</span>(<span class="hljs-attr">a</span>) || <span class="hljs-attr">util.isPrimitive</span>(<span class="hljs-attr">b</span>))
    <span class="hljs-attr">return</span> <span class="hljs-attr">a</span> === <span class="hljs-string">b;</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">strict</span> &amp;&amp; <span class="hljs-attr">Object.getPrototypeOf</span>(<span class="hljs-attr">a</span>) !== <span class="hljs-string">Object.getPrototypeOf(b))</span>
    <span class="hljs-attr">return</span> <span class="hljs-attr">false</span>;
  <span class="hljs-attr">var</span> <span class="hljs-attr">aIsArgs</span> = <span class="hljs-string">isArguments(a);</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">bIsArgs</span> = <span class="hljs-string">isArguments(b);</span>
  <span class="hljs-attr">if</span> ((<span class="hljs-attr">aIsArgs</span> &amp;&amp; !<span class="hljs-attr">bIsArgs</span>) || (!<span class="hljs-attr">aIsArgs</span> &amp;&amp; <span class="hljs-attr">bIsArgs</span>))
    <span class="hljs-attr">return</span> <span class="hljs-attr">false</span>;
  <span class="hljs-attr">if</span> (<span class="hljs-attr">aIsArgs</span>) {
    <span class="hljs-attr">a</span> = <span class="hljs-string">pSlice.call(a);</span>
    <span class="hljs-attr">b</span> = <span class="hljs-string">pSlice.call(b);</span>
    <span class="hljs-attr">return</span> <span class="hljs-attr">_deepEqual</span>(<span class="hljs-attr">a</span>, <span class="hljs-attr">b</span>, <span class="hljs-attr">strict</span>);
  }
  <span class="hljs-attr">var</span> <span class="hljs-attr">ka</span> = <span class="hljs-string">objectKeys(a);</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">kb</span> = <span class="hljs-string">objectKeys(b);</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">key</span>, <span class="hljs-attr">i</span>;
  // <span class="hljs-attr">having</span> <span class="hljs-attr">the</span> <span class="hljs-attr">same</span> <span class="hljs-attr">number</span> <span class="hljs-attr">of</span> <span class="hljs-attr">owned</span> <span class="hljs-attr">properties</span> (<span class="hljs-attr">keys</span> <span class="hljs-attr">incorporates</span>
  // <span class="hljs-attr">hasOwnProperty</span>)
  <span class="hljs-attr">if</span> (<span class="hljs-attr">ka.length</span> !== <span class="hljs-string">kb.length)</span>
    <span class="hljs-attr">return</span> <span class="hljs-attr">false</span>;
  //<span class="hljs-attr">the</span> <span class="hljs-attr">same</span> <span class="hljs-attr">set</span> <span class="hljs-attr">of</span> <span class="hljs-attr">keys</span> (<span class="hljs-attr">although</span> <span class="hljs-attr">not</span> <span class="hljs-attr">necessarily</span> <span class="hljs-attr">the</span> <span class="hljs-attr">same</span> <span class="hljs-attr">order</span>),
  <span class="hljs-attr">ka.sort</span>();
  <span class="hljs-attr">kb.sort</span>();
  //~~~<span class="hljs-attr">cheap</span> <span class="hljs-attr">key</span> <span class="hljs-attr">test</span>
  <span class="hljs-attr">for</span> (<span class="hljs-attr">i</span> = <span class="hljs-string">ka.length</span> <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>; <span class="hljs-attr">i</span> &gt;</span>= 0; i--) {
    if (ka[i] !== kb[i])
      return false;
  }
  //equivalent values for every corresponding key, and
  //~~~possibly expensive deep test
  for (i = ka.length - 1; i &gt;= 0; i--) {
    key = ka[i];
    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))
      return false;
  }
  return true;
}

// 8. The non-equivalence assertion tests for any deep inequality.
// assert.notDeepEqual(actual, expected, message_opt);

assert.notDeepEqual = function notDeepEqual(actual, expected, message) {
  if (_deepEqual(actual, expected, false)) {
    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);
  }
};

assert.notDeepStrictEqual = notDeepStrictEqual;
function notDeepStrictEqual(actual, expected, message) {
  if (_deepEqual(actual, expected, true)) {
    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);
  }
}


// 9. The strict equality assertion tests strict equality, as determined by ===.
// assert.strictEqual(actual, expected, message_opt);

assert.strictEqual = function strictEqual(actual, expected, message) {
  if (actual !== expected) {
    fail(actual, expected, message, '===', assert.strictEqual);
  }
};

// 10. The strict non-equality assertion tests for strict inequality, as
// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);

assert.notStrictEqual = function notStrictEqual(actual, expected, message) {
  if (actual === expected) {
    fail(actual, expected, message, '!==', assert.notStrictEqual);
  }
};

function expectedException(actual, expected) {
  if (!actual || !expected) {
    return false;
  }

  if (Object.prototype.toString.call(expected) == '[object RegExp]') {
    return expected.test(actual);
  }

  try {
    if (actual instanceof expected) {
      return true;
    }
  } catch (e) {
    // Ignore.  The instanceof check doesn't work for arrow functions.
  }

  if (Error.isPrototypeOf(expected)) {
    return false;
  }

  return expected.call({}, actual) === true;
}

function _tryBlock(block) {
  var error;
  try {
    block();
  } catch (e) {
    error = e;
  }
  return error;
}

function _throws(shouldThrow, block, expected, message) {
  var actual;

  if (typeof block !== 'function') {
    throw new TypeError('"block" argument must be a function');
  }

  if (typeof expected === 'string') {
    message = expected;
    expected = null;
  }

  actual = _tryBlock(block);

  message = (expected &amp;&amp; expected.name ? ' (' + expected.name + ').' : '.') +
            (message ? ' ' + message : '.');

  if (shouldThrow &amp;&amp; !actual) {
    fail(actual, expected, 'Missing expected exception' + message);
  }

  var userProvidedMessage = typeof message === 'string';
  var isUnwantedException = !shouldThrow &amp;&amp; util.isError(actual);
  var isUnexpectedException = !shouldThrow &amp;&amp; actual &amp;&amp; !expected;

  if ((isUnwantedException &amp;&amp;
      userProvidedMessage &amp;&amp;
      expectedException(actual, expected)) ||
      isUnexpectedException) {
    fail(actual, expected, 'Got unwanted exception' + message);
  }

  if ((shouldThrow &amp;&amp; actual &amp;&amp; expected &amp;&amp;
      !expectedException(actual, expected)) || (!shouldThrow &amp;&amp; actual)) {
    throw actual;
  }
}

// 11. Expected to throw an error:
// assert.throws(block, Error_opt, message_opt);

assert.throws = function(block, /*optional*/error, /*optional*/message) {
  _throws(true, block, error, message);
};

// EXTENSION! This is annoying to write outside this module.
assert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {
  _throws(false, block, error, message);
};

assert.ifError = function(err) { if (err) throw err; };

// Expose a strict only variant of assert
function strict(value, message) {
  if (!value) fail(value, true, message, '==', strict);
}
assert.strict = objectAssign(strict, assert, {
  equal: assert.strictEqual,
  deepEqual: assert.deepStrictEqual,
  notEqual: assert.notStrictEqual,
  notDeepEqual: assert.notDeepStrictEqual
});
assert.strict.strict = assert.strict;

var objectKeys = Object.keys || function (obj) {
  var keys = [];
  for (var key in obj) {
    if (hasOwn.call(obj, key)) keys.push(key);
  }
  return keys;
};

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/


/* eslint-disable no-unused-vars */
var getOwnPropertySymbols = Object.getOwnPropertySymbols;
var hasOwnProperty = Object.prototype.hasOwnProperty;
var propIsEnumerable = Object.prototype.propertyIsEnumerable;

function toObject(val) {
	if (val === null || val === undefined) {
		throw new TypeError('Object.assign cannot be called with null or undefined');
	}

	return Object(val);
}

function shouldUseNative() {
	try {
		if (!Object.assign) {
			return false;
		}

		// Detect buggy property enumeration order in older V8 versions.

		// https://bugs.chromium.org/p/v8/issues/detail?id=4118
		var test1 = new String('abc');  // eslint-disable-line no-new-wrappers
		test1[5] = 'de';
		if (Object.getOwnPropertyNames(test1)[0] === '5') {
			return false;
		}

		// https://bugs.chromium.org/p/v8/issues/detail?id=3056
		var test2 = {};
		for (var i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attr">10</span>; <span class="hljs-attr">i</span>++) {
			<span class="hljs-attr">test2</span>['<span class="hljs-attr">_</span>' + <span class="hljs-attr">String.fromCharCode</span>(<span class="hljs-attr">i</span>)] = <span class="hljs-string">i;</span>
		}
		<span class="hljs-attr">var</span> <span class="hljs-attr">order2</span> = <span class="hljs-string">Object.getOwnPropertyNames(test2).map(function</span> (<span class="hljs-attr">n</span>) {
			<span class="hljs-attr">return</span> <span class="hljs-attr">test2</span>[<span class="hljs-attr">n</span>];
		});
		<span class="hljs-attr">if</span> (<span class="hljs-attr">order2.join</span>('') !== <span class="hljs-string">'0123456789'</span>) {
			<span class="hljs-attr">return</span> <span class="hljs-attr">false</span>;
		}

		// <span class="hljs-attr">https:</span>//<span class="hljs-attr">bugs.chromium.org</span>/<span class="hljs-attr">p</span>/<span class="hljs-attr">v8</span>/<span class="hljs-attr">issues</span>/<span class="hljs-attr">detail</span>?<span class="hljs-attr">id</span>=<span class="hljs-string">3056</span>
		<span class="hljs-attr">var</span> <span class="hljs-attr">test3</span> = <span class="hljs-string">{};</span>
		'<span class="hljs-attr">abcdefghijklmnopqrst</span>'<span class="hljs-attr">.split</span>('')<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">letter</span>) {
			<span class="hljs-attr">test3</span>[<span class="hljs-attr">letter</span>] = <span class="hljs-string">letter;</span>
		});
		<span class="hljs-attr">if</span> (<span class="hljs-attr">Object.keys</span>(<span class="hljs-attr">Object.assign</span>({}, <span class="hljs-attr">test3</span>))<span class="hljs-attr">.join</span>('') !==
				<span class="hljs-string">'abcdefghijklmnopqrst'</span>) {
			<span class="hljs-attr">return</span> <span class="hljs-attr">false</span>;
		}

		<span class="hljs-attr">return</span> <span class="hljs-attr">true</span>;
	} <span class="hljs-attr">catch</span> (<span class="hljs-attr">err</span>) {
		// <span class="hljs-attr">We</span> <span class="hljs-attr">don</span>'<span class="hljs-attr">t</span> <span class="hljs-attr">expect</span> <span class="hljs-attr">any</span> <span class="hljs-attr">of</span> <span class="hljs-attr">the</span> <span class="hljs-attr">above</span> <span class="hljs-attr">to</span> <span class="hljs-attr">throw</span>, <span class="hljs-attr">but</span> <span class="hljs-attr">better</span> <span class="hljs-attr">to</span> <span class="hljs-attr">be</span> <span class="hljs-attr">safe.</span>
		<span class="hljs-attr">return</span> <span class="hljs-attr">false</span>;
	}
}

<span class="hljs-attr">module.exports</span> = <span class="hljs-string">shouldUseNative()</span> ? <span class="hljs-attr">Object.assign</span> <span class="hljs-attr">:</span> <span class="hljs-attr">function</span> (<span class="hljs-attr">target</span>, <span class="hljs-attr">source</span>) {
	<span class="hljs-attr">var</span> <span class="hljs-attr">from</span>;
	<span class="hljs-attr">var</span> <span class="hljs-attr">to</span> = <span class="hljs-string">toObject(target);</span>
	<span class="hljs-attr">var</span> <span class="hljs-attr">symbols</span>;

	<span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">s</span> = <span class="hljs-string">1;</span> <span class="hljs-attr">s</span> &lt; <span class="hljs-attr">arguments.length</span>; <span class="hljs-attr">s</span>++) {
		<span class="hljs-attr">from</span> = <span class="hljs-string">Object(arguments[s]);</span>

		<span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">key</span> <span class="hljs-attr">in</span> <span class="hljs-attr">from</span>) {
			<span class="hljs-attr">if</span> (<span class="hljs-attr">hasOwnProperty.call</span>(<span class="hljs-attr">from</span>, <span class="hljs-attr">key</span>)) {
				<span class="hljs-attr">to</span>[<span class="hljs-attr">key</span>] = <span class="hljs-string">from[key];</span>
			}
		}

		<span class="hljs-attr">if</span> (<span class="hljs-attr">getOwnPropertySymbols</span>) {
			<span class="hljs-attr">symbols</span> = <span class="hljs-string">getOwnPropertySymbols(from);</span>
			<span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">symbols.length</span>; <span class="hljs-attr">i</span>++) {
				<span class="hljs-attr">if</span> (<span class="hljs-attr">propIsEnumerable.call</span>(<span class="hljs-attr">from</span>, <span class="hljs-attr">symbols</span>[<span class="hljs-attr">i</span>])) {
					<span class="hljs-attr">to</span>[<span class="hljs-attr">symbols</span>[<span class="hljs-attr">i</span>]] = <span class="hljs-string">from[symbols[i]];</span>
				}
			}
		}
	}

	<span class="hljs-attr">return</span> <span class="hljs-attr">to</span>;
};


/***/ }),
/* <span class="hljs-attr">28</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">exports</span>, <span class="hljs-attr">__webpack_require__</span>) {

/* <span class="hljs-attr">WEBPACK</span> <span class="hljs-attr">VAR</span> <span class="hljs-attr">INJECTION</span> */(<span class="hljs-attr">function</span>(<span class="hljs-attr">process</span>) {// <span class="hljs-attr">Copyright</span> <span class="hljs-attr">Joyent</span>, <span class="hljs-attr">Inc.</span> <span class="hljs-attr">and</span> <span class="hljs-attr">other</span> <span class="hljs-attr">Node</span> <span class="hljs-attr">contributors.</span>
//
// <span class="hljs-attr">Permission</span> <span class="hljs-attr">is</span> <span class="hljs-attr">hereby</span> <span class="hljs-attr">granted</span>, <span class="hljs-attr">free</span> <span class="hljs-attr">of</span> <span class="hljs-attr">charge</span>, <span class="hljs-attr">to</span> <span class="hljs-attr">any</span> <span class="hljs-attr">person</span> <span class="hljs-attr">obtaining</span> <span class="hljs-attr">a</span>
// <span class="hljs-attr">copy</span> <span class="hljs-attr">of</span> <span class="hljs-attr">this</span> <span class="hljs-attr">software</span> <span class="hljs-attr">and</span> <span class="hljs-attr">associated</span> <span class="hljs-attr">documentation</span> <span class="hljs-attr">files</span> (<span class="hljs-attr">the</span>
// "<span class="hljs-attr">Software</span>"), <span class="hljs-attr">to</span> <span class="hljs-attr">deal</span> <span class="hljs-attr">in</span> <span class="hljs-attr">the</span> <span class="hljs-attr">Software</span> <span class="hljs-attr">without</span> <span class="hljs-attr">restriction</span>, <span class="hljs-attr">including</span>
// <span class="hljs-attr">without</span> <span class="hljs-attr">limitation</span> <span class="hljs-attr">the</span> <span class="hljs-attr">rights</span> <span class="hljs-attr">to</span> <span class="hljs-attr">use</span>, <span class="hljs-attr">copy</span>, <span class="hljs-attr">modify</span>, <span class="hljs-attr">merge</span>, <span class="hljs-attr">publish</span>,
// <span class="hljs-attr">distribute</span>, <span class="hljs-attr">sublicense</span>, <span class="hljs-attr">and</span>/<span class="hljs-attr">or</span> <span class="hljs-attr">sell</span> <span class="hljs-attr">copies</span> <span class="hljs-attr">of</span> <span class="hljs-attr">the</span> <span class="hljs-attr">Software</span>, <span class="hljs-attr">and</span> <span class="hljs-attr">to</span> <span class="hljs-attr">permit</span>
// <span class="hljs-attr">persons</span> <span class="hljs-attr">to</span> <span class="hljs-attr">whom</span> <span class="hljs-attr">the</span> <span class="hljs-attr">Software</span> <span class="hljs-attr">is</span> <span class="hljs-attr">furnished</span> <span class="hljs-attr">to</span> <span class="hljs-attr">do</span> <span class="hljs-attr">so</span>, <span class="hljs-attr">subject</span> <span class="hljs-attr">to</span> <span class="hljs-attr">the</span>
// <span class="hljs-attr">following</span> <span class="hljs-attr">conditions:</span>
//
// <span class="hljs-attr">The</span> <span class="hljs-attr">above</span> <span class="hljs-attr">copyright</span> <span class="hljs-attr">notice</span> <span class="hljs-attr">and</span> <span class="hljs-attr">this</span> <span class="hljs-attr">permission</span> <span class="hljs-attr">notice</span> <span class="hljs-attr">shall</span> <span class="hljs-attr">be</span> <span class="hljs-attr">included</span>
// <span class="hljs-attr">in</span> <span class="hljs-attr">all</span> <span class="hljs-attr">copies</span> <span class="hljs-attr">or</span> <span class="hljs-attr">substantial</span> <span class="hljs-attr">portions</span> <span class="hljs-attr">of</span> <span class="hljs-attr">the</span> <span class="hljs-attr">Software.</span>
//
// <span class="hljs-attr">THE</span> <span class="hljs-attr">SOFTWARE</span> <span class="hljs-attr">IS</span> <span class="hljs-attr">PROVIDED</span> "<span class="hljs-attr">AS</span> <span class="hljs-attr">IS</span>", <span class="hljs-attr">WITHOUT</span> <span class="hljs-attr">WARRANTY</span> <span class="hljs-attr">OF</span> <span class="hljs-attr">ANY</span> <span class="hljs-attr">KIND</span>, <span class="hljs-attr">EXPRESS</span>
// <span class="hljs-attr">OR</span> <span class="hljs-attr">IMPLIED</span>, <span class="hljs-attr">INCLUDING</span> <span class="hljs-attr">BUT</span> <span class="hljs-attr">NOT</span> <span class="hljs-attr">LIMITED</span> <span class="hljs-attr">TO</span> <span class="hljs-attr">THE</span> <span class="hljs-attr">WARRANTIES</span> <span class="hljs-attr">OF</span>
// <span class="hljs-attr">MERCHANTABILITY</span>, <span class="hljs-attr">FITNESS</span> <span class="hljs-attr">FOR</span> <span class="hljs-attr">A</span> <span class="hljs-attr">PARTICULAR</span> <span class="hljs-attr">PURPOSE</span> <span class="hljs-attr">AND</span> <span class="hljs-attr">NONINFRINGEMENT.</span> <span class="hljs-attr">IN</span>
// <span class="hljs-attr">NO</span> <span class="hljs-attr">EVENT</span> <span class="hljs-attr">SHALL</span> <span class="hljs-attr">THE</span> <span class="hljs-attr">AUTHORS</span> <span class="hljs-attr">OR</span> <span class="hljs-attr">COPYRIGHT</span> <span class="hljs-attr">HOLDERS</span> <span class="hljs-attr">BE</span> <span class="hljs-attr">LIABLE</span> <span class="hljs-attr">FOR</span> <span class="hljs-attr">ANY</span> <span class="hljs-attr">CLAIM</span>,
// <span class="hljs-attr">DAMAGES</span> <span class="hljs-attr">OR</span> <span class="hljs-attr">OTHER</span> <span class="hljs-attr">LIABILITY</span>, <span class="hljs-attr">WHETHER</span> <span class="hljs-attr">IN</span> <span class="hljs-attr">AN</span> <span class="hljs-attr">ACTION</span> <span class="hljs-attr">OF</span> <span class="hljs-attr">CONTRACT</span>, <span class="hljs-attr">TORT</span> <span class="hljs-attr">OR</span>
// <span class="hljs-attr">OTHERWISE</span>, <span class="hljs-attr">ARISING</span> <span class="hljs-attr">FROM</span>, <span class="hljs-attr">OUT</span> <span class="hljs-attr">OF</span> <span class="hljs-attr">OR</span> <span class="hljs-attr">IN</span> <span class="hljs-attr">CONNECTION</span> <span class="hljs-attr">WITH</span> <span class="hljs-attr">THE</span> <span class="hljs-attr">SOFTWARE</span> <span class="hljs-attr">OR</span> <span class="hljs-attr">THE</span>
// <span class="hljs-attr">USE</span> <span class="hljs-attr">OR</span> <span class="hljs-attr">OTHER</span> <span class="hljs-attr">DEALINGS</span> <span class="hljs-attr">IN</span> <span class="hljs-attr">THE</span> <span class="hljs-attr">SOFTWARE.</span>

<span class="hljs-attr">var</span> <span class="hljs-attr">getOwnPropertyDescriptors</span> = <span class="hljs-string">Object.getOwnPropertyDescriptors</span> ||
  <span class="hljs-attr">function</span> <span class="hljs-attr">getOwnPropertyDescriptors</span>(<span class="hljs-attr">obj</span>) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">keys</span> = <span class="hljs-string">Object.keys(obj);</span>
    <span class="hljs-attr">var</span> <span class="hljs-attr">descriptors</span> = <span class="hljs-string">{};</span>
    <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">keys.length</span>; <span class="hljs-attr">i</span>++) {
      <span class="hljs-attr">descriptors</span>[<span class="hljs-attr">keys</span>[<span class="hljs-attr">i</span>]] = <span class="hljs-string">Object.getOwnPropertyDescriptor(obj,</span> <span class="hljs-attr">keys</span>[<span class="hljs-attr">i</span>]);
    }
    <span class="hljs-attr">return</span> <span class="hljs-attr">descriptors</span>;
  };

<span class="hljs-attr">var</span> <span class="hljs-attr">formatRegExp</span> = <span class="hljs-string">/%[sdj%]/g;</span>
<span class="hljs-attr">exports.format</span> = <span class="hljs-string">function(f)</span> {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">isString</span>(<span class="hljs-attr">f</span>)) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">objects</span> = <span class="hljs-string">[];</span>
    <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">arguments.length</span>; <span class="hljs-attr">i</span>++) {
      <span class="hljs-attr">objects.push</span>(<span class="hljs-attr">inspect</span>(<span class="hljs-attr">arguments</span>[<span class="hljs-attr">i</span>]));
    }
    <span class="hljs-attr">return</span> <span class="hljs-attr">objects.join</span>(' ');
  }

  <span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">1;</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">args</span> = <span class="hljs-string">arguments;</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">len</span> = <span class="hljs-string">args.length;</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">str</span> = <span class="hljs-string">String(f).replace(formatRegExp,</span> <span class="hljs-attr">function</span>(<span class="hljs-attr">x</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">x</span> === <span class="hljs-string">'%%'</span>) <span class="hljs-attr">return</span> '%';
    <span class="hljs-attr">if</span> (<span class="hljs-attr">i</span> &gt;</span>= len) return x;
    switch (x) {
      case '%s': return String(args[i++]);
      case '%d': return Number(args[i++]);
      case '%j':
        try {
          return JSON.stringify(args[i++]);
        } catch (_) {
          return '[Circular]';
        }
      default:
        return x;
    }
  });
  for (var x = args[i]; i <span class="hljs-tag">&lt; <span class="hljs-attr">len</span>; <span class="hljs-attr">x</span> = <span class="hljs-string">args[++i])</span> {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">isNull</span>(<span class="hljs-attr">x</span>) || !<span class="hljs-attr">isObject</span>(<span class="hljs-attr">x</span>)) {
      <span class="hljs-attr">str</span> += <span class="hljs-string">' '</span> + <span class="hljs-attr">x</span>;
    } <span class="hljs-attr">else</span> {
      <span class="hljs-attr">str</span> += <span class="hljs-string">' '</span> + <span class="hljs-attr">inspect</span>(<span class="hljs-attr">x</span>);
    }
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">str</span>;
};


// <span class="hljs-attr">Mark</span> <span class="hljs-attr">that</span> <span class="hljs-attr">a</span> <span class="hljs-attr">method</span> <span class="hljs-attr">should</span> <span class="hljs-attr">not</span> <span class="hljs-attr">be</span> <span class="hljs-attr">used.</span>
// <span class="hljs-attr">Returns</span> <span class="hljs-attr">a</span> <span class="hljs-attr">modified</span> <span class="hljs-attr">function</span> <span class="hljs-attr">which</span> <span class="hljs-attr">warns</span> <span class="hljs-attr">once</span> <span class="hljs-attr">by</span> <span class="hljs-attr">default.</span>
// <span class="hljs-attr">If</span> <span class="hljs-attr">--no-deprecation</span> <span class="hljs-attr">is</span> <span class="hljs-attr">set</span>, <span class="hljs-attr">then</span> <span class="hljs-attr">it</span> <span class="hljs-attr">is</span> <span class="hljs-attr">a</span> <span class="hljs-attr">no-op.</span>
<span class="hljs-attr">exports.deprecate</span> = <span class="hljs-string">function(fn,</span> <span class="hljs-attr">msg</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">process</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-attr">process.noDeprecation</span> === <span class="hljs-string">true)</span> {
    <span class="hljs-attr">return</span> <span class="hljs-attr">fn</span>;
  }

  // <span class="hljs-attr">Allow</span> <span class="hljs-attr">for</span> <span class="hljs-attr">deprecating</span> <span class="hljs-attr">things</span> <span class="hljs-attr">in</span> <span class="hljs-attr">the</span> <span class="hljs-attr">process</span> <span class="hljs-attr">of</span> <span class="hljs-attr">starting</span> <span class="hljs-attr">up.</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">process</span> === <span class="hljs-string">'undefined'</span>) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">function</span>() {
      <span class="hljs-attr">return</span> <span class="hljs-attr">exports.deprecate</span>(<span class="hljs-attr">fn</span>, <span class="hljs-attr">msg</span>)<span class="hljs-attr">.apply</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">arguments</span>);
    };
  }

  <span class="hljs-attr">var</span> <span class="hljs-attr">warned</span> = <span class="hljs-string">false;</span>
  <span class="hljs-attr">function</span> <span class="hljs-attr">deprecated</span>() {
    <span class="hljs-attr">if</span> (!<span class="hljs-attr">warned</span>) {
      <span class="hljs-attr">if</span> (<span class="hljs-attr">process.throwDeprecation</span>) {
        <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>(<span class="hljs-attr">msg</span>);
      } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">process.traceDeprecation</span>) {
        <span class="hljs-attr">console.trace</span>(<span class="hljs-attr">msg</span>);
      } <span class="hljs-attr">else</span> {
        <span class="hljs-attr">console.error</span>(<span class="hljs-attr">msg</span>);
      }
      <span class="hljs-attr">warned</span> = <span class="hljs-string">true;</span>
    }
    <span class="hljs-attr">return</span> <span class="hljs-attr">fn.apply</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">arguments</span>);
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">deprecated</span>;
};


<span class="hljs-attr">var</span> <span class="hljs-attr">debugs</span> = <span class="hljs-string">{};</span>
<span class="hljs-attr">var</span> <span class="hljs-attr">debugEnviron</span>;
<span class="hljs-attr">exports.debuglog</span> = <span class="hljs-string">function(set)</span> {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">isUndefined</span>(<span class="hljs-attr">debugEnviron</span>))
    <span class="hljs-attr">debugEnviron</span> = <span class="hljs-string">process.env.NODE_DEBUG</span> || '';
  <span class="hljs-attr">set</span> = <span class="hljs-string">set.toUpperCase();</span>
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">debugs</span>[<span class="hljs-attr">set</span>]) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">new</span> <span class="hljs-attr">RegExp</span>('\\<span class="hljs-attr">b</span>' + <span class="hljs-attr">set</span> + '\\<span class="hljs-attr">b</span>', '<span class="hljs-attr">i</span>')<span class="hljs-attr">.test</span>(<span class="hljs-attr">debugEnviron</span>)) {
      <span class="hljs-attr">var</span> <span class="hljs-attr">pid</span> = <span class="hljs-string">process.pid;</span>
      <span class="hljs-attr">debugs</span>[<span class="hljs-attr">set</span>] = <span class="hljs-string">function()</span> {
        <span class="hljs-attr">var</span> <span class="hljs-attr">msg</span> = <span class="hljs-string">exports.format.apply(exports,</span> <span class="hljs-attr">arguments</span>);
        <span class="hljs-attr">console.error</span>('%<span class="hljs-attr">s</span> %<span class="hljs-attr">d:</span> %<span class="hljs-attr">s</span>', <span class="hljs-attr">set</span>, <span class="hljs-attr">pid</span>, <span class="hljs-attr">msg</span>);
      };
    } <span class="hljs-attr">else</span> {
      <span class="hljs-attr">debugs</span>[<span class="hljs-attr">set</span>] = <span class="hljs-string">function()</span> {};
    }
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">debugs</span>[<span class="hljs-attr">set</span>];
};


/**
 * <span class="hljs-attr">Echos</span> <span class="hljs-attr">the</span> <span class="hljs-attr">value</span> <span class="hljs-attr">of</span> <span class="hljs-attr">a</span> <span class="hljs-attr">value.</span> <span class="hljs-attr">Trys</span> <span class="hljs-attr">to</span> <span class="hljs-attr">print</span> <span class="hljs-attr">the</span> <span class="hljs-attr">value</span> <span class="hljs-attr">out</span>
 * <span class="hljs-attr">in</span> <span class="hljs-attr">the</span> <span class="hljs-attr">best</span> <span class="hljs-attr">way</span> <span class="hljs-attr">possible</span> <span class="hljs-attr">given</span> <span class="hljs-attr">the</span> <span class="hljs-attr">different</span> <span class="hljs-attr">types.</span>
 *
 * @<span class="hljs-attr">param</span> {<span class="hljs-attr">Object</span>} <span class="hljs-attr">obj</span> <span class="hljs-attr">The</span> <span class="hljs-attr">object</span> <span class="hljs-attr">to</span> <span class="hljs-attr">print</span> <span class="hljs-attr">out.</span>
 * @<span class="hljs-attr">param</span> {<span class="hljs-attr">Object</span>} <span class="hljs-attr">opts</span> <span class="hljs-attr">Optional</span> <span class="hljs-attr">options</span> <span class="hljs-attr">object</span> <span class="hljs-attr">that</span> <span class="hljs-attr">alters</span> <span class="hljs-attr">the</span> <span class="hljs-attr">output.</span>
 */
/* <span class="hljs-attr">legacy:</span> <span class="hljs-attr">obj</span>, <span class="hljs-attr">showHidden</span>, <span class="hljs-attr">depth</span>, <span class="hljs-attr">colors</span>*/
<span class="hljs-attr">function</span> <span class="hljs-attr">inspect</span>(<span class="hljs-attr">obj</span>, <span class="hljs-attr">opts</span>) {
  // <span class="hljs-attr">default</span> <span class="hljs-attr">options</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">ctx</span> = <span class="hljs-string">{</span>
    <span class="hljs-attr">seen:</span> [],
    <span class="hljs-attr">stylize:</span> <span class="hljs-attr">stylizeNoColor</span>
  };
  // <span class="hljs-attr">legacy...</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">arguments.length</span> &gt;</span>= 3) ctx.depth = arguments[2];
  if (arguments.length &gt;= 4) ctx.colors = arguments[3];
  if (isBoolean(opts)) {
    // legacy...
    ctx.showHidden = opts;
  } else if (opts) {
    // got an "options" object
    exports._extend(ctx, opts);
  }
  // set default options
  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
  if (isUndefined(ctx.depth)) ctx.depth = 2;
  if (isUndefined(ctx.colors)) ctx.colors = false;
  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
inspect.colors = {
  'bold' : [1, 22],
  'italic' : [3, 23],
  'underline' : [4, 24],
  'inverse' : [7, 27],
  'white' : [37, 39],
  'grey' : [90, 39],
  'black' : [30, 39],
  'blue' : [34, 39],
  'cyan' : [36, 39],
  'green' : [32, 39],
  'magenta' : [35, 39],
  'red' : [31, 39],
  'yellow' : [33, 39]
};

// Don't use 'blue' not visible on cmd.exe
inspect.styles = {
  'special': 'cyan',
  'number': 'yellow',
  'boolean': 'yellow',
  'undefined': 'grey',
  'null': 'bold',
  'string': 'green',
  'date': 'magenta',
  // "name": intentionally not styling
  'regexp': 'red'
};


function stylizeWithColor(str, styleType) {
  var style = inspect.styles[styleType];

  if (style) {
    return '\u001b[' + inspect.colors[style][0] + 'm' + str +
           '\u001b[' + inspect.colors[style][1] + 'm';
  } else {
    return str;
  }
}


function stylizeNoColor(str, styleType) {
  return str;
}


function arrayToHash(array) {
  var hash = {};

  array.forEach(function(val, idx) {
    hash[val] = true;
  });

  return hash;
}


function formatValue(ctx, value, recurseTimes) {
  // Provide a hook for user-specified inspect functions.
  // Check that value is an object with an inspect function on it
  if (ctx.customInspect &amp;&amp;
      value &amp;&amp;
      isFunction(value.inspect) &amp;&amp;
      // Filter out the util module, it's inspect function is special
      value.inspect !== exports.inspect &amp;&amp;
      // Also filter out any prototype objects using the circular check.
      !(value.constructor &amp;&amp; value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);
    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    return ret;
  }

  // Primitive types cannot have properties
  var primitive = formatPrimitive(ctx, value);
  if (primitive) {
    return primitive;
  }

  // Look up the keys of the object.
  var keys = Object.keys(value);
  var visibleKeys = arrayToHash(keys);

  if (ctx.showHidden) {
    keys = Object.getOwnPropertyNames(value);
  }

  // IE doesn't make error fields non-enumerable
  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
  if (isError(value)
      &amp;&amp; (keys.indexOf('message') &gt;= 0 || keys.indexOf('description') &gt;= 0)) {
    return formatError(value);
  }

  // Some type of object without properties can be shortcutted.
  if (keys.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ': ' + value.name : '';
      return ctx.stylize('[Function' + name + ']', 'special');
    }
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    }
    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), 'date');
    }
    if (isError(value)) {
      return formatError(value);
    }
  }

  var base = '', array = false, braces = ['{', '}'];

  // Make Array say that they are Array
  if (isArray(value)) {
    array = true;
    braces = ['[', ']'];
  }

  // Make functions say that they are functions
  if (isFunction(value)) {
    var n = value.name ? ': ' + value.name : '';
    base = ' [Function' + n + ']';
  }

  // Make RegExps say that they are RegExps
  if (isRegExp(value)) {
    base = ' ' + RegExp.prototype.toString.call(value);
  }

  // Make dates with properties first say the date
  if (isDate(value)) {
    base = ' ' + Date.prototype.toUTCString.call(value);
  }

  // Make error with message first say the error
  if (isError(value)) {
    base = ' ' + formatError(value);
  }

  if (keys.length === 0 &amp;&amp; (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }

  if (recurseTimes <span class="hljs-tag">&lt; <span class="hljs-attr">0</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">isRegExp</span>(<span class="hljs-attr">value</span>)) {
      <span class="hljs-attr">return</span> <span class="hljs-attr">ctx.stylize</span>(<span class="hljs-attr">RegExp.prototype.toString.call</span>(<span class="hljs-attr">value</span>), '<span class="hljs-attr">regexp</span>');
    } <span class="hljs-attr">else</span> {
      <span class="hljs-attr">return</span> <span class="hljs-attr">ctx.stylize</span>('[<span class="hljs-attr">Object</span>]', '<span class="hljs-attr">special</span>');
    }
  }

  <span class="hljs-attr">ctx.seen.push</span>(<span class="hljs-attr">value</span>);

  <span class="hljs-attr">var</span> <span class="hljs-attr">output</span>;
  <span class="hljs-attr">if</span> (<span class="hljs-attr">array</span>) {
    <span class="hljs-attr">output</span> = <span class="hljs-string">formatArray(ctx,</span> <span class="hljs-attr">value</span>, <span class="hljs-attr">recurseTimes</span>, <span class="hljs-attr">visibleKeys</span>, <span class="hljs-attr">keys</span>);
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">output</span> = <span class="hljs-string">keys.map(function(key)</span> {
      <span class="hljs-attr">return</span> <span class="hljs-attr">formatProperty</span>(<span class="hljs-attr">ctx</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">recurseTimes</span>, <span class="hljs-attr">visibleKeys</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">array</span>);
    });
  }

  <span class="hljs-attr">ctx.seen.pop</span>();

  <span class="hljs-attr">return</span> <span class="hljs-attr">reduceToSingleString</span>(<span class="hljs-attr">output</span>, <span class="hljs-attr">base</span>, <span class="hljs-attr">braces</span>);
}


<span class="hljs-attr">function</span> <span class="hljs-attr">formatPrimitive</span>(<span class="hljs-attr">ctx</span>, <span class="hljs-attr">value</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">isUndefined</span>(<span class="hljs-attr">value</span>))
    <span class="hljs-attr">return</span> <span class="hljs-attr">ctx.stylize</span>('<span class="hljs-attr">undefined</span>', '<span class="hljs-attr">undefined</span>');
  <span class="hljs-attr">if</span> (<span class="hljs-attr">isString</span>(<span class="hljs-attr">value</span>)) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">simple</span> = <span class="hljs-string">'\'</span>' + <span class="hljs-attr">JSON.stringify</span>(<span class="hljs-attr">value</span>)<span class="hljs-attr">.replace</span>(/^"|"$/<span class="hljs-attr">g</span>, '')
                                             <span class="hljs-attr">.replace</span>(/'/<span class="hljs-attr">g</span>, "\\'")
                                             <span class="hljs-attr">.replace</span>(/\\"/<span class="hljs-attr">g</span>, '"') + '\'';
    <span class="hljs-attr">return</span> <span class="hljs-attr">ctx.stylize</span>(<span class="hljs-attr">simple</span>, '<span class="hljs-attr">string</span>');
  }
  <span class="hljs-attr">if</span> (<span class="hljs-attr">isNumber</span>(<span class="hljs-attr">value</span>))
    <span class="hljs-attr">return</span> <span class="hljs-attr">ctx.stylize</span>('' + <span class="hljs-attr">value</span>, '<span class="hljs-attr">number</span>');
  <span class="hljs-attr">if</span> (<span class="hljs-attr">isBoolean</span>(<span class="hljs-attr">value</span>))
    <span class="hljs-attr">return</span> <span class="hljs-attr">ctx.stylize</span>('' + <span class="hljs-attr">value</span>, '<span class="hljs-attr">boolean</span>');
  // <span class="hljs-attr">For</span> <span class="hljs-attr">some</span> <span class="hljs-attr">reason</span> <span class="hljs-attr">typeof</span> <span class="hljs-attr">null</span> <span class="hljs-attr">is</span> "<span class="hljs-attr">object</span>", <span class="hljs-attr">so</span> <span class="hljs-attr">special</span> <span class="hljs-attr">case</span> <span class="hljs-attr">here.</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">isNull</span>(<span class="hljs-attr">value</span>))
    <span class="hljs-attr">return</span> <span class="hljs-attr">ctx.stylize</span>('<span class="hljs-attr">null</span>', '<span class="hljs-attr">null</span>');
}


<span class="hljs-attr">function</span> <span class="hljs-attr">formatError</span>(<span class="hljs-attr">value</span>) {
  <span class="hljs-attr">return</span> '[' + <span class="hljs-attr">Error.prototype.toString.call</span>(<span class="hljs-attr">value</span>) + ']';
}


<span class="hljs-attr">function</span> <span class="hljs-attr">formatArray</span>(<span class="hljs-attr">ctx</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">recurseTimes</span>, <span class="hljs-attr">visibleKeys</span>, <span class="hljs-attr">keys</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">output</span> = <span class="hljs-string">[];</span>
  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0,</span> <span class="hljs-attr">l</span> = <span class="hljs-string">value.length;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">l</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">hasOwnProperty</span>(<span class="hljs-attr">value</span>, <span class="hljs-attr">String</span>(<span class="hljs-attr">i</span>))) {
      <span class="hljs-attr">output.push</span>(<span class="hljs-attr">formatProperty</span>(<span class="hljs-attr">ctx</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">recurseTimes</span>, <span class="hljs-attr">visibleKeys</span>,
          <span class="hljs-attr">String</span>(<span class="hljs-attr">i</span>), <span class="hljs-attr">true</span>));
    } <span class="hljs-attr">else</span> {
      <span class="hljs-attr">output.push</span>('');
    }
  }
  <span class="hljs-attr">keys.forEach</span>(<span class="hljs-attr">function</span>(<span class="hljs-attr">key</span>) {
    <span class="hljs-attr">if</span> (!<span class="hljs-attr">key.match</span>(/^\<span class="hljs-attr">d</span>+$/)) {
      <span class="hljs-attr">output.push</span>(<span class="hljs-attr">formatProperty</span>(<span class="hljs-attr">ctx</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">recurseTimes</span>, <span class="hljs-attr">visibleKeys</span>,
          <span class="hljs-attr">key</span>, <span class="hljs-attr">true</span>));
    }
  });
  <span class="hljs-attr">return</span> <span class="hljs-attr">output</span>;
}


<span class="hljs-attr">function</span> <span class="hljs-attr">formatProperty</span>(<span class="hljs-attr">ctx</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">recurseTimes</span>, <span class="hljs-attr">visibleKeys</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">array</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">name</span>, <span class="hljs-attr">str</span>, <span class="hljs-attr">desc</span>;
  <span class="hljs-attr">desc</span> = <span class="hljs-string">Object.getOwnPropertyDescriptor(value,</span> <span class="hljs-attr">key</span>) || { <span class="hljs-attr">value:</span> <span class="hljs-attr">value</span>[<span class="hljs-attr">key</span>] };
  <span class="hljs-attr">if</span> (<span class="hljs-attr">desc.get</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">desc.set</span>) {
      <span class="hljs-attr">str</span> = <span class="hljs-string">ctx.stylize(</span>'[<span class="hljs-attr">Getter</span>/<span class="hljs-attr">Setter</span>]', '<span class="hljs-attr">special</span>');
    } <span class="hljs-attr">else</span> {
      <span class="hljs-attr">str</span> = <span class="hljs-string">ctx.stylize(</span>'[<span class="hljs-attr">Getter</span>]', '<span class="hljs-attr">special</span>');
    }
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">desc.set</span>) {
      <span class="hljs-attr">str</span> = <span class="hljs-string">ctx.stylize(</span>'[<span class="hljs-attr">Setter</span>]', '<span class="hljs-attr">special</span>');
    }
  }
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">hasOwnProperty</span>(<span class="hljs-attr">visibleKeys</span>, <span class="hljs-attr">key</span>)) {
    <span class="hljs-attr">name</span> = <span class="hljs-string">'['</span> + <span class="hljs-attr">key</span> + ']';
  }
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">str</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">ctx.seen.indexOf</span>(<span class="hljs-attr">desc.value</span>) &lt; <span class="hljs-attr">0</span>) {
      <span class="hljs-attr">if</span> (<span class="hljs-attr">isNull</span>(<span class="hljs-attr">recurseTimes</span>)) {
        <span class="hljs-attr">str</span> = <span class="hljs-string">formatValue(ctx,</span> <span class="hljs-attr">desc.value</span>, <span class="hljs-attr">null</span>);
      } <span class="hljs-attr">else</span> {
        <span class="hljs-attr">str</span> = <span class="hljs-string">formatValue(ctx,</span> <span class="hljs-attr">desc.value</span>, <span class="hljs-attr">recurseTimes</span> <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>);
      }
      <span class="hljs-attr">if</span> (<span class="hljs-attr">str.indexOf</span>('\<span class="hljs-attr">n</span>') &gt;</span> -1) {
        if (array) {
          str = str.split('\n').map(function(line) {
            return '  ' + line;
          }).join('\n').substr(2);
        } else {
          str = '\n' + str.split('\n').map(function(line) {
            return '   ' + line;
          }).join('\n');
        }
      }
    } else {
      str = ctx.stylize('[Circular]', 'special');
    }
  }
  if (isUndefined(name)) {
    if (array &amp;&amp; key.match(/^\d+$/)) {
      return str;
    }
    name = JSON.stringify('' + key);
    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, 'name');
    } else {
      name = name.replace(/'/g, "\\'")
                 .replace(/\\"/g, '"')
                 .replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, 'string');
    }
  }

  return name + ': ' + str;
}


function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = output.reduce(function(prev, cur) {
    numLinesEst++;
    if (cur.indexOf('\n') &gt;= 0) numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
  }, 0);

  if (length &gt; 60) {
    return braces[0] +
           (base === '' ? '' : base + '\n ') +
           ' ' +
           output.join(',\n  ') +
           ' ' +
           braces[1];
  }

  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
}


// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.
function isArray(ar) {
  return Array.isArray(ar);
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return isObject(re) &amp;&amp; objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' &amp;&amp; arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return isObject(d) &amp;&amp; objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return isObject(e) &amp;&amp;
      (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = __webpack_require__(30);

function objectToString(o) {
  return Object.prototype.toString.call(o);
}


function pad(n) {
  return n <span class="hljs-tag">&lt; <span class="hljs-attr">10</span> ? '<span class="hljs-attr">0</span>' + <span class="hljs-attr">n.toString</span>(<span class="hljs-attr">10</span>) <span class="hljs-attr">:</span> <span class="hljs-attr">n.toString</span>(<span class="hljs-attr">10</span>);
}


<span class="hljs-attr">var</span> <span class="hljs-attr">months</span> = <span class="hljs-string">[</span>'<span class="hljs-attr">Jan</span>', '<span class="hljs-attr">Feb</span>', '<span class="hljs-attr">Mar</span>', '<span class="hljs-attr">Apr</span>', '<span class="hljs-attr">May</span>', '<span class="hljs-attr">Jun</span>', '<span class="hljs-attr">Jul</span>', '<span class="hljs-attr">Aug</span>', '<span class="hljs-attr">Sep</span>',
              '<span class="hljs-attr">Oct</span>', '<span class="hljs-attr">Nov</span>', '<span class="hljs-attr">Dec</span>'];

// <span class="hljs-attr">26</span> <span class="hljs-attr">Feb</span> <span class="hljs-attr">16:19:34</span>
<span class="hljs-attr">function</span> <span class="hljs-attr">timestamp</span>() {
  <span class="hljs-attr">var</span> <span class="hljs-attr">d</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Date</span>();
  <span class="hljs-attr">var</span> <span class="hljs-attr">time</span> = <span class="hljs-string">[pad(d.getHours()),</span>
              <span class="hljs-attr">pad</span>(<span class="hljs-attr">d.getMinutes</span>()),
              <span class="hljs-attr">pad</span>(<span class="hljs-attr">d.getSeconds</span>())]<span class="hljs-attr">.join</span>('<span class="hljs-attr">:</span>');
  <span class="hljs-attr">return</span> [<span class="hljs-attr">d.getDate</span>(), <span class="hljs-attr">months</span>[<span class="hljs-attr">d.getMonth</span>()], <span class="hljs-attr">time</span>]<span class="hljs-attr">.join</span>(' ');
}


// <span class="hljs-attr">log</span> <span class="hljs-attr">is</span> <span class="hljs-attr">just</span> <span class="hljs-attr">a</span> <span class="hljs-attr">thin</span> <span class="hljs-attr">wrapper</span> <span class="hljs-attr">to</span> <span class="hljs-attr">console.log</span> <span class="hljs-attr">that</span> <span class="hljs-attr">prepends</span> <span class="hljs-attr">a</span> <span class="hljs-attr">timestamp</span>
<span class="hljs-attr">exports.log</span> = <span class="hljs-string">function()</span> {
  <span class="hljs-attr">console.log</span>('%<span class="hljs-attr">s</span> <span class="hljs-attr">-</span> %<span class="hljs-attr">s</span>', <span class="hljs-attr">timestamp</span>(), <span class="hljs-attr">exports.format.apply</span>(<span class="hljs-attr">exports</span>, <span class="hljs-attr">arguments</span>));
};


/**
 * <span class="hljs-attr">Inherit</span> <span class="hljs-attr">the</span> <span class="hljs-attr">prototype</span> <span class="hljs-attr">methods</span> <span class="hljs-attr">from</span> <span class="hljs-attr">one</span> <span class="hljs-attr">constructor</span> <span class="hljs-attr">into</span> <span class="hljs-attr">another.</span>
 *
 * <span class="hljs-attr">The</span> <span class="hljs-attr">Function.prototype.inherits</span> <span class="hljs-attr">from</span> <span class="hljs-attr">lang.js</span> <span class="hljs-attr">rewritten</span> <span class="hljs-attr">as</span> <span class="hljs-attr">a</span> <span class="hljs-attr">standalone</span>
 * <span class="hljs-attr">function</span> (<span class="hljs-attr">not</span> <span class="hljs-attr">on</span> <span class="hljs-attr">Function.prototype</span>)<span class="hljs-attr">.</span> <span class="hljs-attr">NOTE:</span> <span class="hljs-attr">If</span> <span class="hljs-attr">this</span> <span class="hljs-attr">file</span> <span class="hljs-attr">is</span> <span class="hljs-attr">to</span> <span class="hljs-attr">be</span> <span class="hljs-attr">loaded</span>
 * <span class="hljs-attr">during</span> <span class="hljs-attr">bootstrapping</span> <span class="hljs-attr">this</span> <span class="hljs-attr">function</span> <span class="hljs-attr">needs</span> <span class="hljs-attr">to</span> <span class="hljs-attr">be</span> <span class="hljs-attr">rewritten</span> <span class="hljs-attr">using</span> <span class="hljs-attr">some</span> <span class="hljs-attr">native</span>
 * <span class="hljs-attr">functions</span> <span class="hljs-attr">as</span> <span class="hljs-attr">prototype</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">using</span> <span class="hljs-attr">normal</span> <span class="hljs-attr">JavaScript</span> <span class="hljs-attr">does</span> <span class="hljs-attr">not</span> <span class="hljs-attr">work</span> <span class="hljs-attr">as</span>
 * <span class="hljs-attr">expected</span> <span class="hljs-attr">during</span> <span class="hljs-attr">bootstrapping</span> (<span class="hljs-attr">see</span> <span class="hljs-attr">mirror.js</span> <span class="hljs-attr">in</span> <span class="hljs-attr">r114903</span>)<span class="hljs-attr">.</span>
 *
 * @<span class="hljs-attr">param</span> {<span class="hljs-attr">function</span>} <span class="hljs-attr">ctor</span> <span class="hljs-attr">Constructor</span> <span class="hljs-attr">function</span> <span class="hljs-attr">which</span> <span class="hljs-attr">needs</span> <span class="hljs-attr">to</span> <span class="hljs-attr">inherit</span> <span class="hljs-attr">the</span>
 *     <span class="hljs-attr">prototype.</span>
 * @<span class="hljs-attr">param</span> {<span class="hljs-attr">function</span>} <span class="hljs-attr">superCtor</span> <span class="hljs-attr">Constructor</span> <span class="hljs-attr">function</span> <span class="hljs-attr">to</span> <span class="hljs-attr">inherit</span> <span class="hljs-attr">prototype</span> <span class="hljs-attr">from.</span>
 */
<span class="hljs-attr">exports.inherits</span> = <span class="hljs-string">__webpack_require__(31);</span>

<span class="hljs-attr">exports._extend</span> = <span class="hljs-string">function(origin,</span> <span class="hljs-attr">add</span>) {
  // <span class="hljs-attr">Don</span>'<span class="hljs-attr">t</span> <span class="hljs-attr">do</span> <span class="hljs-attr">anything</span> <span class="hljs-attr">if</span> <span class="hljs-attr">add</span> <span class="hljs-attr">isn</span>'<span class="hljs-attr">t</span> <span class="hljs-attr">an</span> <span class="hljs-attr">object</span>
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">add</span> || !<span class="hljs-attr">isObject</span>(<span class="hljs-attr">add</span>)) <span class="hljs-attr">return</span> <span class="hljs-attr">origin</span>;

  <span class="hljs-attr">var</span> <span class="hljs-attr">keys</span> = <span class="hljs-string">Object.keys(add);</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">keys.length;</span>
  <span class="hljs-attr">while</span> (<span class="hljs-attr">i--</span>) {
    <span class="hljs-attr">origin</span>[<span class="hljs-attr">keys</span>[<span class="hljs-attr">i</span>]] = <span class="hljs-string">add[keys[i]];</span>
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">origin</span>;
};

<span class="hljs-attr">function</span> <span class="hljs-attr">hasOwnProperty</span>(<span class="hljs-attr">obj</span>, <span class="hljs-attr">prop</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">Object.prototype.hasOwnProperty.call</span>(<span class="hljs-attr">obj</span>, <span class="hljs-attr">prop</span>);
}

<span class="hljs-attr">var</span> <span class="hljs-attr">kCustomPromisifiedSymbol</span> = <span class="hljs-string">typeof</span> <span class="hljs-attr">Symbol</span> !== <span class="hljs-string">'undefined'</span> ? <span class="hljs-attr">Symbol</span>('<span class="hljs-attr">util.promisify.custom</span>') <span class="hljs-attr">:</span> <span class="hljs-attr">undefined</span>;

<span class="hljs-attr">exports.promisify</span> = <span class="hljs-string">function</span> <span class="hljs-attr">promisify</span>(<span class="hljs-attr">original</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">original</span> !== <span class="hljs-string">'function'</span>)
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('<span class="hljs-attr">The</span> "<span class="hljs-attr">original</span>" <span class="hljs-attr">argument</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">of</span> <span class="hljs-attr">type</span> <span class="hljs-attr">Function</span>');

  <span class="hljs-attr">if</span> (<span class="hljs-attr">kCustomPromisifiedSymbol</span> &amp;&amp; <span class="hljs-attr">original</span>[<span class="hljs-attr">kCustomPromisifiedSymbol</span>]) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">fn</span> = <span class="hljs-string">original[kCustomPromisifiedSymbol];</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">fn</span> !== <span class="hljs-string">'function'</span>) {
      <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('<span class="hljs-attr">The</span> "<span class="hljs-attr">util.promisify.custom</span>" <span class="hljs-attr">argument</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">of</span> <span class="hljs-attr">type</span> <span class="hljs-attr">Function</span>');
    }
    <span class="hljs-attr">Object.defineProperty</span>(<span class="hljs-attr">fn</span>, <span class="hljs-attr">kCustomPromisifiedSymbol</span>, {
      <span class="hljs-attr">value:</span> <span class="hljs-attr">fn</span>, <span class="hljs-attr">enumerable:</span> <span class="hljs-attr">false</span>, <span class="hljs-attr">writable:</span> <span class="hljs-attr">false</span>, <span class="hljs-attr">configurable:</span> <span class="hljs-attr">true</span>
    });
    <span class="hljs-attr">return</span> <span class="hljs-attr">fn</span>;
  }

  <span class="hljs-attr">function</span> <span class="hljs-attr">fn</span>() {
    <span class="hljs-attr">var</span> <span class="hljs-attr">promiseResolve</span>, <span class="hljs-attr">promiseReject</span>;
    <span class="hljs-attr">var</span> <span class="hljs-attr">promise</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Promise</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">resolve</span>, <span class="hljs-attr">reject</span>) {
      <span class="hljs-attr">promiseResolve</span> = <span class="hljs-string">resolve;</span>
      <span class="hljs-attr">promiseReject</span> = <span class="hljs-string">reject;</span>
    });

    <span class="hljs-attr">var</span> <span class="hljs-attr">args</span> = <span class="hljs-string">[];</span>
    <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">arguments.length</span>; <span class="hljs-attr">i</span>++) {
      <span class="hljs-attr">args.push</span>(<span class="hljs-attr">arguments</span>[<span class="hljs-attr">i</span>]);
    }
    <span class="hljs-attr">args.push</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">err</span>, <span class="hljs-attr">value</span>) {
      <span class="hljs-attr">if</span> (<span class="hljs-attr">err</span>) {
        <span class="hljs-attr">promiseReject</span>(<span class="hljs-attr">err</span>);
      } <span class="hljs-attr">else</span> {
        <span class="hljs-attr">promiseResolve</span>(<span class="hljs-attr">value</span>);
      }
    });

    <span class="hljs-attr">try</span> {
      <span class="hljs-attr">original.apply</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">args</span>);
    } <span class="hljs-attr">catch</span> (<span class="hljs-attr">err</span>) {
      <span class="hljs-attr">promiseReject</span>(<span class="hljs-attr">err</span>);
    }

    <span class="hljs-attr">return</span> <span class="hljs-attr">promise</span>;
  }

  <span class="hljs-attr">Object.setPrototypeOf</span>(<span class="hljs-attr">fn</span>, <span class="hljs-attr">Object.getPrototypeOf</span>(<span class="hljs-attr">original</span>));

  <span class="hljs-attr">if</span> (<span class="hljs-attr">kCustomPromisifiedSymbol</span>) <span class="hljs-attr">Object.defineProperty</span>(<span class="hljs-attr">fn</span>, <span class="hljs-attr">kCustomPromisifiedSymbol</span>, {
    <span class="hljs-attr">value:</span> <span class="hljs-attr">fn</span>, <span class="hljs-attr">enumerable:</span> <span class="hljs-attr">false</span>, <span class="hljs-attr">writable:</span> <span class="hljs-attr">false</span>, <span class="hljs-attr">configurable:</span> <span class="hljs-attr">true</span>
  });
  <span class="hljs-attr">return</span> <span class="hljs-attr">Object.defineProperties</span>(
    <span class="hljs-attr">fn</span>,
    <span class="hljs-attr">getOwnPropertyDescriptors</span>(<span class="hljs-attr">original</span>)
  );
}

<span class="hljs-attr">exports.promisify.custom</span> = <span class="hljs-string">kCustomPromisifiedSymbol</span>

<span class="hljs-attr">function</span> <span class="hljs-attr">callbackifyOnRejected</span>(<span class="hljs-attr">reason</span>, <span class="hljs-attr">cb</span>) {
  // `!<span class="hljs-attr">reason</span>` <span class="hljs-attr">guard</span> <span class="hljs-attr">inspired</span> <span class="hljs-attr">by</span> <span class="hljs-attr">bluebird</span> (<span class="hljs-attr">Ref:</span> <span class="hljs-attr">https:</span>//<span class="hljs-attr">goo.gl</span>/<span class="hljs-attr">t5IS6M</span>)<span class="hljs-attr">.</span>
  // <span class="hljs-attr">Because</span> `<span class="hljs-attr">null</span>` <span class="hljs-attr">is</span> <span class="hljs-attr">a</span> <span class="hljs-attr">special</span> <span class="hljs-attr">error</span> <span class="hljs-attr">value</span> <span class="hljs-attr">in</span> <span class="hljs-attr">callbacks</span> <span class="hljs-attr">which</span> <span class="hljs-attr">means</span> "<span class="hljs-attr">no</span> <span class="hljs-attr">error</span>
  // <span class="hljs-attr">occurred</span>", <span class="hljs-attr">we</span> <span class="hljs-attr">error-wrap</span> <span class="hljs-attr">so</span> <span class="hljs-attr">the</span> <span class="hljs-attr">callback</span> <span class="hljs-attr">consumer</span> <span class="hljs-attr">can</span> <span class="hljs-attr">distinguish</span> <span class="hljs-attr">between</span>
  // "<span class="hljs-attr">the</span> <span class="hljs-attr">promise</span> <span class="hljs-attr">rejected</span> <span class="hljs-attr">with</span> <span class="hljs-attr">null</span>" <span class="hljs-attr">or</span> "<span class="hljs-attr">the</span> <span class="hljs-attr">promise</span> <span class="hljs-attr">fulfilled</span> <span class="hljs-attr">with</span> <span class="hljs-attr">undefined</span>"<span class="hljs-attr">.</span>
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">reason</span>) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">newReason</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Error</span>('<span class="hljs-attr">Promise</span> <span class="hljs-attr">was</span> <span class="hljs-attr">rejected</span> <span class="hljs-attr">with</span> <span class="hljs-attr">a</span> <span class="hljs-attr">falsy</span> <span class="hljs-attr">value</span>');
    <span class="hljs-attr">newReason.reason</span> = <span class="hljs-string">reason;</span>
    <span class="hljs-attr">reason</span> = <span class="hljs-string">newReason;</span>
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">cb</span>(<span class="hljs-attr">reason</span>);
}

<span class="hljs-attr">function</span> <span class="hljs-attr">callbackify</span>(<span class="hljs-attr">original</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">original</span> !== <span class="hljs-string">'function'</span>) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('<span class="hljs-attr">The</span> "<span class="hljs-attr">original</span>" <span class="hljs-attr">argument</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">of</span> <span class="hljs-attr">type</span> <span class="hljs-attr">Function</span>');
  }

  // <span class="hljs-attr">We</span> <span class="hljs-attr">DO</span> <span class="hljs-attr">NOT</span> <span class="hljs-attr">return</span> <span class="hljs-attr">the</span> <span class="hljs-attr">promise</span> <span class="hljs-attr">as</span> <span class="hljs-attr">it</span> <span class="hljs-attr">gives</span> <span class="hljs-attr">the</span> <span class="hljs-attr">user</span> <span class="hljs-attr">a</span> <span class="hljs-attr">false</span> <span class="hljs-attr">sense</span> <span class="hljs-attr">that</span>
  // <span class="hljs-attr">the</span> <span class="hljs-attr">promise</span> <span class="hljs-attr">is</span> <span class="hljs-attr">actually</span> <span class="hljs-attr">somehow</span> <span class="hljs-attr">related</span> <span class="hljs-attr">to</span> <span class="hljs-attr">the</span> <span class="hljs-attr">callback</span>'<span class="hljs-attr">s</span> <span class="hljs-attr">execution</span>
  // <span class="hljs-attr">and</span> <span class="hljs-attr">that</span> <span class="hljs-attr">the</span> <span class="hljs-attr">callback</span> <span class="hljs-attr">throwing</span> <span class="hljs-attr">will</span> <span class="hljs-attr">reject</span> <span class="hljs-attr">the</span> <span class="hljs-attr">promise.</span>
  <span class="hljs-attr">function</span> <span class="hljs-attr">callbackified</span>() {
    <span class="hljs-attr">var</span> <span class="hljs-attr">args</span> = <span class="hljs-string">[];</span>
    <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">arguments.length</span>; <span class="hljs-attr">i</span>++) {
      <span class="hljs-attr">args.push</span>(<span class="hljs-attr">arguments</span>[<span class="hljs-attr">i</span>]);
    }

    <span class="hljs-attr">var</span> <span class="hljs-attr">maybeCb</span> = <span class="hljs-string">args.pop();</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">maybeCb</span> !== <span class="hljs-string">'function'</span>) {
      <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('<span class="hljs-attr">The</span> <span class="hljs-attr">last</span> <span class="hljs-attr">argument</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">of</span> <span class="hljs-attr">type</span> <span class="hljs-attr">Function</span>');
    }
    <span class="hljs-attr">var</span> <span class="hljs-attr">self</span> = <span class="hljs-string">this;</span>
    <span class="hljs-attr">var</span> <span class="hljs-attr">cb</span> = <span class="hljs-string">function()</span> {
      <span class="hljs-attr">return</span> <span class="hljs-attr">maybeCb.apply</span>(<span class="hljs-attr">self</span>, <span class="hljs-attr">arguments</span>);
    };
    // <span class="hljs-attr">In</span> <span class="hljs-attr">true</span> <span class="hljs-attr">node</span> <span class="hljs-attr">style</span> <span class="hljs-attr">we</span> <span class="hljs-attr">process</span> <span class="hljs-attr">the</span> <span class="hljs-attr">callback</span> <span class="hljs-attr">on</span> `<span class="hljs-attr">nextTick</span>` <span class="hljs-attr">with</span> <span class="hljs-attr">all</span> <span class="hljs-attr">the</span>
    // <span class="hljs-attr">implications</span> (<span class="hljs-attr">stack</span>, `<span class="hljs-attr">uncaughtException</span>`, `<span class="hljs-attr">async_hooks</span>`)
    <span class="hljs-attr">original.apply</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">args</span>)
      <span class="hljs-attr">.then</span>(<span class="hljs-attr">function</span>(<span class="hljs-attr">ret</span>) { <span class="hljs-attr">process.nextTick</span>(<span class="hljs-attr">cb</span>, <span class="hljs-attr">null</span>, <span class="hljs-attr">ret</span>) },
            <span class="hljs-attr">function</span>(<span class="hljs-attr">rej</span>) { <span class="hljs-attr">process.nextTick</span>(<span class="hljs-attr">callbackifyOnRejected</span>, <span class="hljs-attr">rej</span>, <span class="hljs-attr">cb</span>) });
  }

  <span class="hljs-attr">Object.setPrototypeOf</span>(<span class="hljs-attr">callbackified</span>, <span class="hljs-attr">Object.getPrototypeOf</span>(<span class="hljs-attr">original</span>));
  <span class="hljs-attr">Object.defineProperties</span>(<span class="hljs-attr">callbackified</span>,
                          <span class="hljs-attr">getOwnPropertyDescriptors</span>(<span class="hljs-attr">original</span>));
  <span class="hljs-attr">return</span> <span class="hljs-attr">callbackified</span>;
}
<span class="hljs-attr">exports.callbackify</span> = <span class="hljs-string">callbackify;</span>

/* <span class="hljs-attr">WEBPACK</span> <span class="hljs-attr">VAR</span> <span class="hljs-attr">INJECTION</span> */}<span class="hljs-attr">.call</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">__webpack_require__</span>(<span class="hljs-attr">29</span>)))

/***/ }),
/* <span class="hljs-attr">29</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">exports</span>) {

// <span class="hljs-attr">shim</span> <span class="hljs-attr">for</span> <span class="hljs-attr">using</span> <span class="hljs-attr">process</span> <span class="hljs-attr">in</span> <span class="hljs-attr">browser</span>
<span class="hljs-attr">var</span> <span class="hljs-attr">process</span> = <span class="hljs-string">module.exports</span> = <span class="hljs-string">{};</span>

// <span class="hljs-attr">cached</span> <span class="hljs-attr">from</span> <span class="hljs-attr">whatever</span> <span class="hljs-attr">global</span> <span class="hljs-attr">is</span> <span class="hljs-attr">present</span> <span class="hljs-attr">so</span> <span class="hljs-attr">that</span> <span class="hljs-attr">test</span> <span class="hljs-attr">runners</span> <span class="hljs-attr">that</span> <span class="hljs-attr">stub</span> <span class="hljs-attr">it</span>
// <span class="hljs-attr">don</span>'<span class="hljs-attr">t</span> <span class="hljs-attr">break</span> <span class="hljs-attr">things.</span>  <span class="hljs-attr">But</span> <span class="hljs-attr">we</span> <span class="hljs-attr">need</span> <span class="hljs-attr">to</span> <span class="hljs-attr">wrap</span> <span class="hljs-attr">it</span> <span class="hljs-attr">in</span> <span class="hljs-attr">a</span> <span class="hljs-attr">try</span> <span class="hljs-attr">catch</span> <span class="hljs-attr">in</span> <span class="hljs-attr">case</span> <span class="hljs-attr">it</span> <span class="hljs-attr">is</span>
// <span class="hljs-attr">wrapped</span> <span class="hljs-attr">in</span> <span class="hljs-attr">strict</span> <span class="hljs-attr">mode</span> <span class="hljs-attr">code</span> <span class="hljs-attr">which</span> <span class="hljs-attr">doesn</span>'<span class="hljs-attr">t</span> <span class="hljs-attr">define</span> <span class="hljs-attr">any</span> <span class="hljs-attr">globals.</span>  <span class="hljs-attr">It</span>'<span class="hljs-attr">s</span> <span class="hljs-attr">inside</span> <span class="hljs-attr">a</span>
// <span class="hljs-attr">function</span> <span class="hljs-attr">because</span> <span class="hljs-attr">try</span>/<span class="hljs-attr">catches</span> <span class="hljs-attr">deoptimize</span> <span class="hljs-attr">in</span> <span class="hljs-attr">certain</span> <span class="hljs-attr">engines.</span>

<span class="hljs-attr">var</span> <span class="hljs-attr">cachedSetTimeout</span>;
<span class="hljs-attr">var</span> <span class="hljs-attr">cachedClearTimeout</span>;

<span class="hljs-attr">function</span> <span class="hljs-attr">defaultSetTimout</span>() {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>('<span class="hljs-attr">setTimeout</span> <span class="hljs-attr">has</span> <span class="hljs-attr">not</span> <span class="hljs-attr">been</span> <span class="hljs-attr">defined</span>');
}
<span class="hljs-attr">function</span> <span class="hljs-attr">defaultClearTimeout</span> () {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>('<span class="hljs-attr">clearTimeout</span> <span class="hljs-attr">has</span> <span class="hljs-attr">not</span> <span class="hljs-attr">been</span> <span class="hljs-attr">defined</span>');
}
(<span class="hljs-attr">function</span> () {
    <span class="hljs-attr">try</span> {
        <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">setTimeout</span> === <span class="hljs-string">'function'</span>) {
            <span class="hljs-attr">cachedSetTimeout</span> = <span class="hljs-string">setTimeout;</span>
        } <span class="hljs-attr">else</span> {
            <span class="hljs-attr">cachedSetTimeout</span> = <span class="hljs-string">defaultSetTimout;</span>
        }
    } <span class="hljs-attr">catch</span> (<span class="hljs-attr">e</span>) {
        <span class="hljs-attr">cachedSetTimeout</span> = <span class="hljs-string">defaultSetTimout;</span>
    }
    <span class="hljs-attr">try</span> {
        <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">clearTimeout</span> === <span class="hljs-string">'function'</span>) {
            <span class="hljs-attr">cachedClearTimeout</span> = <span class="hljs-string">clearTimeout;</span>
        } <span class="hljs-attr">else</span> {
            <span class="hljs-attr">cachedClearTimeout</span> = <span class="hljs-string">defaultClearTimeout;</span>
        }
    } <span class="hljs-attr">catch</span> (<span class="hljs-attr">e</span>) {
        <span class="hljs-attr">cachedClearTimeout</span> = <span class="hljs-string">defaultClearTimeout;</span>
    }
} ())
<span class="hljs-attr">function</span> <span class="hljs-attr">runTimeout</span>(<span class="hljs-attr">fun</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">cachedSetTimeout</span> === <span class="hljs-string">setTimeout)</span> {
        //<span class="hljs-attr">normal</span> <span class="hljs-attr">enviroments</span> <span class="hljs-attr">in</span> <span class="hljs-attr">sane</span> <span class="hljs-attr">situations</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">setTimeout</span>(<span class="hljs-attr">fun</span>, <span class="hljs-attr">0</span>);
    }
    // <span class="hljs-attr">if</span> <span class="hljs-attr">setTimeout</span> <span class="hljs-attr">wasn</span>'<span class="hljs-attr">t</span> <span class="hljs-attr">available</span> <span class="hljs-attr">but</span> <span class="hljs-attr">was</span> <span class="hljs-attr">latter</span> <span class="hljs-attr">defined</span>
    <span class="hljs-attr">if</span> ((<span class="hljs-attr">cachedSetTimeout</span> === <span class="hljs-string">defaultSetTimout</span> || !<span class="hljs-attr">cachedSetTimeout</span>) &amp;&amp; <span class="hljs-attr">setTimeout</span>) {
        <span class="hljs-attr">cachedSetTimeout</span> = <span class="hljs-string">setTimeout;</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">setTimeout</span>(<span class="hljs-attr">fun</span>, <span class="hljs-attr">0</span>);
    }
    <span class="hljs-attr">try</span> {
        // <span class="hljs-attr">when</span> <span class="hljs-attr">when</span> <span class="hljs-attr">somebody</span> <span class="hljs-attr">has</span> <span class="hljs-attr">screwed</span> <span class="hljs-attr">with</span> <span class="hljs-attr">setTimeout</span> <span class="hljs-attr">but</span> <span class="hljs-attr">no</span> <span class="hljs-attr">I.E.</span> <span class="hljs-attr">maddness</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">cachedSetTimeout</span>(<span class="hljs-attr">fun</span>, <span class="hljs-attr">0</span>);
    } <span class="hljs-attr">catch</span>(<span class="hljs-attr">e</span>){
        <span class="hljs-attr">try</span> {
            // <span class="hljs-attr">When</span> <span class="hljs-attr">we</span> <span class="hljs-attr">are</span> <span class="hljs-attr">in</span> <span class="hljs-attr">I.E.</span> <span class="hljs-attr">but</span> <span class="hljs-attr">the</span> <span class="hljs-attr">script</span> <span class="hljs-attr">has</span> <span class="hljs-attr">been</span> <span class="hljs-attr">evaled</span> <span class="hljs-attr">so</span> <span class="hljs-attr">I.E.</span> <span class="hljs-attr">doesn</span>'<span class="hljs-attr">t</span> <span class="hljs-attr">trust</span> <span class="hljs-attr">the</span> <span class="hljs-attr">global</span> <span class="hljs-attr">object</span> <span class="hljs-attr">when</span> <span class="hljs-attr">called</span> <span class="hljs-attr">normally</span>
            <span class="hljs-attr">return</span> <span class="hljs-attr">cachedSetTimeout.call</span>(<span class="hljs-attr">null</span>, <span class="hljs-attr">fun</span>, <span class="hljs-attr">0</span>);
        } <span class="hljs-attr">catch</span>(<span class="hljs-attr">e</span>){
            // <span class="hljs-attr">same</span> <span class="hljs-attr">as</span> <span class="hljs-attr">above</span> <span class="hljs-attr">but</span> <span class="hljs-attr">when</span> <span class="hljs-attr">it</span>'<span class="hljs-attr">s</span> <span class="hljs-attr">a</span> <span class="hljs-attr">version</span> <span class="hljs-attr">of</span> <span class="hljs-attr">I.E.</span> <span class="hljs-attr">that</span> <span class="hljs-attr">must</span> <span class="hljs-attr">have</span> <span class="hljs-attr">the</span> <span class="hljs-attr">global</span> <span class="hljs-attr">object</span> <span class="hljs-attr">for</span> '<span class="hljs-attr">this</span>', <span class="hljs-attr">hopfully</span> <span class="hljs-attr">our</span> <span class="hljs-attr">context</span> <span class="hljs-attr">correct</span> <span class="hljs-attr">otherwise</span> <span class="hljs-attr">it</span> <span class="hljs-attr">will</span> <span class="hljs-attr">throw</span> <span class="hljs-attr">a</span> <span class="hljs-attr">global</span> <span class="hljs-attr">error</span>
            <span class="hljs-attr">return</span> <span class="hljs-attr">cachedSetTimeout.call</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">fun</span>, <span class="hljs-attr">0</span>);
        }
    }


}
<span class="hljs-attr">function</span> <span class="hljs-attr">runClearTimeout</span>(<span class="hljs-attr">marker</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">cachedClearTimeout</span> === <span class="hljs-string">clearTimeout)</span> {
        //<span class="hljs-attr">normal</span> <span class="hljs-attr">enviroments</span> <span class="hljs-attr">in</span> <span class="hljs-attr">sane</span> <span class="hljs-attr">situations</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">clearTimeout</span>(<span class="hljs-attr">marker</span>);
    }
    // <span class="hljs-attr">if</span> <span class="hljs-attr">clearTimeout</span> <span class="hljs-attr">wasn</span>'<span class="hljs-attr">t</span> <span class="hljs-attr">available</span> <span class="hljs-attr">but</span> <span class="hljs-attr">was</span> <span class="hljs-attr">latter</span> <span class="hljs-attr">defined</span>
    <span class="hljs-attr">if</span> ((<span class="hljs-attr">cachedClearTimeout</span> === <span class="hljs-string">defaultClearTimeout</span> || !<span class="hljs-attr">cachedClearTimeout</span>) &amp;&amp; <span class="hljs-attr">clearTimeout</span>) {
        <span class="hljs-attr">cachedClearTimeout</span> = <span class="hljs-string">clearTimeout;</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">clearTimeout</span>(<span class="hljs-attr">marker</span>);
    }
    <span class="hljs-attr">try</span> {
        // <span class="hljs-attr">when</span> <span class="hljs-attr">when</span> <span class="hljs-attr">somebody</span> <span class="hljs-attr">has</span> <span class="hljs-attr">screwed</span> <span class="hljs-attr">with</span> <span class="hljs-attr">setTimeout</span> <span class="hljs-attr">but</span> <span class="hljs-attr">no</span> <span class="hljs-attr">I.E.</span> <span class="hljs-attr">maddness</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">cachedClearTimeout</span>(<span class="hljs-attr">marker</span>);
    } <span class="hljs-attr">catch</span> (<span class="hljs-attr">e</span>){
        <span class="hljs-attr">try</span> {
            // <span class="hljs-attr">When</span> <span class="hljs-attr">we</span> <span class="hljs-attr">are</span> <span class="hljs-attr">in</span> <span class="hljs-attr">I.E.</span> <span class="hljs-attr">but</span> <span class="hljs-attr">the</span> <span class="hljs-attr">script</span> <span class="hljs-attr">has</span> <span class="hljs-attr">been</span> <span class="hljs-attr">evaled</span> <span class="hljs-attr">so</span> <span class="hljs-attr">I.E.</span> <span class="hljs-attr">doesn</span>'<span class="hljs-attr">t</span>  <span class="hljs-attr">trust</span> <span class="hljs-attr">the</span> <span class="hljs-attr">global</span> <span class="hljs-attr">object</span> <span class="hljs-attr">when</span> <span class="hljs-attr">called</span> <span class="hljs-attr">normally</span>
            <span class="hljs-attr">return</span> <span class="hljs-attr">cachedClearTimeout.call</span>(<span class="hljs-attr">null</span>, <span class="hljs-attr">marker</span>);
        } <span class="hljs-attr">catch</span> (<span class="hljs-attr">e</span>){
            // <span class="hljs-attr">same</span> <span class="hljs-attr">as</span> <span class="hljs-attr">above</span> <span class="hljs-attr">but</span> <span class="hljs-attr">when</span> <span class="hljs-attr">it</span>'<span class="hljs-attr">s</span> <span class="hljs-attr">a</span> <span class="hljs-attr">version</span> <span class="hljs-attr">of</span> <span class="hljs-attr">I.E.</span> <span class="hljs-attr">that</span> <span class="hljs-attr">must</span> <span class="hljs-attr">have</span> <span class="hljs-attr">the</span> <span class="hljs-attr">global</span> <span class="hljs-attr">object</span> <span class="hljs-attr">for</span> '<span class="hljs-attr">this</span>', <span class="hljs-attr">hopfully</span> <span class="hljs-attr">our</span> <span class="hljs-attr">context</span> <span class="hljs-attr">correct</span> <span class="hljs-attr">otherwise</span> <span class="hljs-attr">it</span> <span class="hljs-attr">will</span> <span class="hljs-attr">throw</span> <span class="hljs-attr">a</span> <span class="hljs-attr">global</span> <span class="hljs-attr">error.</span>
            // <span class="hljs-attr">Some</span> <span class="hljs-attr">versions</span> <span class="hljs-attr">of</span> <span class="hljs-attr">I.E.</span> <span class="hljs-attr">have</span> <span class="hljs-attr">different</span> <span class="hljs-attr">rules</span> <span class="hljs-attr">for</span> <span class="hljs-attr">clearTimeout</span> <span class="hljs-attr">vs</span> <span class="hljs-attr">setTimeout</span>
            <span class="hljs-attr">return</span> <span class="hljs-attr">cachedClearTimeout.call</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">marker</span>);
        }
    }



}
<span class="hljs-attr">var</span> <span class="hljs-attr">queue</span> = <span class="hljs-string">[];</span>
<span class="hljs-attr">var</span> <span class="hljs-attr">draining</span> = <span class="hljs-string">false;</span>
<span class="hljs-attr">var</span> <span class="hljs-attr">currentQueue</span>;
<span class="hljs-attr">var</span> <span class="hljs-attr">queueIndex</span> = <span class="hljs-string">-1;</span>

<span class="hljs-attr">function</span> <span class="hljs-attr">cleanUpNextTick</span>() {
    <span class="hljs-attr">if</span> (!<span class="hljs-attr">draining</span> || !<span class="hljs-attr">currentQueue</span>) {
        <span class="hljs-attr">return</span>;
    }
    <span class="hljs-attr">draining</span> = <span class="hljs-string">false;</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">currentQueue.length</span>) {
        <span class="hljs-attr">queue</span> = <span class="hljs-string">currentQueue.concat(queue);</span>
    } <span class="hljs-attr">else</span> {
        <span class="hljs-attr">queueIndex</span> = <span class="hljs-string">-1;</span>
    }
    <span class="hljs-attr">if</span> (<span class="hljs-attr">queue.length</span>) {
        <span class="hljs-attr">drainQueue</span>();
    }
}

<span class="hljs-attr">function</span> <span class="hljs-attr">drainQueue</span>() {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">draining</span>) {
        <span class="hljs-attr">return</span>;
    }
    <span class="hljs-attr">var</span> <span class="hljs-attr">timeout</span> = <span class="hljs-string">runTimeout(cleanUpNextTick);</span>
    <span class="hljs-attr">draining</span> = <span class="hljs-string">true;</span>

    <span class="hljs-attr">var</span> <span class="hljs-attr">len</span> = <span class="hljs-string">queue.length;</span>
    <span class="hljs-attr">while</span>(<span class="hljs-attr">len</span>) {
        <span class="hljs-attr">currentQueue</span> = <span class="hljs-string">queue;</span>
        <span class="hljs-attr">queue</span> = <span class="hljs-string">[];</span>
        <span class="hljs-attr">while</span> (++<span class="hljs-attr">queueIndex</span> &lt; <span class="hljs-attr">len</span>) {
            <span class="hljs-attr">if</span> (<span class="hljs-attr">currentQueue</span>) {
                <span class="hljs-attr">currentQueue</span>[<span class="hljs-attr">queueIndex</span>]<span class="hljs-attr">.run</span>();
            }
        }
        <span class="hljs-attr">queueIndex</span> = <span class="hljs-string">-1;</span>
        <span class="hljs-attr">len</span> = <span class="hljs-string">queue.length;</span>
    }
    <span class="hljs-attr">currentQueue</span> = <span class="hljs-string">null;</span>
    <span class="hljs-attr">draining</span> = <span class="hljs-string">false;</span>
    <span class="hljs-attr">runClearTimeout</span>(<span class="hljs-attr">timeout</span>);
}

<span class="hljs-attr">process.nextTick</span> = <span class="hljs-string">function</span> (<span class="hljs-attr">fun</span>) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">args</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Array</span>(<span class="hljs-attr">arguments.length</span> <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>);
    <span class="hljs-attr">if</span> (<span class="hljs-attr">arguments.length</span> &gt;</span> 1) {
        for (var i = 1; i <span class="hljs-tag">&lt; <span class="hljs-attr">arguments.length</span>; <span class="hljs-attr">i</span>++) {
            <span class="hljs-attr">args</span>[<span class="hljs-attr">i</span> <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>] = <span class="hljs-string">arguments[i];</span>
        }
    }
    <span class="hljs-attr">queue.push</span>(<span class="hljs-attr">new</span> <span class="hljs-attr">Item</span>(<span class="hljs-attr">fun</span>, <span class="hljs-attr">args</span>));
    <span class="hljs-attr">if</span> (<span class="hljs-attr">queue.length</span> === <span class="hljs-string">1</span> &amp;&amp; !<span class="hljs-attr">draining</span>) {
        <span class="hljs-attr">runTimeout</span>(<span class="hljs-attr">drainQueue</span>);
    }
};

// <span class="hljs-attr">v8</span> <span class="hljs-attr">likes</span> <span class="hljs-attr">predictible</span> <span class="hljs-attr">objects</span>
<span class="hljs-attr">function</span> <span class="hljs-attr">Item</span>(<span class="hljs-attr">fun</span>, <span class="hljs-attr">array</span>) {
    <span class="hljs-attr">this.fun</span> = <span class="hljs-string">fun;</span>
    <span class="hljs-attr">this.array</span> = <span class="hljs-string">array;</span>
}
<span class="hljs-attr">Item.prototype.run</span> = <span class="hljs-string">function</span> () {
    <span class="hljs-attr">this.fun.apply</span>(<span class="hljs-attr">null</span>, <span class="hljs-attr">this.array</span>);
};
<span class="hljs-attr">process.title</span> = <span class="hljs-string">'browser'</span>;
<span class="hljs-attr">process.browser</span> = <span class="hljs-string">true;</span>
<span class="hljs-attr">process.env</span> = <span class="hljs-string">{};</span>
<span class="hljs-attr">process.argv</span> = <span class="hljs-string">[];</span>
<span class="hljs-attr">process.version</span> = <span class="hljs-string">''</span>; // <span class="hljs-attr">empty</span> <span class="hljs-attr">string</span> <span class="hljs-attr">to</span> <span class="hljs-attr">avoid</span> <span class="hljs-attr">regexp</span> <span class="hljs-attr">issues</span>
<span class="hljs-attr">process.versions</span> = <span class="hljs-string">{};</span>

<span class="hljs-attr">function</span> <span class="hljs-attr">noop</span>() {}

<span class="hljs-attr">process.on</span> = <span class="hljs-string">noop;</span>
<span class="hljs-attr">process.addListener</span> = <span class="hljs-string">noop;</span>
<span class="hljs-attr">process.once</span> = <span class="hljs-string">noop;</span>
<span class="hljs-attr">process.off</span> = <span class="hljs-string">noop;</span>
<span class="hljs-attr">process.removeListener</span> = <span class="hljs-string">noop;</span>
<span class="hljs-attr">process.removeAllListeners</span> = <span class="hljs-string">noop;</span>
<span class="hljs-attr">process.emit</span> = <span class="hljs-string">noop;</span>
<span class="hljs-attr">process.prependListener</span> = <span class="hljs-string">noop;</span>
<span class="hljs-attr">process.prependOnceListener</span> = <span class="hljs-string">noop;</span>

<span class="hljs-attr">process.listeners</span> = <span class="hljs-string">function</span> (<span class="hljs-attr">name</span>) { <span class="hljs-attr">return</span> [] }

<span class="hljs-attr">process.binding</span> = <span class="hljs-string">function</span> (<span class="hljs-attr">name</span>) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>('<span class="hljs-attr">process.binding</span> <span class="hljs-attr">is</span> <span class="hljs-attr">not</span> <span class="hljs-attr">supported</span>');
};

<span class="hljs-attr">process.cwd</span> = <span class="hljs-string">function</span> () { <span class="hljs-attr">return</span> '/' };
<span class="hljs-attr">process.chdir</span> = <span class="hljs-string">function</span> (<span class="hljs-attr">dir</span>) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>('<span class="hljs-attr">process.chdir</span> <span class="hljs-attr">is</span> <span class="hljs-attr">not</span> <span class="hljs-attr">supported</span>');
};
<span class="hljs-attr">process.umask</span> = <span class="hljs-string">function()</span> { <span class="hljs-attr">return</span> <span class="hljs-attr">0</span>; };


/***/ }),
/* <span class="hljs-attr">30</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">exports</span>) {

<span class="hljs-attr">module.exports</span> = <span class="hljs-string">function</span> <span class="hljs-attr">isBuffer</span>(<span class="hljs-attr">arg</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">arg</span> &amp;&amp; <span class="hljs-attr">typeof</span> <span class="hljs-attr">arg</span> === <span class="hljs-string">'object'</span>
    &amp;&amp; <span class="hljs-attr">typeof</span> <span class="hljs-attr">arg.copy</span> === <span class="hljs-string">'function'</span>
    &amp;&amp; <span class="hljs-attr">typeof</span> <span class="hljs-attr">arg.fill</span> === <span class="hljs-string">'function'</span>
    &amp;&amp; <span class="hljs-attr">typeof</span> <span class="hljs-attr">arg.readUInt8</span> === <span class="hljs-string">'function'</span>;
}

/***/ }),
/* <span class="hljs-attr">31</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">exports</span>) {

<span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">Object.create</span> === <span class="hljs-string">'function'</span>) {
  // <span class="hljs-attr">implementation</span> <span class="hljs-attr">from</span> <span class="hljs-attr">standard</span> <span class="hljs-attr">node.js</span> '<span class="hljs-attr">util</span>' <span class="hljs-attr">module</span>
  <span class="hljs-attr">module.exports</span> = <span class="hljs-string">function</span> <span class="hljs-attr">inherits</span>(<span class="hljs-attr">ctor</span>, <span class="hljs-attr">superCtor</span>) {
    <span class="hljs-attr">ctor.super_</span> = <span class="hljs-string">superCtor</span>
    <span class="hljs-attr">ctor.prototype</span> = <span class="hljs-string">Object.create(superCtor.prototype,</span> {
      <span class="hljs-attr">constructor:</span> {
        <span class="hljs-attr">value:</span> <span class="hljs-attr">ctor</span>,
        <span class="hljs-attr">enumerable:</span> <span class="hljs-attr">false</span>,
        <span class="hljs-attr">writable:</span> <span class="hljs-attr">true</span>,
        <span class="hljs-attr">configurable:</span> <span class="hljs-attr">true</span>
      }
    });
  };
} <span class="hljs-attr">else</span> {
  // <span class="hljs-attr">old</span> <span class="hljs-attr">school</span> <span class="hljs-attr">shim</span> <span class="hljs-attr">for</span> <span class="hljs-attr">old</span> <span class="hljs-attr">browsers</span>
  <span class="hljs-attr">module.exports</span> = <span class="hljs-string">function</span> <span class="hljs-attr">inherits</span>(<span class="hljs-attr">ctor</span>, <span class="hljs-attr">superCtor</span>) {
    <span class="hljs-attr">ctor.super_</span> = <span class="hljs-string">superCtor</span>
    <span class="hljs-attr">var</span> <span class="hljs-attr">TempCtor</span> = <span class="hljs-string">function</span> () {}
    <span class="hljs-attr">TempCtor.prototype</span> = <span class="hljs-string">superCtor.prototype</span>
    <span class="hljs-attr">ctor.prototype</span> = <span class="hljs-string">new</span> <span class="hljs-attr">TempCtor</span>()
    <span class="hljs-attr">ctor.prototype.constructor</span> = <span class="hljs-string">ctor</span>
  }
}


/***/ }),
/* <span class="hljs-attr">32</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">exports</span>) {

<span class="hljs-attr">module.exports</span> = <span class="hljs-string">window;</span>

/***/ }),
/* <span class="hljs-attr">33</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">exports</span>, <span class="hljs-attr">__webpack_require__</span>) {

/**
 * @<span class="hljs-attr">module</span> <span class="hljs-attr">JSON</span> <span class="hljs-attr">Object</span> <span class="hljs-attr">Signing</span> <span class="hljs-attr">and</span> <span class="hljs-attr">Encryption</span> (<span class="hljs-attr">JOSE</span>)
 */
<span class="hljs-attr">const</span> <span class="hljs-attr">crypto</span> = <span class="hljs-string">__webpack_require__(34)</span>
<span class="hljs-attr">const</span> <span class="hljs-attr">JWA</span> = <span class="hljs-string">__webpack_require__(37)</span>
<span class="hljs-attr">const</span> <span class="hljs-attr">JWK</span> = <span class="hljs-string">__webpack_require__(55)</span>
<span class="hljs-attr">const</span> <span class="hljs-attr">JWKSet</span> = <span class="hljs-string">__webpack_require__(56)</span>
<span class="hljs-attr">const</span> <span class="hljs-attr">JWT</span> = <span class="hljs-string">__webpack_require__(57)</span>
<span class="hljs-attr">const</span> <span class="hljs-attr">JWS</span> = <span class="hljs-string">__webpack_require__(58)</span>

/**
 * <span class="hljs-attr">Export</span>
 */
<span class="hljs-attr">module.exports</span> = <span class="hljs-string">{</span>
  <span class="hljs-attr">crypto</span>,
  <span class="hljs-attr">JWA</span>,
  <span class="hljs-attr">JWK</span>,
  <span class="hljs-attr">JWKSet</span>,
  <span class="hljs-attr">JWT</span>,
  <span class="hljs-attr">JWS</span>
}


/***/ }),
/* <span class="hljs-attr">34</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">exports</span>, <span class="hljs-attr">__webpack_require__</span>) {

<span class="hljs-attr">const</span> <span class="hljs-attr">imported</span> = <span class="hljs-string">__webpack_require__(35)</span>

<span class="hljs-attr">module.exports</span> = <span class="hljs-string">(imported.default</span> ? <span class="hljs-attr">imported.default</span> <span class="hljs-attr">:</span> <span class="hljs-attr">imported</span>)


/***/ }),
/* <span class="hljs-attr">35</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">__webpack_module__</span>, <span class="hljs-attr">__webpack_exports__</span>, <span class="hljs-attr">__webpack_require__</span>) {

"<span class="hljs-attr">use</span> <span class="hljs-attr">strict</span>";
<span class="hljs-attr">__webpack_require__.r</span>(<span class="hljs-attr">__webpack_exports__</span>);
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">_webcrypto_shim_mjs__WEBPACK_IMPORTED_MODULE_0__</span> = <span class="hljs-string">__webpack_require__(36);</span>

/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">default</span> <span class="hljs-attr">export</span> */ <span class="hljs-attr">__webpack_exports__</span>["<span class="hljs-attr">default</span>"] = <span class="hljs-string">(window.crypto);</span>


/***/ }),
/* <span class="hljs-attr">36</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">__webpack_module__</span>, <span class="hljs-attr">__webpack_exports__</span>, <span class="hljs-attr">__webpack_require__</span>) {

"<span class="hljs-attr">use</span> <span class="hljs-attr">strict</span>";
<span class="hljs-attr">__webpack_require__.r</span>(<span class="hljs-attr">__webpack_exports__</span>);
/**
 * @<span class="hljs-attr">file</span> <span class="hljs-attr">Web</span> <span class="hljs-attr">Cryptography</span> <span class="hljs-attr">API</span> <span class="hljs-attr">shim</span>
 * @<span class="hljs-attr">author</span> <span class="hljs-attr">Artem</span> <span class="hljs-attr">S</span> <span class="hljs-attr">Vybornov</span> &lt;<span class="hljs-attr">vybornov</span>@<span class="hljs-attr">gmail.com</span>&gt;</span>
 * @license MIT
 */
(function (global, factory) {
    if (typeof define === 'function' &amp;&amp; define.amd) {
        // AMD. Register as an anonymous module.
        define([], function () {
            return factory(global);
        });
    } else if (typeof module === 'object' &amp;&amp; module.exports) {
        // CommonJS-like environments that support module.exports
        module.exports = factory(global);
    } else {
        factory(global);
    }
}(typeof self !== 'undefined' ? self : undefined, function (global) {
    'use strict';

    if ( typeof Promise !== 'function' )
        throw "Promise support required";

    var _crypto = global.crypto || global.msCrypto;
    if ( !_crypto ) return;

    var _subtle = _crypto.subtle || _crypto.webkitSubtle;
    if ( !_subtle ) return;

    var _Crypto     = global.Crypto || _crypto.constructor || Object,
        _SubtleCrypto = global.SubtleCrypto || _subtle.constructor || Object,
        _CryptoKey  = global.CryptoKey || global.Key || Object;

    var isEdge = global.navigator.userAgent.indexOf('Edge/') &gt; -1;
    var isIE    = !!global.msCrypto &amp;&amp; !isEdge;
    var isWebkit = !_crypto.subtle &amp;&amp; !!_crypto.webkitSubtle;
    if ( !isIE &amp;&amp; !isWebkit ) return;

    function s2a ( s ) {
        return btoa(s).replace(/\=+$/, '').replace(/\+/g, '-').replace(/\//g, '_');
    }

    function a2s ( s ) {
        s += '===', s = s.slice( 0, -s.length % 4 );
        return atob( s.replace(/-/g, '+').replace(/_/g, '/') );
    }

    function s2b ( s ) {
        var b = new Uint8Array(s.length);
        for ( var i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attr">s.length</span>; <span class="hljs-attr">i</span>++ ) <span class="hljs-attr">b</span>[<span class="hljs-attr">i</span>] = <span class="hljs-string">s.charCodeAt(i);</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">b</span>;
    }

    <span class="hljs-attr">function</span> <span class="hljs-attr">b2s</span> ( <span class="hljs-attr">b</span> ) {
        <span class="hljs-attr">if</span> ( <span class="hljs-attr">b</span> <span class="hljs-attr">instanceof</span> <span class="hljs-attr">ArrayBuffer</span> ) <span class="hljs-attr">b</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Uint8Array</span>(<span class="hljs-attr">b</span>);
        <span class="hljs-attr">return</span> <span class="hljs-attr">String.fromCharCode.apply</span>( <span class="hljs-attr">String</span>, <span class="hljs-attr">b</span> );
    }

    <span class="hljs-attr">function</span> <span class="hljs-attr">alg</span> ( <span class="hljs-attr">a</span> ) {
        <span class="hljs-attr">var</span> <span class="hljs-attr">r</span> = <span class="hljs-string">{</span> '<span class="hljs-attr">name</span>'<span class="hljs-attr">:</span> (<span class="hljs-attr">a.name</span> || <span class="hljs-attr">a</span> || '')<span class="hljs-attr">.toUpperCase</span>()<span class="hljs-attr">.replace</span>('<span class="hljs-attr">V</span>','<span class="hljs-attr">v</span>') };
        <span class="hljs-attr">switch</span> ( <span class="hljs-attr">r.name</span> ) {
            <span class="hljs-attr">case</span> '<span class="hljs-attr">SHA-1</span>'<span class="hljs-attr">:</span>
            <span class="hljs-attr">case</span> '<span class="hljs-attr">SHA-256</span>'<span class="hljs-attr">:</span>
            <span class="hljs-attr">case</span> '<span class="hljs-attr">SHA-384</span>'<span class="hljs-attr">:</span>
            <span class="hljs-attr">case</span> '<span class="hljs-attr">SHA-512</span>'<span class="hljs-attr">:</span>
                <span class="hljs-attr">break</span>;
            <span class="hljs-attr">case</span> '<span class="hljs-attr">AES-CBC</span>'<span class="hljs-attr">:</span>
            <span class="hljs-attr">case</span> '<span class="hljs-attr">AES-GCM</span>'<span class="hljs-attr">:</span>
            <span class="hljs-attr">case</span> '<span class="hljs-attr">AES-KW</span>'<span class="hljs-attr">:</span>
                <span class="hljs-attr">if</span> ( <span class="hljs-attr">a.length</span> ) <span class="hljs-attr">r</span>['<span class="hljs-attr">length</span>'] = <span class="hljs-string">a.length;</span>
                <span class="hljs-attr">break</span>;
            <span class="hljs-attr">case</span> '<span class="hljs-attr">HMAC</span>'<span class="hljs-attr">:</span>
                <span class="hljs-attr">if</span> ( <span class="hljs-attr">a.hash</span> ) <span class="hljs-attr">r</span>['<span class="hljs-attr">hash</span>'] = <span class="hljs-string">alg(a.hash);</span>
                <span class="hljs-attr">if</span> ( <span class="hljs-attr">a.length</span> ) <span class="hljs-attr">r</span>['<span class="hljs-attr">length</span>'] = <span class="hljs-string">a.length;</span>
                <span class="hljs-attr">break</span>;
            <span class="hljs-attr">case</span> '<span class="hljs-attr">RSAES-PKCS1-v1_5</span>'<span class="hljs-attr">:</span>
                <span class="hljs-attr">if</span> ( <span class="hljs-attr">a.publicExponent</span> ) <span class="hljs-attr">r</span>['<span class="hljs-attr">publicExponent</span>'] = <span class="hljs-string">new</span> <span class="hljs-attr">Uint8Array</span>(<span class="hljs-attr">a.publicExponent</span>);
                <span class="hljs-attr">if</span> ( <span class="hljs-attr">a.modulusLength</span> ) <span class="hljs-attr">r</span>['<span class="hljs-attr">modulusLength</span>'] = <span class="hljs-string">a.modulusLength;</span>
                <span class="hljs-attr">break</span>;
            <span class="hljs-attr">case</span> '<span class="hljs-attr">RSASSA-PKCS1-v1_5</span>'<span class="hljs-attr">:</span>
            <span class="hljs-attr">case</span> '<span class="hljs-attr">RSA-OAEP</span>'<span class="hljs-attr">:</span>
                <span class="hljs-attr">if</span> ( <span class="hljs-attr">a.hash</span> ) <span class="hljs-attr">r</span>['<span class="hljs-attr">hash</span>'] = <span class="hljs-string">alg(a.hash);</span>
                <span class="hljs-attr">if</span> ( <span class="hljs-attr">a.publicExponent</span> ) <span class="hljs-attr">r</span>['<span class="hljs-attr">publicExponent</span>'] = <span class="hljs-string">new</span> <span class="hljs-attr">Uint8Array</span>(<span class="hljs-attr">a.publicExponent</span>);
                <span class="hljs-attr">if</span> ( <span class="hljs-attr">a.modulusLength</span> ) <span class="hljs-attr">r</span>['<span class="hljs-attr">modulusLength</span>'] = <span class="hljs-string">a.modulusLength;</span>
                <span class="hljs-attr">break</span>;
            <span class="hljs-attr">default:</span>
                <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">SyntaxError</span>("<span class="hljs-attr">Bad</span> <span class="hljs-attr">algorithm</span> <span class="hljs-attr">name</span>");
        }
        <span class="hljs-attr">return</span> <span class="hljs-attr">r</span>;
    };

    <span class="hljs-attr">function</span> <span class="hljs-attr">jwkAlg</span> ( <span class="hljs-attr">a</span> ) {
        <span class="hljs-attr">return</span> {
            '<span class="hljs-attr">HMAC</span>'<span class="hljs-attr">:</span> {
                '<span class="hljs-attr">SHA-1</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">HS1</span>',
                '<span class="hljs-attr">SHA-256</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">HS256</span>',
                '<span class="hljs-attr">SHA-384</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">HS384</span>',
                '<span class="hljs-attr">SHA-512</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">HS512</span>',
            },
            '<span class="hljs-attr">RSASSA-PKCS1-v1_5</span>'<span class="hljs-attr">:</span> {
                '<span class="hljs-attr">SHA-1</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">RS1</span>',
                '<span class="hljs-attr">SHA-256</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">RS256</span>',
                '<span class="hljs-attr">SHA-384</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">RS384</span>',
                '<span class="hljs-attr">SHA-512</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">RS512</span>',
            },
            '<span class="hljs-attr">RSAES-PKCS1-v1_5</span>'<span class="hljs-attr">:</span> {
                ''<span class="hljs-attr">:</span> '<span class="hljs-attr">RSA1_5</span>',
            },
            '<span class="hljs-attr">RSA-OAEP</span>'<span class="hljs-attr">:</span> {
                '<span class="hljs-attr">SHA-1</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">RSA-OAEP</span>',
                '<span class="hljs-attr">SHA-256</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">RSA-OAEP-256</span>',
            },
            '<span class="hljs-attr">AES-KW</span>'<span class="hljs-attr">:</span> {
                '<span class="hljs-attr">128</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">A128KW</span>',
                '<span class="hljs-attr">192</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">A192KW</span>',
                '<span class="hljs-attr">256</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">A256KW</span>',
            },
            '<span class="hljs-attr">AES-GCM</span>'<span class="hljs-attr">:</span> {
                '<span class="hljs-attr">128</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">A128GCM</span>',
                '<span class="hljs-attr">192</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">A192GCM</span>',
                '<span class="hljs-attr">256</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">A256GCM</span>',
            },
            '<span class="hljs-attr">AES-CBC</span>'<span class="hljs-attr">:</span> {
                '<span class="hljs-attr">128</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">A128CBC</span>',
                '<span class="hljs-attr">192</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">A192CBC</span>',
                '<span class="hljs-attr">256</span>'<span class="hljs-attr">:</span> '<span class="hljs-attr">A256CBC</span>',
            },
        }[<span class="hljs-attr">a.name</span>][ ( <span class="hljs-attr">a.hash</span> || {} )<span class="hljs-attr">.name</span> || <span class="hljs-attr">a.length</span> || '' ];
    }

    <span class="hljs-attr">function</span> <span class="hljs-attr">b2jwk</span> ( <span class="hljs-attr">k</span> ) {
        <span class="hljs-attr">if</span> ( <span class="hljs-attr">k</span> <span class="hljs-attr">instanceof</span> <span class="hljs-attr">ArrayBuffer</span> || <span class="hljs-attr">k</span> <span class="hljs-attr">instanceof</span> <span class="hljs-attr">Uint8Array</span> ) <span class="hljs-attr">k</span> = <span class="hljs-string">JSON.parse(</span> <span class="hljs-attr">decodeURIComponent</span>( <span class="hljs-attr">escape</span>( <span class="hljs-attr">b2s</span>(<span class="hljs-attr">k</span>) ) ) );
        <span class="hljs-attr">var</span> <span class="hljs-attr">jwk</span> = <span class="hljs-string">{</span> '<span class="hljs-attr">kty</span>'<span class="hljs-attr">:</span> <span class="hljs-attr">k.kty</span>, '<span class="hljs-attr">alg</span>'<span class="hljs-attr">:</span> <span class="hljs-attr">k.alg</span>, '<span class="hljs-attr">ext</span>'<span class="hljs-attr">:</span> <span class="hljs-attr">k.ext</span> || <span class="hljs-attr">k.extractable</span> };
        <span class="hljs-attr">switch</span> ( <span class="hljs-attr">jwk.kty</span> ) {
            <span class="hljs-attr">case</span> '<span class="hljs-attr">oct</span>'<span class="hljs-attr">:</span>
                <span class="hljs-attr">jwk.k</span> = <span class="hljs-string">k.k;</span>
            <span class="hljs-attr">case</span> '<span class="hljs-attr">RSA</span>'<span class="hljs-attr">:</span>
                [ '<span class="hljs-attr">n</span>', '<span class="hljs-attr">e</span>', '<span class="hljs-attr">d</span>', '<span class="hljs-attr">p</span>', '<span class="hljs-attr">q</span>', '<span class="hljs-attr">dp</span>', '<span class="hljs-attr">dq</span>', '<span class="hljs-attr">qi</span>', '<span class="hljs-attr">oth</span>' ]<span class="hljs-attr">.forEach</span>( <span class="hljs-attr">function</span> ( <span class="hljs-attr">x</span> ) { <span class="hljs-attr">if</span> ( <span class="hljs-attr">x</span> <span class="hljs-attr">in</span> <span class="hljs-attr">k</span> ) <span class="hljs-attr">jwk</span>[<span class="hljs-attr">x</span>] = <span class="hljs-string">k[x]</span> } );
                <span class="hljs-attr">break</span>;
            <span class="hljs-attr">default:</span>
                <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>("<span class="hljs-attr">Unsupported</span> <span class="hljs-attr">key</span> <span class="hljs-attr">type</span>");
        }
        <span class="hljs-attr">return</span> <span class="hljs-attr">jwk</span>;
    }

    <span class="hljs-attr">function</span> <span class="hljs-attr">jwk2b</span> ( <span class="hljs-attr">k</span> ) {
        <span class="hljs-attr">var</span> <span class="hljs-attr">jwk</span> = <span class="hljs-string">b2jwk(k);</span>
        <span class="hljs-attr">if</span> ( <span class="hljs-attr">isIE</span> ) <span class="hljs-attr">jwk</span>['<span class="hljs-attr">extractable</span>'] = <span class="hljs-string">jwk.ext,</span> <span class="hljs-attr">delete</span> <span class="hljs-attr">jwk.ext</span>;
        <span class="hljs-attr">return</span> <span class="hljs-attr">s2b</span>( <span class="hljs-attr">unescape</span>( <span class="hljs-attr">encodeURIComponent</span>( <span class="hljs-attr">JSON.stringify</span>(<span class="hljs-attr">jwk</span>) ) ) )<span class="hljs-attr">.buffer</span>;
    }

    <span class="hljs-attr">function</span> <span class="hljs-attr">pkcs2jwk</span> ( <span class="hljs-attr">k</span> ) {
        <span class="hljs-attr">var</span> <span class="hljs-attr">info</span> = <span class="hljs-string">b2der(k),</span> <span class="hljs-attr">prv</span> = <span class="hljs-string">false;</span>
        <span class="hljs-attr">if</span> ( <span class="hljs-attr">info.length</span> &gt;</span> 2 ) prv = true, info.shift(); // remove version from PKCS#8 PrivateKeyInfo structure
        var jwk = { 'ext': true };
        switch ( info[0][0] ) {
            case '1.2.840.113549.1.1.1':
                var rsaComp = [ 'n', 'e', 'd', 'p', 'q', 'dp', 'dq', 'qi' ],
                    rsaKey  = b2der( info[1] );
                if ( prv ) rsaKey.shift(); // remove version from PKCS#1 RSAPrivateKey structure
                for ( var i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attr">rsaKey.length</span>; <span class="hljs-attr">i</span>++ ) {
                    <span class="hljs-attr">if</span> ( !<span class="hljs-attr">rsaKey</span>[<span class="hljs-attr">i</span>][<span class="hljs-attr">0</span>] ) <span class="hljs-attr">rsaKey</span>[<span class="hljs-attr">i</span>] = <span class="hljs-string">rsaKey[i].subarray(1);</span>
                    <span class="hljs-attr">jwk</span>[ <span class="hljs-attr">rsaComp</span>[<span class="hljs-attr">i</span>] ] = <span class="hljs-string">s2a(</span> <span class="hljs-attr">b2s</span>( <span class="hljs-attr">rsaKey</span>[<span class="hljs-attr">i</span>] ) );
                }
                <span class="hljs-attr">jwk</span>['<span class="hljs-attr">kty</span>'] = <span class="hljs-string">'RSA'</span>;
                <span class="hljs-attr">break</span>;
            <span class="hljs-attr">default:</span>
                <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>("<span class="hljs-attr">Unsupported</span> <span class="hljs-attr">key</span> <span class="hljs-attr">type</span>");
        }
        <span class="hljs-attr">return</span> <span class="hljs-attr">jwk</span>;
    }

    <span class="hljs-attr">function</span> <span class="hljs-attr">jwk2pkcs</span> ( <span class="hljs-attr">k</span> ) {
        <span class="hljs-attr">var</span> <span class="hljs-attr">key</span>, <span class="hljs-attr">info</span> = <span class="hljs-string">[</span> [ '', <span class="hljs-attr">null</span> ] ], <span class="hljs-attr">prv</span> = <span class="hljs-string">false;</span>
        <span class="hljs-attr">switch</span> ( <span class="hljs-attr">k.kty</span> ) {
            <span class="hljs-attr">case</span> '<span class="hljs-attr">RSA</span>'<span class="hljs-attr">:</span>
                <span class="hljs-attr">var</span> <span class="hljs-attr">rsaComp</span> = <span class="hljs-string">[</span> '<span class="hljs-attr">n</span>', '<span class="hljs-attr">e</span>', '<span class="hljs-attr">d</span>', '<span class="hljs-attr">p</span>', '<span class="hljs-attr">q</span>', '<span class="hljs-attr">dp</span>', '<span class="hljs-attr">dq</span>', '<span class="hljs-attr">qi</span>' ],
                    <span class="hljs-attr">rsaKey</span> = <span class="hljs-string">[];</span>
                <span class="hljs-attr">for</span> ( <span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">rsaComp.length</span>; <span class="hljs-attr">i</span>++ ) {
                    <span class="hljs-attr">if</span> ( !( <span class="hljs-attr">rsaComp</span>[<span class="hljs-attr">i</span>] <span class="hljs-attr">in</span> <span class="hljs-attr">k</span> ) ) <span class="hljs-attr">break</span>;
                    <span class="hljs-attr">var</span> <span class="hljs-attr">b</span> = <span class="hljs-string">rsaKey[i]</span> = <span class="hljs-string">s2b(</span> <span class="hljs-attr">a2s</span>( <span class="hljs-attr">k</span>[ <span class="hljs-attr">rsaComp</span>[<span class="hljs-attr">i</span>] ] ) );
                    <span class="hljs-attr">if</span> ( <span class="hljs-attr">b</span>[<span class="hljs-attr">0</span>] &amp; <span class="hljs-attr">0x80</span> ) <span class="hljs-attr">rsaKey</span>[<span class="hljs-attr">i</span>] = <span class="hljs-string">new</span> <span class="hljs-attr">Uint8Array</span>(<span class="hljs-attr">b.length</span> + <span class="hljs-attr">1</span>), <span class="hljs-attr">rsaKey</span>[<span class="hljs-attr">i</span>]<span class="hljs-attr">.set</span>( <span class="hljs-attr">b</span>, <span class="hljs-attr">1</span> );
                }
                <span class="hljs-attr">if</span> ( <span class="hljs-attr">rsaKey.length</span> &gt;</span> 2 ) prv = true, rsaKey.unshift( new Uint8Array([0]) ); // add version to PKCS#1 RSAPrivateKey structure
                info[0][0] = '1.2.840.113549.1.1.1';
                key = rsaKey;
                break;
            default:
                throw new TypeError("Unsupported key type");
        }
        info.push( new Uint8Array( der2b(key) ).buffer );
        if ( !prv ) info[1] = { 'tag': 0x03, 'value': info[1] };
        else info.unshift( new Uint8Array([0]) ); // add version to PKCS#8 PrivateKeyInfo structure
        return new Uint8Array( der2b(info) ).buffer;
    }

    var oid2str = { 'KoZIhvcNAQEB': '1.2.840.113549.1.1.1' },
        str2oid = { '1.2.840.113549.1.1.1': 'KoZIhvcNAQEB' };

    function b2der ( buf, ctx ) {
        if ( buf instanceof ArrayBuffer ) buf = new Uint8Array(buf);
        if ( !ctx ) ctx = { pos: 0, end: buf.length };

        if ( ctx.end - ctx.pos <span class="hljs-tag">&lt; <span class="hljs-attr">2</span> || <span class="hljs-attr">ctx.end</span> &gt;</span> buf.length ) throw new RangeError("Malformed DER");

        var tag = buf[ctx.pos++],
            len = buf[ctx.pos++];

        if ( len &gt;= 0x80 ) {
            len &amp;= 0x7f;
            if ( ctx.end - ctx.pos <span class="hljs-tag">&lt; <span class="hljs-attr">len</span> ) <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>("<span class="hljs-attr">Malformed</span> <span class="hljs-attr">DER</span>");
            <span class="hljs-attr">for</span> ( <span class="hljs-attr">var</span> <span class="hljs-attr">xlen</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">len--</span>; ) <span class="hljs-attr">xlen</span> &lt;&lt;= <span class="hljs-string">8,</span> <span class="hljs-attr">xlen</span> |= <span class="hljs-string">buf[ctx.pos++];</span>
            <span class="hljs-attr">len</span> = <span class="hljs-string">xlen;</span>
        }

        <span class="hljs-attr">if</span> ( <span class="hljs-attr">ctx.end</span> <span class="hljs-attr">-</span> <span class="hljs-attr">ctx.pos</span> &lt; <span class="hljs-attr">len</span> ) <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>("<span class="hljs-attr">Malformed</span> <span class="hljs-attr">DER</span>");

        <span class="hljs-attr">var</span> <span class="hljs-attr">rv</span>;

        <span class="hljs-attr">switch</span> ( <span class="hljs-attr">tag</span> ) {
            <span class="hljs-attr">case</span> <span class="hljs-attr">0x02:</span> // <span class="hljs-attr">Universal</span> <span class="hljs-attr">Primitive</span> <span class="hljs-attr">INTEGER</span>
                <span class="hljs-attr">rv</span> = <span class="hljs-string">buf.subarray(</span> <span class="hljs-attr">ctx.pos</span>, <span class="hljs-attr">ctx.pos</span> += <span class="hljs-string">len</span> );
                <span class="hljs-attr">break</span>;
            <span class="hljs-attr">case</span> <span class="hljs-attr">0x03:</span> // <span class="hljs-attr">Universal</span> <span class="hljs-attr">Primitive</span> <span class="hljs-attr">BIT</span> <span class="hljs-attr">STRING</span>
                <span class="hljs-attr">if</span> ( <span class="hljs-attr">buf</span>[<span class="hljs-attr">ctx.pos</span>++] ) <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>( "<span class="hljs-attr">Unsupported</span> <span class="hljs-attr">bit</span> <span class="hljs-attr">string</span>" );
                <span class="hljs-attr">len--</span>;
            <span class="hljs-attr">case</span> <span class="hljs-attr">0x04:</span> // <span class="hljs-attr">Universal</span> <span class="hljs-attr">Primitive</span> <span class="hljs-attr">OCTET</span> <span class="hljs-attr">STRING</span>
                <span class="hljs-attr">rv</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Uint8Array</span>( <span class="hljs-attr">buf.subarray</span>( <span class="hljs-attr">ctx.pos</span>, <span class="hljs-attr">ctx.pos</span> += <span class="hljs-string">len</span> ) )<span class="hljs-attr">.buffer</span>;
                <span class="hljs-attr">break</span>;
            <span class="hljs-attr">case</span> <span class="hljs-attr">0x05:</span> // <span class="hljs-attr">Universal</span> <span class="hljs-attr">Primitive</span> <span class="hljs-attr">NULL</span>
                <span class="hljs-attr">rv</span> = <span class="hljs-string">null;</span>
                <span class="hljs-attr">break</span>;
            <span class="hljs-attr">case</span> <span class="hljs-attr">0x06:</span> // <span class="hljs-attr">Universal</span> <span class="hljs-attr">Primitive</span> <span class="hljs-attr">OBJECT</span> <span class="hljs-attr">IDENTIFIER</span>
                <span class="hljs-attr">var</span> <span class="hljs-attr">oid</span> = <span class="hljs-string">btoa(</span> <span class="hljs-attr">b2s</span>( <span class="hljs-attr">buf.subarray</span>( <span class="hljs-attr">ctx.pos</span>, <span class="hljs-attr">ctx.pos</span> += <span class="hljs-string">len</span> ) ) );
                <span class="hljs-attr">if</span> ( !( <span class="hljs-attr">oid</span> <span class="hljs-attr">in</span> <span class="hljs-attr">oid2str</span> ) ) <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>( "<span class="hljs-attr">Unsupported</span> <span class="hljs-attr">OBJECT</span> <span class="hljs-attr">ID</span> " + <span class="hljs-attr">oid</span> );
                <span class="hljs-attr">rv</span> = <span class="hljs-string">oid2str[oid];</span>
                <span class="hljs-attr">break</span>;
            <span class="hljs-attr">case</span> <span class="hljs-attr">0x30:</span> // <span class="hljs-attr">Universal</span> <span class="hljs-attr">Constructed</span> <span class="hljs-attr">SEQUENCE</span>
                <span class="hljs-attr">rv</span> = <span class="hljs-string">[];</span>
                <span class="hljs-attr">for</span> ( <span class="hljs-attr">var</span> <span class="hljs-attr">end</span> = <span class="hljs-string">ctx.pos</span> + <span class="hljs-attr">len</span>; <span class="hljs-attr">ctx.pos</span> &lt; <span class="hljs-attr">end</span>; ) <span class="hljs-attr">rv.push</span>( <span class="hljs-attr">b2der</span>( <span class="hljs-attr">buf</span>, <span class="hljs-attr">ctx</span> ) );
                <span class="hljs-attr">break</span>;
            <span class="hljs-attr">default:</span>
                <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>( "<span class="hljs-attr">Unsupported</span> <span class="hljs-attr">DER</span> <span class="hljs-attr">tag</span> <span class="hljs-attr">0x</span>" + <span class="hljs-attr">tag.toString</span>(<span class="hljs-attr">16</span>) );
        }

        <span class="hljs-attr">return</span> <span class="hljs-attr">rv</span>;
    }

    <span class="hljs-attr">function</span> <span class="hljs-attr">der2b</span> ( <span class="hljs-attr">val</span>, <span class="hljs-attr">buf</span> ) {
        <span class="hljs-attr">if</span> ( !<span class="hljs-attr">buf</span> ) <span class="hljs-attr">buf</span> = <span class="hljs-string">[];</span>

        <span class="hljs-attr">var</span> <span class="hljs-attr">tag</span> = <span class="hljs-string">0,</span> <span class="hljs-attr">len</span> = <span class="hljs-string">0,</span>
            <span class="hljs-attr">pos</span> = <span class="hljs-string">buf.length</span> + <span class="hljs-attr">2</span>;

        <span class="hljs-attr">buf.push</span>( <span class="hljs-attr">0</span>, <span class="hljs-attr">0</span> ); // <span class="hljs-attr">placeholder</span>

        <span class="hljs-attr">if</span> ( <span class="hljs-attr">val</span> <span class="hljs-attr">instanceof</span> <span class="hljs-attr">Uint8Array</span> ) {  // <span class="hljs-attr">Universal</span> <span class="hljs-attr">Primitive</span> <span class="hljs-attr">INTEGER</span>
            <span class="hljs-attr">tag</span> = <span class="hljs-string">0x02,</span> <span class="hljs-attr">len</span> = <span class="hljs-string">val.length;</span>
            <span class="hljs-attr">for</span> ( <span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">len</span>; <span class="hljs-attr">i</span>++ ) <span class="hljs-attr">buf.push</span>( <span class="hljs-attr">val</span>[<span class="hljs-attr">i</span>] );
        }
        <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> ( <span class="hljs-attr">val</span> <span class="hljs-attr">instanceof</span> <span class="hljs-attr">ArrayBuffer</span> ) { // <span class="hljs-attr">Universal</span> <span class="hljs-attr">Primitive</span> <span class="hljs-attr">OCTET</span> <span class="hljs-attr">STRING</span>
            <span class="hljs-attr">tag</span> = <span class="hljs-string">0x04,</span> <span class="hljs-attr">len</span> = <span class="hljs-string">val.byteLength,</span> <span class="hljs-attr">val</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Uint8Array</span>(<span class="hljs-attr">val</span>);
            <span class="hljs-attr">for</span> ( <span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">len</span>; <span class="hljs-attr">i</span>++ ) <span class="hljs-attr">buf.push</span>( <span class="hljs-attr">val</span>[<span class="hljs-attr">i</span>] );
        }
        <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> ( <span class="hljs-attr">val</span> === <span class="hljs-string">null</span> ) { // <span class="hljs-attr">Universal</span> <span class="hljs-attr">Primitive</span> <span class="hljs-attr">NULL</span>
            <span class="hljs-attr">tag</span> = <span class="hljs-string">0x05,</span> <span class="hljs-attr">len</span> = <span class="hljs-string">0;</span>
        }
        <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> ( <span class="hljs-attr">typeof</span> <span class="hljs-attr">val</span> === <span class="hljs-string">'string'</span> &amp;&amp; <span class="hljs-attr">val</span> <span class="hljs-attr">in</span> <span class="hljs-attr">str2oid</span> ) { // <span class="hljs-attr">Universal</span> <span class="hljs-attr">Primitive</span> <span class="hljs-attr">OBJECT</span> <span class="hljs-attr">IDENTIFIER</span>
            <span class="hljs-attr">var</span> <span class="hljs-attr">oid</span> = <span class="hljs-string">s2b(</span> <span class="hljs-attr">atob</span>( <span class="hljs-attr">str2oid</span>[<span class="hljs-attr">val</span>] ) );
            <span class="hljs-attr">tag</span> = <span class="hljs-string">0x06,</span> <span class="hljs-attr">len</span> = <span class="hljs-string">oid.length;</span>
            <span class="hljs-attr">for</span> ( <span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">len</span>; <span class="hljs-attr">i</span>++ ) <span class="hljs-attr">buf.push</span>( <span class="hljs-attr">oid</span>[<span class="hljs-attr">i</span>] );
        }
        <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> ( <span class="hljs-attr">val</span> <span class="hljs-attr">instanceof</span> <span class="hljs-attr">Array</span> ) { // <span class="hljs-attr">Universal</span> <span class="hljs-attr">Constructed</span> <span class="hljs-attr">SEQUENCE</span>
            <span class="hljs-attr">for</span> ( <span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">val.length</span>; <span class="hljs-attr">i</span>++ ) <span class="hljs-attr">der2b</span>( <span class="hljs-attr">val</span>[<span class="hljs-attr">i</span>], <span class="hljs-attr">buf</span> );
            <span class="hljs-attr">tag</span> = <span class="hljs-string">0x30,</span> <span class="hljs-attr">len</span> = <span class="hljs-string">buf.length</span> <span class="hljs-attr">-</span> <span class="hljs-attr">pos</span>;
        }
        <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> ( <span class="hljs-attr">typeof</span> <span class="hljs-attr">val</span> === <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-attr">val.tag</span> === <span class="hljs-string">0x03</span> &amp;&amp; <span class="hljs-attr">val.value</span> <span class="hljs-attr">instanceof</span> <span class="hljs-attr">ArrayBuffer</span> ) { // <span class="hljs-attr">Tag</span> <span class="hljs-attr">hint</span>
            <span class="hljs-attr">val</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Uint8Array</span>(<span class="hljs-attr">val.value</span>), <span class="hljs-attr">tag</span> = <span class="hljs-string">0x03,</span> <span class="hljs-attr">len</span> = <span class="hljs-string">val.byteLength;</span>
            <span class="hljs-attr">buf.push</span>(<span class="hljs-attr">0</span>); <span class="hljs-attr">for</span> ( <span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">len</span>; <span class="hljs-attr">i</span>++ ) <span class="hljs-attr">buf.push</span>( <span class="hljs-attr">val</span>[<span class="hljs-attr">i</span>] );
            <span class="hljs-attr">len</span>++;
        }
        <span class="hljs-attr">else</span> {
            <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>( "<span class="hljs-attr">Unsupported</span> <span class="hljs-attr">DER</span> <span class="hljs-attr">value</span> " + <span class="hljs-attr">val</span> );
        }

        <span class="hljs-attr">if</span> ( <span class="hljs-attr">len</span> &gt;</span>= 0x80 ) {
            var xlen = len, len = 4;
            buf.splice( pos, 0, (xlen &gt;&gt; 24) &amp; 0xff, (xlen &gt;&gt; 16) &amp; 0xff, (xlen &gt;&gt; 8) &amp; 0xff, xlen &amp; 0xff );
            while ( len &gt; 1 &amp;&amp; !(xlen &gt;&gt; 24) ) xlen <span class="hljs-tag">&lt;&lt;= <span class="hljs-string">8,</span> <span class="hljs-attr">len--</span>;
            <span class="hljs-attr">if</span> ( <span class="hljs-attr">len</span> &lt; <span class="hljs-attr">4</span> ) <span class="hljs-attr">buf.splice</span>( <span class="hljs-attr">pos</span>, <span class="hljs-attr">4</span> <span class="hljs-attr">-</span> <span class="hljs-attr">len</span> );
            <span class="hljs-attr">len</span> |= <span class="hljs-string">0x80;</span>
        }

        <span class="hljs-attr">buf.splice</span>( <span class="hljs-attr">pos</span> <span class="hljs-attr">-</span> <span class="hljs-attr">2</span>, <span class="hljs-attr">2</span>, <span class="hljs-attr">tag</span>, <span class="hljs-attr">len</span> );

        <span class="hljs-attr">return</span> <span class="hljs-attr">buf</span>;
    }

    <span class="hljs-attr">function</span> <span class="hljs-attr">CryptoKey</span> ( <span class="hljs-attr">key</span>, <span class="hljs-attr">alg</span>, <span class="hljs-attr">ext</span>, <span class="hljs-attr">use</span> ) {
        <span class="hljs-attr">Object.defineProperties</span>( <span class="hljs-attr">this</span>, {
            <span class="hljs-attr">_key:</span> {
                <span class="hljs-attr">value:</span> <span class="hljs-attr">key</span>
            },
            <span class="hljs-attr">type:</span> {
                <span class="hljs-attr">value:</span> <span class="hljs-attr">key.type</span>,
                <span class="hljs-attr">enumerable:</span> <span class="hljs-attr">true</span>,
            },
            <span class="hljs-attr">extractable:</span> {
                <span class="hljs-attr">value:</span> (<span class="hljs-attr">ext</span> === <span class="hljs-string">undefined)</span> ? <span class="hljs-attr">key.extractable</span> <span class="hljs-attr">:</span> <span class="hljs-attr">ext</span>,
                <span class="hljs-attr">enumerable:</span> <span class="hljs-attr">true</span>,
            },
            <span class="hljs-attr">algorithm:</span> {
                <span class="hljs-attr">value:</span> (<span class="hljs-attr">alg</span> === <span class="hljs-string">undefined)</span> ? <span class="hljs-attr">key.algorithm</span> <span class="hljs-attr">:</span> <span class="hljs-attr">alg</span>,
                <span class="hljs-attr">enumerable:</span> <span class="hljs-attr">true</span>,
            },
            <span class="hljs-attr">usages:</span> {
                <span class="hljs-attr">value:</span> (<span class="hljs-attr">use</span> === <span class="hljs-string">undefined)</span> ? <span class="hljs-attr">key.usages</span> <span class="hljs-attr">:</span> <span class="hljs-attr">use</span>,
                <span class="hljs-attr">enumerable:</span> <span class="hljs-attr">true</span>,
            },
        });
    }

    <span class="hljs-attr">function</span> <span class="hljs-attr">isPubKeyUse</span> ( <span class="hljs-attr">u</span> ) {
        <span class="hljs-attr">return</span> <span class="hljs-attr">u</span> === <span class="hljs-string">'verify'</span> || <span class="hljs-attr">u</span> === <span class="hljs-string">'encrypt'</span> || <span class="hljs-attr">u</span> === <span class="hljs-string">'wrapKey'</span>;
    }

    <span class="hljs-attr">function</span> <span class="hljs-attr">isPrvKeyUse</span> ( <span class="hljs-attr">u</span> ) {
        <span class="hljs-attr">return</span> <span class="hljs-attr">u</span> === <span class="hljs-string">'sign'</span> || <span class="hljs-attr">u</span> === <span class="hljs-string">'decrypt'</span> || <span class="hljs-attr">u</span> === <span class="hljs-string">'unwrapKey'</span>;
    }

    [ '<span class="hljs-attr">generateKey</span>', '<span class="hljs-attr">importKey</span>', '<span class="hljs-attr">unwrapKey</span>' ]
        <span class="hljs-attr">.forEach</span>( <span class="hljs-attr">function</span> ( <span class="hljs-attr">m</span> ) {
            <span class="hljs-attr">var</span> <span class="hljs-attr">_fn</span> = <span class="hljs-string">_subtle[m];</span>

            <span class="hljs-attr">_subtle</span>[<span class="hljs-attr">m</span>] = <span class="hljs-string">function</span> ( <span class="hljs-attr">a</span>, <span class="hljs-attr">b</span>, <span class="hljs-attr">c</span> ) {
                <span class="hljs-attr">var</span> <span class="hljs-attr">args</span> = <span class="hljs-string">[].slice.call(arguments),</span>
                    <span class="hljs-attr">ka</span>, <span class="hljs-attr">kx</span>, <span class="hljs-attr">ku</span>;

                <span class="hljs-attr">switch</span> ( <span class="hljs-attr">m</span> ) {
                    <span class="hljs-attr">case</span> '<span class="hljs-attr">generateKey</span>'<span class="hljs-attr">:</span>
                        <span class="hljs-attr">ka</span> = <span class="hljs-string">alg(a),</span> <span class="hljs-attr">kx</span> = <span class="hljs-string">b,</span> <span class="hljs-attr">ku</span> = <span class="hljs-string">c;</span>
                        <span class="hljs-attr">break</span>;
                    <span class="hljs-attr">case</span> '<span class="hljs-attr">importKey</span>'<span class="hljs-attr">:</span>
                        <span class="hljs-attr">ka</span> = <span class="hljs-string">alg(c),</span> <span class="hljs-attr">kx</span> = <span class="hljs-string">args[3],</span> <span class="hljs-attr">ku</span> = <span class="hljs-string">args[4];</span>
                        <span class="hljs-attr">if</span> ( <span class="hljs-attr">a</span> === <span class="hljs-string">'jwk'</span> ) {
                            <span class="hljs-attr">b</span> = <span class="hljs-string">b2jwk(b);</span>
                            <span class="hljs-attr">if</span> ( !<span class="hljs-attr">b.alg</span> ) <span class="hljs-attr">b.alg</span> = <span class="hljs-string">jwkAlg(ka);</span>
                            <span class="hljs-attr">if</span> ( !<span class="hljs-attr">b.key_ops</span> ) <span class="hljs-attr">b.key_ops</span> = <span class="hljs-string">(</span> <span class="hljs-attr">b.kty</span> !== <span class="hljs-string">'oct'</span> ) ? ( '<span class="hljs-attr">d</span>' <span class="hljs-attr">in</span> <span class="hljs-attr">b</span> ) ? <span class="hljs-attr">ku.filter</span>(<span class="hljs-attr">isPrvKeyUse</span>) <span class="hljs-attr">:</span> <span class="hljs-attr">ku.filter</span>(<span class="hljs-attr">isPubKeyUse</span>) <span class="hljs-attr">:</span> <span class="hljs-attr">ku.slice</span>();
                            <span class="hljs-attr">args</span>[<span class="hljs-attr">1</span>] = <span class="hljs-string">jwk2b(b);</span>
                        }
                        <span class="hljs-attr">break</span>;
                    <span class="hljs-attr">case</span> '<span class="hljs-attr">unwrapKey</span>'<span class="hljs-attr">:</span>
                        <span class="hljs-attr">ka</span> = <span class="hljs-string">args[4],</span> <span class="hljs-attr">kx</span> = <span class="hljs-string">args[5],</span> <span class="hljs-attr">ku</span> = <span class="hljs-string">args[6];</span>
                        <span class="hljs-attr">args</span>[<span class="hljs-attr">2</span>] = <span class="hljs-string">c._key;</span>
                        <span class="hljs-attr">break</span>;
                }

                <span class="hljs-attr">if</span> ( <span class="hljs-attr">m</span> === <span class="hljs-string">'generateKey'</span> &amp;&amp; <span class="hljs-attr">ka.name</span> === <span class="hljs-string">'HMAC'</span> &amp;&amp; <span class="hljs-attr">ka.hash</span> ) {
                    <span class="hljs-attr">ka.length</span> = <span class="hljs-string">ka.length</span> || { '<span class="hljs-attr">SHA-1</span>'<span class="hljs-attr">:</span> <span class="hljs-attr">512</span>, '<span class="hljs-attr">SHA-256</span>'<span class="hljs-attr">:</span> <span class="hljs-attr">512</span>, '<span class="hljs-attr">SHA-384</span>'<span class="hljs-attr">:</span> <span class="hljs-attr">1024</span>, '<span class="hljs-attr">SHA-512</span>'<span class="hljs-attr">:</span> <span class="hljs-attr">1024</span> }[<span class="hljs-attr">ka.hash.name</span>];
                    <span class="hljs-attr">return</span> <span class="hljs-attr">_subtle.importKey</span>( '<span class="hljs-attr">raw</span>', <span class="hljs-attr">_crypto.getRandomValues</span>( <span class="hljs-attr">new</span> <span class="hljs-attr">Uint8Array</span>( (<span class="hljs-attr">ka.length</span>+<span class="hljs-attr">7</span>)&gt;</span>&gt;3 ) ), ka, kx, ku );
                }

                if ( isWebkit &amp;&amp; m === 'generateKey' &amp;&amp; ka.name === 'RSASSA-PKCS1-v1_5' &amp;&amp; ( !ka.modulusLength || ka.modulusLength &gt;= 2048 ) ) {
                    a = alg(a), a.name = 'RSAES-PKCS1-v1_5', delete a.hash;
                    return _subtle.generateKey( a, true, [ 'encrypt', 'decrypt' ] )
                        .then( function ( k ) {
                            return Promise.all([
                                _subtle.exportKey( 'jwk', k.publicKey ),
                                _subtle.exportKey( 'jwk', k.privateKey ),
                            ]);
                        })
                        .then( function ( keys ) {
                            keys[0].alg = keys[1].alg = jwkAlg(ka);
                            keys[0].key_ops = ku.filter(isPubKeyUse), keys[1].key_ops = ku.filter(isPrvKeyUse);
                            return Promise.all([
                                _subtle.importKey( 'jwk', keys[0], ka, true, keys[0].key_ops ),
                                _subtle.importKey( 'jwk', keys[1], ka, kx, keys[1].key_ops ),
                            ]);
                        })
                        .then( function ( keys ) {
                            return {
                                publicKey: keys[0],
                                privateKey: keys[1],
                            };
                        });
                }

                if ( ( isWebkit || ( isIE &amp;&amp; ( ka.hash || {} ).name === 'SHA-1' ) )
                        &amp;&amp; m === 'importKey' &amp;&amp; a === 'jwk' &amp;&amp; ka.name === 'HMAC' &amp;&amp; b.kty === 'oct' ) {
                    return _subtle.importKey( 'raw', s2b( a2s(b.k) ), c, args[3], args[4] );
                }

                if ( isWebkit &amp;&amp; m === 'importKey' &amp;&amp; ( a === 'spki' || a === 'pkcs8' ) ) {
                    return _subtle.importKey( 'jwk', pkcs2jwk(b), c, args[3], args[4] );
                }

                if ( isIE &amp;&amp; m === 'unwrapKey' ) {
                    return _subtle.decrypt( args[3], c, b )
                        .then( function ( k ) {
                            return _subtle.importKey( a, k, args[4], args[5], args[6] );
                        });
                }

                var op;
                try {
                    op = _fn.apply( _subtle, args );
                }
                catch ( e ) {
                    return Promise.reject(e);
                }

                if ( isIE ) {
                    op = new Promise( function ( res, rej ) {
                        op.onabort =
                        op.onerror =    function ( e ) { rej(e)               };
                        op.oncomplete = function ( r ) { res(r.target.result) };
                    });
                }

                op = op.then( function ( k ) {
                    if ( ka.name === 'HMAC' ) {
                        if ( !ka.length ) ka.length = 8 * k.algorithm.length;
                    }
                    if ( ka.name.search('RSA') == 0 ) {
                        if ( !ka.modulusLength ) ka.modulusLength = (k.publicKey || k).algorithm.modulusLength;
                        if ( !ka.publicExponent ) ka.publicExponent = (k.publicKey || k).algorithm.publicExponent;
                    }
                    if ( k.publicKey &amp;&amp; k.privateKey ) {
                        k = {
                            publicKey: new CryptoKey( k.publicKey, ka, kx, ku.filter(isPubKeyUse) ),
                            privateKey: new CryptoKey( k.privateKey, ka, kx, ku.filter(isPrvKeyUse) ),
                        };
                    }
                    else {
                        k = new CryptoKey( k, ka, kx, ku );
                    }
                    return k;
                });

                return op;
            }
        });

    [ 'exportKey', 'wrapKey' ]
        .forEach( function ( m ) {
            var _fn = _subtle[m];

            _subtle[m] = function ( a, b, c ) {
                var args = [].slice.call(arguments);

                switch ( m ) {
                    case 'exportKey':
                        args[1] = b._key;
                        break;
                    case 'wrapKey':
                        args[1] = b._key, args[2] = c._key;
                        break;
                }

                if ( ( isWebkit || ( isIE &amp;&amp; ( b.algorithm.hash || {} ).name === 'SHA-1' ) )
                        &amp;&amp; m === 'exportKey' &amp;&amp; a === 'jwk' &amp;&amp; b.algorithm.name === 'HMAC' ) {
                    args[0] = 'raw';
                }

                if ( isWebkit &amp;&amp; m === 'exportKey' &amp;&amp; ( a === 'spki' || a === 'pkcs8' ) ) {
                    args[0] = 'jwk';
                }

                if ( isIE &amp;&amp; m === 'wrapKey' ) {
                    return _subtle.exportKey( a, b )
                        .then( function ( k ) {
                            if ( a === 'jwk' ) k = s2b( unescape( encodeURIComponent( JSON.stringify( b2jwk(k) ) ) ) );
                            return  _subtle.encrypt( args[3], c, k );
                        });
                }

                var op;
                try {
                    op = _fn.apply( _subtle, args );
                }
                catch ( e ) {
                    return Promise.reject(e);
                }

                if ( isIE ) {
                    op = new Promise( function ( res, rej ) {
                        op.onabort =
                        op.onerror =    function ( e ) { rej(e)               };
                        op.oncomplete = function ( r ) { res(r.target.result) };
                    });
                }

                if ( m === 'exportKey' &amp;&amp; a === 'jwk' ) {
                    op = op.then( function ( k ) {
                        if ( ( isWebkit || ( isIE &amp;&amp; ( b.algorithm.hash || {} ).name === 'SHA-1' ) )
                                &amp;&amp; b.algorithm.name === 'HMAC') {
                            return { 'kty': 'oct', 'alg': jwkAlg(b.algorithm), 'key_ops': b.usages.slice(), 'ext': true, 'k': s2a( b2s(k) ) };
                        }
                        k = b2jwk(k);
                        if ( !k.alg ) k['alg'] = jwkAlg(b.algorithm);
                        if ( !k.key_ops ) k['key_ops'] = ( b.type === 'public' ) ? b.usages.filter(isPubKeyUse) : ( b.type === 'private' ) ? b.usages.filter(isPrvKeyUse) : b.usages.slice();
                        return k;
                    });
                }

                if ( isWebkit &amp;&amp; m === 'exportKey' &amp;&amp; ( a === 'spki' || a === 'pkcs8' ) ) {
                    op = op.then( function ( k ) {
                        k = jwk2pkcs( b2jwk(k) );
                        return k;
                    });
                }

                return op;
            }
        });

    [ 'encrypt', 'decrypt', 'sign', 'verify' ]
        .forEach( function ( m ) {
            var _fn = _subtle[m];

            _subtle[m] = function ( a, b, c, d ) {
                if ( isIE &amp;&amp; ( !c.byteLength || ( d &amp;&amp; !d.byteLength ) ) )
                    throw new Error("Empy input is not allowed");

                var args = [].slice.call(arguments),
                    ka = alg(a);

                if ( isIE &amp;&amp; m === 'decrypt' &amp;&amp; ka.name === 'AES-GCM' ) {
                    var tl = a.tagLength &gt;&gt; 3;
                    args[2] = (c.buffer || c).slice( 0, c.byteLength - tl ),
                    a.tag = (c.buffer || c).slice( c.byteLength - tl );
                }

                args[1] = b._key;

                var op;
                try {
                    op = _fn.apply( _subtle, args );
                }
                catch ( e ) {
                    return Promise.reject(e);
                }

                if ( isIE ) {
                    op = new Promise( function ( res, rej ) {
                        op.onabort =
                        op.onerror = function ( e ) {
                            rej(e);
                        };

                        op.oncomplete = function ( r ) {
                            var r = r.target.result;

                            if ( m === 'encrypt' &amp;&amp; r instanceof AesGcmEncryptResult ) {
                                var c = r.ciphertext, t = r.tag;
                                r = new Uint8Array( c.byteLength + t.byteLength );
                                r.set( new Uint8Array(c), 0 );
                                r.set( new Uint8Array(t), c.byteLength );
                                r = r.buffer;
                            }

                            res(r);
                        };
                    });
                }

                return op;
            }
        });

    if ( isIE ) {
        var _digest = _subtle.digest;

        _subtle['digest'] = function ( a, b ) {
            if ( !b.byteLength )
                throw new Error("Empy input is not allowed");

            var op;
            try {
                op = _digest.call( _subtle, a, b );
            }
            catch ( e ) {
                return Promise.reject(e);
            }

            op = new Promise( function ( res, rej ) {
                op.onabort =
                op.onerror =    function ( e ) { rej(e)               };
                op.oncomplete = function ( r ) { res(r.target.result) };
            });

            return op;
        };

        global.crypto = Object.create( _crypto, {
            getRandomValues: { value: function ( a ) { return _crypto.getRandomValues(a) } },
            subtle:          { value: _subtle },
        });

        global.CryptoKey = CryptoKey;
    }

    if ( isWebkit ) {
        _crypto.subtle = _subtle;

        global.Crypto = _Crypto;
        global.SubtleCrypto = _SubtleCrypto;
        global.CryptoKey = CryptoKey;
    }
}));

 /* harmony default export */ __webpack_exports__["default"] = ({}); // section modified by isomorphic-webcrypto build 


/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Dependencies
 *
 * TODO
 * - switch between Node.js webcrypto package and browser implementation
 */
// const base64url = require('base64url')
const supportedAlgorithms = __webpack_require__(38)
const {NotSupportedError} = __webpack_require__(53)

/**
 * JWA
 * https://tools.ietf.org/html/rfc7518
 */
class JWA {

  /**
   * Sign
   *
   * @description
   * Create a digital signature.
   *
   * @param {string} alg
   * @param {CryptoKey} key
   * @param {string|Buffer} data
   *
   * @return {Promise}
   */
  static async sign (alg, key, data) {
    // normalize the algorithm
    let normalizedAlgorithm = supportedAlgorithms.normalize('sign', alg)

    // validate algorithm is supported
    if (normalizedAlgorithm instanceof Error) {
      return Promise.reject(new NotSupportedError(alg))
    }

    // validate type of key
    // TODO
    //  - is the key suitable for the algorithm?
    //  - does that get validated in webcrypto?
    //if (key instanceof CryptoKey) {
    //  return Promise.reject(new InvalidKeyError())
    //}

    // sign the data
    return normalizedAlgorithm.sign(key, data)
  }

  /**
   * Verify
   *
   * @description
   * Verify a digital signature.
   *
   * @param {string} alg
   * @param {CryptoKey} privateKey
   * @param {string|Buffer} signature
   * @param {string|Buffer} data
   *
   * @return {Promise}
   */
  static async verify (alg, key, signature, data) {
    let normalizedAlgorithm = supportedAlgorithms.normalize('verify', alg)

    if (normalizedAlgorithm instanceof Error) {
      return Promise.reject(new NotSupportedError(alg))
    }

    // TODO
    // validate publicKey

    // verify the signature
    return normalizedAlgorithm.verify(key, signature, data)
  }

  /**
   * Encrypt
   */

  /**
   * Decrypt
   */

  /**
   * Import
   */
  static async importKey (key) {
    let normalizedAlgorithm = supportedAlgorithms.normalize('importKey', key.alg)
    return normalizedAlgorithm.importKey(key)
  }
}

/**
 * Export
 */
module.exports = JWA


/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Local dependencies
 */
const None = __webpack_require__(39)
const HMAC = __webpack_require__(40)
const RSASSA_PKCS1_v1_5 = __webpack_require__(50)
const SupportedAlgorithms = __webpack_require__(51)

/**
 * Register Supported Algorithms
 */
const supportedAlgorithms = new SupportedAlgorithms

/**
 * Sign
 */
supportedAlgorithms.define('HS256', 'sign', new HMAC({
  name: 'HMAC',
  hash: {
    name: 'SHA-256'
  }
}))

supportedAlgorithms.define('HS384', 'sign', new HMAC({
  name: 'HMAC',
  hash: {
    name: 'SHA-384'
  }
}))

supportedAlgorithms.define('HS512', 'sign', new HMAC({
  name: 'HMAC',
  hash: {
    name: 'SHA-512'
  }
}))

supportedAlgorithms.define('RS256', 'sign', new RSASSA_PKCS1_v1_5({
  name: 'RSASSA-PKCS1-v1_5',
  hash: {
    name: 'SHA-256'
  }
}))

supportedAlgorithms.define('RS384', 'sign', new RSASSA_PKCS1_v1_5({
  name: 'RSASSA-PKCS1-v1_5',
  hash: {
    name: 'SHA-384'
  }
}))

supportedAlgorithms.define('RS512', 'sign', new RSASSA_PKCS1_v1_5({
  name: 'RSASSA-PKCS1-v1_5',
  hash: {
    name: 'SHA-512'
  }
}))
//supportedAlgorithms.define('ES256', 'sign', {})
//supportedAlgorithms.define('ES384', 'sign', {})
//supportedAlgorithms.define('ES512', 'sign', {})
//supportedAlgorithms.define('PS256', 'sign', {})
//supportedAlgorithms.define('PS384', 'sign', {})
//supportedAlgorithms.define('PS512', 'sign', {})

supportedAlgorithms.define('none', 'sign', new None({
  // nothing goes here
}))

/**
 * Verify
 */
supportedAlgorithms.define('HS256', 'verify', new HMAC({
  name: 'HMAC',
  hash: {
    name: 'SHA-256'
  }
}))

supportedAlgorithms.define('HS384', 'verify', new HMAC({
  name: 'HMAC',
  hash: {
    name: 'SHA-384'
  }
}))

supportedAlgorithms.define('HS512', 'verify', new HMAC({
  name: 'HMAC',
  hash: {
    name: 'SHA-512'
  }
}))

supportedAlgorithms.define('RS256', 'verify', new RSASSA_PKCS1_v1_5({
  name: 'RSASSA-PKCS1-v1_5',
  hash: {
    name: 'SHA-256'
  }
}))

supportedAlgorithms.define('RS384', 'verify', new RSASSA_PKCS1_v1_5({
  name: 'RSASSA-PKCS1-v1_5',
  hash: {
    name: 'SHA-384'
  }
}))

supportedAlgorithms.define('RS512', 'verify', new RSASSA_PKCS1_v1_5({
  name: 'RSASSA-PKCS1-v1_5',
  hash: {
    name: 'SHA-512'
  }
}))
//supportedAlgorithms.define('ES256', 'verify', {})
//supportedAlgorithms.define('ES384', 'verify', {})
//supportedAlgorithms.define('ES512', 'verify', {})
//supportedAlgorithms.define('PS256', 'verify', {})
//supportedAlgorithms.define('PS384', 'verify', {})
//supportedAlgorithms.define('PS512', 'verify', {})

supportedAlgorithms.define('none', 'verify', new None({
  // nothing goes here
}))

supportedAlgorithms.define('RS256', 'importKey', new RSASSA_PKCS1_v1_5({
  name: 'RSASSA-PKCS1-v1_5',
  hash: {
    name: 'SHA-256'
  }
}))

supportedAlgorithms.define('RS384', 'importKey', new RSASSA_PKCS1_v1_5({
  name: 'RSASSA-PKCS1-v1_5',
  hash: {
    name: 'SHA-384'
  }
}))

supportedAlgorithms.define('RS512', 'importKey', new RSASSA_PKCS1_v1_5({
  name: 'RSASSA-PKCS1-v1_5',
  hash: {
    name: 'SHA-512'
  }
}))

/**
 * Export
 */
module.exports = supportedAlgorithms




/***/ }),
/* 39 */
/***/ (function(module, exports) {

/**
 * None
 */
class None {
  /**
   * sign
   */
  sign () {
    return Promise.resolve('')
  }

  /**
   * verify
   */
  verify () {
    // this will never get called. but you looked.
  }
}

/**
 * Export
 */
module.exports = None


/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(Buffer) {

/**
 * Dependencies
 * @ignore
 */
const base64url = __webpack_require__(45)
const crypto = __webpack_require__(35)
const TextEncoder = __webpack_require__(48)

/**
 * HMAC with SHA-2 Functions
 */
class HMAC {

  /**
   * Constructor
   *
   * @param {string} bitlength
   */
  constructor (params) {
    this.params = params
  }

  /**
   * Sign
   *
   * @description
   * Generate a hash-based message authentication code for a
   * given input and key. Enforce the key length is equal to
   * or greater than the bitlength.
   *
   * @param {CryptoKey} key
   * @param {string} data
   *
   * @returns {string}
   */
  sign (key, data) {
    let algorithm = this.params

    // TODO: validate key length

    data = new TextEncoder().encode(data)

    return crypto.subtle
      .sign(algorithm, key, data)
      .then(signature =&gt; base64url(Buffer.from(signature)))
  }

  /**
   * Verify
   *
   * @description
   * Verify a digital signature for a given input and private key.
   *
   * @param {CryptoKey} key
   * @param {string} signature
   * @param {string} data
   *
   * @returns {Boolean}
   */
  verify (key, signature, data) {
    let algorithm = this.params

    if (typeof signature === 'string') {
      signature = Uint8Array.from(base64url.toBuffer(signature))
    }

    if (typeof data === 'string') {
      data = new TextEncoder().encode(data)
    }

    return crypto.subtle.verify(algorithm, key, signature, data)
  }

  /**
   * Assert Sufficient Key Length
   *
   * @description Assert that the key length is sufficient
   * @param {string} key
   */
  assertSufficientKeyLength (key) {
    if (key.length <span class="hljs-tag">&lt; <span class="hljs-attr">this.bitlength</span>) {
      <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>('<span class="hljs-attr">The</span> <span class="hljs-attr">key</span> <span class="hljs-attr">is</span> <span class="hljs-attr">too</span> <span class="hljs-attr">short.</span>')
    }
  }
}

/**
 * <span class="hljs-attr">Export</span>
 */
<span class="hljs-attr">module.exports</span> = <span class="hljs-string">HMAC</span>

/* <span class="hljs-attr">WEBPACK</span> <span class="hljs-attr">VAR</span> <span class="hljs-attr">INJECTION</span> */}<span class="hljs-attr">.call</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">__webpack_require__</span>(<span class="hljs-attr">41</span>)<span class="hljs-attr">.Buffer</span>))

/***/ }),
/* <span class="hljs-attr">41</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">exports</span>, <span class="hljs-attr">__webpack_require__</span>) {

"<span class="hljs-attr">use</span> <span class="hljs-attr">strict</span>";
/* <span class="hljs-attr">WEBPACK</span> <span class="hljs-attr">VAR</span> <span class="hljs-attr">INJECTION</span> */(<span class="hljs-attr">function</span>(<span class="hljs-attr">global</span>) {/*!
 * <span class="hljs-attr">The</span> <span class="hljs-attr">buffer</span> <span class="hljs-attr">module</span> <span class="hljs-attr">from</span> <span class="hljs-attr">node.js</span>, <span class="hljs-attr">for</span> <span class="hljs-attr">the</span> <span class="hljs-attr">browser.</span>
 *
 * @<span class="hljs-attr">author</span>   <span class="hljs-attr">Feross</span> <span class="hljs-attr">Aboukhadijeh</span> &lt;<span class="hljs-attr">http:</span>//<span class="hljs-attr">feross.org</span>&gt;</span>
 * @license  MIT
 */
/* eslint-disable no-proto */



var base64 = __webpack_require__(42)
var ieee754 = __webpack_require__(43)
var isArray = __webpack_require__(44)

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

/*
 * Export kMaxLength after typed array support is determined.
 */
exports.kMaxLength = kMaxLength()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}
    return arr.foo() === 42 &amp;&amp; // typed array instances can be augmented
        typeof arr.subarray === 'function' &amp;&amp; // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

function createBuffer (that, length) {
  if (kMaxLength() <span class="hljs-tag">&lt; <span class="hljs-attr">length</span>) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('<span class="hljs-attr">Invalid</span> <span class="hljs-attr">typed</span> <span class="hljs-attr">array</span> <span class="hljs-attr">length</span>')
  }
  <span class="hljs-attr">if</span> (<span class="hljs-attr">Buffer.TYPED_ARRAY_SUPPORT</span>) {
    // <span class="hljs-attr">Return</span> <span class="hljs-attr">an</span> <span class="hljs-attr">augmented</span> `<span class="hljs-attr">Uint8Array</span>` <span class="hljs-attr">instance</span>, <span class="hljs-attr">for</span> <span class="hljs-attr">best</span> <span class="hljs-attr">performance</span>
    <span class="hljs-attr">that</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Uint8Array</span>(<span class="hljs-attr">length</span>)
    <span class="hljs-attr">that.__proto__</span> = <span class="hljs-string">Buffer.prototype</span>
  } <span class="hljs-attr">else</span> {
    // <span class="hljs-attr">Fallback:</span> <span class="hljs-attr">Return</span> <span class="hljs-attr">an</span> <span class="hljs-attr">object</span> <span class="hljs-attr">instance</span> <span class="hljs-attr">of</span> <span class="hljs-attr">the</span> <span class="hljs-attr">Buffer</span> <span class="hljs-attr">class</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">that</span> === <span class="hljs-string">null)</span> {
      <span class="hljs-attr">that</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Buffer</span>(<span class="hljs-attr">length</span>)
    }
    <span class="hljs-attr">that.length</span> = <span class="hljs-string">length</span>
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">that</span>
}

/**
 * <span class="hljs-attr">The</span> <span class="hljs-attr">Buffer</span> <span class="hljs-attr">constructor</span> <span class="hljs-attr">returns</span> <span class="hljs-attr">instances</span> <span class="hljs-attr">of</span> `<span class="hljs-attr">Uint8Array</span>` <span class="hljs-attr">that</span> <span class="hljs-attr">have</span> <span class="hljs-attr">their</span>
 * <span class="hljs-attr">prototype</span> <span class="hljs-attr">changed</span> <span class="hljs-attr">to</span> `<span class="hljs-attr">Buffer.prototype</span>`<span class="hljs-attr">.</span> <span class="hljs-attr">Furthermore</span>, `<span class="hljs-attr">Buffer</span>` <span class="hljs-attr">is</span> <span class="hljs-attr">a</span> <span class="hljs-attr">subclass</span> <span class="hljs-attr">of</span>
 * `<span class="hljs-attr">Uint8Array</span>`, <span class="hljs-attr">so</span> <span class="hljs-attr">the</span> <span class="hljs-attr">returned</span> <span class="hljs-attr">instances</span> <span class="hljs-attr">will</span> <span class="hljs-attr">have</span> <span class="hljs-attr">all</span> <span class="hljs-attr">the</span> <span class="hljs-attr">node</span> `<span class="hljs-attr">Buffer</span>` <span class="hljs-attr">methods</span>
 * <span class="hljs-attr">and</span> <span class="hljs-attr">the</span> `<span class="hljs-attr">Uint8Array</span>` <span class="hljs-attr">methods.</span> <span class="hljs-attr">Square</span> <span class="hljs-attr">bracket</span> <span class="hljs-attr">notation</span> <span class="hljs-attr">works</span> <span class="hljs-attr">as</span> <span class="hljs-attr">expected</span> <span class="hljs-attr">--</span> <span class="hljs-attr">it</span>
 * <span class="hljs-attr">returns</span> <span class="hljs-attr">a</span> <span class="hljs-attr">single</span> <span class="hljs-attr">octet.</span>
 *
 * <span class="hljs-attr">The</span> `<span class="hljs-attr">Uint8Array</span>` <span class="hljs-attr">prototype</span> <span class="hljs-attr">remains</span> <span class="hljs-attr">unmodified.</span>
 */

<span class="hljs-attr">function</span> <span class="hljs-attr">Buffer</span> (<span class="hljs-attr">arg</span>, <span class="hljs-attr">encodingOrOffset</span>, <span class="hljs-attr">length</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">Buffer.TYPED_ARRAY_SUPPORT</span> &amp;&amp; !(<span class="hljs-attr">this</span> <span class="hljs-attr">instanceof</span> <span class="hljs-attr">Buffer</span>)) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Buffer</span>(<span class="hljs-attr">arg</span>, <span class="hljs-attr">encodingOrOffset</span>, <span class="hljs-attr">length</span>)
  }

  // <span class="hljs-attr">Common</span> <span class="hljs-attr">case.</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">arg</span> === <span class="hljs-string">'number'</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">encodingOrOffset</span> === <span class="hljs-string">'string'</span>) {
      <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>(
        '<span class="hljs-attr">If</span> <span class="hljs-attr">encoding</span> <span class="hljs-attr">is</span> <span class="hljs-attr">specified</span> <span class="hljs-attr">then</span> <span class="hljs-attr">the</span> <span class="hljs-attr">first</span> <span class="hljs-attr">argument</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">a</span> <span class="hljs-attr">string</span>'
      )
    }
    <span class="hljs-attr">return</span> <span class="hljs-attr">allocUnsafe</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">arg</span>)
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">from</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">arg</span>, <span class="hljs-attr">encodingOrOffset</span>, <span class="hljs-attr">length</span>)
}

<span class="hljs-attr">Buffer.poolSize</span> = <span class="hljs-string">8192</span> // <span class="hljs-attr">not</span> <span class="hljs-attr">used</span> <span class="hljs-attr">by</span> <span class="hljs-attr">this</span> <span class="hljs-attr">implementation</span>

// <span class="hljs-attr">TODO:</span> <span class="hljs-attr">Legacy</span>, <span class="hljs-attr">not</span> <span class="hljs-attr">needed</span> <span class="hljs-attr">anymore.</span> <span class="hljs-attr">Remove</span> <span class="hljs-attr">in</span> <span class="hljs-attr">next</span> <span class="hljs-attr">major</span> <span class="hljs-attr">version.</span>
<span class="hljs-attr">Buffer._augment</span> = <span class="hljs-string">function</span> (<span class="hljs-attr">arr</span>) {
  <span class="hljs-attr">arr.__proto__</span> = <span class="hljs-string">Buffer.prototype</span>
  <span class="hljs-attr">return</span> <span class="hljs-attr">arr</span>
}

<span class="hljs-attr">function</span> <span class="hljs-attr">from</span> (<span class="hljs-attr">that</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">encodingOrOffset</span>, <span class="hljs-attr">length</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">value</span> === <span class="hljs-string">'number'</span>) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('"<span class="hljs-attr">value</span>" <span class="hljs-attr">argument</span> <span class="hljs-attr">must</span> <span class="hljs-attr">not</span> <span class="hljs-attr">be</span> <span class="hljs-attr">a</span> <span class="hljs-attr">number</span>')
  }

  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">ArrayBuffer</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-attr">value</span> <span class="hljs-attr">instanceof</span> <span class="hljs-attr">ArrayBuffer</span>) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">fromArrayBuffer</span>(<span class="hljs-attr">that</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">encodingOrOffset</span>, <span class="hljs-attr">length</span>)
  }

  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">value</span> === <span class="hljs-string">'string'</span>) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">fromString</span>(<span class="hljs-attr">that</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">encodingOrOffset</span>)
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">fromObject</span>(<span class="hljs-attr">that</span>, <span class="hljs-attr">value</span>)
}

/**
 * <span class="hljs-attr">Functionally</span> <span class="hljs-attr">equivalent</span> <span class="hljs-attr">to</span> <span class="hljs-attr">Buffer</span>(<span class="hljs-attr">arg</span>, <span class="hljs-attr">encoding</span>) <span class="hljs-attr">but</span> <span class="hljs-attr">throws</span> <span class="hljs-attr">a</span> <span class="hljs-attr">TypeError</span>
 * <span class="hljs-attr">if</span> <span class="hljs-attr">value</span> <span class="hljs-attr">is</span> <span class="hljs-attr">a</span> <span class="hljs-attr">number.</span>
 * <span class="hljs-attr">Buffer.from</span>(<span class="hljs-attr">str</span>[, <span class="hljs-attr">encoding</span>])
 * <span class="hljs-attr">Buffer.from</span>(<span class="hljs-attr">array</span>)
 * <span class="hljs-attr">Buffer.from</span>(<span class="hljs-attr">buffer</span>)
 * <span class="hljs-attr">Buffer.from</span>(<span class="hljs-attr">arrayBuffer</span>[, <span class="hljs-attr">byteOffset</span>[, <span class="hljs-attr">length</span>]])
 **/
<span class="hljs-attr">Buffer.from</span> = <span class="hljs-string">function</span> (<span class="hljs-attr">value</span>, <span class="hljs-attr">encodingOrOffset</span>, <span class="hljs-attr">length</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">from</span>(<span class="hljs-attr">null</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">encodingOrOffset</span>, <span class="hljs-attr">length</span>)
}

<span class="hljs-attr">if</span> (<span class="hljs-attr">Buffer.TYPED_ARRAY_SUPPORT</span>) {
  <span class="hljs-attr">Buffer.prototype.__proto__</span> = <span class="hljs-string">Uint8Array.prototype</span>
  <span class="hljs-attr">Buffer.__proto__</span> = <span class="hljs-string">Uint8Array</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">Symbol</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-attr">Symbol.species</span> &amp;&amp;
      <span class="hljs-attr">Buffer</span>[<span class="hljs-attr">Symbol.species</span>] === <span class="hljs-string">Buffer)</span> {
    // <span class="hljs-attr">Fix</span> <span class="hljs-attr">subarray</span>() <span class="hljs-attr">in</span> <span class="hljs-attr">ES2016.</span> <span class="hljs-attr">See:</span> <span class="hljs-attr">https:</span>//<span class="hljs-attr">github.com</span>/<span class="hljs-attr">feross</span>/<span class="hljs-attr">buffer</span>/<span class="hljs-attr">pull</span>/<span class="hljs-attr">97</span>
    <span class="hljs-attr">Object.defineProperty</span>(<span class="hljs-attr">Buffer</span>, <span class="hljs-attr">Symbol.species</span>, {
      <span class="hljs-attr">value:</span> <span class="hljs-attr">null</span>,
      <span class="hljs-attr">configurable:</span> <span class="hljs-attr">true</span>
    })
  }
}

<span class="hljs-attr">function</span> <span class="hljs-attr">assertSize</span> (<span class="hljs-attr">size</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">size</span> !== <span class="hljs-string">'number'</span>) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('"<span class="hljs-attr">size</span>" <span class="hljs-attr">argument</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">a</span> <span class="hljs-attr">number</span>')
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">size</span> &lt; <span class="hljs-attr">0</span>) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('"<span class="hljs-attr">size</span>" <span class="hljs-attr">argument</span> <span class="hljs-attr">must</span> <span class="hljs-attr">not</span> <span class="hljs-attr">be</span> <span class="hljs-attr">negative</span>')
  }
}

<span class="hljs-attr">function</span> <span class="hljs-attr">alloc</span> (<span class="hljs-attr">that</span>, <span class="hljs-attr">size</span>, <span class="hljs-attr">fill</span>, <span class="hljs-attr">encoding</span>) {
  <span class="hljs-attr">assertSize</span>(<span class="hljs-attr">size</span>)
  <span class="hljs-attr">if</span> (<span class="hljs-attr">size</span> &lt;= <span class="hljs-string">0)</span> {
    <span class="hljs-attr">return</span> <span class="hljs-attr">createBuffer</span>(<span class="hljs-attr">that</span>, <span class="hljs-attr">size</span>)
  }
  <span class="hljs-attr">if</span> (<span class="hljs-attr">fill</span> !== <span class="hljs-string">undefined)</span> {
    // <span class="hljs-attr">Only</span> <span class="hljs-attr">pay</span> <span class="hljs-attr">attention</span> <span class="hljs-attr">to</span> <span class="hljs-attr">encoding</span> <span class="hljs-attr">if</span> <span class="hljs-attr">it</span>'<span class="hljs-attr">s</span> <span class="hljs-attr">a</span> <span class="hljs-attr">string.</span> <span class="hljs-attr">This</span>
    // <span class="hljs-attr">prevents</span> <span class="hljs-attr">accidentally</span> <span class="hljs-attr">sending</span> <span class="hljs-attr">in</span> <span class="hljs-attr">a</span> <span class="hljs-attr">number</span> <span class="hljs-attr">that</span> <span class="hljs-attr">would</span>
    // <span class="hljs-attr">be</span> <span class="hljs-attr">interpretted</span> <span class="hljs-attr">as</span> <span class="hljs-attr">a</span> <span class="hljs-attr">start</span> <span class="hljs-attr">offset.</span>
    <span class="hljs-attr">return</span> <span class="hljs-attr">typeof</span> <span class="hljs-attr">encoding</span> === <span class="hljs-string">'string'</span>
      ? <span class="hljs-attr">createBuffer</span>(<span class="hljs-attr">that</span>, <span class="hljs-attr">size</span>)<span class="hljs-attr">.fill</span>(<span class="hljs-attr">fill</span>, <span class="hljs-attr">encoding</span>)
      <span class="hljs-attr">:</span> <span class="hljs-attr">createBuffer</span>(<span class="hljs-attr">that</span>, <span class="hljs-attr">size</span>)<span class="hljs-attr">.fill</span>(<span class="hljs-attr">fill</span>)
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">createBuffer</span>(<span class="hljs-attr">that</span>, <span class="hljs-attr">size</span>)
}

/**
 * <span class="hljs-attr">Creates</span> <span class="hljs-attr">a</span> <span class="hljs-attr">new</span> <span class="hljs-attr">filled</span> <span class="hljs-attr">Buffer</span> <span class="hljs-attr">instance.</span>
 * <span class="hljs-attr">alloc</span>(<span class="hljs-attr">size</span>[, <span class="hljs-attr">fill</span>[, <span class="hljs-attr">encoding</span>]])
 **/
<span class="hljs-attr">Buffer.alloc</span> = <span class="hljs-string">function</span> (<span class="hljs-attr">size</span>, <span class="hljs-attr">fill</span>, <span class="hljs-attr">encoding</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">alloc</span>(<span class="hljs-attr">null</span>, <span class="hljs-attr">size</span>, <span class="hljs-attr">fill</span>, <span class="hljs-attr">encoding</span>)
}

<span class="hljs-attr">function</span> <span class="hljs-attr">allocUnsafe</span> (<span class="hljs-attr">that</span>, <span class="hljs-attr">size</span>) {
  <span class="hljs-attr">assertSize</span>(<span class="hljs-attr">size</span>)
  <span class="hljs-attr">that</span> = <span class="hljs-string">createBuffer(that,</span> <span class="hljs-attr">size</span> &lt; <span class="hljs-attr">0</span> ? <span class="hljs-attr">0</span> <span class="hljs-attr">:</span> <span class="hljs-attr">checked</span>(<span class="hljs-attr">size</span>) | <span class="hljs-attr">0</span>)
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">Buffer.TYPED_ARRAY_SUPPORT</span>) {
    <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">size</span>; ++<span class="hljs-attr">i</span>) {
      <span class="hljs-attr">that</span>[<span class="hljs-attr">i</span>] = <span class="hljs-string">0</span>
    }
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">that</span>
}

/**
 * <span class="hljs-attr">Equivalent</span> <span class="hljs-attr">to</span> <span class="hljs-attr">Buffer</span>(<span class="hljs-attr">num</span>), <span class="hljs-attr">by</span> <span class="hljs-attr">default</span> <span class="hljs-attr">creates</span> <span class="hljs-attr">a</span> <span class="hljs-attr">non-zero-filled</span> <span class="hljs-attr">Buffer</span> <span class="hljs-attr">instance.</span>
 * */
<span class="hljs-attr">Buffer.allocUnsafe</span> = <span class="hljs-string">function</span> (<span class="hljs-attr">size</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">allocUnsafe</span>(<span class="hljs-attr">null</span>, <span class="hljs-attr">size</span>)
}
/**
 * <span class="hljs-attr">Equivalent</span> <span class="hljs-attr">to</span> <span class="hljs-attr">SlowBuffer</span>(<span class="hljs-attr">num</span>), <span class="hljs-attr">by</span> <span class="hljs-attr">default</span> <span class="hljs-attr">creates</span> <span class="hljs-attr">a</span> <span class="hljs-attr">non-zero-filled</span> <span class="hljs-attr">Buffer</span> <span class="hljs-attr">instance.</span>
 */
<span class="hljs-attr">Buffer.allocUnsafeSlow</span> = <span class="hljs-string">function</span> (<span class="hljs-attr">size</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">allocUnsafe</span>(<span class="hljs-attr">null</span>, <span class="hljs-attr">size</span>)
}

<span class="hljs-attr">function</span> <span class="hljs-attr">fromString</span> (<span class="hljs-attr">that</span>, <span class="hljs-attr">string</span>, <span class="hljs-attr">encoding</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">encoding</span> !== <span class="hljs-string">'string'</span> || <span class="hljs-attr">encoding</span> === <span class="hljs-string">''</span>) {
    <span class="hljs-attr">encoding</span> = <span class="hljs-string">'utf8'</span>
  }

  <span class="hljs-attr">if</span> (!<span class="hljs-attr">Buffer.isEncoding</span>(<span class="hljs-attr">encoding</span>)) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('"<span class="hljs-attr">encoding</span>" <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">a</span> <span class="hljs-attr">valid</span> <span class="hljs-attr">string</span> <span class="hljs-attr">encoding</span>')
  }

  <span class="hljs-attr">var</span> <span class="hljs-attr">length</span> = <span class="hljs-string">byteLength(string,</span> <span class="hljs-attr">encoding</span>) | <span class="hljs-attr">0</span>
  <span class="hljs-attr">that</span> = <span class="hljs-string">createBuffer(that,</span> <span class="hljs-attr">length</span>)

  <span class="hljs-attr">var</span> <span class="hljs-attr">actual</span> = <span class="hljs-string">that.write(string,</span> <span class="hljs-attr">encoding</span>)

  <span class="hljs-attr">if</span> (<span class="hljs-attr">actual</span> !== <span class="hljs-string">length)</span> {
    // <span class="hljs-attr">Writing</span> <span class="hljs-attr">a</span> <span class="hljs-attr">hex</span> <span class="hljs-attr">string</span>, <span class="hljs-attr">for</span> <span class="hljs-attr">example</span>, <span class="hljs-attr">that</span> <span class="hljs-attr">contains</span> <span class="hljs-attr">invalid</span> <span class="hljs-attr">characters</span> <span class="hljs-attr">will</span>
    // <span class="hljs-attr">cause</span> <span class="hljs-attr">everything</span> <span class="hljs-attr">after</span> <span class="hljs-attr">the</span> <span class="hljs-attr">first</span> <span class="hljs-attr">invalid</span> <span class="hljs-attr">character</span> <span class="hljs-attr">to</span> <span class="hljs-attr">be</span> <span class="hljs-attr">ignored.</span> (<span class="hljs-attr">e.g.</span>
    // '<span class="hljs-attr">abxxcd</span>' <span class="hljs-attr">will</span> <span class="hljs-attr">be</span> <span class="hljs-attr">treated</span> <span class="hljs-attr">as</span> '<span class="hljs-attr">ab</span>')
    <span class="hljs-attr">that</span> = <span class="hljs-string">that.slice(0,</span> <span class="hljs-attr">actual</span>)
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">that</span>
}

<span class="hljs-attr">function</span> <span class="hljs-attr">fromArrayLike</span> (<span class="hljs-attr">that</span>, <span class="hljs-attr">array</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">length</span> = <span class="hljs-string">array.length</span> &lt; <span class="hljs-attr">0</span> ? <span class="hljs-attr">0</span> <span class="hljs-attr">:</span> <span class="hljs-attr">checked</span>(<span class="hljs-attr">array.length</span>) | <span class="hljs-attr">0</span>
  <span class="hljs-attr">that</span> = <span class="hljs-string">createBuffer(that,</span> <span class="hljs-attr">length</span>)
  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">length</span>; <span class="hljs-attr">i</span> += <span class="hljs-string">1)</span> {
    <span class="hljs-attr">that</span>[<span class="hljs-attr">i</span>] = <span class="hljs-string">array[i]</span> &amp; <span class="hljs-attr">255</span>
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">that</span>
}

<span class="hljs-attr">function</span> <span class="hljs-attr">fromArrayBuffer</span> (<span class="hljs-attr">that</span>, <span class="hljs-attr">array</span>, <span class="hljs-attr">byteOffset</span>, <span class="hljs-attr">length</span>) {
  <span class="hljs-attr">array.byteLength</span> // <span class="hljs-attr">this</span> <span class="hljs-attr">throws</span> <span class="hljs-attr">if</span> `<span class="hljs-attr">array</span>` <span class="hljs-attr">is</span> <span class="hljs-attr">not</span> <span class="hljs-attr">a</span> <span class="hljs-attr">valid</span> <span class="hljs-attr">ArrayBuffer</span>

  <span class="hljs-attr">if</span> (<span class="hljs-attr">byteOffset</span> &lt; <span class="hljs-attr">0</span> || <span class="hljs-attr">array.byteLength</span> &lt; <span class="hljs-attr">byteOffset</span>) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('\'<span class="hljs-attr">offset</span>\' <span class="hljs-attr">is</span> <span class="hljs-attr">out</span> <span class="hljs-attr">of</span> <span class="hljs-attr">bounds</span>')
  }

  <span class="hljs-attr">if</span> (<span class="hljs-attr">array.byteLength</span> &lt; <span class="hljs-attr">byteOffset</span> + (<span class="hljs-attr">length</span> || <span class="hljs-attr">0</span>)) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('\'<span class="hljs-attr">length</span>\' <span class="hljs-attr">is</span> <span class="hljs-attr">out</span> <span class="hljs-attr">of</span> <span class="hljs-attr">bounds</span>')
  }

  <span class="hljs-attr">if</span> (<span class="hljs-attr">byteOffset</span> === <span class="hljs-string">undefined</span> &amp;&amp; <span class="hljs-attr">length</span> === <span class="hljs-string">undefined)</span> {
    <span class="hljs-attr">array</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Uint8Array</span>(<span class="hljs-attr">array</span>)
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">length</span> === <span class="hljs-string">undefined)</span> {
    <span class="hljs-attr">array</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Uint8Array</span>(<span class="hljs-attr">array</span>, <span class="hljs-attr">byteOffset</span>)
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">array</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Uint8Array</span>(<span class="hljs-attr">array</span>, <span class="hljs-attr">byteOffset</span>, <span class="hljs-attr">length</span>)
  }

  <span class="hljs-attr">if</span> (<span class="hljs-attr">Buffer.TYPED_ARRAY_SUPPORT</span>) {
    // <span class="hljs-attr">Return</span> <span class="hljs-attr">an</span> <span class="hljs-attr">augmented</span> `<span class="hljs-attr">Uint8Array</span>` <span class="hljs-attr">instance</span>, <span class="hljs-attr">for</span> <span class="hljs-attr">best</span> <span class="hljs-attr">performance</span>
    <span class="hljs-attr">that</span> = <span class="hljs-string">array</span>
    <span class="hljs-attr">that.__proto__</span> = <span class="hljs-string">Buffer.prototype</span>
  } <span class="hljs-attr">else</span> {
    // <span class="hljs-attr">Fallback:</span> <span class="hljs-attr">Return</span> <span class="hljs-attr">an</span> <span class="hljs-attr">object</span> <span class="hljs-attr">instance</span> <span class="hljs-attr">of</span> <span class="hljs-attr">the</span> <span class="hljs-attr">Buffer</span> <span class="hljs-attr">class</span>
    <span class="hljs-attr">that</span> = <span class="hljs-string">fromArrayLike(that,</span> <span class="hljs-attr">array</span>)
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">that</span>
}

<span class="hljs-attr">function</span> <span class="hljs-attr">fromObject</span> (<span class="hljs-attr">that</span>, <span class="hljs-attr">obj</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">Buffer.isBuffer</span>(<span class="hljs-attr">obj</span>)) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">len</span> = <span class="hljs-string">checked(obj.length)</span> | <span class="hljs-attr">0</span>
    <span class="hljs-attr">that</span> = <span class="hljs-string">createBuffer(that,</span> <span class="hljs-attr">len</span>)

    <span class="hljs-attr">if</span> (<span class="hljs-attr">that.length</span> === <span class="hljs-string">0)</span> {
      <span class="hljs-attr">return</span> <span class="hljs-attr">that</span>
    }

    <span class="hljs-attr">obj.copy</span>(<span class="hljs-attr">that</span>, <span class="hljs-attr">0</span>, <span class="hljs-attr">0</span>, <span class="hljs-attr">len</span>)
    <span class="hljs-attr">return</span> <span class="hljs-attr">that</span>
  }

  <span class="hljs-attr">if</span> (<span class="hljs-attr">obj</span>) {
    <span class="hljs-attr">if</span> ((<span class="hljs-attr">typeof</span> <span class="hljs-attr">ArrayBuffer</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp;
        <span class="hljs-attr">obj.buffer</span> <span class="hljs-attr">instanceof</span> <span class="hljs-attr">ArrayBuffer</span>) || '<span class="hljs-attr">length</span>' <span class="hljs-attr">in</span> <span class="hljs-attr">obj</span>) {
      <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">obj.length</span> !== <span class="hljs-string">'number'</span> || <span class="hljs-attr">isnan</span>(<span class="hljs-attr">obj.length</span>)) {
        <span class="hljs-attr">return</span> <span class="hljs-attr">createBuffer</span>(<span class="hljs-attr">that</span>, <span class="hljs-attr">0</span>)
      }
      <span class="hljs-attr">return</span> <span class="hljs-attr">fromArrayLike</span>(<span class="hljs-attr">that</span>, <span class="hljs-attr">obj</span>)
    }

    <span class="hljs-attr">if</span> (<span class="hljs-attr">obj.type</span> === <span class="hljs-string">'Buffer'</span> &amp;&amp; <span class="hljs-attr">isArray</span>(<span class="hljs-attr">obj.data</span>)) {
      <span class="hljs-attr">return</span> <span class="hljs-attr">fromArrayLike</span>(<span class="hljs-attr">that</span>, <span class="hljs-attr">obj.data</span>)
    }
  }

  <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('<span class="hljs-attr">First</span> <span class="hljs-attr">argument</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">a</span> <span class="hljs-attr">string</span>, <span class="hljs-attr">Buffer</span>, <span class="hljs-attr">ArrayBuffer</span>, <span class="hljs-attr">Array</span>, <span class="hljs-attr">or</span> <span class="hljs-attr">array-like</span> <span class="hljs-attr">object.</span>')
}

<span class="hljs-attr">function</span> <span class="hljs-attr">checked</span> (<span class="hljs-attr">length</span>) {
  // <span class="hljs-attr">Note:</span> <span class="hljs-attr">cannot</span> <span class="hljs-attr">use</span> `<span class="hljs-attr">length</span> &lt; <span class="hljs-attr">kMaxLength</span>()` <span class="hljs-attr">here</span> <span class="hljs-attr">because</span> <span class="hljs-attr">that</span> <span class="hljs-attr">fails</span> <span class="hljs-attr">when</span>
  // <span class="hljs-attr">length</span> <span class="hljs-attr">is</span> <span class="hljs-attr">NaN</span> (<span class="hljs-attr">which</span> <span class="hljs-attr">is</span> <span class="hljs-attr">otherwise</span> <span class="hljs-attr">coerced</span> <span class="hljs-attr">to</span> <span class="hljs-attr">zero.</span>)
  <span class="hljs-attr">if</span> (<span class="hljs-attr">length</span> &gt;</span>= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null &amp;&amp; b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i <span class="hljs-tag">&lt; <span class="hljs-attr">len</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">a</span>[<span class="hljs-attr">i</span>] !== <span class="hljs-string">b[i])</span> {
      <span class="hljs-attr">x</span> = <span class="hljs-string">a[i]</span>
      <span class="hljs-attr">y</span> = <span class="hljs-string">b[i]</span>
      <span class="hljs-attr">break</span>
    }
  }

  <span class="hljs-attr">if</span> (<span class="hljs-attr">x</span> &lt; <span class="hljs-attr">y</span>) <span class="hljs-attr">return</span> <span class="hljs-attr">-1</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">y</span> &lt; <span class="hljs-attr">x</span>) <span class="hljs-attr">return</span> <span class="hljs-attr">1</span>
  <span class="hljs-attr">return</span> <span class="hljs-attr">0</span>
}

<span class="hljs-attr">Buffer.isEncoding</span> = <span class="hljs-string">function</span> <span class="hljs-attr">isEncoding</span> (<span class="hljs-attr">encoding</span>) {
  <span class="hljs-attr">switch</span> (<span class="hljs-attr">String</span>(<span class="hljs-attr">encoding</span>)<span class="hljs-attr">.toLowerCase</span>()) {
    <span class="hljs-attr">case</span> '<span class="hljs-attr">hex</span>'<span class="hljs-attr">:</span>
    <span class="hljs-attr">case</span> '<span class="hljs-attr">utf8</span>'<span class="hljs-attr">:</span>
    <span class="hljs-attr">case</span> '<span class="hljs-attr">utf-8</span>'<span class="hljs-attr">:</span>
    <span class="hljs-attr">case</span> '<span class="hljs-attr">ascii</span>'<span class="hljs-attr">:</span>
    <span class="hljs-attr">case</span> '<span class="hljs-attr">latin1</span>'<span class="hljs-attr">:</span>
    <span class="hljs-attr">case</span> '<span class="hljs-attr">binary</span>'<span class="hljs-attr">:</span>
    <span class="hljs-attr">case</span> '<span class="hljs-attr">base64</span>'<span class="hljs-attr">:</span>
    <span class="hljs-attr">case</span> '<span class="hljs-attr">ucs2</span>'<span class="hljs-attr">:</span>
    <span class="hljs-attr">case</span> '<span class="hljs-attr">ucs-2</span>'<span class="hljs-attr">:</span>
    <span class="hljs-attr">case</span> '<span class="hljs-attr">utf16le</span>'<span class="hljs-attr">:</span>
    <span class="hljs-attr">case</span> '<span class="hljs-attr">utf-16le</span>'<span class="hljs-attr">:</span>
      <span class="hljs-attr">return</span> <span class="hljs-attr">true</span>
    <span class="hljs-attr">default:</span>
      <span class="hljs-attr">return</span> <span class="hljs-attr">false</span>
  }
}

<span class="hljs-attr">Buffer.concat</span> = <span class="hljs-string">function</span> <span class="hljs-attr">concat</span> (<span class="hljs-attr">list</span>, <span class="hljs-attr">length</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">isArray</span>(<span class="hljs-attr">list</span>)) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('"<span class="hljs-attr">list</span>" <span class="hljs-attr">argument</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">an</span> <span class="hljs-attr">Array</span> <span class="hljs-attr">of</span> <span class="hljs-attr">Buffers</span>')
  }

  <span class="hljs-attr">if</span> (<span class="hljs-attr">list.length</span> === <span class="hljs-string">0)</span> {
    <span class="hljs-attr">return</span> <span class="hljs-attr">Buffer.alloc</span>(<span class="hljs-attr">0</span>)
  }

  <span class="hljs-attr">var</span> <span class="hljs-attr">i</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">length</span> === <span class="hljs-string">undefined)</span> {
    <span class="hljs-attr">length</span> = <span class="hljs-string">0</span>
    <span class="hljs-attr">for</span> (<span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">list.length</span>; ++<span class="hljs-attr">i</span>) {
      <span class="hljs-attr">length</span> += <span class="hljs-string">list[i].length</span>
    }
  }

  <span class="hljs-attr">var</span> <span class="hljs-attr">buffer</span> = <span class="hljs-string">Buffer.allocUnsafe(length)</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">pos</span> = <span class="hljs-string">0</span>
  <span class="hljs-attr">for</span> (<span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">list.length</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">buf</span> = <span class="hljs-string">list[i]</span>
    <span class="hljs-attr">if</span> (!<span class="hljs-attr">Buffer.isBuffer</span>(<span class="hljs-attr">buf</span>)) {
      <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('"<span class="hljs-attr">list</span>" <span class="hljs-attr">argument</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">an</span> <span class="hljs-attr">Array</span> <span class="hljs-attr">of</span> <span class="hljs-attr">Buffers</span>')
    }
    <span class="hljs-attr">buf.copy</span>(<span class="hljs-attr">buffer</span>, <span class="hljs-attr">pos</span>)
    <span class="hljs-attr">pos</span> += <span class="hljs-string">buf.length</span>
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">buffer</span>
}

<span class="hljs-attr">function</span> <span class="hljs-attr">byteLength</span> (<span class="hljs-attr">string</span>, <span class="hljs-attr">encoding</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">Buffer.isBuffer</span>(<span class="hljs-attr">string</span>)) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">string.length</span>
  }
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">ArrayBuffer</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-attr">typeof</span> <span class="hljs-attr">ArrayBuffer.isView</span> === <span class="hljs-string">'function'</span> &amp;&amp;
      (<span class="hljs-attr">ArrayBuffer.isView</span>(<span class="hljs-attr">string</span>) || <span class="hljs-attr">string</span> <span class="hljs-attr">instanceof</span> <span class="hljs-attr">ArrayBuffer</span>)) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">string.byteLength</span>
  }
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">string</span> !== <span class="hljs-string">'string'</span>) {
    <span class="hljs-attr">string</span> = <span class="hljs-string">''</span> + <span class="hljs-attr">string</span>
  }

  <span class="hljs-attr">var</span> <span class="hljs-attr">len</span> = <span class="hljs-string">string.length</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">len</span> === <span class="hljs-string">0)</span> <span class="hljs-attr">return</span> <span class="hljs-attr">0</span>

  // <span class="hljs-attr">Use</span> <span class="hljs-attr">a</span> <span class="hljs-attr">for</span> <span class="hljs-attr">loop</span> <span class="hljs-attr">to</span> <span class="hljs-attr">avoid</span> <span class="hljs-attr">recursion</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">loweredCase</span> = <span class="hljs-string">false</span>
  <span class="hljs-attr">for</span> (;;) {
    <span class="hljs-attr">switch</span> (<span class="hljs-attr">encoding</span>) {
      <span class="hljs-attr">case</span> '<span class="hljs-attr">ascii</span>'<span class="hljs-attr">:</span>
      <span class="hljs-attr">case</span> '<span class="hljs-attr">latin1</span>'<span class="hljs-attr">:</span>
      <span class="hljs-attr">case</span> '<span class="hljs-attr">binary</span>'<span class="hljs-attr">:</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">len</span>
      <span class="hljs-attr">case</span> '<span class="hljs-attr">utf8</span>'<span class="hljs-attr">:</span>
      <span class="hljs-attr">case</span> '<span class="hljs-attr">utf-8</span>'<span class="hljs-attr">:</span>
      <span class="hljs-attr">case</span> <span class="hljs-attr">undefined:</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">utf8ToBytes</span>(<span class="hljs-attr">string</span>)<span class="hljs-attr">.length</span>
      <span class="hljs-attr">case</span> '<span class="hljs-attr">ucs2</span>'<span class="hljs-attr">:</span>
      <span class="hljs-attr">case</span> '<span class="hljs-attr">ucs-2</span>'<span class="hljs-attr">:</span>
      <span class="hljs-attr">case</span> '<span class="hljs-attr">utf16le</span>'<span class="hljs-attr">:</span>
      <span class="hljs-attr">case</span> '<span class="hljs-attr">utf-16le</span>'<span class="hljs-attr">:</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">len</span> * <span class="hljs-attr">2</span>
      <span class="hljs-attr">case</span> '<span class="hljs-attr">hex</span>'<span class="hljs-attr">:</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">len</span> &gt;</span>&gt;&gt; 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <span class="hljs-tag">&lt;<span class="hljs-name">=</span> <span class="hljs-attr">MAX_UINT32</span>" <span class="hljs-attr">since</span> <span class="hljs-attr">it</span>'<span class="hljs-attr">s</span> <span class="hljs-attr">a</span> <span class="hljs-attr">read-only</span>
  // <span class="hljs-attr">property</span> <span class="hljs-attr">of</span> <span class="hljs-attr">a</span> <span class="hljs-attr">typed</span> <span class="hljs-attr">array.</span>

  // <span class="hljs-attr">This</span> <span class="hljs-attr">behaves</span> <span class="hljs-attr">neither</span> <span class="hljs-attr">like</span> <span class="hljs-attr">String</span> <span class="hljs-attr">nor</span> <span class="hljs-attr">Uint8Array</span> <span class="hljs-attr">in</span> <span class="hljs-attr">that</span> <span class="hljs-attr">we</span> <span class="hljs-attr">set</span> <span class="hljs-attr">start</span>/<span class="hljs-attr">end</span>
  // <span class="hljs-attr">to</span> <span class="hljs-attr">their</span> <span class="hljs-attr">upper</span>/<span class="hljs-attr">lower</span> <span class="hljs-attr">bounds</span> <span class="hljs-attr">if</span> <span class="hljs-attr">the</span> <span class="hljs-attr">value</span> <span class="hljs-attr">passed</span> <span class="hljs-attr">is</span> <span class="hljs-attr">out</span> <span class="hljs-attr">of</span> <span class="hljs-attr">range.</span>
  // <span class="hljs-attr">undefined</span> <span class="hljs-attr">is</span> <span class="hljs-attr">handled</span> <span class="hljs-attr">specially</span> <span class="hljs-attr">as</span> <span class="hljs-attr">per</span> <span class="hljs-attr">ECMA-262</span> <span class="hljs-attr">6th</span> <span class="hljs-attr">Edition</span>,
  // <span class="hljs-attr">Section</span> <span class="hljs-attr">13.3.3.7</span> <span class="hljs-attr">Runtime</span> <span class="hljs-attr">Semantics:</span> <span class="hljs-attr">KeyedBindingInitialization.</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">start</span> === <span class="hljs-string">undefined</span> || <span class="hljs-attr">start</span> &lt; <span class="hljs-attr">0</span>) {
    <span class="hljs-attr">start</span> = <span class="hljs-string">0</span>
  }
  // <span class="hljs-attr">Return</span> <span class="hljs-attr">early</span> <span class="hljs-attr">if</span> <span class="hljs-attr">start</span> &gt;</span> this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start &gt; this.length) {
    return ''
  }

  if (end === undefined || end &gt; this.length) {
    end = this.length
  }

  if (end <span class="hljs-tag">&lt;<span class="hljs-name">=</span> <span class="hljs-attr">0</span>) {
    <span class="hljs-attr">return</span> ''
  }

  // <span class="hljs-attr">Force</span> <span class="hljs-attr">coersion</span> <span class="hljs-attr">to</span> <span class="hljs-attr">uint32.</span> <span class="hljs-attr">This</span> <span class="hljs-attr">will</span> <span class="hljs-attr">also</span> <span class="hljs-attr">coerce</span> <span class="hljs-attr">falsey</span>/<span class="hljs-attr">NaN</span> <span class="hljs-attr">values</span> <span class="hljs-attr">to</span> <span class="hljs-attr">0.</span>
  <span class="hljs-attr">end</span> &gt;</span>&gt;&gt;= 0
  start &gt;&gt;&gt;= 0

  if (end <span class="hljs-tag">&lt;<span class="hljs-name">=</span> <span class="hljs-attr">start</span>) {
    <span class="hljs-attr">return</span> ''
  }

  <span class="hljs-attr">if</span> (!<span class="hljs-attr">encoding</span>) <span class="hljs-attr">encoding</span> = <span class="hljs-string">'utf8'</span>

  <span class="hljs-attr">while</span> (<span class="hljs-attr">true</span>) {
    <span class="hljs-attr">switch</span> (<span class="hljs-attr">encoding</span>) {
      <span class="hljs-attr">case</span> '<span class="hljs-attr">hex</span>'<span class="hljs-attr">:</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">hexSlice</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">start</span>, <span class="hljs-attr">end</span>)

      <span class="hljs-attr">case</span> '<span class="hljs-attr">utf8</span>'<span class="hljs-attr">:</span>
      <span class="hljs-attr">case</span> '<span class="hljs-attr">utf-8</span>'<span class="hljs-attr">:</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">utf8Slice</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">start</span>, <span class="hljs-attr">end</span>)

      <span class="hljs-attr">case</span> '<span class="hljs-attr">ascii</span>'<span class="hljs-attr">:</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">asciiSlice</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">start</span>, <span class="hljs-attr">end</span>)

      <span class="hljs-attr">case</span> '<span class="hljs-attr">latin1</span>'<span class="hljs-attr">:</span>
      <span class="hljs-attr">case</span> '<span class="hljs-attr">binary</span>'<span class="hljs-attr">:</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">latin1Slice</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">start</span>, <span class="hljs-attr">end</span>)

      <span class="hljs-attr">case</span> '<span class="hljs-attr">base64</span>'<span class="hljs-attr">:</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">base64Slice</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">start</span>, <span class="hljs-attr">end</span>)

      <span class="hljs-attr">case</span> '<span class="hljs-attr">ucs2</span>'<span class="hljs-attr">:</span>
      <span class="hljs-attr">case</span> '<span class="hljs-attr">ucs-2</span>'<span class="hljs-attr">:</span>
      <span class="hljs-attr">case</span> '<span class="hljs-attr">utf16le</span>'<span class="hljs-attr">:</span>
      <span class="hljs-attr">case</span> '<span class="hljs-attr">utf-16le</span>'<span class="hljs-attr">:</span>
        <span class="hljs-attr">return</span> <span class="hljs-attr">utf16leSlice</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">start</span>, <span class="hljs-attr">end</span>)

      <span class="hljs-attr">default:</span>
        <span class="hljs-attr">if</span> (<span class="hljs-attr">loweredCase</span>) <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('<span class="hljs-attr">Unknown</span> <span class="hljs-attr">encoding:</span> ' + <span class="hljs-attr">encoding</span>)
        <span class="hljs-attr">encoding</span> = <span class="hljs-string">(encoding</span> + '')<span class="hljs-attr">.toLowerCase</span>()
        <span class="hljs-attr">loweredCase</span> = <span class="hljs-string">true</span>
    }
  }
}

// <span class="hljs-attr">The</span> <span class="hljs-attr">property</span> <span class="hljs-attr">is</span> <span class="hljs-attr">used</span> <span class="hljs-attr">by</span> `<span class="hljs-attr">Buffer.isBuffer</span>` <span class="hljs-attr">and</span> `<span class="hljs-attr">is-buffer</span>` (<span class="hljs-attr">in</span> <span class="hljs-attr">Safari</span> <span class="hljs-attr">5-7</span>) <span class="hljs-attr">to</span> <span class="hljs-attr">detect</span>
// <span class="hljs-attr">Buffer</span> <span class="hljs-attr">instances.</span>
<span class="hljs-attr">Buffer.prototype._isBuffer</span> = <span class="hljs-string">true</span>

<span class="hljs-attr">function</span> <span class="hljs-attr">swap</span> (<span class="hljs-attr">b</span>, <span class="hljs-attr">n</span>, <span class="hljs-attr">m</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">b[n]</span>
  <span class="hljs-attr">b</span>[<span class="hljs-attr">n</span>] = <span class="hljs-string">b[m]</span>
  <span class="hljs-attr">b</span>[<span class="hljs-attr">m</span>] = <span class="hljs-string">i</span>
}

<span class="hljs-attr">Buffer.prototype.swap16</span> = <span class="hljs-string">function</span> <span class="hljs-attr">swap16</span> () {
  <span class="hljs-attr">var</span> <span class="hljs-attr">len</span> = <span class="hljs-string">this.length</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">len</span> % <span class="hljs-attr">2</span> !== <span class="hljs-string">0)</span> {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('<span class="hljs-attr">Buffer</span> <span class="hljs-attr">size</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">a</span> <span class="hljs-attr">multiple</span> <span class="hljs-attr">of</span> <span class="hljs-attr">16-bits</span>')
  }
  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">len</span>; <span class="hljs-attr">i</span> += <span class="hljs-string">2)</span> {
    <span class="hljs-attr">swap</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">i</span>, <span class="hljs-attr">i</span> + <span class="hljs-attr">1</span>)
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">this</span>
}

<span class="hljs-attr">Buffer.prototype.swap32</span> = <span class="hljs-string">function</span> <span class="hljs-attr">swap32</span> () {
  <span class="hljs-attr">var</span> <span class="hljs-attr">len</span> = <span class="hljs-string">this.length</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">len</span> % <span class="hljs-attr">4</span> !== <span class="hljs-string">0)</span> {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('<span class="hljs-attr">Buffer</span> <span class="hljs-attr">size</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">a</span> <span class="hljs-attr">multiple</span> <span class="hljs-attr">of</span> <span class="hljs-attr">32-bits</span>')
  }
  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">len</span>; <span class="hljs-attr">i</span> += <span class="hljs-string">4)</span> {
    <span class="hljs-attr">swap</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">i</span>, <span class="hljs-attr">i</span> + <span class="hljs-attr">3</span>)
    <span class="hljs-attr">swap</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">i</span> + <span class="hljs-attr">1</span>, <span class="hljs-attr">i</span> + <span class="hljs-attr">2</span>)
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">this</span>
}

<span class="hljs-attr">Buffer.prototype.swap64</span> = <span class="hljs-string">function</span> <span class="hljs-attr">swap64</span> () {
  <span class="hljs-attr">var</span> <span class="hljs-attr">len</span> = <span class="hljs-string">this.length</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">len</span> % <span class="hljs-attr">8</span> !== <span class="hljs-string">0)</span> {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('<span class="hljs-attr">Buffer</span> <span class="hljs-attr">size</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">a</span> <span class="hljs-attr">multiple</span> <span class="hljs-attr">of</span> <span class="hljs-attr">64-bits</span>')
  }
  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">len</span>; <span class="hljs-attr">i</span> += <span class="hljs-string">8)</span> {
    <span class="hljs-attr">swap</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">i</span>, <span class="hljs-attr">i</span> + <span class="hljs-attr">7</span>)
    <span class="hljs-attr">swap</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">i</span> + <span class="hljs-attr">1</span>, <span class="hljs-attr">i</span> + <span class="hljs-attr">6</span>)
    <span class="hljs-attr">swap</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">i</span> + <span class="hljs-attr">2</span>, <span class="hljs-attr">i</span> + <span class="hljs-attr">5</span>)
    <span class="hljs-attr">swap</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">i</span> + <span class="hljs-attr">3</span>, <span class="hljs-attr">i</span> + <span class="hljs-attr">4</span>)
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">this</span>
}

<span class="hljs-attr">Buffer.prototype.toString</span> = <span class="hljs-string">function</span> <span class="hljs-attr">toString</span> () {
  <span class="hljs-attr">var</span> <span class="hljs-attr">length</span> = <span class="hljs-string">this.length</span> | <span class="hljs-attr">0</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">length</span> === <span class="hljs-string">0)</span> <span class="hljs-attr">return</span> ''
  <span class="hljs-attr">if</span> (<span class="hljs-attr">arguments.length</span> === <span class="hljs-string">0)</span> <span class="hljs-attr">return</span> <span class="hljs-attr">utf8Slice</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">0</span>, <span class="hljs-attr">length</span>)
  <span class="hljs-attr">return</span> <span class="hljs-attr">slowToString.apply</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">arguments</span>)
}

<span class="hljs-attr">Buffer.prototype.equals</span> = <span class="hljs-string">function</span> <span class="hljs-attr">equals</span> (<span class="hljs-attr">b</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">Buffer.isBuffer</span>(<span class="hljs-attr">b</span>)) <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('<span class="hljs-attr">Argument</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">a</span> <span class="hljs-attr">Buffer</span>')
  <span class="hljs-attr">if</span> (<span class="hljs-attr">this</span> === <span class="hljs-string">b)</span> <span class="hljs-attr">return</span> <span class="hljs-attr">true</span>
  <span class="hljs-attr">return</span> <span class="hljs-attr">Buffer.compare</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">b</span>) === <span class="hljs-string">0</span>
}

<span class="hljs-attr">Buffer.prototype.inspect</span> = <span class="hljs-string">function</span> <span class="hljs-attr">inspect</span> () {
  <span class="hljs-attr">var</span> <span class="hljs-attr">str</span> = <span class="hljs-string">''</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">max</span> = <span class="hljs-string">exports.INSPECT_MAX_BYTES</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">this.length</span> &gt;</span> 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length &gt; max) str += ' ... '
  }
  return '<span class="hljs-tag">&lt;<span class="hljs-name">Buffer</span> ' + <span class="hljs-attr">str</span> + '&gt;</span>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (!Buffer.isBuffer(target)) {
    throw new TypeError('Argument must be a Buffer')
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start <span class="hljs-tag">&lt; <span class="hljs-attr">0</span> || <span class="hljs-attr">end</span> &gt;</span> target.length || thisStart <span class="hljs-tag">&lt; <span class="hljs-attr">0</span> || <span class="hljs-attr">thisEnd</span> &gt;</span> this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart &gt;= thisEnd &amp;&amp; start &gt;= end) {
    return 0
  }
  if (thisStart &gt;= thisEnd) {
    return -1
  }
  if (start &gt;= end) {
    return 1
  }

  start &gt;&gt;&gt;= 0
  end &gt;&gt;&gt;= 0
  thisStart &gt;&gt;&gt;= 0
  thisEnd &gt;&gt;&gt;= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attr">len</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">thisCopy</span>[<span class="hljs-attr">i</span>] !== <span class="hljs-string">targetCopy[i])</span> {
      <span class="hljs-attr">x</span> = <span class="hljs-string">thisCopy[i]</span>
      <span class="hljs-attr">y</span> = <span class="hljs-string">targetCopy[i]</span>
      <span class="hljs-attr">break</span>
    }
  }

  <span class="hljs-attr">if</span> (<span class="hljs-attr">x</span> &lt; <span class="hljs-attr">y</span>) <span class="hljs-attr">return</span> <span class="hljs-attr">-1</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">y</span> &lt; <span class="hljs-attr">x</span>) <span class="hljs-attr">return</span> <span class="hljs-attr">1</span>
  <span class="hljs-attr">return</span> <span class="hljs-attr">0</span>
}

// <span class="hljs-attr">Finds</span> <span class="hljs-attr">either</span> <span class="hljs-attr">the</span> <span class="hljs-attr">first</span> <span class="hljs-attr">index</span> <span class="hljs-attr">of</span> `<span class="hljs-attr">val</span>` <span class="hljs-attr">in</span> `<span class="hljs-attr">buffer</span>` <span class="hljs-attr">at</span> <span class="hljs-attr">offset</span> &gt;</span>= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <span class="hljs-tag">&lt;<span class="hljs-name">=</span> `<span class="hljs-attr">byteOffset</span>`<span class="hljs-attr">.</span>
//
// <span class="hljs-attr">Arguments:</span>
// <span class="hljs-attr">-</span> <span class="hljs-attr">buffer</span> <span class="hljs-attr">-</span> <span class="hljs-attr">a</span> <span class="hljs-attr">Buffer</span> <span class="hljs-attr">to</span> <span class="hljs-attr">search</span>
// <span class="hljs-attr">-</span> <span class="hljs-attr">val</span> <span class="hljs-attr">-</span> <span class="hljs-attr">a</span> <span class="hljs-attr">string</span>, <span class="hljs-attr">Buffer</span>, <span class="hljs-attr">or</span> <span class="hljs-attr">number</span>
// <span class="hljs-attr">-</span> <span class="hljs-attr">byteOffset</span> <span class="hljs-attr">-</span> <span class="hljs-attr">an</span> <span class="hljs-attr">index</span> <span class="hljs-attr">into</span> `<span class="hljs-attr">buffer</span>`; <span class="hljs-attr">will</span> <span class="hljs-attr">be</span> <span class="hljs-attr">clamped</span> <span class="hljs-attr">to</span> <span class="hljs-attr">an</span> <span class="hljs-attr">int32</span>
// <span class="hljs-attr">-</span> <span class="hljs-attr">encoding</span> <span class="hljs-attr">-</span> <span class="hljs-attr">an</span> <span class="hljs-attr">optional</span> <span class="hljs-attr">encoding</span>, <span class="hljs-attr">relevant</span> <span class="hljs-attr">is</span> <span class="hljs-attr">val</span> <span class="hljs-attr">is</span> <span class="hljs-attr">a</span> <span class="hljs-attr">string</span>
// <span class="hljs-attr">-</span> <span class="hljs-attr">dir</span> <span class="hljs-attr">-</span> <span class="hljs-attr">true</span> <span class="hljs-attr">for</span> <span class="hljs-attr">indexOf</span>, <span class="hljs-attr">false</span> <span class="hljs-attr">for</span> <span class="hljs-attr">lastIndexOf</span>
<span class="hljs-attr">function</span> <span class="hljs-attr">bidirectionalIndexOf</span> (<span class="hljs-attr">buffer</span>, <span class="hljs-attr">val</span>, <span class="hljs-attr">byteOffset</span>, <span class="hljs-attr">encoding</span>, <span class="hljs-attr">dir</span>) {
  // <span class="hljs-attr">Empty</span> <span class="hljs-attr">buffer</span> <span class="hljs-attr">means</span> <span class="hljs-attr">no</span> <span class="hljs-attr">match</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">buffer.length</span> === <span class="hljs-string">0)</span> <span class="hljs-attr">return</span> <span class="hljs-attr">-1</span>

  // <span class="hljs-attr">Normalize</span> <span class="hljs-attr">byteOffset</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">byteOffset</span> === <span class="hljs-string">'string'</span>) {
    <span class="hljs-attr">encoding</span> = <span class="hljs-string">byteOffset</span>
    <span class="hljs-attr">byteOffset</span> = <span class="hljs-string">0</span>
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">byteOffset</span> &gt;</span> 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset <span class="hljs-tag">&lt; <span class="hljs-attr">-0x80000000</span>) {
    <span class="hljs-attr">byteOffset</span> = <span class="hljs-string">-0x80000000</span>
  }
  <span class="hljs-attr">byteOffset</span> = <span class="hljs-string">+byteOffset</span>  // <span class="hljs-attr">Coerce</span> <span class="hljs-attr">to</span> <span class="hljs-attr">Number.</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">isNaN</span>(<span class="hljs-attr">byteOffset</span>)) {
    // <span class="hljs-attr">byteOffset:</span> <span class="hljs-attr">it</span> <span class="hljs-attr">it</span>'<span class="hljs-attr">s</span> <span class="hljs-attr">undefined</span>, <span class="hljs-attr">null</span>, <span class="hljs-attr">NaN</span>, "<span class="hljs-attr">foo</span>", <span class="hljs-attr">etc</span>, <span class="hljs-attr">search</span> <span class="hljs-attr">whole</span> <span class="hljs-attr">buffer</span>
    <span class="hljs-attr">byteOffset</span> = <span class="hljs-string">dir</span> ? <span class="hljs-attr">0</span> <span class="hljs-attr">:</span> (<span class="hljs-attr">buffer.length</span> <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>)
  }

  // <span class="hljs-attr">Normalize</span> <span class="hljs-attr">byteOffset:</span> <span class="hljs-attr">negative</span> <span class="hljs-attr">offsets</span> <span class="hljs-attr">start</span> <span class="hljs-attr">from</span> <span class="hljs-attr">the</span> <span class="hljs-attr">end</span> <span class="hljs-attr">of</span> <span class="hljs-attr">the</span> <span class="hljs-attr">buffer</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">byteOffset</span> &lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">byteOffset</span> = <span class="hljs-string">buffer.length</span> + <span class="hljs-attr">byteOffset</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">byteOffset</span> &gt;</span>= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset <span class="hljs-tag">&lt; <span class="hljs-attr">0</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">dir</span>) <span class="hljs-attr">byteOffset</span> = <span class="hljs-string">0</span>
    <span class="hljs-attr">else</span> <span class="hljs-attr">return</span> <span class="hljs-attr">-1</span>
  }

  // <span class="hljs-attr">Normalize</span> <span class="hljs-attr">val</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">val</span> === <span class="hljs-string">'string'</span>) {
    <span class="hljs-attr">val</span> = <span class="hljs-string">Buffer.from(val,</span> <span class="hljs-attr">encoding</span>)
  }

  // <span class="hljs-attr">Finally</span>, <span class="hljs-attr">search</span> <span class="hljs-attr">either</span> <span class="hljs-attr">indexOf</span> (<span class="hljs-attr">if</span> <span class="hljs-attr">dir</span> <span class="hljs-attr">is</span> <span class="hljs-attr">true</span>) <span class="hljs-attr">or</span> <span class="hljs-attr">lastIndexOf</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">Buffer.isBuffer</span>(<span class="hljs-attr">val</span>)) {
    // <span class="hljs-attr">Special</span> <span class="hljs-attr">case:</span> <span class="hljs-attr">looking</span> <span class="hljs-attr">for</span> <span class="hljs-attr">empty</span> <span class="hljs-attr">string</span>/<span class="hljs-attr">buffer</span> <span class="hljs-attr">always</span> <span class="hljs-attr">fails</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">val.length</span> === <span class="hljs-string">0)</span> {
      <span class="hljs-attr">return</span> <span class="hljs-attr">-1</span>
    }
    <span class="hljs-attr">return</span> <span class="hljs-attr">arrayIndexOf</span>(<span class="hljs-attr">buffer</span>, <span class="hljs-attr">val</span>, <span class="hljs-attr">byteOffset</span>, <span class="hljs-attr">encoding</span>, <span class="hljs-attr">dir</span>)
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">val</span> === <span class="hljs-string">'number'</span>) {
    <span class="hljs-attr">val</span> = <span class="hljs-string">val</span> &amp; <span class="hljs-attr">0xFF</span> // <span class="hljs-attr">Search</span> <span class="hljs-attr">for</span> <span class="hljs-attr">a</span> <span class="hljs-attr">byte</span> <span class="hljs-attr">value</span> [<span class="hljs-attr">0-255</span>]
    <span class="hljs-attr">if</span> (<span class="hljs-attr">Buffer.TYPED_ARRAY_SUPPORT</span> &amp;&amp;
        <span class="hljs-attr">typeof</span> <span class="hljs-attr">Uint8Array.prototype.indexOf</span> === <span class="hljs-string">'function'</span>) {
      <span class="hljs-attr">if</span> (<span class="hljs-attr">dir</span>) {
        <span class="hljs-attr">return</span> <span class="hljs-attr">Uint8Array.prototype.indexOf.call</span>(<span class="hljs-attr">buffer</span>, <span class="hljs-attr">val</span>, <span class="hljs-attr">byteOffset</span>)
      } <span class="hljs-attr">else</span> {
        <span class="hljs-attr">return</span> <span class="hljs-attr">Uint8Array.prototype.lastIndexOf.call</span>(<span class="hljs-attr">buffer</span>, <span class="hljs-attr">val</span>, <span class="hljs-attr">byteOffset</span>)
      }
    }
    <span class="hljs-attr">return</span> <span class="hljs-attr">arrayIndexOf</span>(<span class="hljs-attr">buffer</span>, [ <span class="hljs-attr">val</span> ], <span class="hljs-attr">byteOffset</span>, <span class="hljs-attr">encoding</span>, <span class="hljs-attr">dir</span>)
  }

  <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('<span class="hljs-attr">val</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">string</span>, <span class="hljs-attr">number</span> <span class="hljs-attr">or</span> <span class="hljs-attr">Buffer</span>')
}

<span class="hljs-attr">function</span> <span class="hljs-attr">arrayIndexOf</span> (<span class="hljs-attr">arr</span>, <span class="hljs-attr">val</span>, <span class="hljs-attr">byteOffset</span>, <span class="hljs-attr">encoding</span>, <span class="hljs-attr">dir</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">indexSize</span> = <span class="hljs-string">1</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">arrLength</span> = <span class="hljs-string">arr.length</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">valLength</span> = <span class="hljs-string">val.length</span>

  <span class="hljs-attr">if</span> (<span class="hljs-attr">encoding</span> !== <span class="hljs-string">undefined)</span> {
    <span class="hljs-attr">encoding</span> = <span class="hljs-string">String(encoding).toLowerCase()</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">encoding</span> === <span class="hljs-string">'ucs2'</span> || <span class="hljs-attr">encoding</span> === <span class="hljs-string">'ucs-2'</span> ||
        <span class="hljs-attr">encoding</span> === <span class="hljs-string">'utf16le'</span> || <span class="hljs-attr">encoding</span> === <span class="hljs-string">'utf-16le'</span>) {
      <span class="hljs-attr">if</span> (<span class="hljs-attr">arr.length</span> &lt; <span class="hljs-attr">2</span> || <span class="hljs-attr">val.length</span> &lt; <span class="hljs-attr">2</span>) {
        <span class="hljs-attr">return</span> <span class="hljs-attr">-1</span>
      }
      <span class="hljs-attr">indexSize</span> = <span class="hljs-string">2</span>
      <span class="hljs-attr">arrLength</span> /= <span class="hljs-string">2</span>
      <span class="hljs-attr">valLength</span> /= <span class="hljs-string">2</span>
      <span class="hljs-attr">byteOffset</span> /= <span class="hljs-string">2</span>
    }
  }

  <span class="hljs-attr">function</span> <span class="hljs-attr">read</span> (<span class="hljs-attr">buf</span>, <span class="hljs-attr">i</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">indexSize</span> === <span class="hljs-string">1)</span> {
      <span class="hljs-attr">return</span> <span class="hljs-attr">buf</span>[<span class="hljs-attr">i</span>]
    } <span class="hljs-attr">else</span> {
      <span class="hljs-attr">return</span> <span class="hljs-attr">buf.readUInt16BE</span>(<span class="hljs-attr">i</span> * <span class="hljs-attr">indexSize</span>)
    }
  }

  <span class="hljs-attr">var</span> <span class="hljs-attr">i</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">dir</span>) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">foundIndex</span> = <span class="hljs-string">-1</span>
    <span class="hljs-attr">for</span> (<span class="hljs-attr">i</span> = <span class="hljs-string">byteOffset;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">arrLength</span>; <span class="hljs-attr">i</span>++) {
      <span class="hljs-attr">if</span> (<span class="hljs-attr">read</span>(<span class="hljs-attr">arr</span>, <span class="hljs-attr">i</span>) === <span class="hljs-string">read(val,</span> <span class="hljs-attr">foundIndex</span> === <span class="hljs-string">-1</span> ? <span class="hljs-attr">0</span> <span class="hljs-attr">:</span> <span class="hljs-attr">i</span> <span class="hljs-attr">-</span> <span class="hljs-attr">foundIndex</span>)) {
        <span class="hljs-attr">if</span> (<span class="hljs-attr">foundIndex</span> === <span class="hljs-string">-1)</span> <span class="hljs-attr">foundIndex</span> = <span class="hljs-string">i</span>
        <span class="hljs-attr">if</span> (<span class="hljs-attr">i</span> <span class="hljs-attr">-</span> <span class="hljs-attr">foundIndex</span> + <span class="hljs-attr">1</span> === <span class="hljs-string">valLength)</span> <span class="hljs-attr">return</span> <span class="hljs-attr">foundIndex</span> * <span class="hljs-attr">indexSize</span>
      } <span class="hljs-attr">else</span> {
        <span class="hljs-attr">if</span> (<span class="hljs-attr">foundIndex</span> !== <span class="hljs-string">-1)</span> <span class="hljs-attr">i</span> <span class="hljs-attr">-</span>= <span class="hljs-string">i</span> <span class="hljs-attr">-</span> <span class="hljs-attr">foundIndex</span>
        <span class="hljs-attr">foundIndex</span> = <span class="hljs-string">-1</span>
      }
    }
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">byteOffset</span> + <span class="hljs-attr">valLength</span> &gt;</span> arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i &gt;= 0; i--) {
      var found = true
      for (var j = 0; j <span class="hljs-tag">&lt; <span class="hljs-attr">valLength</span>; <span class="hljs-attr">j</span>++) {
        <span class="hljs-attr">if</span> (<span class="hljs-attr">read</span>(<span class="hljs-attr">arr</span>, <span class="hljs-attr">i</span> + <span class="hljs-attr">j</span>) !== <span class="hljs-string">read(val,</span> <span class="hljs-attr">j</span>)) {
          <span class="hljs-attr">found</span> = <span class="hljs-string">false</span>
          <span class="hljs-attr">break</span>
        }
      }
      <span class="hljs-attr">if</span> (<span class="hljs-attr">found</span>) <span class="hljs-attr">return</span> <span class="hljs-attr">i</span>
    }
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">-1</span>
}

<span class="hljs-attr">Buffer.prototype.includes</span> = <span class="hljs-string">function</span> <span class="hljs-attr">includes</span> (<span class="hljs-attr">val</span>, <span class="hljs-attr">byteOffset</span>, <span class="hljs-attr">encoding</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">this.indexOf</span>(<span class="hljs-attr">val</span>, <span class="hljs-attr">byteOffset</span>, <span class="hljs-attr">encoding</span>) !== <span class="hljs-string">-1</span>
}

<span class="hljs-attr">Buffer.prototype.indexOf</span> = <span class="hljs-string">function</span> <span class="hljs-attr">indexOf</span> (<span class="hljs-attr">val</span>, <span class="hljs-attr">byteOffset</span>, <span class="hljs-attr">encoding</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">bidirectionalIndexOf</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">val</span>, <span class="hljs-attr">byteOffset</span>, <span class="hljs-attr">encoding</span>, <span class="hljs-attr">true</span>)
}

<span class="hljs-attr">Buffer.prototype.lastIndexOf</span> = <span class="hljs-string">function</span> <span class="hljs-attr">lastIndexOf</span> (<span class="hljs-attr">val</span>, <span class="hljs-attr">byteOffset</span>, <span class="hljs-attr">encoding</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">bidirectionalIndexOf</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">val</span>, <span class="hljs-attr">byteOffset</span>, <span class="hljs-attr">encoding</span>, <span class="hljs-attr">false</span>)
}

<span class="hljs-attr">function</span> <span class="hljs-attr">hexWrite</span> (<span class="hljs-attr">buf</span>, <span class="hljs-attr">string</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">length</span>) {
  <span class="hljs-attr">offset</span> = <span class="hljs-string">Number(offset)</span> || <span class="hljs-attr">0</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">remaining</span> = <span class="hljs-string">buf.length</span> <span class="hljs-attr">-</span> <span class="hljs-attr">offset</span>
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">length</span>) {
    <span class="hljs-attr">length</span> = <span class="hljs-string">remaining</span>
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">length</span> = <span class="hljs-string">Number(length)</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">length</span> &gt;</span> remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

  if (length &gt; strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attr">length</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">parsed</span> = <span class="hljs-string">parseInt(string.substr(i</span> * <span class="hljs-attr">2</span>, <span class="hljs-attr">2</span>), <span class="hljs-attr">16</span>)
    <span class="hljs-attr">if</span> (<span class="hljs-attr">isNaN</span>(<span class="hljs-attr">parsed</span>)) <span class="hljs-attr">return</span> <span class="hljs-attr">i</span>
    <span class="hljs-attr">buf</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">i</span>] = <span class="hljs-string">parsed</span>
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">i</span>
}

<span class="hljs-attr">function</span> <span class="hljs-attr">utf8Write</span> (<span class="hljs-attr">buf</span>, <span class="hljs-attr">string</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">length</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">blitBuffer</span>(<span class="hljs-attr">utf8ToBytes</span>(<span class="hljs-attr">string</span>, <span class="hljs-attr">buf.length</span> <span class="hljs-attr">-</span> <span class="hljs-attr">offset</span>), <span class="hljs-attr">buf</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">length</span>)
}

<span class="hljs-attr">function</span> <span class="hljs-attr">asciiWrite</span> (<span class="hljs-attr">buf</span>, <span class="hljs-attr">string</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">length</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">blitBuffer</span>(<span class="hljs-attr">asciiToBytes</span>(<span class="hljs-attr">string</span>), <span class="hljs-attr">buf</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">length</span>)
}

<span class="hljs-attr">function</span> <span class="hljs-attr">latin1Write</span> (<span class="hljs-attr">buf</span>, <span class="hljs-attr">string</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">length</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">asciiWrite</span>(<span class="hljs-attr">buf</span>, <span class="hljs-attr">string</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">length</span>)
}

<span class="hljs-attr">function</span> <span class="hljs-attr">base64Write</span> (<span class="hljs-attr">buf</span>, <span class="hljs-attr">string</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">length</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">blitBuffer</span>(<span class="hljs-attr">base64ToBytes</span>(<span class="hljs-attr">string</span>), <span class="hljs-attr">buf</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">length</span>)
}

<span class="hljs-attr">function</span> <span class="hljs-attr">ucs2Write</span> (<span class="hljs-attr">buf</span>, <span class="hljs-attr">string</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">length</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">blitBuffer</span>(<span class="hljs-attr">utf16leToBytes</span>(<span class="hljs-attr">string</span>, <span class="hljs-attr">buf.length</span> <span class="hljs-attr">-</span> <span class="hljs-attr">offset</span>), <span class="hljs-attr">buf</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">length</span>)
}

<span class="hljs-attr">Buffer.prototype.write</span> = <span class="hljs-string">function</span> <span class="hljs-attr">write</span> (<span class="hljs-attr">string</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">length</span>, <span class="hljs-attr">encoding</span>) {
  // <span class="hljs-attr">Buffer</span>#<span class="hljs-attr">write</span>(<span class="hljs-attr">string</span>)
  <span class="hljs-attr">if</span> (<span class="hljs-attr">offset</span> === <span class="hljs-string">undefined)</span> {
    <span class="hljs-attr">encoding</span> = <span class="hljs-string">'utf8'</span>
    <span class="hljs-attr">length</span> = <span class="hljs-string">this.length</span>
    <span class="hljs-attr">offset</span> = <span class="hljs-string">0</span>
  // <span class="hljs-attr">Buffer</span>#<span class="hljs-attr">write</span>(<span class="hljs-attr">string</span>, <span class="hljs-attr">encoding</span>)
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">length</span> === <span class="hljs-string">undefined</span> &amp;&amp; <span class="hljs-attr">typeof</span> <span class="hljs-attr">offset</span> === <span class="hljs-string">'string'</span>) {
    <span class="hljs-attr">encoding</span> = <span class="hljs-string">offset</span>
    <span class="hljs-attr">length</span> = <span class="hljs-string">this.length</span>
    <span class="hljs-attr">offset</span> = <span class="hljs-string">0</span>
  // <span class="hljs-attr">Buffer</span>#<span class="hljs-attr">write</span>(<span class="hljs-attr">string</span>, <span class="hljs-attr">offset</span>[, <span class="hljs-attr">length</span>][, <span class="hljs-attr">encoding</span>])
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">isFinite</span>(<span class="hljs-attr">offset</span>)) {
    <span class="hljs-attr">offset</span> = <span class="hljs-string">offset</span> | <span class="hljs-attr">0</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">isFinite</span>(<span class="hljs-attr">length</span>)) {
      <span class="hljs-attr">length</span> = <span class="hljs-string">length</span> | <span class="hljs-attr">0</span>
      <span class="hljs-attr">if</span> (<span class="hljs-attr">encoding</span> === <span class="hljs-string">undefined)</span> <span class="hljs-attr">encoding</span> = <span class="hljs-string">'utf8'</span>
    } <span class="hljs-attr">else</span> {
      <span class="hljs-attr">encoding</span> = <span class="hljs-string">length</span>
      <span class="hljs-attr">length</span> = <span class="hljs-string">undefined</span>
    }
  // <span class="hljs-attr">legacy</span> <span class="hljs-attr">write</span>(<span class="hljs-attr">string</span>, <span class="hljs-attr">encoding</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">length</span>) <span class="hljs-attr">-</span> <span class="hljs-attr">remove</span> <span class="hljs-attr">in</span> <span class="hljs-attr">v0.13</span>
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>(
      '<span class="hljs-attr">Buffer.write</span>(<span class="hljs-attr">string</span>, <span class="hljs-attr">encoding</span>, <span class="hljs-attr">offset</span>[, <span class="hljs-attr">length</span>]) <span class="hljs-attr">is</span> <span class="hljs-attr">no</span> <span class="hljs-attr">longer</span> <span class="hljs-attr">supported</span>'
    )
  }

  <span class="hljs-attr">var</span> <span class="hljs-attr">remaining</span> = <span class="hljs-string">this.length</span> <span class="hljs-attr">-</span> <span class="hljs-attr">offset</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">length</span> === <span class="hljs-string">undefined</span> || <span class="hljs-attr">length</span> &gt;</span> remaining) length = remaining

  if ((string.length &gt; 0 &amp;&amp; (length <span class="hljs-tag">&lt; <span class="hljs-attr">0</span> || <span class="hljs-attr">offset</span> &lt; <span class="hljs-attr">0</span>)) || <span class="hljs-attr">offset</span> &gt;</span> this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 &amp;&amp; end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i <span class="hljs-tag">&lt; <span class="hljs-attr">end</span>) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">firstByte</span> = <span class="hljs-string">buf[i]</span>
    <span class="hljs-attr">var</span> <span class="hljs-attr">codePoint</span> = <span class="hljs-string">null</span>
    <span class="hljs-attr">var</span> <span class="hljs-attr">bytesPerSequence</span> = <span class="hljs-string">(firstByte</span> &gt;</span> 0xEF) ? 4
      : (firstByte &gt; 0xDF) ? 3
      : (firstByte &gt; 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <span class="hljs-tag">&lt;<span class="hljs-name">=</span> <span class="hljs-attr">end</span>) {
      <span class="hljs-attr">var</span> <span class="hljs-attr">secondByte</span>, <span class="hljs-attr">thirdByte</span>, <span class="hljs-attr">fourthByte</span>, <span class="hljs-attr">tempCodePoint</span>

      <span class="hljs-attr">switch</span> (<span class="hljs-attr">bytesPerSequence</span>) {
        <span class="hljs-attr">case</span> <span class="hljs-attr">1:</span>
          <span class="hljs-attr">if</span> (<span class="hljs-attr">firstByte</span> &lt; <span class="hljs-attr">0x80</span>) {
            <span class="hljs-attr">codePoint</span> = <span class="hljs-string">firstByte</span>
          }
          <span class="hljs-attr">break</span>
        <span class="hljs-attr">case</span> <span class="hljs-attr">2:</span>
          <span class="hljs-attr">secondByte</span> = <span class="hljs-string">buf[i</span> + <span class="hljs-attr">1</span>]
          <span class="hljs-attr">if</span> ((<span class="hljs-attr">secondByte</span> &amp; <span class="hljs-attr">0xC0</span>) === <span class="hljs-string">0x80)</span> {
            <span class="hljs-attr">tempCodePoint</span> = <span class="hljs-string">(firstByte</span> &amp; <span class="hljs-attr">0x1F</span>) &lt;&lt; <span class="hljs-attr">0x6</span> | (<span class="hljs-attr">secondByte</span> &amp; <span class="hljs-attr">0x3F</span>)
            <span class="hljs-attr">if</span> (<span class="hljs-attr">tempCodePoint</span> &gt;</span> 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte &amp; 0xC0) === 0x80 &amp;&amp; (thirdByte &amp; 0xC0) === 0x80) {
            tempCodePoint = (firstByte &amp; 0xF) <span class="hljs-tag">&lt;&lt; <span class="hljs-attr">0xC</span> | (<span class="hljs-attr">secondByte</span> &amp; <span class="hljs-attr">0x3F</span>) &lt;&lt; <span class="hljs-attr">0x6</span> | (<span class="hljs-attr">thirdByte</span> &amp; <span class="hljs-attr">0x3F</span>)
            <span class="hljs-attr">if</span> (<span class="hljs-attr">tempCodePoint</span> &gt;</span> 0x7FF &amp;&amp; (tempCodePoint <span class="hljs-tag">&lt; <span class="hljs-attr">0xD800</span> || <span class="hljs-attr">tempCodePoint</span> &gt;</span> 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte &amp; 0xC0) === 0x80 &amp;&amp; (thirdByte &amp; 0xC0) === 0x80 &amp;&amp; (fourthByte &amp; 0xC0) === 0x80) {
            tempCodePoint = (firstByte &amp; 0xF) <span class="hljs-tag">&lt;&lt; <span class="hljs-attr">0x12</span> | (<span class="hljs-attr">secondByte</span> &amp; <span class="hljs-attr">0x3F</span>) &lt;&lt; <span class="hljs-attr">0xC</span> | (<span class="hljs-attr">thirdByte</span> &amp; <span class="hljs-attr">0x3F</span>) &lt;&lt; <span class="hljs-attr">0x6</span> | (<span class="hljs-attr">fourthByte</span> &amp; <span class="hljs-attr">0x3F</span>)
            <span class="hljs-attr">if</span> (<span class="hljs-attr">tempCodePoint</span> &gt;</span> 0xFFFF &amp;&amp; tempCodePoint <span class="hljs-tag">&lt; <span class="hljs-attr">0x110000</span>) {
              <span class="hljs-attr">codePoint</span> = <span class="hljs-string">tempCodePoint</span>
            }
          }
      }
    }

    <span class="hljs-attr">if</span> (<span class="hljs-attr">codePoint</span> === <span class="hljs-string">null)</span> {
      // <span class="hljs-attr">we</span> <span class="hljs-attr">did</span> <span class="hljs-attr">not</span> <span class="hljs-attr">generate</span> <span class="hljs-attr">a</span> <span class="hljs-attr">valid</span> <span class="hljs-attr">codePoint</span> <span class="hljs-attr">so</span> <span class="hljs-attr">insert</span> <span class="hljs-attr">a</span>
      // <span class="hljs-attr">replacement</span> <span class="hljs-attr">char</span> (<span class="hljs-attr">U</span>+<span class="hljs-attr">FFFD</span>) <span class="hljs-attr">and</span> <span class="hljs-attr">advance</span> <span class="hljs-attr">only</span> <span class="hljs-attr">1</span> <span class="hljs-attr">byte</span>
      <span class="hljs-attr">codePoint</span> = <span class="hljs-string">0xFFFD</span>
      <span class="hljs-attr">bytesPerSequence</span> = <span class="hljs-string">1</span>
    } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">codePoint</span> &gt;</span> 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint &gt;&gt;&gt; 10 &amp; 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint &amp; 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <span class="hljs-tag">&lt;<span class="hljs-name">=</span> <span class="hljs-attr">MAX_ARGUMENTS_LENGTH</span>) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">String.fromCharCode.apply</span>(<span class="hljs-attr">String</span>, <span class="hljs-attr">codePoints</span>) // <span class="hljs-attr">avoid</span> <span class="hljs-attr">extra</span> <span class="hljs-attr">slice</span>()
  }

  // <span class="hljs-attr">Decode</span> <span class="hljs-attr">in</span> <span class="hljs-attr">chunks</span> <span class="hljs-attr">to</span> <span class="hljs-attr">avoid</span> "<span class="hljs-attr">call</span> <span class="hljs-attr">stack</span> <span class="hljs-attr">size</span> <span class="hljs-attr">exceeded</span>"<span class="hljs-attr">.</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">res</span> = <span class="hljs-string">''</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0</span>
  <span class="hljs-attr">while</span> (<span class="hljs-attr">i</span> &lt; <span class="hljs-attr">len</span>) {
    <span class="hljs-attr">res</span> += <span class="hljs-string">String.fromCharCode.apply(</span>
      <span class="hljs-attr">String</span>,
      <span class="hljs-attr">codePoints.slice</span>(<span class="hljs-attr">i</span>, <span class="hljs-attr">i</span> += <span class="hljs-string">MAX_ARGUMENTS_LENGTH)</span>
    )
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">res</span>
}

<span class="hljs-attr">function</span> <span class="hljs-attr">asciiSlice</span> (<span class="hljs-attr">buf</span>, <span class="hljs-attr">start</span>, <span class="hljs-attr">end</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">ret</span> = <span class="hljs-string">''</span>
  <span class="hljs-attr">end</span> = <span class="hljs-string">Math.min(buf.length,</span> <span class="hljs-attr">end</span>)

  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">start;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">end</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">ret</span> += <span class="hljs-string">String.fromCharCode(buf[i]</span> &amp; <span class="hljs-attr">0x7F</span>)
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">ret</span>
}

<span class="hljs-attr">function</span> <span class="hljs-attr">latin1Slice</span> (<span class="hljs-attr">buf</span>, <span class="hljs-attr">start</span>, <span class="hljs-attr">end</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">ret</span> = <span class="hljs-string">''</span>
  <span class="hljs-attr">end</span> = <span class="hljs-string">Math.min(buf.length,</span> <span class="hljs-attr">end</span>)

  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">start;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">end</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">ret</span> += <span class="hljs-string">String.fromCharCode(buf[i])</span>
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">ret</span>
}

<span class="hljs-attr">function</span> <span class="hljs-attr">hexSlice</span> (<span class="hljs-attr">buf</span>, <span class="hljs-attr">start</span>, <span class="hljs-attr">end</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">len</span> = <span class="hljs-string">buf.length</span>

  <span class="hljs-attr">if</span> (!<span class="hljs-attr">start</span> || <span class="hljs-attr">start</span> &lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">start</span> = <span class="hljs-string">0</span>
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">end</span> || <span class="hljs-attr">end</span> &lt; <span class="hljs-attr">0</span> || <span class="hljs-attr">end</span> &gt;</span> len) end = len

  var out = ''
  for (var i = start; i <span class="hljs-tag">&lt; <span class="hljs-attr">end</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">out</span> += <span class="hljs-string">toHex(buf[i])</span>
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">out</span>
}

<span class="hljs-attr">function</span> <span class="hljs-attr">utf16leSlice</span> (<span class="hljs-attr">buf</span>, <span class="hljs-attr">start</span>, <span class="hljs-attr">end</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">bytes</span> = <span class="hljs-string">buf.slice(start,</span> <span class="hljs-attr">end</span>)
  <span class="hljs-attr">var</span> <span class="hljs-attr">res</span> = <span class="hljs-string">''</span>
  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">bytes.length</span>; <span class="hljs-attr">i</span> += <span class="hljs-string">2)</span> {
    <span class="hljs-attr">res</span> += <span class="hljs-string">String.fromCharCode(bytes[i]</span> + <span class="hljs-attr">bytes</span>[<span class="hljs-attr">i</span> + <span class="hljs-attr">1</span>] * <span class="hljs-attr">256</span>)
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">res</span>
}

<span class="hljs-attr">Buffer.prototype.slice</span> = <span class="hljs-string">function</span> <span class="hljs-attr">slice</span> (<span class="hljs-attr">start</span>, <span class="hljs-attr">end</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">len</span> = <span class="hljs-string">this.length</span>
  <span class="hljs-attr">start</span> = <span class="hljs-string">~~start</span>
  <span class="hljs-attr">end</span> = <span class="hljs-string">end</span> === <span class="hljs-string">undefined</span> ? <span class="hljs-attr">len</span> <span class="hljs-attr">:</span> ~~<span class="hljs-attr">end</span>

  <span class="hljs-attr">if</span> (<span class="hljs-attr">start</span> &lt; <span class="hljs-attr">0</span>) {
    <span class="hljs-attr">start</span> += <span class="hljs-string">len</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">start</span> &lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">start</span> = <span class="hljs-string">0</span>
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">start</span> &gt;</span> len) {
    start = len
  }

  if (end <span class="hljs-tag">&lt; <span class="hljs-attr">0</span>) {
    <span class="hljs-attr">end</span> += <span class="hljs-string">len</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">end</span> &lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">end</span> = <span class="hljs-string">0</span>
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">end</span> &gt;</span> len) {
    end = len
  }

  if (end <span class="hljs-tag">&lt; <span class="hljs-attr">start</span>) <span class="hljs-attr">end</span> = <span class="hljs-string">start</span>

  <span class="hljs-attr">var</span> <span class="hljs-attr">newBuf</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">Buffer.TYPED_ARRAY_SUPPORT</span>) {
    <span class="hljs-attr">newBuf</span> = <span class="hljs-string">this.subarray(start,</span> <span class="hljs-attr">end</span>)
    <span class="hljs-attr">newBuf.__proto__</span> = <span class="hljs-string">Buffer.prototype</span>
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">var</span> <span class="hljs-attr">sliceLen</span> = <span class="hljs-string">end</span> <span class="hljs-attr">-</span> <span class="hljs-attr">start</span>
    <span class="hljs-attr">newBuf</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Buffer</span>(<span class="hljs-attr">sliceLen</span>, <span class="hljs-attr">undefined</span>)
    <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">sliceLen</span>; ++<span class="hljs-attr">i</span>) {
      <span class="hljs-attr">newBuf</span>[<span class="hljs-attr">i</span>] = <span class="hljs-string">this[i</span> + <span class="hljs-attr">start</span>]
    }
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">newBuf</span>
}

/*
 * <span class="hljs-attr">Need</span> <span class="hljs-attr">to</span> <span class="hljs-attr">make</span> <span class="hljs-attr">sure</span> <span class="hljs-attr">that</span> <span class="hljs-attr">buffer</span> <span class="hljs-attr">isn</span>'<span class="hljs-attr">t</span> <span class="hljs-attr">trying</span> <span class="hljs-attr">to</span> <span class="hljs-attr">write</span> <span class="hljs-attr">out</span> <span class="hljs-attr">of</span> <span class="hljs-attr">bounds.</span>
 */
<span class="hljs-attr">function</span> <span class="hljs-attr">checkOffset</span> (<span class="hljs-attr">offset</span>, <span class="hljs-attr">ext</span>, <span class="hljs-attr">length</span>) {
  <span class="hljs-attr">if</span> ((<span class="hljs-attr">offset</span> % <span class="hljs-attr">1</span>) !== <span class="hljs-string">0</span> || <span class="hljs-attr">offset</span> &lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('<span class="hljs-attr">offset</span> <span class="hljs-attr">is</span> <span class="hljs-attr">not</span> <span class="hljs-attr">uint</span>')
  <span class="hljs-attr">if</span> (<span class="hljs-attr">offset</span> + <span class="hljs-attr">ext</span> &gt;</span> length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i <span class="hljs-tag">&lt; <span class="hljs-attr">byteLength</span> &amp;&amp; (<span class="hljs-attr">mul</span> *= <span class="hljs-string">0x100))</span> {
    <span class="hljs-attr">val</span> += <span class="hljs-string">this[offset</span> + <span class="hljs-attr">i</span>] * <span class="hljs-attr">mul</span>
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">val</span>
}

<span class="hljs-attr">Buffer.prototype.readUIntBE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">readUIntBE</span> (<span class="hljs-attr">offset</span>, <span class="hljs-attr">byteLength</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">offset</span> = <span class="hljs-string">offset</span> | <span class="hljs-attr">0</span>
  <span class="hljs-attr">byteLength</span> = <span class="hljs-string">byteLength</span> | <span class="hljs-attr">0</span>
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) {
    <span class="hljs-attr">checkOffset</span>(<span class="hljs-attr">offset</span>, <span class="hljs-attr">byteLength</span>, <span class="hljs-attr">this.length</span>)
  }

  <span class="hljs-attr">var</span> <span class="hljs-attr">val</span> = <span class="hljs-string">this[offset</span> + <span class="hljs-attr">--byteLength</span>]
  <span class="hljs-attr">var</span> <span class="hljs-attr">mul</span> = <span class="hljs-string">1</span>
  <span class="hljs-attr">while</span> (<span class="hljs-attr">byteLength</span> &gt;</span> 0 &amp;&amp; (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] <span class="hljs-tag">&lt;&lt; <span class="hljs-attr">8</span>)
}

<span class="hljs-attr">Buffer.prototype.readUInt16BE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">readUInt16BE</span> (<span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) <span class="hljs-attr">checkOffset</span>(<span class="hljs-attr">offset</span>, <span class="hljs-attr">2</span>, <span class="hljs-attr">this.length</span>)
  <span class="hljs-attr">return</span> (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span>] &lt;&lt; <span class="hljs-attr">8</span>) | <span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">1</span>]
}

<span class="hljs-attr">Buffer.prototype.readUInt32LE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">readUInt32LE</span> (<span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) <span class="hljs-attr">checkOffset</span>(<span class="hljs-attr">offset</span>, <span class="hljs-attr">4</span>, <span class="hljs-attr">this.length</span>)

  <span class="hljs-attr">return</span> ((<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span>]) |
      (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">1</span>] &lt;&lt; <span class="hljs-attr">8</span>) |
      (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">2</span>] &lt;&lt; <span class="hljs-attr">16</span>)) +
      (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">3</span>] * <span class="hljs-attr">0x1000000</span>)
}

<span class="hljs-attr">Buffer.prototype.readUInt32BE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">readUInt32BE</span> (<span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) <span class="hljs-attr">checkOffset</span>(<span class="hljs-attr">offset</span>, <span class="hljs-attr">4</span>, <span class="hljs-attr">this.length</span>)

  <span class="hljs-attr">return</span> (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span>] * <span class="hljs-attr">0x1000000</span>) +
    ((<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">1</span>] &lt;&lt; <span class="hljs-attr">16</span>) |
    (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">2</span>] &lt;&lt; <span class="hljs-attr">8</span>) |
    <span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">3</span>])
}

<span class="hljs-attr">Buffer.prototype.readIntLE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">readIntLE</span> (<span class="hljs-attr">offset</span>, <span class="hljs-attr">byteLength</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">offset</span> = <span class="hljs-string">offset</span> | <span class="hljs-attr">0</span>
  <span class="hljs-attr">byteLength</span> = <span class="hljs-string">byteLength</span> | <span class="hljs-attr">0</span>
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) <span class="hljs-attr">checkOffset</span>(<span class="hljs-attr">offset</span>, <span class="hljs-attr">byteLength</span>, <span class="hljs-attr">this.length</span>)

  <span class="hljs-attr">var</span> <span class="hljs-attr">val</span> = <span class="hljs-string">this[offset]</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">mul</span> = <span class="hljs-string">1</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0</span>
  <span class="hljs-attr">while</span> (++<span class="hljs-attr">i</span> &lt; <span class="hljs-attr">byteLength</span> &amp;&amp; (<span class="hljs-attr">mul</span> *= <span class="hljs-string">0x100))</span> {
    <span class="hljs-attr">val</span> += <span class="hljs-string">this[offset</span> + <span class="hljs-attr">i</span>] * <span class="hljs-attr">mul</span>
  }
  <span class="hljs-attr">mul</span> *= <span class="hljs-string">0x80</span>

  <span class="hljs-attr">if</span> (<span class="hljs-attr">val</span> &gt;</span>= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i &gt; 0 &amp;&amp; (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val &gt;= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] &amp; 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] <span class="hljs-tag">&lt;&lt; <span class="hljs-attr">8</span>)
  <span class="hljs-attr">return</span> (<span class="hljs-attr">val</span> &amp; <span class="hljs-attr">0x8000</span>) ? <span class="hljs-attr">val</span> | <span class="hljs-attr">0xFFFF0000</span> <span class="hljs-attr">:</span> <span class="hljs-attr">val</span>
}

<span class="hljs-attr">Buffer.prototype.readInt16BE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">readInt16BE</span> (<span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) <span class="hljs-attr">checkOffset</span>(<span class="hljs-attr">offset</span>, <span class="hljs-attr">2</span>, <span class="hljs-attr">this.length</span>)
  <span class="hljs-attr">var</span> <span class="hljs-attr">val</span> = <span class="hljs-string">this[offset</span> + <span class="hljs-attr">1</span>] | (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span>] &lt;&lt; <span class="hljs-attr">8</span>)
  <span class="hljs-attr">return</span> (<span class="hljs-attr">val</span> &amp; <span class="hljs-attr">0x8000</span>) ? <span class="hljs-attr">val</span> | <span class="hljs-attr">0xFFFF0000</span> <span class="hljs-attr">:</span> <span class="hljs-attr">val</span>
}

<span class="hljs-attr">Buffer.prototype.readInt32LE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">readInt32LE</span> (<span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) <span class="hljs-attr">checkOffset</span>(<span class="hljs-attr">offset</span>, <span class="hljs-attr">4</span>, <span class="hljs-attr">this.length</span>)

  <span class="hljs-attr">return</span> (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span>]) |
    (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">1</span>] &lt;&lt; <span class="hljs-attr">8</span>) |
    (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">2</span>] &lt;&lt; <span class="hljs-attr">16</span>) |
    (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">3</span>] &lt;&lt; <span class="hljs-attr">24</span>)
}

<span class="hljs-attr">Buffer.prototype.readInt32BE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">readInt32BE</span> (<span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) <span class="hljs-attr">checkOffset</span>(<span class="hljs-attr">offset</span>, <span class="hljs-attr">4</span>, <span class="hljs-attr">this.length</span>)

  <span class="hljs-attr">return</span> (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span>] &lt;&lt; <span class="hljs-attr">24</span>) |
    (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">1</span>] &lt;&lt; <span class="hljs-attr">16</span>) |
    (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">2</span>] &lt;&lt; <span class="hljs-attr">8</span>) |
    (<span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">3</span>])
}

<span class="hljs-attr">Buffer.prototype.readFloatLE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">readFloatLE</span> (<span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) <span class="hljs-attr">checkOffset</span>(<span class="hljs-attr">offset</span>, <span class="hljs-attr">4</span>, <span class="hljs-attr">this.length</span>)
  <span class="hljs-attr">return</span> <span class="hljs-attr">ieee754.read</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">true</span>, <span class="hljs-attr">23</span>, <span class="hljs-attr">4</span>)
}

<span class="hljs-attr">Buffer.prototype.readFloatBE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">readFloatBE</span> (<span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) <span class="hljs-attr">checkOffset</span>(<span class="hljs-attr">offset</span>, <span class="hljs-attr">4</span>, <span class="hljs-attr">this.length</span>)
  <span class="hljs-attr">return</span> <span class="hljs-attr">ieee754.read</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">false</span>, <span class="hljs-attr">23</span>, <span class="hljs-attr">4</span>)
}

<span class="hljs-attr">Buffer.prototype.readDoubleLE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">readDoubleLE</span> (<span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) <span class="hljs-attr">checkOffset</span>(<span class="hljs-attr">offset</span>, <span class="hljs-attr">8</span>, <span class="hljs-attr">this.length</span>)
  <span class="hljs-attr">return</span> <span class="hljs-attr">ieee754.read</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">true</span>, <span class="hljs-attr">52</span>, <span class="hljs-attr">8</span>)
}

<span class="hljs-attr">Buffer.prototype.readDoubleBE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">readDoubleBE</span> (<span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) <span class="hljs-attr">checkOffset</span>(<span class="hljs-attr">offset</span>, <span class="hljs-attr">8</span>, <span class="hljs-attr">this.length</span>)
  <span class="hljs-attr">return</span> <span class="hljs-attr">ieee754.read</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">false</span>, <span class="hljs-attr">52</span>, <span class="hljs-attr">8</span>)
}

<span class="hljs-attr">function</span> <span class="hljs-attr">checkInt</span> (<span class="hljs-attr">buf</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">ext</span>, <span class="hljs-attr">max</span>, <span class="hljs-attr">min</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">Buffer.isBuffer</span>(<span class="hljs-attr">buf</span>)) <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('"<span class="hljs-attr">buffer</span>" <span class="hljs-attr">argument</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">a</span> <span class="hljs-attr">Buffer</span> <span class="hljs-attr">instance</span>')
  <span class="hljs-attr">if</span> (<span class="hljs-attr">value</span> &gt;</span> max || value <span class="hljs-tag">&lt; <span class="hljs-attr">min</span>) <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('"<span class="hljs-attr">value</span>" <span class="hljs-attr">argument</span> <span class="hljs-attr">is</span> <span class="hljs-attr">out</span> <span class="hljs-attr">of</span> <span class="hljs-attr">bounds</span>')
  <span class="hljs-attr">if</span> (<span class="hljs-attr">offset</span> + <span class="hljs-attr">ext</span> &gt;</span> buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value &amp; 0xFF
  while (++i <span class="hljs-tag">&lt; <span class="hljs-attr">byteLength</span> &amp;&amp; (<span class="hljs-attr">mul</span> *= <span class="hljs-string">0x100))</span> {
    <span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">i</span>] = <span class="hljs-string">(value</span> / <span class="hljs-attr">mul</span>) &amp; <span class="hljs-attr">0xFF</span>
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">offset</span> + <span class="hljs-attr">byteLength</span>
}

<span class="hljs-attr">Buffer.prototype.writeUIntBE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">writeUIntBE</span> (<span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">byteLength</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">value</span> = <span class="hljs-string">+value</span>
  <span class="hljs-attr">offset</span> = <span class="hljs-string">offset</span> | <span class="hljs-attr">0</span>
  <span class="hljs-attr">byteLength</span> = <span class="hljs-string">byteLength</span> | <span class="hljs-attr">0</span>
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">maxBytes</span> = <span class="hljs-string">Math.pow(2,</span> <span class="hljs-attr">8</span> * <span class="hljs-attr">byteLength</span>) <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>
    <span class="hljs-attr">checkInt</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">byteLength</span>, <span class="hljs-attr">maxBytes</span>, <span class="hljs-attr">0</span>)
  }

  <span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">byteLength</span> <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">mul</span> = <span class="hljs-string">1</span>
  <span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">i</span>] = <span class="hljs-string">value</span> &amp; <span class="hljs-attr">0xFF</span>
  <span class="hljs-attr">while</span> (<span class="hljs-attr">--i</span> &gt;</span>= 0 &amp;&amp; (mul *= 0x100)) {
    this[offset + i] = (value / mul) &amp; 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value &amp; 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value <span class="hljs-tag">&lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">value</span> = <span class="hljs-string">0xffff</span> + <span class="hljs-attr">value</span> + <span class="hljs-attr">1</span>
  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0,</span> <span class="hljs-attr">j</span> = <span class="hljs-string">Math.min(buf.length</span> <span class="hljs-attr">-</span> <span class="hljs-attr">offset</span>, <span class="hljs-attr">2</span>); <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">j</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">buf</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">i</span>] = <span class="hljs-string">(value</span> &amp; (<span class="hljs-attr">0xff</span> &lt;&lt; (<span class="hljs-attr">8</span> * (<span class="hljs-attr">littleEndian</span> ? <span class="hljs-attr">i</span> <span class="hljs-attr">:</span> <span class="hljs-attr">1</span> <span class="hljs-attr">-</span> <span class="hljs-attr">i</span>)))) &gt;</span>&gt;&gt;
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value &amp; 0xff)
    this[offset + 1] = (value &gt;&gt;&gt; 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value &gt;&gt;&gt; 8)
    this[offset + 1] = (value &amp; 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value <span class="hljs-tag">&lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">value</span> = <span class="hljs-string">0xffffffff</span> + <span class="hljs-attr">value</span> + <span class="hljs-attr">1</span>
  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0,</span> <span class="hljs-attr">j</span> = <span class="hljs-string">Math.min(buf.length</span> <span class="hljs-attr">-</span> <span class="hljs-attr">offset</span>, <span class="hljs-attr">4</span>); <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">j</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">buf</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">i</span>] = <span class="hljs-string">(value</span> &gt;</span>&gt;&gt; (littleEndian ? i : 3 - i) * 8) &amp; 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value &gt;&gt;&gt; 24)
    this[offset + 2] = (value &gt;&gt;&gt; 16)
    this[offset + 1] = (value &gt;&gt;&gt; 8)
    this[offset] = (value &amp; 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value &gt;&gt;&gt; 24)
    this[offset + 1] = (value &gt;&gt;&gt; 16)
    this[offset + 2] = (value &gt;&gt;&gt; 8)
    this[offset + 3] = (value &amp; 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value &amp; 0xFF
  while (++i <span class="hljs-tag">&lt; <span class="hljs-attr">byteLength</span> &amp;&amp; (<span class="hljs-attr">mul</span> *= <span class="hljs-string">0x100))</span> {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">value</span> &lt; <span class="hljs-attr">0</span> &amp;&amp; <span class="hljs-attr">sub</span> === <span class="hljs-string">0</span> &amp;&amp; <span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">i</span> <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>] !== <span class="hljs-string">0)</span> {
      <span class="hljs-attr">sub</span> = <span class="hljs-string">1</span>
    }
    <span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">i</span>] = <span class="hljs-string">((value</span> / <span class="hljs-attr">mul</span>) &gt;</span>&gt; 0) - sub &amp; 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value &amp; 0xFF
  while (--i &gt;= 0 &amp;&amp; (mul *= 0x100)) {
    if (value <span class="hljs-tag">&lt; <span class="hljs-attr">0</span> &amp;&amp; <span class="hljs-attr">sub</span> === <span class="hljs-string">0</span> &amp;&amp; <span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">i</span> + <span class="hljs-attr">1</span>] !== <span class="hljs-string">0)</span> {
      <span class="hljs-attr">sub</span> = <span class="hljs-string">1</span>
    }
    <span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">i</span>] = <span class="hljs-string">((value</span> / <span class="hljs-attr">mul</span>) &gt;</span>&gt; 0) - sub &amp; 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value <span class="hljs-tag">&lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">value</span> = <span class="hljs-string">0xff</span> + <span class="hljs-attr">value</span> + <span class="hljs-attr">1</span>
  <span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span>] = <span class="hljs-string">(value</span> &amp; <span class="hljs-attr">0xff</span>)
  <span class="hljs-attr">return</span> <span class="hljs-attr">offset</span> + <span class="hljs-attr">1</span>
}

<span class="hljs-attr">Buffer.prototype.writeInt16LE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">writeInt16LE</span> (<span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">value</span> = <span class="hljs-string">+value</span>
  <span class="hljs-attr">offset</span> = <span class="hljs-string">offset</span> | <span class="hljs-attr">0</span>
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) <span class="hljs-attr">checkInt</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">2</span>, <span class="hljs-attr">0x7fff</span>, <span class="hljs-attr">-0x8000</span>)
  <span class="hljs-attr">if</span> (<span class="hljs-attr">Buffer.TYPED_ARRAY_SUPPORT</span>) {
    <span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span>] = <span class="hljs-string">(value</span> &amp; <span class="hljs-attr">0xff</span>)
    <span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span> + <span class="hljs-attr">1</span>] = <span class="hljs-string">(value</span> &gt;</span>&gt;&gt; 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value &gt;&gt;&gt; 8)
    this[offset + 1] = (value &amp; 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value &amp; 0xff)
    this[offset + 1] = (value &gt;&gt;&gt; 8)
    this[offset + 2] = (value &gt;&gt;&gt; 16)
    this[offset + 3] = (value &gt;&gt;&gt; 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value <span class="hljs-tag">&lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">value</span> = <span class="hljs-string">0xffffffff</span> + <span class="hljs-attr">value</span> + <span class="hljs-attr">1</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">Buffer.TYPED_ARRAY_SUPPORT</span>) {
    <span class="hljs-attr">this</span>[<span class="hljs-attr">offset</span>] = <span class="hljs-string">(value</span> &gt;</span>&gt;&gt; 24)
    this[offset + 1] = (value &gt;&gt;&gt; 16)
    this[offset + 2] = (value &gt;&gt;&gt; 8)
    this[offset + 3] = (value &amp; 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext &gt; buf.length) throw new RangeError('Index out of range')
  if (offset <span class="hljs-tag">&lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('<span class="hljs-attr">Index</span> <span class="hljs-attr">out</span> <span class="hljs-attr">of</span> <span class="hljs-attr">range</span>')
}

<span class="hljs-attr">function</span> <span class="hljs-attr">writeFloat</span> (<span class="hljs-attr">buf</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">littleEndian</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) {
    <span class="hljs-attr">checkIEEE754</span>(<span class="hljs-attr">buf</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">4</span>, <span class="hljs-attr">3.4028234663852886e</span>+<span class="hljs-attr">38</span>, <span class="hljs-attr">-3.4028234663852886e</span>+<span class="hljs-attr">38</span>)
  }
  <span class="hljs-attr">ieee754.write</span>(<span class="hljs-attr">buf</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">littleEndian</span>, <span class="hljs-attr">23</span>, <span class="hljs-attr">4</span>)
  <span class="hljs-attr">return</span> <span class="hljs-attr">offset</span> + <span class="hljs-attr">4</span>
}

<span class="hljs-attr">Buffer.prototype.writeFloatLE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">writeFloatLE</span> (<span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">writeFloat</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">true</span>, <span class="hljs-attr">noAssert</span>)
}

<span class="hljs-attr">Buffer.prototype.writeFloatBE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">writeFloatBE</span> (<span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">writeFloat</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">false</span>, <span class="hljs-attr">noAssert</span>)
}

<span class="hljs-attr">function</span> <span class="hljs-attr">writeDouble</span> (<span class="hljs-attr">buf</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">littleEndian</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">noAssert</span>) {
    <span class="hljs-attr">checkIEEE754</span>(<span class="hljs-attr">buf</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">8</span>, <span class="hljs-attr">1.7976931348623157E</span>+<span class="hljs-attr">308</span>, <span class="hljs-attr">-1.7976931348623157E</span>+<span class="hljs-attr">308</span>)
  }
  <span class="hljs-attr">ieee754.write</span>(<span class="hljs-attr">buf</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">littleEndian</span>, <span class="hljs-attr">52</span>, <span class="hljs-attr">8</span>)
  <span class="hljs-attr">return</span> <span class="hljs-attr">offset</span> + <span class="hljs-attr">8</span>
}

<span class="hljs-attr">Buffer.prototype.writeDoubleLE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">writeDoubleLE</span> (<span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">writeDouble</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">true</span>, <span class="hljs-attr">noAssert</span>)
}

<span class="hljs-attr">Buffer.prototype.writeDoubleBE</span> = <span class="hljs-string">function</span> <span class="hljs-attr">writeDoubleBE</span> (<span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">noAssert</span>) {
  <span class="hljs-attr">return</span> <span class="hljs-attr">writeDouble</span>(<span class="hljs-attr">this</span>, <span class="hljs-attr">value</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">false</span>, <span class="hljs-attr">noAssert</span>)
}

// <span class="hljs-attr">copy</span>(<span class="hljs-attr">targetBuffer</span>, <span class="hljs-attr">targetStart</span>=<span class="hljs-string">0,</span> <span class="hljs-attr">sourceStart</span>=<span class="hljs-string">0,</span> <span class="hljs-attr">sourceEnd</span>=<span class="hljs-string">buffer.length)</span>
<span class="hljs-attr">Buffer.prototype.copy</span> = <span class="hljs-string">function</span> <span class="hljs-attr">copy</span> (<span class="hljs-attr">target</span>, <span class="hljs-attr">targetStart</span>, <span class="hljs-attr">start</span>, <span class="hljs-attr">end</span>) {
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">start</span>) <span class="hljs-attr">start</span> = <span class="hljs-string">0</span>
  <span class="hljs-attr">if</span> (!<span class="hljs-attr">end</span> &amp;&amp; <span class="hljs-attr">end</span> !== <span class="hljs-string">0)</span> <span class="hljs-attr">end</span> = <span class="hljs-string">this.length</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">targetStart</span> &gt;</span>= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end &gt; 0 &amp;&amp; end <span class="hljs-tag">&lt; <span class="hljs-attr">start</span>) <span class="hljs-attr">end</span> = <span class="hljs-string">start</span>

  // <span class="hljs-attr">Copy</span> <span class="hljs-attr">0</span> <span class="hljs-attr">bytes</span>; <span class="hljs-attr">we</span>'<span class="hljs-attr">re</span> <span class="hljs-attr">done</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">end</span> === <span class="hljs-string">start)</span> <span class="hljs-attr">return</span> <span class="hljs-attr">0</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">target.length</span> === <span class="hljs-string">0</span> || <span class="hljs-attr">this.length</span> === <span class="hljs-string">0)</span> <span class="hljs-attr">return</span> <span class="hljs-attr">0</span>

  // <span class="hljs-attr">Fatal</span> <span class="hljs-attr">error</span> <span class="hljs-attr">conditions</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">targetStart</span> &lt; <span class="hljs-attr">0</span>) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('<span class="hljs-attr">targetStart</span> <span class="hljs-attr">out</span> <span class="hljs-attr">of</span> <span class="hljs-attr">bounds</span>')
  }
  <span class="hljs-attr">if</span> (<span class="hljs-attr">start</span> &lt; <span class="hljs-attr">0</span> || <span class="hljs-attr">start</span> &gt;</span>= this.length) throw new RangeError('sourceStart out of bounds')
  if (end <span class="hljs-tag">&lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('<span class="hljs-attr">sourceEnd</span> <span class="hljs-attr">out</span> <span class="hljs-attr">of</span> <span class="hljs-attr">bounds</span>')

  // <span class="hljs-attr">Are</span> <span class="hljs-attr">we</span> <span class="hljs-attr">oob</span>?
  <span class="hljs-attr">if</span> (<span class="hljs-attr">end</span> &gt;</span> this.length) end = this.length
  if (target.length - targetStart <span class="hljs-tag">&lt; <span class="hljs-attr">end</span> <span class="hljs-attr">-</span> <span class="hljs-attr">start</span>) {
    <span class="hljs-attr">end</span> = <span class="hljs-string">target.length</span> <span class="hljs-attr">-</span> <span class="hljs-attr">targetStart</span> + <span class="hljs-attr">start</span>
  }

  <span class="hljs-attr">var</span> <span class="hljs-attr">len</span> = <span class="hljs-string">end</span> <span class="hljs-attr">-</span> <span class="hljs-attr">start</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">i</span>

  <span class="hljs-attr">if</span> (<span class="hljs-attr">this</span> === <span class="hljs-string">target</span> &amp;&amp; <span class="hljs-attr">start</span> &lt; <span class="hljs-attr">targetStart</span> &amp;&amp; <span class="hljs-attr">targetStart</span> &lt; <span class="hljs-attr">end</span>) {
    // <span class="hljs-attr">descending</span> <span class="hljs-attr">copy</span> <span class="hljs-attr">from</span> <span class="hljs-attr">end</span>
    <span class="hljs-attr">for</span> (<span class="hljs-attr">i</span> = <span class="hljs-string">len</span> <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>; <span class="hljs-attr">i</span> &gt;</span>= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len <span class="hljs-tag">&lt; <span class="hljs-attr">1000</span> || !<span class="hljs-attr">Buffer.TYPED_ARRAY_SUPPORT</span>) {
    // <span class="hljs-attr">ascending</span> <span class="hljs-attr">copy</span> <span class="hljs-attr">from</span> <span class="hljs-attr">start</span>
    <span class="hljs-attr">for</span> (<span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">len</span>; ++<span class="hljs-attr">i</span>) {
      <span class="hljs-attr">target</span>[<span class="hljs-attr">i</span> + <span class="hljs-attr">targetStart</span>] = <span class="hljs-string">this[i</span> + <span class="hljs-attr">start</span>]
    }
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">Uint8Array.prototype.set.call</span>(
      <span class="hljs-attr">target</span>,
      <span class="hljs-attr">this.subarray</span>(<span class="hljs-attr">start</span>, <span class="hljs-attr">start</span> + <span class="hljs-attr">len</span>),
      <span class="hljs-attr">targetStart</span>
    )
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">len</span>
}

// <span class="hljs-attr">Usage:</span>
//    <span class="hljs-attr">buffer.fill</span>(<span class="hljs-attr">number</span>[, <span class="hljs-attr">offset</span>[, <span class="hljs-attr">end</span>]])
//    <span class="hljs-attr">buffer.fill</span>(<span class="hljs-attr">buffer</span>[, <span class="hljs-attr">offset</span>[, <span class="hljs-attr">end</span>]])
//    <span class="hljs-attr">buffer.fill</span>(<span class="hljs-attr">string</span>[, <span class="hljs-attr">offset</span>[, <span class="hljs-attr">end</span>]][, <span class="hljs-attr">encoding</span>])
<span class="hljs-attr">Buffer.prototype.fill</span> = <span class="hljs-string">function</span> <span class="hljs-attr">fill</span> (<span class="hljs-attr">val</span>, <span class="hljs-attr">start</span>, <span class="hljs-attr">end</span>, <span class="hljs-attr">encoding</span>) {
  // <span class="hljs-attr">Handle</span> <span class="hljs-attr">string</span> <span class="hljs-attr">cases:</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">val</span> === <span class="hljs-string">'string'</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">start</span> === <span class="hljs-string">'string'</span>) {
      <span class="hljs-attr">encoding</span> = <span class="hljs-string">start</span>
      <span class="hljs-attr">start</span> = <span class="hljs-string">0</span>
      <span class="hljs-attr">end</span> = <span class="hljs-string">this.length</span>
    } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">end</span> === <span class="hljs-string">'string'</span>) {
      <span class="hljs-attr">encoding</span> = <span class="hljs-string">end</span>
      <span class="hljs-attr">end</span> = <span class="hljs-string">this.length</span>
    }
    <span class="hljs-attr">if</span> (<span class="hljs-attr">val.length</span> === <span class="hljs-string">1)</span> {
      <span class="hljs-attr">var</span> <span class="hljs-attr">code</span> = <span class="hljs-string">val.charCodeAt(0)</span>
      <span class="hljs-attr">if</span> (<span class="hljs-attr">code</span> &lt; <span class="hljs-attr">256</span>) {
        <span class="hljs-attr">val</span> = <span class="hljs-string">code</span>
      }
    }
    <span class="hljs-attr">if</span> (<span class="hljs-attr">encoding</span> !== <span class="hljs-string">undefined</span> &amp;&amp; <span class="hljs-attr">typeof</span> <span class="hljs-attr">encoding</span> !== <span class="hljs-string">'string'</span>) {
      <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('<span class="hljs-attr">encoding</span> <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">a</span> <span class="hljs-attr">string</span>')
    }
    <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">encoding</span> === <span class="hljs-string">'string'</span> &amp;&amp; !<span class="hljs-attr">Buffer.isEncoding</span>(<span class="hljs-attr">encoding</span>)) {
      <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">TypeError</span>('<span class="hljs-attr">Unknown</span> <span class="hljs-attr">encoding:</span> ' + <span class="hljs-attr">encoding</span>)
    }
  } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">val</span> === <span class="hljs-string">'number'</span>) {
    <span class="hljs-attr">val</span> = <span class="hljs-string">val</span> &amp; <span class="hljs-attr">255</span>
  }

  // <span class="hljs-attr">Invalid</span> <span class="hljs-attr">ranges</span> <span class="hljs-attr">are</span> <span class="hljs-attr">not</span> <span class="hljs-attr">set</span> <span class="hljs-attr">to</span> <span class="hljs-attr">a</span> <span class="hljs-attr">default</span>, <span class="hljs-attr">so</span> <span class="hljs-attr">can</span> <span class="hljs-attr">range</span> <span class="hljs-attr">check</span> <span class="hljs-attr">early.</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">start</span> &lt; <span class="hljs-attr">0</span> || <span class="hljs-attr">this.length</span> &lt; <span class="hljs-attr">start</span> || <span class="hljs-attr">this.length</span> &lt; <span class="hljs-attr">end</span>) {
    <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">RangeError</span>('<span class="hljs-attr">Out</span> <span class="hljs-attr">of</span> <span class="hljs-attr">range</span> <span class="hljs-attr">index</span>')
  }

  <span class="hljs-attr">if</span> (<span class="hljs-attr">end</span> &lt;= <span class="hljs-string">start)</span> {
    <span class="hljs-attr">return</span> <span class="hljs-attr">this</span>
  }

  <span class="hljs-attr">start</span> = <span class="hljs-string">start</span> &gt;</span>&gt;&gt; 0
  end = end === undefined ? this.length : end &gt;&gt;&gt; 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i <span class="hljs-tag">&lt; <span class="hljs-attr">end</span>; ++<span class="hljs-attr">i</span>) {
      <span class="hljs-attr">this</span>[<span class="hljs-attr">i</span>] = <span class="hljs-string">val</span>
    }
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">var</span> <span class="hljs-attr">bytes</span> = <span class="hljs-string">Buffer.isBuffer(val)</span>
      ? <span class="hljs-attr">val</span>
      <span class="hljs-attr">:</span> <span class="hljs-attr">utf8ToBytes</span>(<span class="hljs-attr">new</span> <span class="hljs-attr">Buffer</span>(<span class="hljs-attr">val</span>, <span class="hljs-attr">encoding</span>)<span class="hljs-attr">.toString</span>())
    <span class="hljs-attr">var</span> <span class="hljs-attr">len</span> = <span class="hljs-string">bytes.length</span>
    <span class="hljs-attr">for</span> (<span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">end</span> <span class="hljs-attr">-</span> <span class="hljs-attr">start</span>; ++<span class="hljs-attr">i</span>) {
      <span class="hljs-attr">this</span>[<span class="hljs-attr">i</span> + <span class="hljs-attr">start</span>] = <span class="hljs-string">bytes[i</span> % <span class="hljs-attr">len</span>]
    }
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">this</span>
}

// <span class="hljs-attr">HELPER</span> <span class="hljs-attr">FUNCTIONS</span>
// ================

<span class="hljs-string">var</span> <span class="hljs-attr">INVALID_BASE64_RE</span> = <span class="hljs-string">/[^+\/0-9A-Za-z-_]/g</span>

<span class="hljs-attr">function</span> <span class="hljs-attr">base64clean</span> (<span class="hljs-attr">str</span>) {
  // <span class="hljs-attr">Node</span> <span class="hljs-attr">strips</span> <span class="hljs-attr">out</span> <span class="hljs-attr">invalid</span> <span class="hljs-attr">characters</span> <span class="hljs-attr">like</span> \<span class="hljs-attr">n</span> <span class="hljs-attr">and</span> \<span class="hljs-attr">t</span> <span class="hljs-attr">from</span> <span class="hljs-attr">the</span> <span class="hljs-attr">string</span>, <span class="hljs-attr">base64-js</span> <span class="hljs-attr">does</span> <span class="hljs-attr">not</span>
  <span class="hljs-attr">str</span> = <span class="hljs-string">stringtrim(str).replace(INVALID_BASE64_RE,</span> '')
  // <span class="hljs-attr">Node</span> <span class="hljs-attr">converts</span> <span class="hljs-attr">strings</span> <span class="hljs-attr">with</span> <span class="hljs-attr">length</span> &lt; <span class="hljs-attr">2</span> <span class="hljs-attr">to</span> ''
  <span class="hljs-attr">if</span> (<span class="hljs-attr">str.length</span> &lt; <span class="hljs-attr">2</span>) <span class="hljs-attr">return</span> ''
  // <span class="hljs-attr">Node</span> <span class="hljs-attr">allows</span> <span class="hljs-attr">for</span> <span class="hljs-attr">non-padded</span> <span class="hljs-attr">base64</span> <span class="hljs-attr">strings</span> (<span class="hljs-attr">missing</span> <span class="hljs-attr">trailing</span> ===<span class="hljs-string">),</span> <span class="hljs-attr">base64-js</span> <span class="hljs-attr">does</span> <span class="hljs-attr">not</span>
  <span class="hljs-attr">while</span> (<span class="hljs-attr">str.length</span> % <span class="hljs-attr">4</span> !== <span class="hljs-string">0)</span> {
    <span class="hljs-attr">str</span> = <span class="hljs-string">str</span> + '=<span class="hljs-string">'
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '</span>')
}

<span class="hljs-attr">function</span> <span class="hljs-attr">toHex</span> (<span class="hljs-attr">n</span>) {
  <span class="hljs-attr">if</span> (<span class="hljs-attr">n</span> &lt; <span class="hljs-attr">16</span>) <span class="hljs-attr">return</span> '<span class="hljs-attr">0</span>' + <span class="hljs-attr">n.toString</span>(<span class="hljs-attr">16</span>)
  <span class="hljs-attr">return</span> <span class="hljs-attr">n.toString</span>(<span class="hljs-attr">16</span>)
}

<span class="hljs-attr">function</span> <span class="hljs-attr">utf8ToBytes</span> (<span class="hljs-attr">string</span>, <span class="hljs-attr">units</span>) {
  <span class="hljs-attr">units</span> = <span class="hljs-string">units</span> || <span class="hljs-attr">Infinity</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">codePoint</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">length</span> = <span class="hljs-string">string.length</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">leadSurrogate</span> = <span class="hljs-string">null</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">bytes</span> = <span class="hljs-string">[]</span>

  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">length</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">codePoint</span> = <span class="hljs-string">string.charCodeAt(i)</span>

    // <span class="hljs-attr">is</span> <span class="hljs-attr">surrogate</span> <span class="hljs-attr">component</span>
    <span class="hljs-attr">if</span> (<span class="hljs-attr">codePoint</span> &gt;</span> 0xD7FF &amp;&amp; codePoint <span class="hljs-tag">&lt; <span class="hljs-attr">0xE000</span>) {
      // <span class="hljs-attr">last</span> <span class="hljs-attr">char</span> <span class="hljs-attr">was</span> <span class="hljs-attr">a</span> <span class="hljs-attr">lead</span>
      <span class="hljs-attr">if</span> (!<span class="hljs-attr">leadSurrogate</span>) {
        // <span class="hljs-attr">no</span> <span class="hljs-attr">lead</span> <span class="hljs-attr">yet</span>
        <span class="hljs-attr">if</span> (<span class="hljs-attr">codePoint</span> &gt;</span> 0xDBFF) {
          // unexpected trail
          if ((units -= 3) &gt; -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) &gt; -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint <span class="hljs-tag">&lt; <span class="hljs-attr">0xDC00</span>) {
        <span class="hljs-attr">if</span> ((<span class="hljs-attr">units</span> <span class="hljs-attr">-</span>= <span class="hljs-string">3)</span> &gt;</span> -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 <span class="hljs-tag">&lt;&lt; <span class="hljs-attr">10</span> | <span class="hljs-attr">codePoint</span> <span class="hljs-attr">-</span> <span class="hljs-attr">0xDC00</span>) + <span class="hljs-attr">0x10000</span>
    } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">leadSurrogate</span>) {
      // <span class="hljs-attr">valid</span> <span class="hljs-attr">bmp</span> <span class="hljs-attr">char</span>, <span class="hljs-attr">but</span> <span class="hljs-attr">last</span> <span class="hljs-attr">char</span> <span class="hljs-attr">was</span> <span class="hljs-attr">a</span> <span class="hljs-attr">lead</span>
      <span class="hljs-attr">if</span> ((<span class="hljs-attr">units</span> <span class="hljs-attr">-</span>= <span class="hljs-string">3)</span> &gt;</span> -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint <span class="hljs-tag">&lt; <span class="hljs-attr">0x80</span>) {
      <span class="hljs-attr">if</span> ((<span class="hljs-attr">units</span> <span class="hljs-attr">-</span>= <span class="hljs-string">1)</span> &lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">break</span>
      <span class="hljs-attr">bytes.push</span>(<span class="hljs-attr">codePoint</span>)
    } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">codePoint</span> &lt; <span class="hljs-attr">0x800</span>) {
      <span class="hljs-attr">if</span> ((<span class="hljs-attr">units</span> <span class="hljs-attr">-</span>= <span class="hljs-string">2)</span> &lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">break</span>
      <span class="hljs-attr">bytes.push</span>(
        <span class="hljs-attr">codePoint</span> &gt;</span>&gt; 0x6 | 0xC0,
        codePoint &amp; 0x3F | 0x80
      )
    } else if (codePoint <span class="hljs-tag">&lt; <span class="hljs-attr">0x10000</span>) {
      <span class="hljs-attr">if</span> ((<span class="hljs-attr">units</span> <span class="hljs-attr">-</span>= <span class="hljs-string">3)</span> &lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">break</span>
      <span class="hljs-attr">bytes.push</span>(
        <span class="hljs-attr">codePoint</span> &gt;</span>&gt; 0xC | 0xE0,
        codePoint &gt;&gt; 0x6 &amp; 0x3F | 0x80,
        codePoint &amp; 0x3F | 0x80
      )
    } else if (codePoint <span class="hljs-tag">&lt; <span class="hljs-attr">0x110000</span>) {
      <span class="hljs-attr">if</span> ((<span class="hljs-attr">units</span> <span class="hljs-attr">-</span>= <span class="hljs-string">4)</span> &lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">break</span>
      <span class="hljs-attr">bytes.push</span>(
        <span class="hljs-attr">codePoint</span> &gt;</span>&gt; 0x12 | 0xF0,
        codePoint &gt;&gt; 0xC &amp; 0x3F | 0x80,
        codePoint &gt;&gt; 0x6 &amp; 0x3F | 0x80,
        codePoint &amp; 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attr">str.length</span>; ++<span class="hljs-attr">i</span>) {
    // <span class="hljs-attr">Node</span>'<span class="hljs-attr">s</span> <span class="hljs-attr">code</span> <span class="hljs-attr">seems</span> <span class="hljs-attr">to</span> <span class="hljs-attr">be</span> <span class="hljs-attr">doing</span> <span class="hljs-attr">this</span> <span class="hljs-attr">and</span> <span class="hljs-attr">not</span> &amp; <span class="hljs-attr">0x7F..</span>
    <span class="hljs-attr">byteArray.push</span>(<span class="hljs-attr">str.charCodeAt</span>(<span class="hljs-attr">i</span>) &amp; <span class="hljs-attr">0xFF</span>)
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">byteArray</span>
}

<span class="hljs-attr">function</span> <span class="hljs-attr">utf16leToBytes</span> (<span class="hljs-attr">str</span>, <span class="hljs-attr">units</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">c</span>, <span class="hljs-attr">hi</span>, <span class="hljs-attr">lo</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">byteArray</span> = <span class="hljs-string">[]</span>
  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">str.length</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">if</span> ((<span class="hljs-attr">units</span> <span class="hljs-attr">-</span>= <span class="hljs-string">2)</span> &lt; <span class="hljs-attr">0</span>) <span class="hljs-attr">break</span>

    <span class="hljs-attr">c</span> = <span class="hljs-string">str.charCodeAt(i)</span>
    <span class="hljs-attr">hi</span> = <span class="hljs-string">c</span> &gt;</span>&gt; 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attr">length</span>; ++<span class="hljs-attr">i</span>) {
    <span class="hljs-attr">if</span> ((<span class="hljs-attr">i</span> + <span class="hljs-attr">offset</span> &gt;</span>= dst.length) || (i &gt;= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

function isnan (val) {
  return val !== val // eslint-disable-line no-self-compare
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

var lookup = []
var revLookup = []
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array

var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for (var i = 0, len = code.length; i <span class="hljs-tag">&lt; <span class="hljs-attr">len</span>; ++<span class="hljs-attr">i</span>) {
  <span class="hljs-attr">lookup</span>[<span class="hljs-attr">i</span>] = <span class="hljs-string">code[i]</span>
  <span class="hljs-attr">revLookup</span>[<span class="hljs-attr">code.charCodeAt</span>(<span class="hljs-attr">i</span>)] = <span class="hljs-string">i</span>
}

// <span class="hljs-attr">Support</span> <span class="hljs-attr">decoding</span> <span class="hljs-attr">URL-safe</span> <span class="hljs-attr">base64</span> <span class="hljs-attr">strings</span>, <span class="hljs-attr">as</span> <span class="hljs-attr">Node.js</span> <span class="hljs-attr">does.</span>
// <span class="hljs-attr">See:</span> <span class="hljs-attr">https:</span>//<span class="hljs-attr">en.wikipedia.org</span>/<span class="hljs-attr">wiki</span>/<span class="hljs-attr">Base64</span>#<span class="hljs-attr">URL_applications</span>
<span class="hljs-attr">revLookup</span>['<span class="hljs-attr">-</span>'<span class="hljs-attr">.charCodeAt</span>(<span class="hljs-attr">0</span>)] = <span class="hljs-string">62</span>
<span class="hljs-attr">revLookup</span>['<span class="hljs-attr">_</span>'<span class="hljs-attr">.charCodeAt</span>(<span class="hljs-attr">0</span>)] = <span class="hljs-string">63</span>

<span class="hljs-attr">function</span> <span class="hljs-attr">getLens</span> (<span class="hljs-attr">b64</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">len</span> = <span class="hljs-string">b64.length</span>

  <span class="hljs-attr">if</span> (<span class="hljs-attr">len</span> % <span class="hljs-attr">4</span> &gt;</span> 0) {
    throw new Error('Invalid string. Length must be a multiple of 4')
  }

  // Trim off extra bytes after placeholder bytes are found
  // See: https://github.com/beatgammit/base64-js/issues/42
  var validLen = b64.indexOf('=')
  if (validLen === -1) validLen = len

  var placeHoldersLen = validLen === len
    ? 0
    : 4 - (validLen % 4)

  return [validLen, placeHoldersLen]
}

// base64 is 4/3 + up to two characters of the original data
function byteLength (b64) {
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function _byteLength (b64, validLen, placeHoldersLen) {
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function toByteArray (b64) {
  var tmp
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]

  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))

  var curByte = 0

  // if there are placeholders, only get up to the last complete 4 chars
  var len = placeHoldersLen &gt; 0
    ? validLen - 4
    : validLen

  var i
  for (i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attr">len</span>; <span class="hljs-attr">i</span> += <span class="hljs-string">4)</span> {
    <span class="hljs-attr">tmp</span> =
      <span class="hljs-string">(revLookup[b64.charCodeAt(i)]</span> &lt;&lt; <span class="hljs-attr">18</span>) |
      (<span class="hljs-attr">revLookup</span>[<span class="hljs-attr">b64.charCodeAt</span>(<span class="hljs-attr">i</span> + <span class="hljs-attr">1</span>)] &lt;&lt; <span class="hljs-attr">12</span>) |
      (<span class="hljs-attr">revLookup</span>[<span class="hljs-attr">b64.charCodeAt</span>(<span class="hljs-attr">i</span> + <span class="hljs-attr">2</span>)] &lt;&lt; <span class="hljs-attr">6</span>) |
      <span class="hljs-attr">revLookup</span>[<span class="hljs-attr">b64.charCodeAt</span>(<span class="hljs-attr">i</span> + <span class="hljs-attr">3</span>)]
    <span class="hljs-attr">arr</span>[<span class="hljs-attr">curByte</span>++] = <span class="hljs-string">(tmp</span> &gt;</span>&gt; 16) &amp; 0xFF
    arr[curByte++] = (tmp &gt;&gt; 8) &amp; 0xFF
    arr[curByte++] = tmp &amp; 0xFF
  }

  if (placeHoldersLen === 2) {
    tmp =
      (revLookup[b64.charCodeAt(i)] <span class="hljs-tag">&lt;&lt; <span class="hljs-attr">2</span>) |
      (<span class="hljs-attr">revLookup</span>[<span class="hljs-attr">b64.charCodeAt</span>(<span class="hljs-attr">i</span> + <span class="hljs-attr">1</span>)] &gt;</span>&gt; 4)
    arr[curByte++] = tmp &amp; 0xFF
  }

  if (placeHoldersLen === 1) {
    tmp =
      (revLookup[b64.charCodeAt(i)] <span class="hljs-tag">&lt;&lt; <span class="hljs-attr">10</span>) |
      (<span class="hljs-attr">revLookup</span>[<span class="hljs-attr">b64.charCodeAt</span>(<span class="hljs-attr">i</span> + <span class="hljs-attr">1</span>)] &lt;&lt; <span class="hljs-attr">4</span>) |
      (<span class="hljs-attr">revLookup</span>[<span class="hljs-attr">b64.charCodeAt</span>(<span class="hljs-attr">i</span> + <span class="hljs-attr">2</span>)] &gt;</span>&gt; 2)
    arr[curByte++] = (tmp &gt;&gt; 8) &amp; 0xFF
    arr[curByte++] = tmp &amp; 0xFF
  }

  return arr
}

function tripletToBase64 (num) {
  return lookup[num &gt;&gt; 18 &amp; 0x3F] +
    lookup[num &gt;&gt; 12 &amp; 0x3F] +
    lookup[num &gt;&gt; 6 &amp; 0x3F] +
    lookup[num &amp; 0x3F]
}

function encodeChunk (uint8, start, end) {
  var tmp
  var output = []
  for (var i = start; i <span class="hljs-tag">&lt; <span class="hljs-attr">end</span>; <span class="hljs-attr">i</span> += <span class="hljs-string">3)</span> {
    <span class="hljs-attr">tmp</span> =
      <span class="hljs-string">((uint8[i]</span> &lt;&lt; <span class="hljs-attr">16</span>) &amp; <span class="hljs-attr">0xFF0000</span>) +
      ((<span class="hljs-attr">uint8</span>[<span class="hljs-attr">i</span> + <span class="hljs-attr">1</span>] &lt;&lt; <span class="hljs-attr">8</span>) &amp; <span class="hljs-attr">0xFF00</span>) +
      (<span class="hljs-attr">uint8</span>[<span class="hljs-attr">i</span> + <span class="hljs-attr">2</span>] &amp; <span class="hljs-attr">0xFF</span>)
    <span class="hljs-attr">output.push</span>(<span class="hljs-attr">tripletToBase64</span>(<span class="hljs-attr">tmp</span>))
  }
  <span class="hljs-attr">return</span> <span class="hljs-attr">output.join</span>('')
}

<span class="hljs-attr">function</span> <span class="hljs-attr">fromByteArray</span> (<span class="hljs-attr">uint8</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">tmp</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">len</span> = <span class="hljs-string">uint8.length</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">extraBytes</span> = <span class="hljs-string">len</span> % <span class="hljs-attr">3</span> // <span class="hljs-attr">if</span> <span class="hljs-attr">we</span> <span class="hljs-attr">have</span> <span class="hljs-attr">1</span> <span class="hljs-attr">byte</span> <span class="hljs-attr">left</span>, <span class="hljs-attr">pad</span> <span class="hljs-attr">2</span> <span class="hljs-attr">bytes</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">parts</span> = <span class="hljs-string">[]</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">maxChunkLength</span> = <span class="hljs-string">16383</span> // <span class="hljs-attr">must</span> <span class="hljs-attr">be</span> <span class="hljs-attr">multiple</span> <span class="hljs-attr">of</span> <span class="hljs-attr">3</span>

  // <span class="hljs-attr">go</span> <span class="hljs-attr">through</span> <span class="hljs-attr">the</span> <span class="hljs-attr">array</span> <span class="hljs-attr">every</span> <span class="hljs-attr">three</span> <span class="hljs-attr">bytes</span>, <span class="hljs-attr">we</span>'<span class="hljs-attr">ll</span> <span class="hljs-attr">deal</span> <span class="hljs-attr">with</span> <span class="hljs-attr">trailing</span> <span class="hljs-attr">stuff</span> <span class="hljs-attr">later</span>
  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0,</span> <span class="hljs-attr">len2</span> = <span class="hljs-string">len</span> <span class="hljs-attr">-</span> <span class="hljs-attr">extraBytes</span>; <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">len2</span>; <span class="hljs-attr">i</span> += <span class="hljs-string">maxChunkLength)</span> {
    <span class="hljs-attr">parts.push</span>(<span class="hljs-attr">encodeChunk</span>(
      <span class="hljs-attr">uint8</span>, <span class="hljs-attr">i</span>, (<span class="hljs-attr">i</span> + <span class="hljs-attr">maxChunkLength</span>) &gt;</span> len2 ? len2 : (i + maxChunkLength)
    ))
  }

  // pad the end with zeros, but make sure to not forget the extra bytes
  if (extraBytes === 1) {
    tmp = uint8[len - 1]
    parts.push(
      lookup[tmp &gt;&gt; 2] +
      lookup[(tmp <span class="hljs-tag">&lt;&lt; <span class="hljs-attr">4</span>) &amp; <span class="hljs-attr">0x3F</span>] +
      '==<span class="hljs-string">'
    )
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] &lt;&lt; 8) + uint8[len - 1]
    parts.push(
      lookup[tmp &gt;&gt; 10] +
      lookup[(tmp &gt;&gt; 4) &amp; 0x3F] +
      lookup[(tmp &lt;&lt; 2) &amp; 0x3F] +
      '</span>=<span class="hljs-string">'
    )
  }

  return parts.join('</span>')
}


/***/ }),
/* <span class="hljs-attr">43</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">exports</span>) {

<span class="hljs-attr">exports.read</span> = <span class="hljs-string">function</span> (<span class="hljs-attr">buffer</span>, <span class="hljs-attr">offset</span>, <span class="hljs-attr">isLE</span>, <span class="hljs-attr">mLen</span>, <span class="hljs-attr">nBytes</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">e</span>, <span class="hljs-attr">m</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">eLen</span> = <span class="hljs-string">(nBytes</span> * <span class="hljs-attr">8</span>) <span class="hljs-attr">-</span> <span class="hljs-attr">mLen</span> <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">eMax</span> = <span class="hljs-string">(1</span> &lt;&lt; <span class="hljs-attr">eLen</span>) <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">eBias</span> = <span class="hljs-string">eMax</span> &gt;</span>&gt; 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s &amp; ((1 <span class="hljs-tag">&lt;&lt; (<span class="hljs-attr">-nBits</span>)) <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>)
  <span class="hljs-attr">s</span> &gt;</span>&gt;= (-nBits)
  nBits += eLen
  for (; nBits &gt; 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  m = e &amp; ((1 <span class="hljs-tag">&lt;&lt; (<span class="hljs-attr">-nBits</span>)) <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>)
  <span class="hljs-attr">e</span> &gt;</span>&gt;= (-nBits)
  nBits += mLen
  for (; nBits &gt; 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 <span class="hljs-tag">&lt;&lt; <span class="hljs-attr">eLen</span>) <span class="hljs-attr">-</span> <span class="hljs-attr">1</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">eBias</span> = <span class="hljs-string">eMax</span> &gt;</span>&gt; 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value <span class="hljs-tag">&lt; <span class="hljs-attr">0</span> || (<span class="hljs-attr">value</span> === <span class="hljs-string">0</span> &amp;&amp; <span class="hljs-attr">1</span> / <span class="hljs-attr">value</span> &lt; <span class="hljs-attr">0</span>) ? <span class="hljs-attr">1</span> <span class="hljs-attr">:</span> <span class="hljs-attr">0</span>

  <span class="hljs-attr">value</span> = <span class="hljs-string">Math.abs(value)</span>

  <span class="hljs-attr">if</span> (<span class="hljs-attr">isNaN</span>(<span class="hljs-attr">value</span>) || <span class="hljs-attr">value</span> === <span class="hljs-string">Infinity)</span> {
    <span class="hljs-attr">m</span> = <span class="hljs-string">isNaN(value)</span> ? <span class="hljs-attr">1</span> <span class="hljs-attr">:</span> <span class="hljs-attr">0</span>
    <span class="hljs-attr">e</span> = <span class="hljs-string">eMax</span>
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">e</span> = <span class="hljs-string">Math.floor(Math.log(value)</span> / <span class="hljs-attr">Math.LN2</span>)
    <span class="hljs-attr">if</span> (<span class="hljs-attr">value</span> * (<span class="hljs-attr">c</span> = <span class="hljs-string">Math.pow(2,</span> <span class="hljs-attr">-e</span>)) &lt; <span class="hljs-attr">1</span>) {
      <span class="hljs-attr">e--</span>
      <span class="hljs-attr">c</span> *= <span class="hljs-string">2</span>
    }
    <span class="hljs-attr">if</span> (<span class="hljs-attr">e</span> + <span class="hljs-attr">eBias</span> &gt;</span>= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c &gt;= 2) {
      e++
      c /= 2
    }

    if (e + eBias &gt;= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias &gt;= 1) {
      m = ((value * c) - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen &gt;= 8; buffer[offset + i] = m &amp; 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e <span class="hljs-tag">&lt;&lt; <span class="hljs-attr">mLen</span>) | <span class="hljs-attr">m</span>
  <span class="hljs-attr">eLen</span> += <span class="hljs-string">mLen</span>
  <span class="hljs-attr">for</span> (; <span class="hljs-attr">eLen</span> &gt;</span> 0; buffer[offset + i] = e &amp; 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}


/***/ }),
/* 44 */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};


/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(46).default;
module.exports.default = module.exports;


/***/ }),
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(Buffer) {
Object.defineProperty(exports, "__esModule", { value: true });
var pad_string_1 = __webpack_require__(47);
function encode(input, encoding) {
    if (encoding === void 0) { encoding = "utf8"; }
    if (Buffer.isBuffer(input)) {
        return fromBase64(input.toString("base64"));
    }
    return fromBase64(Buffer.from(input, encoding).toString("base64"));
}
;
function decode(base64url, encoding) {
    if (encoding === void 0) { encoding = "utf8"; }
    return Buffer.from(toBase64(base64url), "base64").toString(encoding);
}
function toBase64(base64url) {
    base64url = base64url.toString();
    return pad_string_1.default(base64url)
        .replace(/\-/g, "+")
        .replace(/_/g, "/");
}
function fromBase64(base64) {
    return base64
        .replace(/=/g, "")
        .replace(/\+/g, "-")
        .replace(/\//g, "_");
}
function toBuffer(base64url) {
    return Buffer.from(toBase64(base64url), "base64");
}
var base64url = encode;
base64url.encode = encode;
base64url.decode = decode;
base64url.toBase64 = toBase64;
base64url.fromBase64 = fromBase64;
base64url.toBuffer = toBuffer;
exports.default = base64url;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(41).Buffer))

/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(Buffer) {
Object.defineProperty(exports, "__esModule", { value: true });
function padString(input) {
    var segmentLength = 4;
    var stringLength = input.length;
    var diff = stringLength % segmentLength;
    if (!diff) {
        return input;
    }
    var position = stringLength;
    var padLength = segmentLength - diff;
    var paddedStringLength = stringLength + padLength;
    var buffer = Buffer.alloc(paddedStringLength);
    buffer.write(input);
    while (padLength--) {
        buffer.write("=", position++);
    }
    return buffer.toString();
}
exports.default = padString;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(41).Buffer))

/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {const TextEncoder = global.TextEncoder
  ? global.TextEncoder  // browser
  : __webpack_require__(49).TextEncoder  // node shim
module.exports = TextEncoder

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25)))

/***/ }),
/* 49 */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),
/* 50 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(Buffer) {

/**
 * Dependencies
 * @ignore
 */
const base64url = __webpack_require__(45)
let crypto = __webpack_require__(34)
const TextEncoder = __webpack_require__(48)

/**
 * RSASSA-PKCS1-v1_5
 */
class RSASSA_PKCS1_v1_5 {

  /**
   * constructor
   *
   * @param {string} bitlength
   */
  constructor (params) {
    this.params = params
  }

  /**
   * sign
   *
   * @description
   * Generate a digital signature for a given input and private key.
   *
   * @param {CryptoKey} key
   * @param {BufferSource} data
   *
   * @returns {Promise}
   */
  sign (key, data) {
    let algorithm = this.params

    // TODO
    //if (!this.sufficientKeySize()) {
    //  return Promise.reject(
    //    new Error(
    //      'A key size of 2048 bits or larger must be used with RSASSA-PKCS1-v1_5'
    //    )
    //  )
    //}

    data = new TextEncoder().encode(data)

    return crypto.subtle
      .sign(algorithm, key, data)
      .then(signature =&gt; base64url(Buffer.from(signature)))
  }

  /**
   * verify
   *
   * @description
   * Verify a digital signature for a given input and private key.
   *
   * @param {CryptoKey} key
   * @param {BufferSource} signature
   * @param {BufferSource} data
   *
   * @returns {Promise}
   */
  verify (key, signature, data) {
    let algorithm = this.params

    if (typeof signature === 'string') {
      signature = Uint8Array.from(base64url.toBuffer(signature))
    }

    if (typeof data === 'string') {
      data = new TextEncoder().encode(data)
    }
    // ...

    return crypto.subtle.verify(algorithm, key, signature, data)
  }

  /**
   * importKey
   *
   * @param {JWK} key
   * @returns {Promise}
   */
  async importKey (key) {
    let jwk = Object.assign({}, key)
    let algorithm = this.params
    let usages = key['key_ops'] || []

    if (key.use === 'sig') {
      usages.push('verify')
    }

    if (key.use === 'enc') {
      // TODO: handle encryption keys
      return Promise.resolve(key)
    }

    if (key.key_ops) {
      usages = key.key_ops
    }

    return crypto.subtle
      .importKey('jwk', jwk, algorithm, true, usages)
      .then(cryptoKey =&gt; {
        Object.defineProperty(jwk, 'cryptoKey', {
          enumerable: false,
          value: cryptoKey
        })

        return jwk
      })
  }
}

/**
 * Export
 */
module.exports = RSASSA_PKCS1_v1_5

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(41).Buffer))

/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Dependencies
 */
const NotSupportedError = __webpack_require__(52)

/**
 * Operations
 */
const operations = [
  'sign',
  'verify',
  'encrypt',
  'decrypt',
  'importKey'
]

/**
 * SupportedAlgorithms
 */
class SupportedAlgorithms {

  /**
   * constructor
   */
  constructor () {
    operations.forEach(op =&gt; {
      this[op] = {}
    })
  }

  /**
   * Supported Operations
   */
  static get operations () {
    return operations
  }

  /**
   * define
   *
   * @description
   * Register Web Crypto API algorithm parameter for an algorithm
   * and operation.
   *
   * @param {string} alg
   * @param {string} op
   * @param {Object} argument
   */
  define (alg, op, argument) {
    let registeredAlgorithms = this[op]
    registeredAlgorithms[alg] = argument
  }

  /**
   * normalize
   *
   * @description
   * Map JWA alg name to Web Crypto API algorithm parameter
   *
   * @param {string} op
   * @param {Object} alg
   *
   * @returns {Object}
   */
  normalize (op, alg) {
    let registeredAlgorithms = this[op]

    if (!registeredAlgorithms) {
      return new SyntaxError() // what kind of error should this be?
    }

    let argument = registeredAlgorithms[alg]

    if (!argument) {
      return new NotSupportedError(alg)
    }

    return argument
  }
}

/**
 * Export
 */
module.exports = SupportedAlgorithms


/***/ }),
/* 52 */
/***/ (function(module, exports) {

/**
 * NotSupportedError
 */
class NotSupportedError extends Error {
  constructor (alg) {
    super()
    this.message = `${alg} is not a supported algorithm`
  }
}

/**
 * Export
 */
module.exports = NotSupportedError


/***/ }),
/* 53 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = {
  DataError: __webpack_require__(54),
  NotSupportedError: __webpack_require__(52)
}


/***/ }),
/* 54 */
/***/ (function(module, exports) {

/**
 * DataError
 */
class DataError extends Error {
  constructor (message) {
    super(message)
  }
}

/**
 * Export
 */
module.exports = DataError


/***/ }),
/* 55 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Dependencies
 * @ignore
 */
const JWA = __webpack_require__(37)

/**
 * JWK Class
 */
class JWK {
  constructor ({ kty, use, key_ops, alg, kid, x5u, x5c, x5t } = {}) {
    this.kty = kty
    this.use = use
    this.key_ops = key_ops
    this.alg = alg
    this.kid = kid
    this.x5u = x5u
    this.x5c = x5c
    this.x5t = x5t
  }

  /**
   * importKey
   *
   * TODO:
   * - should this be on JWA?
   */
  static async importKey (jwk) {
    return JWA.importKey(jwk)
  }


}

/**
 * Export
 */
module.exports = JWK


/***/ }),
/* 56 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Dependencies
 */
const JWK = __webpack_require__(55)

/**
 * JWKSet
 *
 * @class
 * JWKSet represents a JSON Web Key Set as described in Section 5 of RFC 7517:
 * https://tools.ietf.org/html/rfc7517#section-5
 */
class JWKSet {
  constructor ({ keys } = {}) {
    this.keys = keys
  }

  /**
   * importKeys
   */
  static async importKeys (jwks) {
    if (!jwks.keys) {
      return Promise.reject(new Error('Cannot import JWKSet: keys property is empty'))
    }

    let imported, importing

    try {
      imported = new JWKSet(jwks)
      importing = jwks.keys.map(key =&gt; JWK.importKey(key))
    } catch (err) {
      return Promise.reject(err)
    }

    return Promise.all(importing)
      .then(keys =&gt; {
        imported.keys = keys
        return imported
      })
  }
}

/**
 * Export
 */
module.exports = JWKSet


/***/ }),
/* 57 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Dependencies
 */
const base64url = __webpack_require__(45)
const JWS = __webpack_require__(58)
const DataError = __webpack_require__(54)
const JOSEHeader = __webpack_require__(59)

/**
 * JWT
 */
class JWT {
  constructor (data = {}) {
    this.type = data.type
    this.segments = data.segments
    this.header = new JOSEHeader(data.header)
    this.protected = data.protected
    this.unprotected = data.unprotected
    this.iv = data.iv
    this.aad = data.aad
    this.ciphertext = data.ciphertext
    this.tag = data.tag
    this.recipients = data.recipients
    this.payload = data.payload
    this.signatures = data.signatures
    this.signature = data.signature
    this.key = data.key
    this.serialization = data.serialization || 'compact' // default
  }

  /**
   * decode
   *
   * @description
   * Decode a JSON Web Token
   *
   * @param {string} data
   * @returns {JWT}
   */
  static decode (data) {
    let ExtendedJWT = this
    let jwt

    if (typeof data !== 'string') {
      throw new DataError('JWT must be a string')
    }

    // JSON of Flattened JSON Serialization
    if (data.startsWith('{')) {
      try {
        data = JSON.parse(data, () =&gt; {})
      } catch (error) {
        throw new DataError('Invalid JWT serialization')
      }

      if (data.signatures || data.recipients) {
        data.serialization = 'json'
      } else {
        data.serialization = 'flattened'
      }

      jwt = new ExtendedJWT(data, { filter: false })

    // Compact Serialization
    } else {
      try {
        let serialization = 'compact'
        let segments = data.split('.')
        let length = segments.length

        if (length !== 3 &amp;&amp; length !== 5) {
          throw new Error('Malformed JWT')
        }

        let header = JSON.parse(base64url.decode(segments[0]))

        // JSON Web Signature
        if (length === 3) {
          let type = 'JWS'
          let payload = JSON.parse(base64url.decode(segments[1]))
          let signature = segments[2]

          jwt = new ExtendedJWT(
              { type, segments, header, payload, signature, serialization },
              { filter: false }
            )
        }

        // JSON Web Encryption
        if (length === 5) {
          //let type = 'JWE'
          //let [protected, encryption_key, iv, ciphertext, tag] = segments

          //jwt = new ExtendedJWT({
          //  type,
          //  protected: base64url.decode(JSON.parse(protected)),
          //  encryption_key,
          //  iv,
          //  ciphertext,
          //  tag,
          //  serialization
          //})
        }
      } catch (error) {
        throw new DataError('Invalid JWT compact serialization')
      }
    }

    return jwt
  }

  /**
   * encode
   *
   * @description
   * Encode a JSON Web Token
   *
   * @param {Object} header
   * @param {Object} payload
   * @param {CryptoKey} key
   *
   * @returns {Promise}
   */
  static encode (header, payload, key) {
    let jwt = new JWT(header, payload)
    return jwt.encode(key)
  }


  /**
   * verify
   *
   * @description
   *
   * @param {CryptoKey} key
   * @param {string} token
   *
   * @returns {Promise}
   */
  static async verify (key, token) {
    let jwt = JWT.decode(token)
    jwt.key = key
    return jwt.verify().then(verified =&gt; jwt)
  }

  /**
   * isJWE
   */
  isJWE () {
    return !!this.header.enc
  }

  /**
   * resolveKeys
   */
  resolveKeys (jwks) {
    let kid = this.header.kid
    let keys, match

    // treat an array as the "keys" property of a JWK Set
    if (Array.isArray(jwks)) {
      keys = jwks
    }

    // presence of keys indicates object is a JWK Set
    if (jwks.keys) {
      keys = jwks.keys
    }

    // wrap a plain object they is not a JWK Set in Array
    if (!jwks.keys &amp;&amp; typeof jwks === 'object') {
      keys = [jwks]
    }

    // ensure there are keys to search
    if (!keys) {
      throw new DataError('Invalid JWK argument')
    }

    // match by "kid" or "use" header
    if (kid) {
      match = keys.find(jwk =&gt; jwk.kid === kid)
    } else {
      match = keys.find(jwk =&gt; jwk.use === 'sig')
    }

    // assign matching key to JWT and return a boolean
    if (match) {
      this.key = match.cryptoKey
      return true
    } else {
      return false
    }
  }

  /**
   * encode
   *
   * @description
   * Encode a JWT instance
   *
   * @returns {Promise}
   */
  async encode () {
    let token = this

    if (this.isJWE()) {
      return JWE.encrypt(token)
    } else {
      return JWS.sign(token)
    }
  }

  /**
   * verify
   *
   * @description
   * Verify a decoded JWT instance
   *
   * @returns {Promise}
   */
  async verify () {
    return JWS.verify(this)
  }
}

/**
 * Export
 */
module.exports = JWT


/***/ }),
/* 58 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Dependencies
 */
const base64url = __webpack_require__(45)
const JWA = __webpack_require__(37)
const { DataError } = __webpack_require__(53)
const JOSEHeader = __webpack_require__(59)

/**
 * JWS
 */
class JWS {
  constructor (data = {}) {
    // compact
    this.header = new JOSEHeader(data.header)
    this.payload = data.payload || {}
    this.signature = data.signature

    // flattened
    this.protected = data.protected

    // JSON serialization
    this.signatures = data.signatures

    this.verified = false
  }

  /**
   * sign
   *
   * @description
   * Encode a JWT instance
   *
   * @param {Object} token
   * @returns {Promise}
   */
  static async sign (token) {
    let payload = base64url(JSON.stringify(token.payload))

    // compact serialization
    if (token.serialization === 'compact') {
      let {key, header: {alg}} = token
      let header = base64url(JSON.stringify(token.header))
      let data = `${header}.${payload}`

      return JWA.sign(alg, key, data).then(signature =&gt; `${data}.${signature}`)
    }

    // JSON serialization
    if (token.serialization === 'json') {

    }

    // Flattened serialization
    if (token.serialization === 'flattened') {

    }

    return Promise.reject(new DataError('Unsupported serialization'))
  }

  /**
   * verify
   */
  static async verify (jwt) {
    // multiple signatures
    if (jwt.signatures) {
      // ...
    }

    let {key, signature, header: {alg}} = jwt

    // one signature
    if (jwt.signature) {
      let [header, payload] = jwt.segments
      let data = `${header}.${payload}`

      if (alg === 'none') {
        return Promise.reject(new DataError('Signature provided to verify with alg: none'))
      }

      return JWA.verify(alg, key, signature, data).then(verified =&gt; {
        jwt.verified = verified
        return verified
      })
    }

    if (alg === 'none') {
      if (!key &amp;&amp; !signature) {
        jwt.verified = true

        return Promise.resolve(true)
      }

      if (key) {
        return Promise.reject(new DataError('Key provided to verify signature with alg: none'))
      }
    }

    // no signatures to verify
    return Promise.reject(new DataError('Missing signature(s)'))
  }
}

/**
 * Export
 */
module.exports = JWS


/***/ }),
/* 59 */
/***/ (function(module, exports) {

/**
 * Header
 */
class JOSEHeader {
  constructor ({ typ, cty, alg, jku, kid, x5u, x5c, x5t, crit, enc, zip } = {}) {
    this.typ = typ
    this.cty = cty
    this.alg = alg
    this.jku = jku
    this.kid = kid
    this.x5u = x5u
    this.x5c = x5c
    this.x5t = x5t
    this.crit = crit
    this.enc = enc
    this.zip = zip
  }

  /**
   * isJWS
   */
  isJWS () {}

  /**
   * isJWE
   */
  isJWE () {}
}

/**
 * Export
 */
module.exports = JOSEHeader


/***/ }),
/* 60 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(Buffer) {/**
 * Dependencies
 */
const assert = __webpack_require__(26);

const base64url = __webpack_require__(45);

const {
  crypto,
  JWT
} = __webpack_require__(33);

const FormUrlEncoded = __webpack_require__(61);

const {
  URL
} = __webpack_require__(32);
/**
 * Authentication Request
 */


class AuthenticationRequest {
  /**
   * create
   *
   * @description
   * Create a new authentication request with generated state and nonce,
   * validate presence of required parameters, serialize the request data and
   * persist it to the session, and return a promise for an authentication
   * request URI.
   *
   * @param {RelyingParty} rp – instance of RelyingParty
   * @param {Object} options - optional request parameters
   * @param {Object} session – reference to localStorage or other session object
   *
   * @returns {Promise}
   */
  static create(rp, options, session) {
    const {
      provider,
      defaults,
      registration
    } = rp;
    let issuer, endpoint, client, params;
    return Promise.resolve().then(() =&gt; {
      // validate presence of OP configuration, RP client registration,
      // and default parameters
      assert(provider.configuration, 'RelyingParty provider OpenID Configuration is missing');
      assert(defaults.authenticate, 'RelyingParty default authentication parameters are missing');
      assert(registration, 'RelyingParty client registration is missing'); // define basic elements of the request

      issuer = provider.configuration.issuer;
      endpoint = provider.configuration.authorization_endpoint;
      client = {
        client_id: registration.client_id
      };
      params = Object.assign(defaults.authenticate, client, options); // validate presence of required configuration and parameters

      assert(issuer, 'Missing issuer in provider OpenID Configuration');
      assert(endpoint, 'Missing authorization_endpoint in provider OpenID Configuration');
      assert(params.scope, 'Missing scope parameter in authentication request');
      assert(params.response_type, 'Missing response_type parameter in authentication request');
      assert(params.client_id, 'Missing client_id parameter in authentication request');
      assert(params.redirect_uri, 'Missing redirect_uri parameter in authentication request'); // generate state and nonce random octets

      params.state = Array.from(crypto.getRandomValues(new Uint8Array(16)));
      params.nonce = Array.from(crypto.getRandomValues(new Uint8Array(16))); // hash the state and nonce parameter values

      return Promise.all([crypto.subtle.digest({
        name: 'SHA-256'
      }, new Uint8Array(params.state)), crypto.subtle.digest({
        name: 'SHA-256'
      }, new Uint8Array(params.nonce))]);
    }) // serialize the request with original values, store in session by
    // encoded state param, and replace state/nonce octets with encoded
    // digests
    .then(digests =&gt; {
      let state = base64url(Buffer.from(digests[0]));
      let nonce = base64url(Buffer.from(digests[1]));
      let key = `${issuer}/requestHistory/${state}`; // store the request params for response validation
      // with serialized octet values for state and nonce

      session[key] = JSON.stringify(params); // replace state and nonce octets with base64url encoded digests

      params.state = state;
      params.nonce = nonce;
    }).then(() =&gt; AuthenticationRequest.generateSessionKeys()).then(sessionKeys =&gt; {
      AuthenticationRequest.storeSessionKeys(sessionKeys, params, session);
    }) // optionally encode a JWT with the request parameters
    // and replace params with `{ request: <span class="hljs-tag">&lt;<span class="hljs-name">jwt</span>&gt;</span> }
    .then(() =&gt; {
      if (provider.configuration.request_parameter_supported) {
        return AuthenticationRequest.encodeRequestParams(params).then(encodedParams =&gt; {
          params = encodedParams;
        });
      }
    }) // render the request URI and terminate the algorithm
    .then(() =&gt; {
      let url = new URL(endpoint);
      url.search = FormUrlEncoded.encode(params);
      return url.href;
    });
  }

  static generateSessionKeys() {
    return crypto.subtle.generateKey({
      name: "RSASSA-PKCS1-v1_5",
      modulusLength: 2048,
      publicExponent: new Uint8Array([0x01, 0x00, 0x01]),
      hash: {
        name: "SHA-256"
      }
    }, true, ["sign", "verify"]).then(keyPair =&gt; {
      // returns a keypair object
      return Promise.all([crypto.subtle.exportKey('jwk', keyPair.publicKey), crypto.subtle.exportKey('jwk', keyPair.privateKey)]);
    }).then(jwkPair =&gt; {
      let [publicJwk, privateJwk] = jwkPair;
      return {
        public: publicJwk,
        private: privateJwk
      };
    });
  }

  static storeSessionKeys(sessionKeys, params, session) {
    // store the private one in session, public one goes into params
    session['oidc.session.privateKey'] = JSON.stringify(sessionKeys.private);
    params.key = sessionKeys.public;
  }

  static encodeRequestParams(params) {
    const excludeParams = ['scope', 'client_id', 'response_type', 'state'];
    const keysToEncode = Object.keys(params).filter(key =&gt; !excludeParams.includes(key));
    let payload = {};
    keysToEncode.forEach(key =&gt; {
      payload[key] = params[key];
    });
    let requestParamJwt = new JWT({
      header: {
        alg: 'none'
      },
      payload
    }, {
      filter: false
    });
    return requestParamJwt.encode().then(requestParamCompact =&gt; {
      let newParams = {
        scope: params['scope'],
        client_id: params['client_id'],
        response_type: params['response_type'],
        request: requestParamCompact,
        state: params['state']
      };
      return newParams;
    });
  }

}
/**
 * Export
 */


module.exports = AuthenticationRequest;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(41).Buffer))

/***/ }),
/* 61 */
/***/ (function(module, exports) {

/**
 * Dependencies
 */

/**
 * FormUrlEncoded
 */
class FormUrlEncoded {
  /**
   * Encode
   *
   * @description
   * Represent an object as x-www-form-urlencoded string.
   *
   * @param {Object} data
   * @returns {string}
   */
  static encode(data) {
    let pairs = [];
    Object.keys(data).forEach(function (key) {
      pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(data[key]));
    });
    return pairs.join('&amp;');
  }
  /**
   * Decode
   *
   * @description
   * Parse a x-www-form-urlencoded into an object.
   *
   * @param {string} data
   * @returns {Object}
   */


  static decode(data) {
    let obj = {};
    data.split('&amp;').forEach(function (property) {
      let pair = property.split('=');
      let key = decodeURIComponent(pair[0]);
      let val = decodeURIComponent(pair[1]);
      obj[key] = val;
    });
    return obj;
  }

}
/**
 * Export
 */


module.exports = FormUrlEncoded;

/***/ }),
/* 62 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, Buffer) {/**
 * Dependencies
 */
const {
  URL
} = __webpack_require__(32);

const assert = __webpack_require__(26);

const {
  crypto
} = __webpack_require__(33);

const base64url = __webpack_require__(45);

const fetch = __webpack_require__(12);

const Headers = fetch.Headers ? fetch.Headers : global.Headers;

const FormUrlEncoded = __webpack_require__(61);

const IDToken = __webpack_require__(63);

const Session = __webpack_require__(64);

const onHttpError = __webpack_require__(65);

const HttpError = __webpack_require__(67);
/**
 * AuthenticationResponse
 */


class AuthenticationResponse {
  /**
   * @param rp {RelyingParty}
   * @param [redirect] {string} req.query
   * @param [body] {string} req.body.text
   * @param session {Session|Storage} req.session or localStorage or similar
   * @param params {object} hashmap
   * @param mode {string} 'query'/'fragment'/'form_post',
   *   determined in `parseResponse()`
   */
  constructor({
    rp,
    redirect,
    body,
    session,
    mode,
    params = {}
  }) {
    this.rp = rp;
    this.redirect = redirect;
    this.body = body;
    this.session = session;
    this.mode = mode;
    this.params = params;
  }
  /**
   * validateResponse
   *
   * @description
   * Authentication response validation.
   *
   * @param {string|Object} response
   *
   * @returns {Promise<span class="hljs-tag">&lt;<span class="hljs-name">Session</span>&gt;</span>}
   */


  static validateResponse(response) {
    return Promise.resolve(response).then(this.parseResponse).then(this.errorResponse).then(this.matchRequest).then(this.validateStateParam).then(this.validateResponseMode).then(this.validateResponseParams).then(this.exchangeAuthorizationCode).then(this.validateIDToken).then(Session.fromAuthResponse);
  }
  /**
   * parseResponse
   *
   * @param {object} response
   *
   * @returns {object}
   */


  static parseResponse(response) {
    let {
      redirect,
      body
    } = response; // response must be either a redirect uri or request body, but not both

    if (redirect &amp;&amp; body || !redirect &amp;&amp; !body) {
      throw new HttpError(400, 'Invalid response mode');
    } // parse redirect uri


    if (redirect) {
      let url = new URL(redirect);
      let {
        search,
        hash
      } = url;

      if (search &amp;&amp; hash || !search &amp;&amp; !hash) {
        throw new HttpError(400, 'Invalid response mode');
      }

      if (search) {
        response.params = FormUrlEncoded.decode(search.substring(1));
        response.mode = 'query';
      }

      if (hash) {
        response.params = FormUrlEncoded.decode(hash.substring(1));
        response.mode = 'fragment';
      }
    } // parse request form body


    if (body) {
      response.params = FormUrlEncoded.decode(body);
      response.mode = 'form_post';
    }

    return response;
  }
  /**
   * errorResponse
   *
   * @param {AuthenticationResponse} response
   *
   * @throws {Error} If response params include the OAuth2 'error' param,
   *   throws an error based on it.
   *
   * @returns {AuthenticationResponse} Chainable
   *
   * @todo Figure out HTTP status code (typically 400, 401 or 403)
   *   based on the OAuth2/OIDC `error` code, probably using an external library
   */


  static errorResponse(response) {
    const errorCode = response.params.error;

    if (errorCode) {
      const errorParams = {};
      errorParams['error'] = errorCode;
      errorParams['error_description'] = response.params['error_description'];
      errorParams['error_uri'] = response.params['error_uri'];
      errorParams['state'] = response.params['state'];
      const error = new Error(`AuthenticationResponse error: ${errorCode}`);
      error.info = errorParams;
      throw error;
    }

    return response;
  }
  /**
   * matchRequest
   *
   * @param {Object} response
   * @returns {Promise}
   */


  static matchRequest(response) {
    let {
      rp,
      params,
      session
    } = response;
    let state = params.state;
    let issuer = rp.provider.configuration.issuer;

    if (!state) {
      throw new Error('Missing state parameter in authentication response');
    }

    let key = `${issuer}/requestHistory/${state}`;
    let request = session[key];

    if (!request) {
      throw new Error('Mismatching state parameter in authentication response');
    }

    response.request = JSON.parse(request);
    return response;
  }
  /**
   * validateStateParam
   *
   * @param {Object} response
   * @returns {Promise}
   */


  static validateStateParam(response) {
    let octets = new Uint8Array(response.request.state);
    let encoded = response.params.state;
    return crypto.subtle.digest({
      name: 'SHA-256'
    }, octets).then(digest =&gt; {
      if (encoded !== base64url(Buffer.from(digest))) {
        throw new Error('Mismatching state parameter in authentication response');
      }

      return response;
    });
  }
  /**
   * validateResponseMode
   *
   * @param {Object} response
   * @returns {Promise}
   */


  static validateResponseMode(response) {
    if (response.request.response_type !== 'code' &amp;&amp; response.mode === 'query') {
      throw new Error('Invalid response mode');
    }

    return response;
  }
  /**
   * validateResponseParams
   *
   * @param {Object} response
   * @returns {Promise}
   */


  static validateResponseParams(response) {
    let {
      request,
      params
    } = response;
    let expectedParams = request.response_type.split(' ');

    if (expectedParams.includes('code')) {
      assert(params.code, 'Missing authorization code in authentication response'); // TODO assert novelty of code
    }

    if (expectedParams.includes('id_token')) {
      assert(params.id_token, 'Missing id_token in authentication response');
    }

    if (expectedParams.includes('token')) {
      assert(params.access_token, 'Missing access_token in authentication response');
      assert(params.token_type, 'Missing token_type in authentication response');
    }

    return response;
  }
  /**
   * exchangeAuthorizationCode
   *
   * @param {Object} response
   * @returns {Promise} response object
   */


  static exchangeAuthorizationCode(response) {
    let {
      rp,
      params,
      request
    } = response;
    let code = params.code; // only exchange the authorization code when the response type is "code"

    if (!code || request['response_type'] !== 'code') {
      return Promise.resolve(response);
    }

    let {
      provider,
      registration
    } = rp;
    let id = registration['client_id'];
    let secret = registration['client_secret']; // verify the client is not public

    if (!secret) {
      return Promise.reject(new Error('Client cannot exchange authorization code because ' + 'it is not a confidential client'));
    } // initialize token request arguments


    let endpoint = provider.configuration.token_endpoint;
    let method = 'POST'; // initialize headers

    let headers = new Headers({
      'Content-Type': 'application/x-www-form-urlencoded'
    }); // initialize the token request parameters

    let bodyContents = {
      'grant_type': 'authorization_code',
      'code': code,
      'redirect_uri': request['redirect_uri']
    }; // determine client authentication method

    let authMethod = registration['token_endpoint_auth_method'] || 'client_secret_basic'; // client secret basic authentication

    if (authMethod === 'client_secret_basic') {
      let credentials = new Buffer(`${id}:${secret}`).toString('base64');
      headers.set('Authorization', `Basic ${credentials}`);
    } // client secret post authentication


    if (authMethod === 'client_secret_post') {
      bodyContents['client_id'] = id;
      bodyContents['client_secret'] = secret;
    }

    let body = FormUrlEncoded.encode(bodyContents); // TODO
    // client_secret_jwt authentication
    // private_key_jwt
    // make the token request

    return fetch(endpoint, {
      method,
      headers,
      body
    }).then(onHttpError('Error exchanging authorization code')).then(tokenResponse =&gt; tokenResponse.json()).then(tokenResponse =&gt; {
      assert(tokenResponse['access_token'], 'Missing access_token in token response');
      assert(tokenResponse['token_type'], 'Missing token_type in token response');
      assert(tokenResponse['id_token'], 'Missing id_token in token response'); // anything else?
      // IS THIS THE RIGHT THING TO DO HERE?

      response.params = Object.assign(response.params, tokenResponse);
      return response;
    });
  }
  /**
   * validateIDToken
   *
   * @param {Object} response
   * @returns {Promise}
   */


  static validateIDToken(response) {
    // only validate the ID Token if present in the response
    if (!response.params.id_token) {
      return Promise.resolve(response);
    }

    return Promise.resolve(response).then(AuthenticationResponse.decryptIDToken).then(AuthenticationResponse.decodeIDToken).then(AuthenticationResponse.validateIssuer).then(AuthenticationResponse.validateAudience).then(AuthenticationResponse.resolveKeys).then(AuthenticationResponse.verifySignature).then(AuthenticationResponse.validateExpires).then(AuthenticationResponse.verifyNonce).then(AuthenticationResponse.validateAcr).then(AuthenticationResponse.validateAuthTime).then(AuthenticationResponse.validateAccessTokenHash).then(AuthenticationResponse.validateAuthorizationCodeHash);
  }
  /**
   * decryptIDToken
   *
   * @param {Object} response
   * @returns {Promise}
   */


  static decryptIDToken(response) {
    // TODO
    return Promise.resolve(response);
  }
  /**
   * decodeIDToken
   *
   * Note: If the `id_token` is not present in params, this method does not
   * get called (short-circuited in `validateIDToken()`).
   *
   * @param response {AuthenticationResponse}
   * @param response.params {object}
   * @param [response.params.id_token] {string} IDToken encoded as a JWT
   *
   * @returns {AuthenticationResponse} Chainable
   */


  static decodeIDToken(response) {
    let jwt = response.params.id_token;

    try {
      response.decoded = IDToken.decode(jwt);
    } catch (decodeError) {
      const error = new HttpError(400, 'Error decoding ID Token');
      error.cause = decodeError;
      error.info = {
        id_token: jwt
      };
      throw error;
    }

    return response;
  }
  /**
   * validateIssuer
   *
   * @param {Object} response
   * @returns {Promise}
   */


  static validateIssuer(response) {
    let configuration = response.rp.provider.configuration;
    let payload = response.decoded.payload; // validate issuer of token matches this relying party's provider

    if (payload.iss !== configuration.issuer) {
      throw new Error('Mismatching issuer in ID Token');
    }

    return response;
  }
  /**
   * validateAudience
   *
   * @param {Object} response
   * @returns {Promise}
   */


  static validateAudience(response) {
    let registration = response.rp.registration;
    let {
      aud,
      azp
    } = response.decoded.payload; // validate audience includes this relying party

    if (typeof aud === 'string' &amp;&amp; aud !== registration['client_id']) {
      throw new Error('Mismatching audience in id_token');
    } // validate audience includes this relying party


    if (Array.isArray(aud) &amp;&amp; !aud.includes(registration['client_id'])) {
      throw new Error('Mismatching audience in id_token');
    } // validate authorized party is present if required


    if (Array.isArray(aud) &amp;&amp; !azp) {
      throw new Error('Missing azp claim in id_token');
    } // validate authorized party is this relying party


    if (azp &amp;&amp; azp !== registration['client_id']) {
      throw new Error('Mismatching azp claim in id_token');
    }

    return response;
  }
  /**
   * resolveKeys
   *
   * @param {Object} response
   * @returns {Promise}
   */


  static resolveKeys(response) {
    let rp = response.rp;
    let provider = rp.provider;
    let decoded = response.decoded;
    let isFreshJwks = false;
    return Promise.resolve(provider.jwks).then(jwks =&gt; jwks ? jwks : (isFreshJwks = true, rp.jwks())).then(jwks =&gt; {
      if (decoded.resolveKeys(jwks)) {
        return Promise.resolve(response);
      }

      if (!isFreshJwks) {
        // The OP JWK Set cached by the RP may be stale due to key rotation by the OP.
        return rp.jwks().then(jwks =&gt; {
          if (decoded.resolveKeys(jwks)) {
            return Promise.resolve(response);
          }

          throw new Error('Cannot resolve signing key for ID Token');
        });
      }

      throw new Error('Cannot resolve signing key for ID Token');
    });
  }
  /**
   * verifySignature
   *
   * @param {Object} response
   * @returns {Promise}
   */


  static verifySignature(response) {
    let alg = response.decoded.header.alg;
    let registration = response.rp.registration;
    let expectedAlgorithm = registration['id_token_signed_response_alg'] || 'RS256'; // validate signing algorithm matches expectation

    if (alg !== expectedAlgorithm) {
      throw new Error(`Expected ID Token to be signed with ${expectedAlgorithm}`);
    }

    return response.decoded.verify().then(verified =&gt; {
      if (!verified) {
        throw new Error('Invalid ID Token signature');
      }

      return response;
    });
  }
  /**
   * validateExpires
   *
   * @param {Object} response
   * @returns {Promise}
   */


  static validateExpires(response) {
    let exp = response.decoded.payload.exp; // validate expiration of token

    if (exp <span class="hljs-tag">&lt;<span class="hljs-name">=</span> <span class="hljs-attr">Math.floor</span>(<span class="hljs-attr">Date.now</span>() / <span class="hljs-attr">1000</span>)) {
      <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>('<span class="hljs-attr">Expired</span> <span class="hljs-attr">ID</span> <span class="hljs-attr">Token</span>');
    }

    <span class="hljs-attr">return</span> <span class="hljs-attr">response</span>;
  }
  /**
   * <span class="hljs-attr">verifyNonce</span>
   *
   * @<span class="hljs-attr">param</span> {<span class="hljs-attr">Object</span>} <span class="hljs-attr">response</span>
   * @<span class="hljs-attr">returns</span> {<span class="hljs-attr">Promise</span>}
   */


  <span class="hljs-attr">static</span> <span class="hljs-attr">verifyNonce</span>(<span class="hljs-attr">response</span>) {
    <span class="hljs-attr">let</span> <span class="hljs-attr">octets</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Uint8Array</span>(<span class="hljs-attr">response.request.nonce</span>);
    <span class="hljs-attr">let</span> <span class="hljs-attr">nonce</span> = <span class="hljs-string">response.decoded.payload.nonce;</span>

    <span class="hljs-attr">if</span> (!<span class="hljs-attr">nonce</span>) {
      <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>('<span class="hljs-attr">Missing</span> <span class="hljs-attr">nonce</span> <span class="hljs-attr">in</span> <span class="hljs-attr">ID</span> <span class="hljs-attr">Token</span>');
    }

    <span class="hljs-attr">return</span> <span class="hljs-attr">crypto.subtle.digest</span>({
      <span class="hljs-attr">name:</span> '<span class="hljs-attr">SHA-256</span>'
    }, <span class="hljs-attr">octets</span>)<span class="hljs-attr">.then</span>(<span class="hljs-attr">digest</span> =&gt;</span> {
      if (nonce !== base64url(Buffer.from(digest))) {
        throw new Error('Mismatching nonce in ID Token');
      }

      return response;
    });
  }
  /**
   * validateAcr
   *
   * @param {Object} response
   * @returns {Object}
   */


  static validateAcr(response) {
    // TODO
    return response;
  }
  /**
   * validateAuthTime
   *
   * @param {Object} response
   * @returns {Promise}
   */


  static validateAuthTime(response) {
    // TODO
    return response;
  }
  /**
   * validateAccessTokenHash
   *
   * @param {Object} response
   * @returns {Promise}
   */


  static validateAccessTokenHash(response) {
    // TODO
    return response;
  }
  /**
   * validateAuthorizationCodeHash
   *
   * @param {Object} response
   * @returns {Promise}
   */


  static validateAuthorizationCodeHash(response) {
    // TODO
    return response;
  }

}
/**
 * Export
 */


module.exports = AuthenticationResponse;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(25), __webpack_require__(41).Buffer))

/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Local dependencies
 */
const {
  JWT
} = __webpack_require__(33);

const REQUIRED_CLAIMS = ['iss', 'sub', 'aud', 'exp', 'iat'];

class TokenClaimsSet {
  /**
   * Claims inherited from JWT:
   * @param iss {string} Issuer URL
   * @param sub {string} Subject identifier
   * @param aud {string|Array<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>} Audience
   * @param exp {number} Expiration (seconds since epoch, RFC3339)
   * @param iat {number} Expiration (seconds since epoch, RFC3339)
   * @param [nbf] {number} Not Before (seconds since epoch, RFC3339)
   * @param [jti] {string} JWT Identifier
   *
   * Claims specific to ID Token:
   * @param [auth_time] {number} Time when user authn occurred (RFC3339)
   * @param [nonce] {string}
   * @param [acr] {string} Authentication Context Class Reference
   * @param [amr] {string} Authentication Methods References
   * @param [azp] {string} Authorized party
   */
  constructor({
    iss,
    sub,
    aud,
    exp,
    iat,
    nbf,
    jti,
    auth_time,
    nonce,
    acr,
    amr
  } = {}) {
    this.iss = iss;
    this.sub = sub;
    this.aud = aud;
    this.exp = exp;
    this.iat = iat;
    this.nbf = nbf;
    this.jti = jti;
    this.auth_time = auth_time;
    this.nonce = nonce;
    this.acr = acr;
    this.amr = amr;
  }

  validate() {
    let valid = true;
    let error;

    try {
      for (const claim of REQUIRED_CLAIMS) {
        if (!this[claim]) {
          valid = false;
          throw new Error(`Required claim ${claim} is missing.`);
        }
      }
    } catch (validationError) {
      error = validationError;
    }

    return {
      valid,
      error
    };
  }

}
/**
 * IDToken
 */


class IDToken extends JWT {
  constructor(data = {}) {
    super(data);
    this.payload = new TokenClaimsSet(data.payload);
  }

  validate() {
    const payloadResult = this.payload.validate();

    if (!payloadResult.valid) {
      return payloadResult;
    }

    let valid = true;
    let error;
    return {
      valid,
      error
    };
  }

}
/**
 * Export
 */


module.exports = IDToken;
module.exports.TokenClaimsSet = TokenClaimsSet;

/***/ }),
/* 64 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


const fetch = __webpack_require__(12);

const onHttpError = __webpack_require__(65);

const PoPToken = __webpack_require__(66);

class Session {
  /**
   * @param options {Object}
   *
   * @param options.credentialType {string} 'access_token' or 'pop_token'
   *
   * @param options.issuer {string} Identity provider (issuer of ID/Access Token)
   *
   * @param options.authorization {object}
   * @param options.authorization.client_id {string} OIDC/OAuth2 client id
   * @param [options.authorization.id_token] {string} Compact-serialized id_token param
   * @param [options.authorization.access_token] {string} Compact-serialized access_token param
   * @param [options.authorization.refresh_token] {string} Compact-serialized refresh_token
   *
   * @param [options.sessionKey] {string} Serialized client session key generated
   *   during the Authentication Request, used to issue PoPTokens
   *
   * @param [options.idClaims] {object} Decoded/verified ID Token JWT payload
   *
   * @param [options.accessClaims] {object} Decoded/verified Access Token JWT payload
   */
  constructor(options) {
    this.credentialType = options.credentialType || 'access_token';
    this.issuer = options.issuer;
    this.authorization = options.authorization || {};
    this.sessionKey = options.sessionKey;
    this.idClaims = options.idClaims;
    this.accessClaims = options.accessClaims;
  }

  static from(options) {
    return new Session(options);
  }
  /**
   * @param response {AuthenticationResponse}
   *
   * @returns {Session} RelyingParty Session object
   */


  static fromAuthResponse(response) {
    const RelyingParty = __webpack_require__(24); // import here due to circular dep


    let idClaims = response.decoded &amp;&amp; response.decoded.payload || {};
    let {
      rp
    } = response;
    let registration = rp.registration;
    let rpAuthOptions = rp.defaults.authenticate || {};
    let credentialType = rpAuthOptions['credential_type'] || rp.defaults.popToken ? 'pop_token' : 'access_token';
    let sessionKey = response.session[RelyingParty.SESSION_PRIVATE_KEY];
    let options = {
      credentialType,
      sessionKey,
      issuer: idClaims.iss,
      idClaims,
      authorization: {
        client_id: registration['client_id'],
        access_token: response.params['access_token'],
        id_token: response.params['id_token'],
        refresh_token: response.params['refresh_token']
      }
    };
    return Session.from(options);
  }
  /**
   * Authenticated fetch() getter
   *
   * @returns {function}
   */


  get fetch() {
    /**
     * fetch() function signature
     *
     * @param url {RequestInfo|string}
     * @param options {object}
     *
     * @returns {Function<span class="hljs-tag">&lt;<span class="hljs-name">Promise</span>&lt;<span class="hljs-attr">Response</span>&gt;</span>&gt;}
     */
    return (url, options) =&gt; {
      return Promise.resolve().then(() =&gt; {
        if (this.hasCredentials()) {
          return this.fetchWithCredentials(url, options);
        } else {
          return fetch(url, options);
        }
      }).then(onHttpError('Error while fetching resource'));
    };
  }
  /**
   * bearerTokenFor
   *
   * @param url {string}
   *
   * @returns {Promise<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>}
   */


  bearerTokenFor(url) {
    switch (this.credentialType) {
      case 'pop_token':
        return PoPToken.issueFor(url, this);

      default:
        // 'access_token' etc
        return Promise.resolve(this.authorization[this.credentialType]);
    }
  }
  /**
   * hasCredentials
   *
   * @returns {boolean}
   */


  hasCredentials() {
    switch (this.credentialType) {
      case 'pop_token':
        return !!this.authorization['id_token'];

      default:
        // 'access_token' etc
        return !!this.authorization[this.credentialType];
    }
  }
  /**
   * fetchWithCredentials
   *
   * @param url {RequestInfo|string}
   * @param options {object}
   *
   * @returns {Promise<span class="hljs-tag">&lt;<span class="hljs-name">Response</span>&gt;</span>}
   */


  fetchWithCredentials(url, options = {}) {
    options.headers = options.headers || {};
    return this.bearerTokenFor(url).then(token =&gt; {
      options.headers.authorization = `Bearer ${token}`;
      return fetch(url, options);
    });
  }

}

module.exports = Session;

/***/ }),
/* 65 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * Throws an error when a fetch response status code indicates a 400 or 500
 * HTTP error. (The whatwg fetch api does not normally reject on http error
 * responses).
 *
 * Usage:
 *
 * ```
 * return fetch(url)
 *   .then(onHttpError('Error while fetching resource')
 *   .catch(err =&gt; console.log(err))
 *
 * // -&gt; 'Error while fetching resource: 404 Not Found' error
 * // if a 404 response is encountered
 * ```
 *
 * @param [message] {string} Optional error message to clarify context
 *
 * @throws {Error} For http status codes &gt; 300
 *
 * @return {Object} fetch response object (passed through if no error)
 */

function onHttpError(message = 'fetch error') {
  return response =&gt; {
    if (response.status &gt;= 200 &amp;&amp; response.status <span class="hljs-tag">&lt; <span class="hljs-attr">300</span>) {
      <span class="hljs-attr">return</span> <span class="hljs-attr">response</span>;
    }

    <span class="hljs-attr">let</span> <span class="hljs-attr">errorMessage</span> = `${<span class="hljs-attr">message</span>}<span class="hljs-attr">:</span> ${<span class="hljs-attr">response.status</span>} ${<span class="hljs-attr">response.statusText</span>}`;
    <span class="hljs-attr">let</span> <span class="hljs-attr">error</span> = <span class="hljs-string">new</span> <span class="hljs-attr">Error</span>(<span class="hljs-attr">errorMessage</span>);
    <span class="hljs-attr">error.response</span> = <span class="hljs-string">response;</span>
    <span class="hljs-attr">error.statusCode</span> = <span class="hljs-string">response.status;</span>
    <span class="hljs-attr">throw</span> <span class="hljs-attr">error</span>;
  };
}

<span class="hljs-attr">module.exports</span> = <span class="hljs-string">onHttpError;</span>

/***/ }),
/* <span class="hljs-attr">66</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">exports</span>, <span class="hljs-attr">__webpack_require__</span>) {

"<span class="hljs-attr">use</span> <span class="hljs-attr">strict</span>";


<span class="hljs-attr">const</span> {
  <span class="hljs-attr">URL</span>
} = <span class="hljs-string">__webpack_require__(32);</span>

<span class="hljs-attr">const</span> {
  <span class="hljs-attr">JWT</span>,
  <span class="hljs-attr">JWK</span>
} = <span class="hljs-string">__webpack_require__(33);</span>

<span class="hljs-attr">const</span> <span class="hljs-attr">DEFAULT_MAX_AGE</span> = <span class="hljs-string">3600;</span> // <span class="hljs-attr">Default</span> <span class="hljs-attr">token</span> <span class="hljs-attr">expiration</span>, <span class="hljs-attr">in</span> <span class="hljs-attr">seconds</span>

<span class="hljs-attr">class</span> <span class="hljs-attr">PoPToken</span> <span class="hljs-attr">extends</span> <span class="hljs-attr">JWT</span> {
  /**
   * @<span class="hljs-attr">param</span> <span class="hljs-attr">resourceServerUri</span> {<span class="hljs-attr">string</span>} <span class="hljs-attr">RS</span> <span class="hljs-attr">URI</span> <span class="hljs-attr">for</span> <span class="hljs-attr">which</span> <span class="hljs-attr">this</span> <span class="hljs-attr">token</span> <span class="hljs-attr">is</span> <span class="hljs-attr">intended</span>
   *
   * @<span class="hljs-attr">param</span> <span class="hljs-attr">session</span> {<span class="hljs-attr">Session</span>}
   * @<span class="hljs-attr">param</span> <span class="hljs-attr">session.sessionKey</span> {<span class="hljs-attr">string</span>}
   * @<span class="hljs-attr">param</span> <span class="hljs-attr">session.authorization.client_id</span> {<span class="hljs-attr">string</span>}
   * @<span class="hljs-attr">param</span> <span class="hljs-attr">session.authorization.id_token</span> {<span class="hljs-attr">string</span>}
   *
   * @<span class="hljs-attr">returns</span> {<span class="hljs-attr">Promise</span>&lt;<span class="hljs-attr">string</span>&gt;</span>} PoPToken, encoded as compact JWT
   */
  static issueFor(resourceServerUri, session) {
    if (!resourceServerUri) {
      throw new Error('Cannot issue PoPToken - missing resource server URI');
    }

    if (!session.sessionKey) {
      throw new Error('Cannot issue PoPToken - missing session key');
    }

    if (!session.authorization.id_token) {
      throw new Error('Cannot issue PoPToken - missing id token');
    }

    let jwk = JSON.parse(session.sessionKey);
    return JWK.importKey(jwk).then(importedSessionJwk =&gt; {
      let options = {
        aud: new URL(resourceServerUri).origin,
        key: importedSessionJwk,
        iss: session.authorization.client_id,
        id_token: session.authorization.id_token
      };
      return PoPToken.issue(options);
    }).then(jwt =&gt; {
      return jwt.encode();
    });
  }
  /**
   * issue
   *
   * @param options {Object}
   * @param options.iss {string} Token issuer (RP client_id)
   * @param options.aud {string|Array<span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>} Audience for the token
   *   (such as the Resource Server url)
   * @param options.key {JWK} Proof of Possession (private) signing key, see
   *   https://tools.ietf.org/html/rfc7800#section-3.1
   *
   * @param options.id_token {string} JWT compact encoded ID Token
   *
   * Optional:
   * @param [options.iat] {number} Issued at timestamp (in seconds)
   * @param [options.max] {number} Max token lifetime in seconds
   *
   * @returns {PoPToken} Proof of Possession Token (JWT instance)
   */


  static issue(options) {
    let {
      aud,
      iss,
      key
    } = options;
    let alg = key.alg;
    let iat = options.iat || Math.floor(Date.now() / 1000);
    let max = options.max || DEFAULT_MAX_AGE;
    let exp = iat + max; // token expiration

    let header = {
      alg
    };
    let payload = {
      iss,
      aud,
      exp,
      iat,
      id_token: options.id_token,
      token_type: 'pop'
    };
    let jwt = new PoPToken({
      header,
      payload,
      key: key.cryptoKey
    }, {
      filter: false
    });
    return jwt;
  }

}

module.exports = PoPToken;

/***/ }),
/* 67 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = HttpError
var StandardError = __webpack_require__(68)
var STATUS_CODE_TO_NAME = __webpack_require__(69)
var STATUS_NAME_TO_CODE = exports

function HttpError(code, msg, props) {
  if (typeof code == "string") code = STATUS_NAME_TO_CODE[code]
  if (typeof code != "number") throw new TypeError("Non-numeric HTTP code")
  if (typeof msg == "object" &amp;&amp; msg != null) { props = msg; msg = null }
  StandardError.call(this, msg || STATUS_CODE_TO_NAME[code], props)
  this.code = code
}

HttpError.prototype = Object.create(StandardError.prototype, {
  constructor: {value: HttpError, configurable: true, writable: true}
})

// Set name explicitly for when the code gets minified.
HttpError.prototype.name = "HttpError"

Object.defineProperties(HttpError.prototype, {
  statusCode: alias("code"),
  statusMessage: alias("message"),

  status: {
    configurable: true,
    get: function() { return this.code },
    set: function(value) {
      Object.defineProperty(this, "status", {
        value: value, configurable: true, enumerable: true, writable: true
      })
    }
  }
})

HttpError.prototype.toString = function() {
  return this.name + ": " + this.code + " " + this.message
}

for (var code in STATUS_CODE_TO_NAME) {
  var name = STATUS_CODE_TO_NAME[code]
  exports[name.replace("'", "").replace(/[- ]/g, "_").toUpperCase()] = +code
}

function alias(name) {
  return {
    configurable: true,
    get: function() { return this[name] },
    set: function(value) { return this[name] = value }
  }
}


/***/ }),
/* 68 */
/***/ (function(module, exports) {

var has = Object.hasOwnProperty
var proto = Object.getPrototypeOf
var trace = Error.captureStackTrace
module.exports = StandardError

function StandardError(msg, props) {
  // Let all properties be enumerable for easier serialization.
  if (msg &amp;&amp; typeof msg == "object") props = msg, msg = undefined
  else this.message = msg

  // Name has to be an own property (or on the prototype a single step up) for
  // the stack to be printed with the correct name.
  if (props) for (var key in props) this[key] = props[key]
  if (!has.call(this, "name"))
    this.name = has.call(proto(this), "name")? this.name : this.constructor.name

  if (trace &amp;&amp; !("stack" in this)) trace(this, this.constructor)
}

StandardError.prototype = Object.create(Error.prototype, {
  constructor: {value: StandardError, configurable: true, writable: true}
})

// Set name explicitly for when the code gets minified.
StandardError.prototype.name = "StandardError"


/***/ }),
/* 69 */
/***/ (function(module) {

module.exports = JSON.parse("{\"100\":\"Continue\",\"101\":\"Switching Protocols\",\"102\":\"Processing\",\"200\":\"OK\",\"201\":\"Created\",\"202\":\"Accepted\",\"203\":\"Non-Authoritative Information\",\"204\":\"No Content\",\"205\":\"Reset Content\",\"206\":\"Partial Content\",\"207\":\"Multi-Status\",\"208\":\"Already Reported\",\"226\":\"IM Used\",\"300\":\"Multiple Choices\",\"301\":\"Moved Permanently\",\"302\":\"Found\",\"303\":\"See Other\",\"304\":\"Not Modified\",\"305\":\"Use Proxy\",\"307\":\"Temporary Redirect\",\"308\":\"Permanent Redirect\",\"400\":\"Bad Request\",\"401\":\"Unauthorized\",\"402\":\"Payment Required\",\"403\":\"Forbidden\",\"404\":\"Not Found\",\"405\":\"Method Not Allowed\",\"406\":\"Not Acceptable\",\"407\":\"Proxy Authentication Required\",\"408\":\"Request Timeout\",\"409\":\"Conflict\",\"410\":\"Gone\",\"411\":\"Length Required\",\"412\":\"Precondition Failed\",\"413\":\"Payload Too Large\",\"414\":\"URI Too Long\",\"415\":\"Unsupported Media Type\",\"416\":\"Range Not Satisfiable\",\"417\":\"Expectation Failed\",\"418\":\"I'm a teapot\",\"421\":\"Misdirected Request\",\"422\":\"Unprocessable Entity\",\"423\":\"Locked\",\"424\":\"Failed Dependency\",\"425\":\"Unordered Collection\",\"426\":\"Upgrade Required\",\"428\":\"Precondition Required\",\"429\":\"Too Many Requests\",\"431\":\"Request Header Fields Too Large\",\"500\":\"Internal Server Error\",\"501\":\"Not Implemented\",\"502\":\"Bad Gateway\",\"503\":\"Service Unavailable\",\"504\":\"Gateway Timeout\",\"505\":\"HTTP Version Not Supported\",\"506\":\"Variant Also Negotiates\",\"507\":\"Insufficient Storage\",\"508\":\"Loop Detected\",\"509\":\"Bandwidth Limit Exceeded\",\"510\":\"Not Extended\",\"511\":\"Network Authentication Required\"}");

/***/ }),
/* 70 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "openIdpPopup", function() { return openIdpPopup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "obtainSession", function() { return obtainSession; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "popupHandler", function() { return popupHandler; });
/* harmony import */ var _ipc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);
/* harmony import */ var _url_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13);


function openIdpPopup(popupUri) {
  const width = 650;
  const height = 400;
  const left = window.screenX + (window.innerWidth - width) / 2;
  const top = window.screenY + (window.innerHeight - height) / 2;
  const settings = "width=".concat(width, ",height=").concat(height, ",left=").concat(left, ",top=").concat(top);
  return window.open(popupUri, 'solid-auth-client', settings);
}
function obtainSession(store, popup, options) {
  return new Promise((resolve, reject) =&gt; {
    const popupServer = new _ipc__WEBPACK_IMPORTED_MODULE_0__["Server"](popup, Object(_url_util__WEBPACK_IMPORTED_MODULE_1__["originOf"])(options.popupUri || ''), popupHandler(store, options, session =&gt; {
      popupServer.stop();
      resolve(session);
    }));
    popupServer.start();
  });
}
function popupHandler(store, {
  popupUri,
  callbackUri
}, foundSessionCb) {
  return async (method, ...args) =&gt; {
    switch (method) {
      // Origin
      case 'getAppOrigin':
        return window.location.origin;
      // Storage

      case 'storage/getItem':
        return store.getItem(...args);

      case 'storage/setItem':
        return store.setItem(...args);

      case 'storage/removeItem':
        return store.removeItem(...args);
      // Login

      case 'getLoginOptions':
        return {
          popupUri,
          callbackUri
        };

      case 'foundSession':
        foundSessionCb(...args);
    }
  };
}

/***/ }),
/* 71 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return IdpSelect; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2);
/* harmony import */ var _src__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8);
/* harmony import */ var _src_ipc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5);
/* harmony import */ var _src_storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6);
/* harmony import */ var _IdpSelect_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(72);
/* harmony import */ var _IdpSelect_css__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_IdpSelect_css__WEBPACK_IMPORTED_MODULE_5__);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i <span class="hljs-tag">&lt; <span class="hljs-attr">arguments.length</span>; <span class="hljs-attr">i</span>++) { <span class="hljs-attr">var</span> <span class="hljs-attr">source</span> = <span class="hljs-string">arguments[i]</span> != <span class="hljs-string">null</span> ? <span class="hljs-attr">arguments</span>[<span class="hljs-attr">i</span>] <span class="hljs-attr">:</span> {}; <span class="hljs-attr">if</span> (<span class="hljs-attr">i</span> % <span class="hljs-attr">2</span>) { <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">source</span>), <span class="hljs-attr">true</span>)<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) { <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span>()(<span class="hljs-attr">target</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">source</span>[<span class="hljs-attr">key</span>]); }); } <span class="hljs-attr">else</span> <span class="hljs-attr">if</span> (<span class="hljs-attr">Object.getOwnPropertyDescriptors</span>) { <span class="hljs-attr">Object.defineProperties</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">Object.getOwnPropertyDescriptors</span>(<span class="hljs-attr">source</span>)); } <span class="hljs-attr">else</span> { <span class="hljs-attr">ownKeys</span>(<span class="hljs-attr">Object</span>(<span class="hljs-attr">source</span>))<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) { <span class="hljs-attr">Object.defineProperty</span>(<span class="hljs-attr">target</span>, <span class="hljs-attr">key</span>, <span class="hljs-attr">Object.getOwnPropertyDescriptor</span>(<span class="hljs-attr">source</span>, <span class="hljs-attr">key</span>)); }); } } <span class="hljs-attr">return</span> <span class="hljs-attr">target</span>; }






<span class="hljs-attr">class</span> <span class="hljs-attr">IdpSelect</span> <span class="hljs-attr">extends</span> <span class="hljs-attr">react__WEBPACK_IMPORTED_MODULE_1__</span>["<span class="hljs-attr">default</span>"]<span class="hljs-attr">.Component</span> {
  <span class="hljs-attr">constructor</span>(<span class="hljs-attr">...args</span>) {
    <span class="hljs-attr">super</span>(<span class="hljs-attr">...args</span>);

    <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span>()(<span class="hljs-attr">this</span>, "<span class="hljs-attr">state</span>", {
      <span class="hljs-attr">idp:</span> '',
      <span class="hljs-attr">error:</span> <span class="hljs-attr">null</span>
    });

    <span class="hljs-attr">_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default</span>()(<span class="hljs-attr">this</span>, "<span class="hljs-attr">handleChangeIdp</span>", <span class="hljs-attr">event</span> =&gt;</span> {
      let idp = event.target.value; // Auto-prepend https: if the user is not typing it

      if (!/^($|h$|ht)/.test(idp)) idp = "https://".concat(idp);
      this.setState({
        idp
      });
    });

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "handleBlurIdp", event =&gt; {
      let idp = event.target.value; // Auto-prepend https: if not present

      if (!/^(https?:\/\/|$)/.test(idp)) idp = idp.replace(/^([a-z]*:\/*)?/, 'https://');
      this.setState({
        idp
      });
    });

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "handleSelectIdp", idp =&gt; async event =&gt; {
      event.preventDefault();
      this.setState({
        idp
      });

      if (!window.opener) {
        console.warn('No parent window');
        this.setState({
          error: "Couldn't find the application window.  " + 'Try closing this popup window and logging in again.'
        });
        return;
      }

      const loginOptions = _objectSpread(_objectSpread({}, await this.getClient().request('getLoginOptions')), {}, {
        storage: this.getStorage()
      });

      await _src__WEBPACK_IMPORTED_MODULE_2__["default"].login(idp, loginOptions);
    });
  }

  getClient() {
    return new _src_ipc__WEBPACK_IMPORTED_MODULE_3__["Client"](window.opener, this.props.appOrigin);
  }

  getStorage() {
    return Object(_src_storage__WEBPACK_IMPORTED_MODULE_4__["ipcStorage"])(this.getClient());
  }

  async componentDidMount() {
    const {
      rpConfig
    } = await Object(_src_storage__WEBPACK_IMPORTED_MODULE_4__["getData"])(this.getStorage());

    if (rpConfig) {
      this.setState({
        idp: rpConfig.provider.url
      });
    }

    this.idpInput.focus();
  }

  render() {
    const {
      appName,
      idps
    } = this.props;
    const {
      idp,
      error
    } = this.state;
    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement("h1", null, "Log in to ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement("span", {
      className: "app-name"
    }, appName)), error &amp;&amp; /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement("p", {
      className: "error"
    }, error), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement("p", null, "Please enter your WebID or the URL of your identity provider:"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement("form", {
      className: "custom-idp",
      onSubmit: this.handleSelectIdp(idp)
    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement("input", {
      ref: input =&gt; this.idpInput = input,
      type: "url",
      placeholder: "https://my-identity.provider",
      value: idp,
      onChange: this.handleChangeIdp,
      onBlur: this.handleBlurIdp
    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement("button", {
      type: "submit",
      disabled: !idp
    }, "Go")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement("p", null, "Or pick an identity provider from the list below:"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement("div", {
      className: "idp-list"
    }, idps.map(idp =&gt; /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1__["default"].createElement("button", {
      className: "idp",
      onClick: this.handleSelectIdp(idp.url),
      key: idp.url
    }, idp.displayName))));
  }

}

/***/ }),
/* 72 */
/***/ (function(module, exports, __webpack_require__) {

var api = __webpack_require__(73);
            var content = __webpack_require__(74);

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

/***/ }),
/* 73 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <span class="hljs-tag">&lt;<span class="hljs-name">=</span> <span class="hljs-attr">9</span> <span class="hljs-attr">as</span> <span class="hljs-attr">proposed</span> <span class="hljs-attr">by</span> <span class="hljs-attr">Browserhacks</span>
      // @<span class="hljs-attr">see</span> <span class="hljs-attr">http:</span>//<span class="hljs-attr">browserhacks.com</span>/#<span class="hljs-attr">hack-e71d8692f65334173fee715c222cb805</span>
      // <span class="hljs-attr">Tests</span> <span class="hljs-attr">for</span> <span class="hljs-attr">existence</span> <span class="hljs-attr">of</span> <span class="hljs-attr">standard</span> <span class="hljs-attr">globals</span> <span class="hljs-attr">is</span> <span class="hljs-attr">to</span> <span class="hljs-attr">allow</span> <span class="hljs-attr">style-loader</span>
      // <span class="hljs-attr">to</span> <span class="hljs-attr">operate</span> <span class="hljs-attr">correctly</span> <span class="hljs-attr">into</span> <span class="hljs-attr">non-standard</span> <span class="hljs-attr">environments</span>
      // @<span class="hljs-attr">see</span> <span class="hljs-attr">https:</span>//<span class="hljs-attr">github.com</span>/<span class="hljs-attr">webpack-contrib</span>/<span class="hljs-attr">style-loader</span>/<span class="hljs-attr">issues</span>/<span class="hljs-attr">177</span>
      <span class="hljs-attr">memo</span> = <span class="hljs-string">Boolean(window</span> &amp;&amp; <span class="hljs-attr">document</span> &amp;&amp; <span class="hljs-attr">document.all</span> &amp;&amp; !<span class="hljs-attr">window.atob</span>);
    }

    <span class="hljs-attr">return</span> <span class="hljs-attr">memo</span>;
  };
}();

<span class="hljs-attr">var</span> <span class="hljs-attr">getTarget</span> = <span class="hljs-string">function</span> <span class="hljs-attr">getTarget</span>() {
  <span class="hljs-attr">var</span> <span class="hljs-attr">memo</span> = <span class="hljs-string">{};</span>
  <span class="hljs-attr">return</span> <span class="hljs-attr">function</span> <span class="hljs-attr">memorize</span>(<span class="hljs-attr">target</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">memo</span>[<span class="hljs-attr">target</span>] === <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-attr">var</span> <span class="hljs-attr">styleTarget</span> = <span class="hljs-string">document.querySelector(target);</span> // <span class="hljs-attr">Special</span> <span class="hljs-attr">case</span> <span class="hljs-attr">to</span> <span class="hljs-attr">return</span> <span class="hljs-attr">head</span> <span class="hljs-attr">of</span> <span class="hljs-attr">iframe</span> <span class="hljs-attr">instead</span> <span class="hljs-attr">of</span> <span class="hljs-attr">iframe</span> <span class="hljs-attr">itself</span>

      <span class="hljs-attr">if</span> (<span class="hljs-attr">window.HTMLIFrameElement</span> &amp;&amp; <span class="hljs-attr">styleTarget</span> <span class="hljs-attr">instanceof</span> <span class="hljs-attr">window.HTMLIFrameElement</span>) {
        <span class="hljs-attr">try</span> {
          // <span class="hljs-attr">This</span> <span class="hljs-attr">will</span> <span class="hljs-attr">throw</span> <span class="hljs-attr">an</span> <span class="hljs-attr">exception</span> <span class="hljs-attr">if</span> <span class="hljs-attr">access</span> <span class="hljs-attr">to</span> <span class="hljs-attr">iframe</span> <span class="hljs-attr">is</span> <span class="hljs-attr">blocked</span>
          // <span class="hljs-attr">due</span> <span class="hljs-attr">to</span> <span class="hljs-attr">cross-origin</span> <span class="hljs-attr">restrictions</span>
          <span class="hljs-attr">styleTarget</span> = <span class="hljs-string">styleTarget.contentDocument.head;</span>
        } <span class="hljs-attr">catch</span> (<span class="hljs-attr">e</span>) {
          // <span class="hljs-attr">istanbul</span> <span class="hljs-attr">ignore</span> <span class="hljs-attr">next</span>
          <span class="hljs-attr">styleTarget</span> = <span class="hljs-string">null;</span>
        }
      }

      <span class="hljs-attr">memo</span>[<span class="hljs-attr">target</span>] = <span class="hljs-string">styleTarget;</span>
    }

    <span class="hljs-attr">return</span> <span class="hljs-attr">memo</span>[<span class="hljs-attr">target</span>];
  };
}();

<span class="hljs-attr">var</span> <span class="hljs-attr">stylesInDom</span> = <span class="hljs-string">[];</span>

<span class="hljs-attr">function</span> <span class="hljs-attr">getIndexByIdentifier</span>(<span class="hljs-attr">identifier</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">result</span> = <span class="hljs-string">-1;</span>

  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">stylesInDom.length</span>; <span class="hljs-attr">i</span>++) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">stylesInDom</span>[<span class="hljs-attr">i</span>]<span class="hljs-attr">.identifier</span> === <span class="hljs-string">identifier)</span> {
      <span class="hljs-attr">result</span> = <span class="hljs-string">i;</span>
      <span class="hljs-attr">break</span>;
    }
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">result</span>;
}

<span class="hljs-attr">function</span> <span class="hljs-attr">modulesToDom</span>(<span class="hljs-attr">list</span>, <span class="hljs-attr">options</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">idCountMap</span> = <span class="hljs-string">{};</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">identifiers</span> = <span class="hljs-string">[];</span>

  <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">list.length</span>; <span class="hljs-attr">i</span>++) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">item</span> = <span class="hljs-string">list[i];</span>
    <span class="hljs-attr">var</span> <span class="hljs-attr">id</span> = <span class="hljs-string">options.base</span> ? <span class="hljs-attr">item</span>[<span class="hljs-attr">0</span>] + <span class="hljs-attr">options.base</span> <span class="hljs-attr">:</span> <span class="hljs-attr">item</span>[<span class="hljs-attr">0</span>];
    <span class="hljs-attr">var</span> <span class="hljs-attr">count</span> = <span class="hljs-string">idCountMap[id]</span> || <span class="hljs-attr">0</span>;
    <span class="hljs-attr">var</span> <span class="hljs-attr">identifier</span> = <span class="hljs-string">""</span><span class="hljs-attr">.concat</span>(<span class="hljs-attr">id</span>, " ")<span class="hljs-attr">.concat</span>(<span class="hljs-attr">count</span>);
    <span class="hljs-attr">idCountMap</span>[<span class="hljs-attr">id</span>] = <span class="hljs-string">count</span> + <span class="hljs-attr">1</span>;
    <span class="hljs-attr">var</span> <span class="hljs-attr">index</span> = <span class="hljs-string">getIndexByIdentifier(identifier);</span>
    <span class="hljs-attr">var</span> <span class="hljs-attr">obj</span> = <span class="hljs-string">{</span>
      <span class="hljs-attr">css:</span> <span class="hljs-attr">item</span>[<span class="hljs-attr">1</span>],
      <span class="hljs-attr">media:</span> <span class="hljs-attr">item</span>[<span class="hljs-attr">2</span>],
      <span class="hljs-attr">sourceMap:</span> <span class="hljs-attr">item</span>[<span class="hljs-attr">3</span>]
    };

    <span class="hljs-attr">if</span> (<span class="hljs-attr">index</span> !== <span class="hljs-string">-1)</span> {
      <span class="hljs-attr">stylesInDom</span>[<span class="hljs-attr">index</span>]<span class="hljs-attr">.references</span>++;
      <span class="hljs-attr">stylesInDom</span>[<span class="hljs-attr">index</span>]<span class="hljs-attr">.updater</span>(<span class="hljs-attr">obj</span>);
    } <span class="hljs-attr">else</span> {
      <span class="hljs-attr">stylesInDom.push</span>({
        <span class="hljs-attr">identifier:</span> <span class="hljs-attr">identifier</span>,
        <span class="hljs-attr">updater:</span> <span class="hljs-attr">addStyle</span>(<span class="hljs-attr">obj</span>, <span class="hljs-attr">options</span>),
        <span class="hljs-attr">references:</span> <span class="hljs-attr">1</span>
      });
    }

    <span class="hljs-attr">identifiers.push</span>(<span class="hljs-attr">identifier</span>);
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">identifiers</span>;
}

<span class="hljs-attr">function</span> <span class="hljs-attr">insertStyleElement</span>(<span class="hljs-attr">options</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">style</span> = <span class="hljs-string">document.createElement(</span>'<span class="hljs-attr">style</span>');
  <span class="hljs-attr">var</span> <span class="hljs-attr">attributes</span> = <span class="hljs-string">options.attributes</span> || {};

  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">attributes.nonce</span> === <span class="hljs-string">'undefined'</span>) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">nonce</span> =  <span class="hljs-string">true</span> ? <span class="hljs-attr">__webpack_require__.nc</span> <span class="hljs-attr">:</span> <span class="hljs-attr">undefined</span>;

    <span class="hljs-attr">if</span> (<span class="hljs-attr">nonce</span>) {
      <span class="hljs-attr">attributes.nonce</span> = <span class="hljs-string">nonce;</span>
    }
  }

  <span class="hljs-attr">Object.keys</span>(<span class="hljs-attr">attributes</span>)<span class="hljs-attr">.forEach</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">key</span>) {
    <span class="hljs-attr">style.setAttribute</span>(<span class="hljs-attr">key</span>, <span class="hljs-attr">attributes</span>[<span class="hljs-attr">key</span>]);
  });

  <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">options.insert</span> === <span class="hljs-string">'function'</span>) {
    <span class="hljs-attr">options.insert</span>(<span class="hljs-attr">style</span>);
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">var</span> <span class="hljs-attr">target</span> = <span class="hljs-string">getTarget(options.insert</span> || '<span class="hljs-attr">head</span>');

    <span class="hljs-attr">if</span> (!<span class="hljs-attr">target</span>) {
      <span class="hljs-attr">throw</span> <span class="hljs-attr">new</span> <span class="hljs-attr">Error</span>("<span class="hljs-attr">Couldn</span>'<span class="hljs-attr">t</span> <span class="hljs-attr">find</span> <span class="hljs-attr">a</span> <span class="hljs-attr">style</span> <span class="hljs-attr">target.</span> <span class="hljs-attr">This</span> <span class="hljs-attr">probably</span> <span class="hljs-attr">means</span> <span class="hljs-attr">that</span> <span class="hljs-attr">the</span> <span class="hljs-attr">value</span> <span class="hljs-attr">for</span> <span class="hljs-attr">the</span> '<span class="hljs-attr">insert</span>' <span class="hljs-attr">parameter</span> <span class="hljs-attr">is</span> <span class="hljs-attr">invalid.</span>");
    }

    <span class="hljs-attr">target.appendChild</span>(<span class="hljs-attr">style</span>);
  }

  <span class="hljs-attr">return</span> <span class="hljs-attr">style</span>;
}

<span class="hljs-attr">function</span> <span class="hljs-attr">removeStyleElement</span>(<span class="hljs-attr">style</span>) {
  // <span class="hljs-attr">istanbul</span> <span class="hljs-attr">ignore</span> <span class="hljs-attr">if</span>
  <span class="hljs-attr">if</span> (<span class="hljs-attr">style.parentNode</span> === <span class="hljs-string">null)</span> {
    <span class="hljs-attr">return</span> <span class="hljs-attr">false</span>;
  }

  <span class="hljs-attr">style.parentNode.removeChild</span>(<span class="hljs-attr">style</span>);
}
/* <span class="hljs-attr">istanbul</span> <span class="hljs-attr">ignore</span> <span class="hljs-attr">next</span>  */


<span class="hljs-attr">var</span> <span class="hljs-attr">replaceText</span> = <span class="hljs-string">function</span> <span class="hljs-attr">replaceText</span>() {
  <span class="hljs-attr">var</span> <span class="hljs-attr">textStore</span> = <span class="hljs-string">[];</span>
  <span class="hljs-attr">return</span> <span class="hljs-attr">function</span> <span class="hljs-attr">replace</span>(<span class="hljs-attr">index</span>, <span class="hljs-attr">replacement</span>) {
    <span class="hljs-attr">textStore</span>[<span class="hljs-attr">index</span>] = <span class="hljs-string">replacement;</span>
    <span class="hljs-attr">return</span> <span class="hljs-attr">textStore.filter</span>(<span class="hljs-attr">Boolean</span>)<span class="hljs-attr">.join</span>('\<span class="hljs-attr">n</span>');
  };
}();

<span class="hljs-attr">function</span> <span class="hljs-attr">applyToSingletonTag</span>(<span class="hljs-attr">style</span>, <span class="hljs-attr">index</span>, <span class="hljs-attr">remove</span>, <span class="hljs-attr">obj</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">css</span> = <span class="hljs-string">remove</span> ? '' <span class="hljs-attr">:</span> <span class="hljs-attr">obj.media</span> ? "@<span class="hljs-attr">media</span> "<span class="hljs-attr">.concat</span>(<span class="hljs-attr">obj.media</span>, " {")<span class="hljs-attr">.concat</span>(<span class="hljs-attr">obj.css</span>, "}") <span class="hljs-attr">:</span> <span class="hljs-attr">obj.css</span>; // <span class="hljs-attr">For</span> <span class="hljs-attr">old</span> <span class="hljs-attr">IE</span>

  /* <span class="hljs-attr">istanbul</span> <span class="hljs-attr">ignore</span> <span class="hljs-attr">if</span>  */

  <span class="hljs-attr">if</span> (<span class="hljs-attr">style.styleSheet</span>) {
    <span class="hljs-attr">style.styleSheet.cssText</span> = <span class="hljs-string">replaceText(index,</span> <span class="hljs-attr">css</span>);
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">var</span> <span class="hljs-attr">cssNode</span> = <span class="hljs-string">document.createTextNode(css);</span>
    <span class="hljs-attr">var</span> <span class="hljs-attr">childNodes</span> = <span class="hljs-string">style.childNodes;</span>

    <span class="hljs-attr">if</span> (<span class="hljs-attr">childNodes</span>[<span class="hljs-attr">index</span>]) {
      <span class="hljs-attr">style.removeChild</span>(<span class="hljs-attr">childNodes</span>[<span class="hljs-attr">index</span>]);
    }

    <span class="hljs-attr">if</span> (<span class="hljs-attr">childNodes.length</span>) {
      <span class="hljs-attr">style.insertBefore</span>(<span class="hljs-attr">cssNode</span>, <span class="hljs-attr">childNodes</span>[<span class="hljs-attr">index</span>]);
    } <span class="hljs-attr">else</span> {
      <span class="hljs-attr">style.appendChild</span>(<span class="hljs-attr">cssNode</span>);
    }
  }
}

<span class="hljs-attr">function</span> <span class="hljs-attr">applyToTag</span>(<span class="hljs-attr">style</span>, <span class="hljs-attr">options</span>, <span class="hljs-attr">obj</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">css</span> = <span class="hljs-string">obj.css;</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">media</span> = <span class="hljs-string">obj.media;</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">sourceMap</span> = <span class="hljs-string">obj.sourceMap;</span>

  <span class="hljs-attr">if</span> (<span class="hljs-attr">media</span>) {
    <span class="hljs-attr">style.setAttribute</span>('<span class="hljs-attr">media</span>', <span class="hljs-attr">media</span>);
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">style.removeAttribute</span>('<span class="hljs-attr">media</span>');
  }

  <span class="hljs-attr">if</span> (<span class="hljs-attr">sourceMap</span> &amp;&amp; <span class="hljs-attr">typeof</span> <span class="hljs-attr">btoa</span> !== <span class="hljs-string">'undefined'</span>) {
    <span class="hljs-attr">css</span> += <span class="hljs-string">"\n/*# sourceMappingURL=data:application/json;base64,"</span><span class="hljs-attr">.concat</span>(<span class="hljs-attr">btoa</span>(<span class="hljs-attr">unescape</span>(<span class="hljs-attr">encodeURIComponent</span>(<span class="hljs-attr">JSON.stringify</span>(<span class="hljs-attr">sourceMap</span>)))), " */");
  } // <span class="hljs-attr">For</span> <span class="hljs-attr">old</span> <span class="hljs-attr">IE</span>

  /* <span class="hljs-attr">istanbul</span> <span class="hljs-attr">ignore</span> <span class="hljs-attr">if</span>  */


  <span class="hljs-attr">if</span> (<span class="hljs-attr">style.styleSheet</span>) {
    <span class="hljs-attr">style.styleSheet.cssText</span> = <span class="hljs-string">css;</span>
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">while</span> (<span class="hljs-attr">style.firstChild</span>) {
      <span class="hljs-attr">style.removeChild</span>(<span class="hljs-attr">style.firstChild</span>);
    }

    <span class="hljs-attr">style.appendChild</span>(<span class="hljs-attr">document.createTextNode</span>(<span class="hljs-attr">css</span>));
  }
}

<span class="hljs-attr">var</span> <span class="hljs-attr">singleton</span> = <span class="hljs-string">null;</span>
<span class="hljs-attr">var</span> <span class="hljs-attr">singletonCounter</span> = <span class="hljs-string">0;</span>

<span class="hljs-attr">function</span> <span class="hljs-attr">addStyle</span>(<span class="hljs-attr">obj</span>, <span class="hljs-attr">options</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">style</span>;
  <span class="hljs-attr">var</span> <span class="hljs-attr">update</span>;
  <span class="hljs-attr">var</span> <span class="hljs-attr">remove</span>;

  <span class="hljs-attr">if</span> (<span class="hljs-attr">options.singleton</span>) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">styleIndex</span> = <span class="hljs-string">singletonCounter++;</span>
    <span class="hljs-attr">style</span> = <span class="hljs-string">singleton</span> || (<span class="hljs-attr">singleton</span> = <span class="hljs-string">insertStyleElement(options));</span>
    <span class="hljs-attr">update</span> = <span class="hljs-string">applyToSingletonTag.bind(null,</span> <span class="hljs-attr">style</span>, <span class="hljs-attr">styleIndex</span>, <span class="hljs-attr">false</span>);
    <span class="hljs-attr">remove</span> = <span class="hljs-string">applyToSingletonTag.bind(null,</span> <span class="hljs-attr">style</span>, <span class="hljs-attr">styleIndex</span>, <span class="hljs-attr">true</span>);
  } <span class="hljs-attr">else</span> {
    <span class="hljs-attr">style</span> = <span class="hljs-string">insertStyleElement(options);</span>
    <span class="hljs-attr">update</span> = <span class="hljs-string">applyToTag.bind(null,</span> <span class="hljs-attr">style</span>, <span class="hljs-attr">options</span>);

    <span class="hljs-attr">remove</span> = <span class="hljs-string">function</span> <span class="hljs-attr">remove</span>() {
      <span class="hljs-attr">removeStyleElement</span>(<span class="hljs-attr">style</span>);
    };
  }

  <span class="hljs-attr">update</span>(<span class="hljs-attr">obj</span>);
  <span class="hljs-attr">return</span> <span class="hljs-attr">function</span> <span class="hljs-attr">updateStyle</span>(<span class="hljs-attr">newObj</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">newObj</span>) {
      <span class="hljs-attr">if</span> (<span class="hljs-attr">newObj.css</span> === <span class="hljs-string">obj.css</span> &amp;&amp; <span class="hljs-attr">newObj.media</span> === <span class="hljs-string">obj.media</span> &amp;&amp; <span class="hljs-attr">newObj.sourceMap</span> === <span class="hljs-string">obj.sourceMap)</span> {
        <span class="hljs-attr">return</span>;
      }

      <span class="hljs-attr">update</span>(<span class="hljs-attr">obj</span> = <span class="hljs-string">newObj);</span>
    } <span class="hljs-attr">else</span> {
      <span class="hljs-attr">remove</span>();
    }
  };
}

<span class="hljs-attr">module.exports</span> = <span class="hljs-string">function</span> (<span class="hljs-attr">list</span>, <span class="hljs-attr">options</span>) {
  <span class="hljs-attr">options</span> = <span class="hljs-string">options</span> || {}; // <span class="hljs-attr">Force</span> <span class="hljs-attr">single-tag</span> <span class="hljs-attr">solution</span> <span class="hljs-attr">on</span> <span class="hljs-attr">IE6-9</span>, <span class="hljs-attr">which</span> <span class="hljs-attr">has</span> <span class="hljs-attr">a</span> <span class="hljs-attr">hard</span> <span class="hljs-attr">limit</span> <span class="hljs-attr">on</span> <span class="hljs-attr">the</span> # <span class="hljs-attr">of</span> &lt;<span class="hljs-attr">style</span>&gt;</span>
  // tags it will allow on a page

  if (!options.singleton &amp;&amp; typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attr">lastIdentifiers.length</span>; <span class="hljs-attr">i</span>++) {
      <span class="hljs-attr">var</span> <span class="hljs-attr">identifier</span> = <span class="hljs-string">lastIdentifiers[i];</span>
      <span class="hljs-attr">var</span> <span class="hljs-attr">index</span> = <span class="hljs-string">getIndexByIdentifier(identifier);</span>
      <span class="hljs-attr">stylesInDom</span>[<span class="hljs-attr">index</span>]<span class="hljs-attr">.references--</span>;
    }

    <span class="hljs-attr">var</span> <span class="hljs-attr">newLastIdentifiers</span> = <span class="hljs-string">modulesToDom(newList,</span> <span class="hljs-attr">options</span>);

    <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">_i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">_i</span> &lt; <span class="hljs-attr">lastIdentifiers.length</span>; <span class="hljs-attr">_i</span>++) {
      <span class="hljs-attr">var</span> <span class="hljs-attr">_identifier</span> = <span class="hljs-string">lastIdentifiers[_i];</span>

      <span class="hljs-attr">var</span> <span class="hljs-attr">_index</span> = <span class="hljs-string">getIndexByIdentifier(_identifier);</span>

      <span class="hljs-attr">if</span> (<span class="hljs-attr">stylesInDom</span>[<span class="hljs-attr">_index</span>]<span class="hljs-attr">.references</span> === <span class="hljs-string">0)</span> {
        <span class="hljs-attr">stylesInDom</span>[<span class="hljs-attr">_index</span>]<span class="hljs-attr">.updater</span>();

        <span class="hljs-attr">stylesInDom.splice</span>(<span class="hljs-attr">_index</span>, <span class="hljs-attr">1</span>);
      }
    }

    <span class="hljs-attr">lastIdentifiers</span> = <span class="hljs-string">newLastIdentifiers;</span>
  };
};

/***/ }),
/* <span class="hljs-attr">74</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">__webpack_exports__</span>, <span class="hljs-attr">__webpack_require__</span>) {

"<span class="hljs-attr">use</span> <span class="hljs-attr">strict</span>";
<span class="hljs-attr">__webpack_require__.r</span>(<span class="hljs-attr">__webpack_exports__</span>);
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__</span> = <span class="hljs-string">__webpack_require__(75);</span>
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default</span> = <span class="hljs-string">/*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);</span>
// <span class="hljs-attr">Imports</span>

<span class="hljs-attr">var</span> <span class="hljs-attr">___CSS_LOADER_EXPORT___</span> = <span class="hljs-string">_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(true);</span>
// <span class="hljs-attr">Module</span>
<span class="hljs-attr">___CSS_LOADER_EXPORT___.push</span>([<span class="hljs-attr">module.i</span>, "<span class="hljs-attr">.custom-idp</span> {\<span class="hljs-attr">n</span>  <span class="hljs-attr">display:</span> <span class="hljs-attr">flex</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">flex-wrap:</span> <span class="hljs-attr">nowrap</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">justify-content:</span> <span class="hljs-attr">space-between</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">margin:</span> <span class="hljs-attr">0</span> <span class="hljs-attr">0</span> <span class="hljs-attr">2em</span>;\<span class="hljs-attr">n</span>}\<span class="hljs-attr">n.custom-idp</span> <span class="hljs-attr">input</span> {\<span class="hljs-attr">n</span>  <span class="hljs-attr">flex-grow:</span> <span class="hljs-attr">2</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">margin-right:</span> <span class="hljs-attr">.5em</span>;\<span class="hljs-attr">n</span>}\<span class="hljs-attr">n</span>\<span class="hljs-attr">n.idp-list</span> {\<span class="hljs-attr">n</span>  <span class="hljs-attr">display:</span> <span class="hljs-attr">flex</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">flex-wrap:</span> <span class="hljs-attr">wrap</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">justify-content:</span> <span class="hljs-attr">space-between</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">margin:</span> <span class="hljs-attr">-.25em</span> <span class="hljs-attr">-.5em</span>;\<span class="hljs-attr">n</span>}\<span class="hljs-attr">n.idp</span> {\<span class="hljs-attr">n</span>  <span class="hljs-attr">flex:</span> <span class="hljs-attr">1</span> <span class="hljs-attr">100</span>%;\<span class="hljs-attr">n</span>  <span class="hljs-attr">margin:</span> <span class="hljs-attr">.25em</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">padding:</span> <span class="hljs-attr">.75em</span> <span class="hljs-attr">.5em</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">border-radius:</span> <span class="hljs-attr">10px</span>;\<span class="hljs-attr">n</span>}\<span class="hljs-attr">n</span>\<span class="hljs-attr">n</span>@<span class="hljs-attr">media</span> <span class="hljs-attr">all</span> <span class="hljs-attr">and</span> (<span class="hljs-attr">min-width:</span> <span class="hljs-attr">500px</span>) {\<span class="hljs-attr">n</span>  <span class="hljs-attr">.idp</span> {\<span class="hljs-attr">n</span>    <span class="hljs-attr">flex:</span> <span class="hljs-attr">1</span> <span class="hljs-attr">200px</span>;\<span class="hljs-attr">n</span>  }\<span class="hljs-attr">n</span>}\<span class="hljs-attr">n</span>", "",{"<span class="hljs-attr">version</span>"<span class="hljs-attr">:3</span>,"<span class="hljs-attr">sources</span>"<span class="hljs-attr">:</span>["<span class="hljs-attr">webpack:</span>//<span class="hljs-attr">popup-app</span>/<span class="hljs-attr">components</span>/<span class="hljs-attr">IdpSelect.css</span>"],"<span class="hljs-attr">names</span>"<span class="hljs-attr">:</span>[],"<span class="hljs-attr">mappings</span>"<span class="hljs-attr">:</span>"<span class="hljs-attr">AAAA</span>;<span class="hljs-attr">EACE</span>,<span class="hljs-attr">aAAa</span>;<span class="hljs-attr">EACb</span>,<span class="hljs-attr">iBAAiB</span>;<span class="hljs-attr">EACjB</span>,<span class="hljs-attr">8BAA8B</span>;<span class="hljs-attr">EAC9B</span>,<span class="hljs-attr">eAAe</span>;<span class="hljs-attr">AACjB</span>;<span class="hljs-attr">AACA</span>;<span class="hljs-attr">EACE</span>,<span class="hljs-attr">YAAY</span>;<span class="hljs-attr">EACZ</span>,<span class="hljs-attr">kBAAkB</span>;<span class="hljs-attr">AACpB</span>;;<span class="hljs-attr">AAEA</span>;<span class="hljs-attr">EACE</span>,<span class="hljs-attr">aAAa</span>;<span class="hljs-attr">EACb</span>,<span class="hljs-attr">eAAe</span>;<span class="hljs-attr">EACf</span>,<span class="hljs-attr">8BAA8B</span>;<span class="hljs-attr">EAC9B</span>,<span class="hljs-attr">oBAAoB</span>;<span class="hljs-attr">AACtB</span>;<span class="hljs-attr">AACA</span>;<span class="hljs-attr">EACE</span>,<span class="hljs-attr">YAAY</span>;<span class="hljs-attr">EACZ</span>,<span class="hljs-attr">aAAa</span>;<span class="hljs-attr">EACb</span>,<span class="hljs-attr">mBAAmB</span>;<span class="hljs-attr">EACnB</span>,<span class="hljs-attr">mBAAmB</span>;<span class="hljs-attr">AACrB</span>;;<span class="hljs-attr">AAEA</span>;<span class="hljs-attr">EACE</span>;<span class="hljs-attr">IACE</span>,<span class="hljs-attr">aAAa</span>;<span class="hljs-attr">EACf</span>;<span class="hljs-attr">AACF</span>","<span class="hljs-attr">sourcesContent</span>"<span class="hljs-attr">:</span>["<span class="hljs-attr">.custom-idp</span> {\<span class="hljs-attr">n</span>  <span class="hljs-attr">display:</span> <span class="hljs-attr">flex</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">flex-wrap:</span> <span class="hljs-attr">nowrap</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">justify-content:</span> <span class="hljs-attr">space-between</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">margin:</span> <span class="hljs-attr">0</span> <span class="hljs-attr">0</span> <span class="hljs-attr">2em</span>;\<span class="hljs-attr">n</span>}\<span class="hljs-attr">n.custom-idp</span> <span class="hljs-attr">input</span> {\<span class="hljs-attr">n</span>  <span class="hljs-attr">flex-grow:</span> <span class="hljs-attr">2</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">margin-right:</span> <span class="hljs-attr">.5em</span>;\<span class="hljs-attr">n</span>}\<span class="hljs-attr">n</span>\<span class="hljs-attr">n.idp-list</span> {\<span class="hljs-attr">n</span>  <span class="hljs-attr">display:</span> <span class="hljs-attr">flex</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">flex-wrap:</span> <span class="hljs-attr">wrap</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">justify-content:</span> <span class="hljs-attr">space-between</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">margin:</span> <span class="hljs-attr">-.25em</span> <span class="hljs-attr">-.5em</span>;\<span class="hljs-attr">n</span>}\<span class="hljs-attr">n.idp</span> {\<span class="hljs-attr">n</span>  <span class="hljs-attr">flex:</span> <span class="hljs-attr">1</span> <span class="hljs-attr">100</span>%;\<span class="hljs-attr">n</span>  <span class="hljs-attr">margin:</span> <span class="hljs-attr">.25em</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">padding:</span> <span class="hljs-attr">.75em</span> <span class="hljs-attr">.5em</span>;\<span class="hljs-attr">n</span>  <span class="hljs-attr">border-radius:</span> <span class="hljs-attr">10px</span>;\<span class="hljs-attr">n</span>}\<span class="hljs-attr">n</span>\<span class="hljs-attr">n</span>@<span class="hljs-attr">media</span> <span class="hljs-attr">all</span> <span class="hljs-attr">and</span> (<span class="hljs-attr">min-width:</span> <span class="hljs-attr">500px</span>) {\<span class="hljs-attr">n</span>  <span class="hljs-attr">.idp</span> {\<span class="hljs-attr">n</span>    <span class="hljs-attr">flex:</span> <span class="hljs-attr">1</span> <span class="hljs-attr">200px</span>;\<span class="hljs-attr">n</span>  }\<span class="hljs-attr">n</span>}\<span class="hljs-attr">n</span>"],"<span class="hljs-attr">sourceRoot</span>"<span class="hljs-attr">:</span>""}]);
// <span class="hljs-attr">Exports</span>
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">default</span> <span class="hljs-attr">export</span> */ <span class="hljs-attr">__webpack_exports__</span>["<span class="hljs-attr">default</span>"] = <span class="hljs-string">(___CSS_LOADER_EXPORT___);</span>


/***/ }),
/* <span class="hljs-attr">75</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">exports</span>, <span class="hljs-attr">__webpack_require__</span>) {

"<span class="hljs-attr">use</span> <span class="hljs-attr">strict</span>";


/*
  <span class="hljs-attr">MIT</span> <span class="hljs-attr">License</span> <span class="hljs-attr">http:</span>//<span class="hljs-attr">www.opensource.org</span>/<span class="hljs-attr">licenses</span>/<span class="hljs-attr">mit-license.php</span>
  <span class="hljs-attr">Author</span> <span class="hljs-attr">Tobias</span> <span class="hljs-attr">Koppers</span> @<span class="hljs-attr">sokra</span>
*/
// <span class="hljs-attr">css</span> <span class="hljs-attr">base</span> <span class="hljs-attr">code</span>, <span class="hljs-attr">injected</span> <span class="hljs-attr">by</span> <span class="hljs-attr">the</span> <span class="hljs-attr">css-loader</span>
// <span class="hljs-attr">eslint-disable-next-line</span> <span class="hljs-attr">func-names</span>
<span class="hljs-attr">module.exports</span> = <span class="hljs-string">function</span> (<span class="hljs-attr">useSourceMap</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">list</span> = <span class="hljs-string">[];</span> // <span class="hljs-attr">return</span> <span class="hljs-attr">the</span> <span class="hljs-attr">list</span> <span class="hljs-attr">of</span> <span class="hljs-attr">modules</span> <span class="hljs-attr">as</span> <span class="hljs-attr">css</span> <span class="hljs-attr">string</span>

  <span class="hljs-attr">list.toString</span> = <span class="hljs-string">function</span> <span class="hljs-attr">toString</span>() {
    <span class="hljs-attr">return</span> <span class="hljs-attr">this.map</span>(<span class="hljs-attr">function</span> (<span class="hljs-attr">item</span>) {
      <span class="hljs-attr">var</span> <span class="hljs-attr">content</span> = <span class="hljs-string">cssWithMappingToString(item,</span> <span class="hljs-attr">useSourceMap</span>);

      <span class="hljs-attr">if</span> (<span class="hljs-attr">item</span>[<span class="hljs-attr">2</span>]) {
        <span class="hljs-attr">return</span> "@<span class="hljs-attr">media</span> "<span class="hljs-attr">.concat</span>(<span class="hljs-attr">item</span>[<span class="hljs-attr">2</span>], " {")<span class="hljs-attr">.concat</span>(<span class="hljs-attr">content</span>, "}");
      }

      <span class="hljs-attr">return</span> <span class="hljs-attr">content</span>;
    })<span class="hljs-attr">.join</span>('');
  }; // <span class="hljs-attr">import</span> <span class="hljs-attr">a</span> <span class="hljs-attr">list</span> <span class="hljs-attr">of</span> <span class="hljs-attr">modules</span> <span class="hljs-attr">into</span> <span class="hljs-attr">the</span> <span class="hljs-attr">list</span>
  // <span class="hljs-attr">eslint-disable-next-line</span> <span class="hljs-attr">func-names</span>


  <span class="hljs-attr">list.i</span> = <span class="hljs-string">function</span> (<span class="hljs-attr">modules</span>, <span class="hljs-attr">mediaQuery</span>, <span class="hljs-attr">dedupe</span>) {
    <span class="hljs-attr">if</span> (<span class="hljs-attr">typeof</span> <span class="hljs-attr">modules</span> === <span class="hljs-string">'string'</span>) {
      // <span class="hljs-attr">eslint-disable-next-line</span> <span class="hljs-attr">no-param-reassign</span>
      <span class="hljs-attr">modules</span> = <span class="hljs-string">[[null,</span> <span class="hljs-attr">modules</span>, '']];
    }

    <span class="hljs-attr">var</span> <span class="hljs-attr">alreadyImportedModules</span> = <span class="hljs-string">{};</span>

    <span class="hljs-attr">if</span> (<span class="hljs-attr">dedupe</span>) {
      <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">i</span> &lt; <span class="hljs-attr">this.length</span>; <span class="hljs-attr">i</span>++) {
        // <span class="hljs-attr">eslint-disable-next-line</span> <span class="hljs-attr">prefer-destructuring</span>
        <span class="hljs-attr">var</span> <span class="hljs-attr">id</span> = <span class="hljs-string">this[i][0];</span>

        <span class="hljs-attr">if</span> (<span class="hljs-attr">id</span> != <span class="hljs-string">null)</span> {
          <span class="hljs-attr">alreadyImportedModules</span>[<span class="hljs-attr">id</span>] = <span class="hljs-string">true;</span>
        }
      }
    }

    <span class="hljs-attr">for</span> (<span class="hljs-attr">var</span> <span class="hljs-attr">_i</span> = <span class="hljs-string">0;</span> <span class="hljs-attr">_i</span> &lt; <span class="hljs-attr">modules.length</span>; <span class="hljs-attr">_i</span>++) {
      <span class="hljs-attr">var</span> <span class="hljs-attr">item</span> = <span class="hljs-string">[].concat(modules[_i]);</span>

      <span class="hljs-attr">if</span> (<span class="hljs-attr">dedupe</span> &amp;&amp; <span class="hljs-attr">alreadyImportedModules</span>[<span class="hljs-attr">item</span>[<span class="hljs-attr">0</span>]]) {
        // <span class="hljs-attr">eslint-disable-next-line</span> <span class="hljs-attr">no-continue</span>
        <span class="hljs-attr">continue</span>;
      }

      <span class="hljs-attr">if</span> (<span class="hljs-attr">mediaQuery</span>) {
        <span class="hljs-attr">if</span> (!<span class="hljs-attr">item</span>[<span class="hljs-attr">2</span>]) {
          <span class="hljs-attr">item</span>[<span class="hljs-attr">2</span>] = <span class="hljs-string">mediaQuery;</span>
        } <span class="hljs-attr">else</span> {
          <span class="hljs-attr">item</span>[<span class="hljs-attr">2</span>] = <span class="hljs-string">""</span><span class="hljs-attr">.concat</span>(<span class="hljs-attr">mediaQuery</span>, " <span class="hljs-attr">and</span> ")<span class="hljs-attr">.concat</span>(<span class="hljs-attr">item</span>[<span class="hljs-attr">2</span>]);
        }
      }

      <span class="hljs-attr">list.push</span>(<span class="hljs-attr">item</span>);
    }
  };

  <span class="hljs-attr">return</span> <span class="hljs-attr">list</span>;
};

<span class="hljs-attr">function</span> <span class="hljs-attr">cssWithMappingToString</span>(<span class="hljs-attr">item</span>, <span class="hljs-attr">useSourceMap</span>) {
  <span class="hljs-attr">var</span> <span class="hljs-attr">content</span> = <span class="hljs-string">item[1]</span> || ''; // <span class="hljs-attr">eslint-disable-next-line</span> <span class="hljs-attr">prefer-destructuring</span>

  <span class="hljs-attr">var</span> <span class="hljs-attr">cssMapping</span> = <span class="hljs-string">item[3];</span>

  <span class="hljs-attr">if</span> (!<span class="hljs-attr">cssMapping</span>) {
    <span class="hljs-attr">return</span> <span class="hljs-attr">content</span>;
  }

  <span class="hljs-attr">if</span> (<span class="hljs-attr">useSourceMap</span> &amp;&amp; <span class="hljs-attr">typeof</span> <span class="hljs-attr">btoa</span> === <span class="hljs-string">'function'</span>) {
    <span class="hljs-attr">var</span> <span class="hljs-attr">sourceMapping</span> = <span class="hljs-string">toComment(cssMapping);</span>
    <span class="hljs-attr">var</span> <span class="hljs-attr">sourceURLs</span> = <span class="hljs-string">cssMapping.sources.map(function</span> (<span class="hljs-attr">source</span>) {
      <span class="hljs-attr">return</span> "/*# <span class="hljs-attr">sourceURL</span>=<span class="hljs-string">".concat(cssMapping.sourceRoot || '').concat(source, "</span> */");
    });
    <span class="hljs-attr">return</span> [<span class="hljs-attr">content</span>]<span class="hljs-attr">.concat</span>(<span class="hljs-attr">sourceURLs</span>)<span class="hljs-attr">.concat</span>([<span class="hljs-attr">sourceMapping</span>])<span class="hljs-attr">.join</span>('\<span class="hljs-attr">n</span>');
  }

  <span class="hljs-attr">return</span> [<span class="hljs-attr">content</span>]<span class="hljs-attr">.join</span>('\<span class="hljs-attr">n</span>');
} // <span class="hljs-attr">Adapted</span> <span class="hljs-attr">from</span> <span class="hljs-attr">convert-source-map</span> (<span class="hljs-attr">MIT</span>)


<span class="hljs-attr">function</span> <span class="hljs-attr">toComment</span>(<span class="hljs-attr">sourceMap</span>) {
  // <span class="hljs-attr">eslint-disable-next-line</span> <span class="hljs-attr">no-undef</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">base64</span> = <span class="hljs-string">btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));</span>
  <span class="hljs-attr">var</span> <span class="hljs-attr">data</span> = <span class="hljs-string">"sourceMappingURL=data:application/json;charset=utf-8;base64,"</span><span class="hljs-attr">.concat</span>(<span class="hljs-attr">base64</span>);
  <span class="hljs-attr">return</span> "/*# "<span class="hljs-attr">.concat</span>(<span class="hljs-attr">data</span>, " */");
}

/***/ }),
/* <span class="hljs-attr">76</span> */
/***/ (<span class="hljs-attr">function</span>(<span class="hljs-attr">module</span>, <span class="hljs-attr">__webpack_exports__</span>, <span class="hljs-attr">__webpack_require__</span>) {

"<span class="hljs-attr">use</span> <span class="hljs-attr">strict</span>";
<span class="hljs-attr">__webpack_require__.r</span>(<span class="hljs-attr">__webpack_exports__</span>);
/* <span class="hljs-attr">harmony</span> <span class="hljs-attr">import</span> */ <span class="hljs-attr">var</span> <span class="hljs-attr">react__WEBPACK_IMPORTED_MODULE_0__</span> = <span class="hljs-string">__webpack_require__(2);</span>


<span class="hljs-attr">const</span> <span class="hljs-attr">NoParent</span> = <span class="hljs-string">({</span>
  <span class="hljs-attr">appName</span>
}) =&gt;</span> /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["default"].createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["default"].createElement("p", null, "This window was opened to log you in to", ' ', /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["default"].createElement("span", {
  className: "app-name"
}, appName), ", but that app is no longer open."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["default"].createElement("p", null, "If you're trying to log in to ", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["default"].createElement("span", {
  className: "app-name"
}, appName), ", close this window, then go back to the app and log in again."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__["default"].createElement("p", null, "If you opened this window by accident, close it."));

/* harmony default export */ __webpack_exports__["default"] = (NoParent);

/***/ }),
/* 77 */
/***/ (function(module) {

module.exports = JSON.parse("[{\"displayName\":\"Solid Community\",\"url\":\"https://solidcommunity.net/\"},{\"displayName\":\"Inrupt\",\"url\":\"https://inrupt.net/\"}]");

/***/ }),
/* 78 */
/***/ (function(module, exports, __webpack_require__) {

var api = __webpack_require__(73);
            var content = __webpack_require__(79);

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

/***/ }),
/* 79 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);
// Imports

var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(true);
// Module
___CSS_LOADER_EXPORT___.push([module.i, "body {\n  margin: 20px;\n}\n\nbody, button, input {\n  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  font-size: 11pt;\n}\n\nh1 {\n  font-weight: normal;\n  padding-bottom: 10px;\n}\n\np {\n  margin: .75em 0;\n}\n\nbutton {\n  font-weight: bold;\n  border: none;\n  border-radius: 7px;\n  background-color: rgb(61, 109, 211);\n  color: #fff;\n  transition: background-color 0.4s;\n  cursor: pointer;\n}\nbutton:hover,\nbutton:focus {\n  background-color: rgb(55, 97, 188);\n}\n\n:focus {\n  outline: none;\n}\n\n#app-container {\n  max-width: 600px;\n  margin: auto;\n}\n\n.error {\n  background-color: #ff8e8e;\n  color: #323232;\n  padding: 8px;\n  border-radius: 2px;\n}\n\n.app-name {\n  font-weight: bold;\n}\n", "",{"version":3,"sources":["webpack://popup-app/index.css"],"names":[],"mappings":"AAAA;EACE,YAAY;AACd;;AAEA;EACE,2DAA2D;EAC3D,eAAe;AACjB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,iBAAiB;EACjB,YAAY;EACZ,kBAAkB;EAClB,mCAAmC;EACnC,WAAW;EACX,iCAAiC;EACjC,eAAe;AACjB;AACA;;EAEE,kCAAkC;AACpC;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,gBAAgB;EAChB,YAAY;AACd;;AAEA;EACE,yBAAyB;EACzB,cAAc;EACd,YAAY;EACZ,kBAAkB;AACpB;;AAEA;EACE,iBAAiB;AACnB","sourcesContent":["body {\n  margin: 20px;\n}\n\nbody, button, input {\n  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  font-size: 11pt;\n}\n\nh1 {\n  font-weight: normal;\n  padding-bottom: 10px;\n}\n\np {\n  margin: .75em 0;\n}\n\nbutton {\n  font-weight: bold;\n  border: none;\n  border-radius: 7px;\n  background-color: rgb(61, 109, 211);\n  color: #fff;\n  transition: background-color 0.4s;\n  cursor: pointer;\n}\nbutton:hover,\nbutton:focus {\n  background-color: rgb(55, 97, 188);\n}\n\n:focus {\n  outline: none;\n}\n\n#app-container {\n  max-width: 600px;\n  margin: auto;\n}\n\n.error {\n  background-color: #ff8e8e;\n  color: #323232;\n  padding: 8px;\n  border-radius: 2px;\n}\n\n.app-name {\n  font-weight: bold;\n}\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ __webpack_exports__["default"] = (___CSS_LOADER_EXPORT___);


/***/ })
/******/ ]);
//# sourceMappingURL=popup.bundle.js.map</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
